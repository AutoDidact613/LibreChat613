{"version":3,"file":"index.es.js","sources":["../src/utils.ts","../src/types/assistants.ts","../src/feedback.ts","../src/schemas.ts","../src/types/files.ts","../src/models.ts","../src/file-config.ts","../src/types/agents.ts","../src/mcp.ts","../src/api-endpoints.ts","../src/config.ts","../src/types/runs.ts","../src/bedrock.ts","../src/parsers.ts","../src/azure.ts","../src/artifacts.ts","../src/messages.ts","../src/generate.ts","../src/permissions.ts","../src/roles.ts","../src/types/web.ts","../src/accessPermissions.ts","../src/keys.ts","../src/headers-helpers.ts","../src/request.ts","../src/data-service.ts","../src/actions.ts","../src/createPayload.ts","../src/parameterSettings.ts"],"sourcesContent":["export const envVarRegex = /^\\${(.+)}$/;\r\n\r\n/** Extracts the environment variable name from a template literal string */\r\nexport function extractVariableName(value: string): string | null {\r\n  if (!value) {\r\n    return null;\r\n  }\r\n\r\n  const match = value.trim().match(envVarRegex);\r\n  return match ? match[1] : null;\r\n}\r\n\r\n/** Extracts the value of an environment variable from a string. */\r\nexport function extractEnvVariable(value: string) {\r\n  if (!value) {\r\n    return value;\r\n  }\r\n\r\n  // Trim the input\r\n  const trimmed = value.trim();\r\n\r\n  // Special case: if it's just a single environment variable\r\n  const singleMatch = trimmed.match(envVarRegex);\r\n  if (singleMatch) {\r\n    const varName = singleMatch[1];\r\n    return process.env[varName] || trimmed;\r\n  }\r\n\r\n  // For multiple variables, process them using a regex loop\r\n  const regex = /\\${([^}]+)}/g;\r\n  let result = trimmed;\r\n\r\n  // First collect all matches and their positions\r\n  const matches = [];\r\n  let match;\r\n  while ((match = regex.exec(trimmed)) !== null) {\r\n    matches.push({\r\n      fullMatch: match[0],\r\n      varName: match[1],\r\n      index: match.index,\r\n    });\r\n  }\r\n\r\n  // Process matches in reverse order to avoid position shifts\r\n  for (let i = matches.length - 1; i >= 0; i--) {\r\n    const { fullMatch, varName, index } = matches[i];\r\n    const envValue = process.env[varName] || fullMatch;\r\n\r\n    // Replace at exact position\r\n    result = result.substring(0, index) + envValue + result.substring(index + fullMatch.length);\r\n  }\r\n\r\n  return result;\r\n}\r\n","import type { OpenAPIV3 } from 'openapi-types';\r\nimport type { AssistantsEndpoint, AgentProvider } from 'src/schemas';\r\nimport type { ContentTypes } from './runs';\r\nimport type { Agents } from './agents';\r\nimport type { TFile } from './files';\r\nimport { ArtifactModes } from 'src/artifacts';\r\n\r\nexport type Schema = OpenAPIV3.SchemaObject & { description?: string };\r\nexport type Reference = OpenAPIV3.ReferenceObject & { description?: string };\r\n\r\nexport type Metadata = {\r\n  avatar?: string;\r\n  author?: string;\r\n} & {\r\n  [key: string]: unknown;\r\n};\r\n\r\nexport enum Tools {\r\n  execute_code = 'execute_code',\r\n  code_interpreter = 'code_interpreter',\r\n  file_search = 'file_search',\r\n  web_search = 'web_search',\r\n  retrieval = 'retrieval',\r\n  function = 'function',\r\n  memory = 'memory',\r\n  ui_resources = 'ui_resources',\r\n}\r\n\r\nexport enum EToolResources {\r\n  code_interpreter = 'code_interpreter',\r\n  execute_code = 'execute_code',\r\n  file_search = 'file_search',\r\n  image_edit = 'image_edit',\r\n  context = 'context',\r\n  ocr = 'ocr',\r\n}\r\n\r\nexport type Tool = {\r\n  [type: string]: Tools;\r\n};\r\n\r\nexport type FunctionTool = {\r\n  type: Tools;\r\n  function?: {\r\n    description: string;\r\n    name: string;\r\n    parameters: Record<string, unknown>;\r\n    strict?: boolean;\r\n    additionalProperties?: boolean; // must be false if strict is true https://platform.openai.com/docs/guides/structured-outputs/some-type-specific-keywords-are-not-yet-supported\r\n  };\r\n};\r\n\r\n/**\r\n * A set of resources that are used by the assistant's tools. The resources are\r\n * specific to the type of tool. For example, the `code_interpreter` tool requires\r\n * a list of file IDs, while the `file_search` tool requires a list of vector store\r\n * IDs.\r\n */\r\nexport interface ToolResources {\r\n  code_interpreter?: CodeInterpreterResource;\r\n  file_search?: FileSearchResource;\r\n}\r\nexport interface CodeInterpreterResource {\r\n  /**\r\n   * A list of [file](https://platform.openai.com/docs/api-reference/files) IDs made\r\n   * available to the `code_interpreter`` tool. There can be a maximum of 20 files\r\n   * associated with the tool.\r\n   */\r\n  file_ids?: Array<string>;\r\n}\r\n\r\nexport interface FileSearchResource {\r\n  /**\r\n   * The ID of the\r\n   * [vector store](https://platform.openai.com/docs/api-reference/vector-stores/object)\r\n   * attached to this assistant. There can be a maximum of 1 vector store attached to\r\n   * the assistant.\r\n   */\r\n  vector_store_ids?: Array<string>;\r\n}\r\n\r\n/* Assistant types */\r\n\r\nexport type Assistant = {\r\n  id: string;\r\n  created_at: number;\r\n  description: string | null;\r\n  file_ids?: string[];\r\n  instructions: string | null;\r\n  conversation_starters?: string[];\r\n  metadata: Metadata | null;\r\n  model: string;\r\n  name: string | null;\r\n  object: string;\r\n  tools?: FunctionTool[];\r\n  tool_resources?: ToolResources;\r\n};\r\n\r\nexport type TAssistantsMap = Record<AssistantsEndpoint, Record<string, Assistant>>;\r\n\r\nexport type AssistantCreateParams = {\r\n  model: string;\r\n  description?: string | null;\r\n  file_ids?: string[];\r\n  instructions?: string | null;\r\n  conversation_starters?: string[];\r\n  metadata?: Metadata | null;\r\n  name?: string | null;\r\n  tools?: Array<FunctionTool | string>;\r\n  endpoint: AssistantsEndpoint;\r\n  version: number | string;\r\n  append_current_datetime?: boolean;\r\n};\r\n\r\nexport type AssistantUpdateParams = {\r\n  model?: string;\r\n  description?: string | null;\r\n  file_ids?: string[];\r\n  instructions?: string | null;\r\n  conversation_starters?: string[] | null;\r\n  metadata?: Metadata | null;\r\n  name?: string | null;\r\n  tools?: Array<FunctionTool | string>;\r\n  tool_resources?: ToolResources;\r\n  endpoint: AssistantsEndpoint;\r\n  append_current_datetime?: boolean;\r\n};\r\n\r\nexport type AssistantListParams = {\r\n  limit?: number;\r\n  before?: string | null;\r\n  after?: string | null;\r\n  order?: 'asc' | 'desc';\r\n  endpoint: AssistantsEndpoint;\r\n};\r\n\r\nexport type AssistantListResponse = {\r\n  object: string;\r\n  data: Assistant[];\r\n  first_id: string;\r\n  last_id: string;\r\n  has_more: boolean;\r\n};\r\n\r\nexport type File = {\r\n  file_id: string;\r\n  id?: string;\r\n  temp_file_id?: string;\r\n  bytes: number;\r\n  created_at: number;\r\n  filename: string;\r\n  object: string;\r\n  purpose: 'fine-tune' | 'fine-tune-results' | 'assistants' | 'assistants_output';\r\n};\r\n\r\n/* Agent types */\r\n\r\nexport type AgentParameterValue = number | string | null;\r\n\r\nexport type AgentModelParameters = {\r\n  model?: string;\r\n  temperature: AgentParameterValue;\r\n  maxContextTokens: AgentParameterValue;\r\n  max_context_tokens: AgentParameterValue;\r\n  max_output_tokens: AgentParameterValue;\r\n  top_p: AgentParameterValue;\r\n  frequency_penalty: AgentParameterValue;\r\n  presence_penalty: AgentParameterValue;\r\n};\r\n\r\nexport interface AgentBaseResource {\r\n  /**\r\n   * A list of file IDs made available to the tool.\r\n   */\r\n  file_ids?: Array<string>;\r\n  /**\r\n   * A list of files already fetched.\r\n   */\r\n  files?: Array<TFile>;\r\n}\r\n\r\nexport interface AgentToolResources {\r\n  [EToolResources.image_edit]?: AgentBaseResource;\r\n  [EToolResources.execute_code]?: ExecuteCodeResource;\r\n  [EToolResources.file_search]?: AgentFileResource;\r\n  [EToolResources.context]?: AgentBaseResource;\r\n  /** @deprecated Use context instead */\r\n  [EToolResources.ocr]?: AgentBaseResource;\r\n}\r\n/**\r\n * A resource for the execute_code tool.\r\n * Contains file IDs made available to the tool (max 20 files) and already fetched files.\r\n */\r\nexport type ExecuteCodeResource = AgentBaseResource;\r\n\r\nexport interface AgentFileResource extends AgentBaseResource {\r\n  /**\r\n   * The ID of the vector store attached to this agent. There\r\n   * can be a maximum of 1 vector store attached to the agent.\r\n   */\r\n  vector_store_ids?: Array<string>;\r\n}\r\nexport type SupportContact = {\r\n  name?: string;\r\n  email?: string;\r\n};\r\n\r\nexport type Agent = {\r\n  _id?: string;\r\n  id: string;\r\n  name: string | null;\r\n  author?: string | null;\r\n  /** The original custom endpoint name, lowercased */\r\n  endpoint?: string | null;\r\n  authorName?: string | null;\r\n  description: string | null;\r\n  created_at: number;\r\n  avatar: AgentAvatar | null;\r\n  instructions: string | null;\r\n  additional_instructions?: string | null;\r\n  tools?: string[];\r\n  projectIds?: string[];\r\n  tool_kwargs?: Record<string, unknown>;\r\n  metadata?: Record<string, unknown>;\r\n  provider: AgentProvider;\r\n  model: string | null;\r\n  model_parameters: AgentModelParameters;\r\n  conversation_starters?: string[];\r\n  /** @deprecated Use ACL permissions instead */\r\n  isCollaborative?: boolean;\r\n  tool_resources?: AgentToolResources;\r\n  agent_ids?: string[];\r\n  end_after_tools?: boolean;\r\n  hide_sequential_outputs?: boolean;\r\n  artifacts?: ArtifactModes;\r\n  recursion_limit?: number;\r\n  isPublic?: boolean;\r\n  version?: number;\r\n  category?: string;\r\n  support_contact?: SupportContact;\r\n};\r\n\r\nexport type TAgentsMap = Record<string, Agent | undefined>;\r\n\r\nexport type AgentCreateParams = {\r\n  name?: string | null;\r\n  description?: string | null;\r\n  avatar?: AgentAvatar | null;\r\n  file_ids?: string[];\r\n  instructions?: string | null;\r\n  tools?: Array<FunctionTool | string>;\r\n  provider: AgentProvider;\r\n  model: string | null;\r\n  model_parameters: AgentModelParameters;\r\n} & Pick<\r\n  Agent,\r\n  | 'agent_ids'\r\n  | 'end_after_tools'\r\n  | 'hide_sequential_outputs'\r\n  | 'artifacts'\r\n  | 'recursion_limit'\r\n  | 'category'\r\n  | 'support_contact'\r\n>;\r\n\r\nexport type AgentUpdateParams = {\r\n  name?: string | null;\r\n  description?: string | null;\r\n  avatar?: AgentAvatar | null;\r\n  file_ids?: string[];\r\n  instructions?: string | null;\r\n  tools?: Array<FunctionTool | string>;\r\n  tool_resources?: ToolResources;\r\n  provider?: AgentProvider;\r\n  model?: string | null;\r\n  model_parameters?: AgentModelParameters;\r\n  projectIds?: string[];\r\n  removeProjectIds?: string[];\r\n  isCollaborative?: boolean;\r\n} & Pick<\r\n  Agent,\r\n  | 'agent_ids'\r\n  | 'end_after_tools'\r\n  | 'hide_sequential_outputs'\r\n  | 'artifacts'\r\n  | 'recursion_limit'\r\n  | 'category'\r\n  | 'support_contact'\r\n>;\r\n\r\nexport type AgentListParams = {\r\n  limit?: number;\r\n  requiredPermission: number;\r\n  category?: string;\r\n  search?: string;\r\n  cursor?: string;\r\n  promoted?: 0 | 1;\r\n};\r\n\r\nexport type AgentListResponse = {\r\n  object: string;\r\n  data: Agent[];\r\n  first_id: string;\r\n  last_id: string;\r\n  has_more: boolean;\r\n  after?: string;\r\n};\r\n\r\nexport type AgentFile = {\r\n  file_id: string;\r\n  id?: string;\r\n  temp_file_id?: string;\r\n  bytes: number;\r\n  created_at: number;\r\n  filename: string;\r\n  object: string;\r\n  purpose: 'fine-tune' | 'fine-tune-results' | 'agents' | 'agents_output';\r\n};\r\n\r\n/**\r\n * Details of the Code Interpreter tool call the run step was involved in.\r\n * Includes the tool call ID, the code interpreter definition, and the type of tool call.\r\n */\r\nexport type CodeToolCall = {\r\n  id: string; // The ID of the tool call.\r\n  code_interpreter: {\r\n    input: string; // The input to the Code Interpreter tool call.\r\n    outputs: Array<Record<string, unknown>>; // The outputs from the Code Interpreter tool call.\r\n  };\r\n  type: 'code_interpreter'; // The type of tool call, always 'code_interpreter'.\r\n};\r\n\r\n/**\r\n * Details of a Function tool call the run step was involved in.\r\n * Includes the tool call ID, the function definition, and the type of tool call.\r\n */\r\nexport type FunctionToolCall = {\r\n  id: string; // The ID of the tool call object.\r\n  function: {\r\n    arguments: string; // The arguments passed to the function.\r\n    name: string; // The name of the function.\r\n    output: string | null; // The output of the function, null if not submitted.\r\n  };\r\n  type: 'function'; // The type of tool call, always 'function'.\r\n};\r\n\r\n/**\r\n * Details of a Retrieval tool call the run step was involved in.\r\n * Includes the tool call ID and the type of tool call.\r\n */\r\nexport type RetrievalToolCall = {\r\n  id: string; // The ID of the tool call object.\r\n  retrieval: unknown; // An empty object for now.\r\n  type: 'retrieval'; // The type of tool call, always 'retrieval'.\r\n};\r\n\r\n/**\r\n * Details of a Retrieval tool call the run step was involved in.\r\n * Includes the tool call ID and the type of tool call.\r\n */\r\nexport type FileSearchToolCall = {\r\n  id: string; // The ID of the tool call object.\r\n  file_search: unknown; // An empty object for now.\r\n  type: 'file_search'; // The type of tool call, always 'retrieval'.\r\n};\r\n\r\n/**\r\n * Details of the tool calls involved in a run step.\r\n * Can be associated with one of three types of tools: `code_interpreter`, `retrieval`, or `function`.\r\n */\r\nexport type ToolCallsStepDetails = {\r\n  tool_calls: Array<CodeToolCall | RetrievalToolCall | FileSearchToolCall | FunctionToolCall>; // An array of tool calls the run step was involved in.\r\n  type: 'tool_calls'; // Always 'tool_calls'.\r\n};\r\n\r\nexport type ImageFile = TFile & {\r\n  /**\r\n   * The [File](https://platform.openai.com/docs/api-reference/files) ID of the image\r\n   * in the message content.\r\n   */\r\n  file_id: string;\r\n  filename: string;\r\n  filepath: string;\r\n  height: number;\r\n  width: number;\r\n  /**\r\n   * Prompt used to generate the image if applicable.\r\n   */\r\n  prompt?: string;\r\n  /**\r\n   * Additional metadata used to generate or about the image/tool_call.\r\n   */\r\n  metadata?: Record<string, unknown>;\r\n};\r\n\r\n// FileCitation.ts\r\nexport type FileCitation = {\r\n  end_index: number;\r\n  file_citation: FileCitationDetails;\r\n  start_index: number;\r\n  text: string;\r\n  type: 'file_citation';\r\n};\r\n\r\nexport type FileCitationDetails = {\r\n  file_id: string;\r\n  quote: string;\r\n};\r\n\r\nexport type FilePath = {\r\n  end_index: number;\r\n  file_path: FilePathDetails;\r\n  start_index: number;\r\n  text: string;\r\n  type: 'file_path';\r\n};\r\n\r\nexport type FilePathDetails = {\r\n  file_id: string;\r\n};\r\n\r\nexport type Text = {\r\n  annotations?: Array<FileCitation | FilePath>;\r\n  value: string;\r\n};\r\n\r\nexport enum AnnotationTypes {\r\n  FILE_CITATION = 'file_citation',\r\n  FILE_PATH = 'file_path',\r\n}\r\n\r\nexport enum StepStatus {\r\n  IN_PROGRESS = 'in_progress',\r\n  CANCELLED = 'cancelled',\r\n  FAILED = 'failed',\r\n  COMPLETED = 'completed',\r\n  EXPIRED = 'expired',\r\n}\r\n\r\nexport enum MessageContentTypes {\r\n  TEXT = 'text',\r\n  IMAGE_FILE = 'image_file',\r\n}\r\n\r\n//enum for RunStatus\r\n// The status of the run: queued, in_progress, requires_action, cancelling, cancelled, failed, completed, or expired.\r\nexport enum RunStatus {\r\n  QUEUED = 'queued',\r\n  IN_PROGRESS = 'in_progress',\r\n  REQUIRES_ACTION = 'requires_action',\r\n  CANCELLING = 'cancelling',\r\n  CANCELLED = 'cancelled',\r\n  FAILED = 'failed',\r\n  COMPLETED = 'completed',\r\n  EXPIRED = 'expired',\r\n}\r\n\r\nexport type PartMetadata = {\r\n  progress?: number;\r\n  asset_pointer?: string;\r\n  status?: string;\r\n  action?: boolean;\r\n  auth?: string;\r\n  expires_at?: number;\r\n};\r\n\r\nexport type ContentPart = (\r\n  | CodeToolCall\r\n  | RetrievalToolCall\r\n  | FileSearchToolCall\r\n  | FunctionToolCall\r\n  | Agents.AgentToolCall\r\n  | ImageFile\r\n  | Text\r\n) &\r\n  PartMetadata;\r\n\r\nexport type TMessageContentParts =\r\n  | { type: ContentTypes.ERROR; text?: string | (Text & PartMetadata); error?: string }\r\n  | { type: ContentTypes.THINK; think: string | (Text & PartMetadata) }\r\n  | { type: ContentTypes.TEXT; text: string | (Text & PartMetadata); tool_call_ids?: string[] }\r\n  | {\r\n      type: ContentTypes.TOOL_CALL;\r\n      tool_call: (\r\n        | CodeToolCall\r\n        | RetrievalToolCall\r\n        | FileSearchToolCall\r\n        | FunctionToolCall\r\n        | Agents.AgentToolCall\r\n      ) &\r\n        PartMetadata;\r\n    }\r\n  | { type: ContentTypes.IMAGE_FILE; image_file: ImageFile & PartMetadata }\r\n  | Agents.AgentUpdate\r\n  | Agents.MessageContentImageUrl;\r\n\r\nexport type StreamContentData = TMessageContentParts & {\r\n  /** The index of the current content part */\r\n  index: number;\r\n  /** The current text content was already served but edited to replace elements therein */\r\n  edited?: boolean;\r\n};\r\n\r\nexport type TContentData = StreamContentData & {\r\n  messageId: string;\r\n  conversationId: string;\r\n  userMessageId: string;\r\n  thread_id: string;\r\n  stream?: boolean;\r\n};\r\n\r\nexport const actionDelimiter = '_action_';\r\nexport const actionDomainSeparator = '---';\r\nexport const hostImageIdSuffix = '_host_copy';\r\nexport const hostImageNamePrefix = 'host_copy_';\r\n\r\nexport type AssistantAvatar = {\r\n  filepath: string;\r\n  source: string;\r\n};\r\n\r\nexport type AssistantDocument = {\r\n  user: string;\r\n  assistant_id: string;\r\n  conversation_starters?: string[];\r\n  avatar?: AssistantAvatar;\r\n  access_level?: number;\r\n  file_ids?: string[];\r\n  actions?: string[];\r\n  createdAt?: Date;\r\n  updatedAt?: Date;\r\n  append_current_datetime?: boolean;\r\n};\r\n\r\n/* Agent types */\r\n\r\nexport type AgentAvatar = {\r\n  filepath: string;\r\n  source: string;\r\n};\r\n\r\nexport enum FilePurpose {\r\n  Vision = 'vision',\r\n  FineTune = 'fine-tune',\r\n  FineTuneResults = 'fine-tune-results',\r\n  Assistants = 'assistants',\r\n  AssistantsOutput = 'assistants_output',\r\n}\r\n\r\nexport const defaultOrderQuery: {\r\n  order: 'desc';\r\n  limit: 100;\r\n} = {\r\n  order: 'desc',\r\n  limit: 100,\r\n};\r\n\r\nexport enum AssistantStreamEvents {\r\n  ThreadCreated = 'thread.created',\r\n  ThreadRunCreated = 'thread.run.created',\r\n  ThreadRunQueued = 'thread.run.queued',\r\n  ThreadRunInProgress = 'thread.run.in_progress',\r\n  ThreadRunRequiresAction = 'thread.run.requires_action',\r\n  ThreadRunCompleted = 'thread.run.completed',\r\n  ThreadRunFailed = 'thread.run.failed',\r\n  ThreadRunCancelling = 'thread.run.cancelling',\r\n  ThreadRunCancelled = 'thread.run.cancelled',\r\n  ThreadRunExpired = 'thread.run.expired',\r\n  ThreadRunStepCreated = 'thread.run.step.created',\r\n  ThreadRunStepInProgress = 'thread.run.step.in_progress',\r\n  ThreadRunStepCompleted = 'thread.run.step.completed',\r\n  ThreadRunStepFailed = 'thread.run.step.failed',\r\n  ThreadRunStepCancelled = 'thread.run.step.cancelled',\r\n  ThreadRunStepExpired = 'thread.run.step.expired',\r\n  ThreadRunStepDelta = 'thread.run.step.delta',\r\n  ThreadMessageCreated = 'thread.message.created',\r\n  ThreadMessageInProgress = 'thread.message.in_progress',\r\n  ThreadMessageCompleted = 'thread.message.completed',\r\n  ThreadMessageIncomplete = 'thread.message.incomplete',\r\n  ThreadMessageDelta = 'thread.message.delta',\r\n  ErrorEvent = 'error',\r\n}\r\n","import { z } from 'zod';\r\n\r\nexport type TFeedbackRating = 'thumbsUp' | 'thumbsDown';\r\nexport const FEEDBACK_RATINGS = ['thumbsUp', 'thumbsDown'] as const;\r\n\r\nexport const FEEDBACK_REASON_KEYS = [\r\n  // Down\r\n  'not_matched',\r\n  'inaccurate',\r\n  'bad_style',\r\n  'missing_image',\r\n  'unjustified_refusal',\r\n  'not_helpful',\r\n  'other',\r\n  // Up\r\n  'accurate_reliable',\r\n  'creative_solution',\r\n  'clear_well_written',\r\n  'attention_to_detail',\r\n] as const;\r\n\r\nexport type TFeedbackTagKey = (typeof FEEDBACK_REASON_KEYS)[number];\r\n\r\nexport interface TFeedbackTag {\r\n  key: TFeedbackTagKey;\r\n  label: string;\r\n  direction: TFeedbackRating;\r\n  icon: string;\r\n}\r\n\r\n// --- Tag Registry ---\r\nexport const FEEDBACK_TAGS: TFeedbackTag[] = [\r\n  // Thumbs Down\r\n  {\r\n    key: 'not_matched',\r\n    label: 'com_ui_feedback_tag_not_matched',\r\n    direction: 'thumbsDown',\r\n    icon: 'AlertCircle',\r\n  },\r\n  {\r\n    key: 'inaccurate',\r\n    label: 'com_ui_feedback_tag_inaccurate',\r\n    direction: 'thumbsDown',\r\n    icon: 'AlertCircle',\r\n  },\r\n  {\r\n    key: 'bad_style',\r\n    label: 'com_ui_feedback_tag_bad_style',\r\n    direction: 'thumbsDown',\r\n    icon: 'PenTool',\r\n  },\r\n  {\r\n    key: 'missing_image',\r\n    label: 'com_ui_feedback_tag_missing_image',\r\n    direction: 'thumbsDown',\r\n    icon: 'ImageOff',\r\n  },\r\n  {\r\n    key: 'unjustified_refusal',\r\n    label: 'com_ui_feedback_tag_unjustified_refusal',\r\n    direction: 'thumbsDown',\r\n    icon: 'Ban',\r\n  },\r\n  {\r\n    key: 'not_helpful',\r\n    label: 'com_ui_feedback_tag_not_helpful',\r\n    direction: 'thumbsDown',\r\n    icon: 'ThumbsDown',\r\n  },\r\n  {\r\n    key: 'other',\r\n    label: 'com_ui_feedback_tag_other',\r\n    direction: 'thumbsDown',\r\n    icon: 'HelpCircle',\r\n  },\r\n  // Thumbs Up\r\n  {\r\n    key: 'accurate_reliable',\r\n    label: 'com_ui_feedback_tag_accurate_reliable',\r\n    direction: 'thumbsUp',\r\n    icon: 'CheckCircle',\r\n  },\r\n  {\r\n    key: 'creative_solution',\r\n    label: 'com_ui_feedback_tag_creative_solution',\r\n    direction: 'thumbsUp',\r\n    icon: 'Lightbulb',\r\n  },\r\n  {\r\n    key: 'clear_well_written',\r\n    label: 'com_ui_feedback_tag_clear_well_written',\r\n    direction: 'thumbsUp',\r\n    icon: 'PenTool',\r\n  },\r\n  {\r\n    key: 'attention_to_detail',\r\n    label: 'com_ui_feedback_tag_attention_to_detail',\r\n    direction: 'thumbsUp',\r\n    icon: 'Search',\r\n  },\r\n];\r\n\r\nexport function getTagsForRating(rating: TFeedbackRating): TFeedbackTag[] {\r\n  return FEEDBACK_TAGS.filter((tag) => tag.direction === rating);\r\n}\r\n\r\nexport const feedbackTagKeySchema = z.enum(FEEDBACK_REASON_KEYS);\r\nexport const feedbackRatingSchema = z.enum(FEEDBACK_RATINGS);\r\n\r\nexport const feedbackSchema = z.object({\r\n  rating: feedbackRatingSchema,\r\n  tag: feedbackTagKeySchema,\r\n  text: z.string().max(1024).optional(),\r\n});\r\n\r\nexport type TMinimalFeedback = z.infer<typeof feedbackSchema>;\r\n\r\nexport type TFeedback = {\r\n  rating: TFeedbackRating;\r\n  tag: TFeedbackTag | undefined;\r\n  text?: string;\r\n};\r\n\r\nexport function toMinimalFeedback(feedback: TFeedback | undefined): TMinimalFeedback | undefined {\r\n  if (!feedback?.rating || !feedback?.tag || !feedback.tag.key) {\r\n    return undefined;\r\n  }\r\n\r\n  return {\r\n    rating: feedback.rating,\r\n    tag: feedback.tag.key,\r\n    text: feedback.text,\r\n  };\r\n}\r\n\r\nexport function getTagByKey(key: TFeedbackTagKey | undefined): TFeedbackTag | undefined {\r\n  if (!key) {\r\n    return undefined;\r\n  }\r\n  return FEEDBACK_TAGS.find((tag) => tag.key === key);\r\n}\r\n","import { z } from 'zod';\r\nimport { Tools } from './types/assistants';\r\nimport type { TMessageContentParts, FunctionTool, FunctionToolCall } from './types/assistants';\r\nimport { TFeedback, feedbackSchema } from './feedback';\r\nimport type { SearchResultData } from './types/web';\r\nimport type { TFile } from './types/files';\r\n\r\nexport const isUUID = z.string().uuid();\r\n\r\nexport enum AuthType {\r\n  OVERRIDE_AUTH = 'override_auth',\r\n  USER_PROVIDED = 'user_provided',\r\n  SYSTEM_DEFINED = 'system_defined',\r\n}\r\n\r\nexport const authTypeSchema = z.nativeEnum(AuthType);\r\n\r\nexport enum EModelEndpoint {\r\n  azureOpenAI = 'azureOpenAI',\r\n  openAI = 'openAI',\r\n  google = 'google',\r\n  anthropic = 'anthropic',\r\n  assistants = 'assistants',\r\n  azureAssistants = 'azureAssistants',\r\n  agents = 'agents',\r\n  custom = 'custom',\r\n  bedrock = 'bedrock',\r\n  /** @deprecated */\r\n  chatGPTBrowser = 'chatGPTBrowser',\r\n  /** @deprecated */\r\n  gptPlugins = 'gptPlugins',\r\n}\r\n\r\nexport const paramEndpoints = new Set<EModelEndpoint | string>([\r\n  EModelEndpoint.agents,\r\n  EModelEndpoint.openAI,\r\n  EModelEndpoint.bedrock,\r\n  EModelEndpoint.azureOpenAI,\r\n  EModelEndpoint.anthropic,\r\n  EModelEndpoint.custom,\r\n  EModelEndpoint.google,\r\n]);\r\n\r\nexport enum BedrockProviders {\r\n  AI21 = 'ai21',\r\n  Amazon = 'amazon',\r\n  Anthropic = 'anthropic',\r\n  Cohere = 'cohere',\r\n  Meta = 'meta',\r\n  MistralAI = 'mistral',\r\n  StabilityAI = 'stability',\r\n  DeepSeek = 'deepseek',\r\n}\r\n\r\nexport const getModelKey = (endpoint: EModelEndpoint | string, model: string) => {\r\n  if (endpoint === EModelEndpoint.bedrock) {\r\n    const parts = model.split('.');\r\n    const provider = [parts[0], parts[1]].find((part) =>\r\n      Object.values(BedrockProviders).includes(part as BedrockProviders),\r\n    );\r\n    return (provider ?? parts[0]) as BedrockProviders;\r\n  }\r\n  return model;\r\n};\r\n\r\nexport const getSettingsKeys = (endpoint: EModelEndpoint | string, model: string) => {\r\n  const endpointKey = endpoint;\r\n  const modelKey = getModelKey(endpointKey, model);\r\n  const combinedKey = `${endpointKey}-${modelKey}`;\r\n  return [combinedKey, endpointKey];\r\n};\r\n\r\nexport type AssistantsEndpoint = EModelEndpoint.assistants | EModelEndpoint.azureAssistants;\r\n\r\nexport const isAssistantsEndpoint = (_endpoint?: AssistantsEndpoint | null | string): boolean => {\r\n  const endpoint = _endpoint ?? '';\r\n  if (!endpoint) {\r\n    return false;\r\n  }\r\n  return endpoint.toLowerCase().endsWith(EModelEndpoint.assistants);\r\n};\r\n\r\nexport type AgentProvider = Exclude<keyof typeof EModelEndpoint, EModelEndpoint.agents> | string;\r\n\r\nexport const isAgentsEndpoint = (_endpoint?: EModelEndpoint.agents | null | string): boolean => {\r\n  const endpoint = _endpoint ?? '';\r\n  if (!endpoint) {\r\n    return false;\r\n  }\r\n  return endpoint === EModelEndpoint.agents;\r\n};\r\n\r\nexport const isParamEndpoint = (\r\n  endpoint: EModelEndpoint | string,\r\n  endpointType?: EModelEndpoint | string,\r\n): boolean => {\r\n  if (paramEndpoints.has(endpoint)) {\r\n    return true;\r\n  }\r\n\r\n  if (endpointType != null) {\r\n    return paramEndpoints.has(endpointType);\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nexport enum ImageDetail {\r\n  low = 'low',\r\n  auto = 'auto',\r\n  high = 'high',\r\n}\r\n\r\nexport enum ReasoningEffort {\r\n  none = '',\r\n  minimal = 'minimal',\r\n  low = 'low',\r\n  medium = 'medium',\r\n  high = 'high',\r\n}\r\n\r\nexport enum ReasoningSummary {\r\n  none = '',\r\n  auto = 'auto',\r\n  concise = 'concise',\r\n  detailed = 'detailed',\r\n}\r\n\r\nexport enum Verbosity {\r\n  none = '',\r\n  low = 'low',\r\n  medium = 'medium',\r\n  high = 'high',\r\n}\r\n\r\nexport const imageDetailNumeric = {\r\n  [ImageDetail.low]: 0,\r\n  [ImageDetail.auto]: 1,\r\n  [ImageDetail.high]: 2,\r\n};\r\n\r\nexport const imageDetailValue = {\r\n  0: ImageDetail.low,\r\n  1: ImageDetail.auto,\r\n  2: ImageDetail.high,\r\n};\r\n\r\nexport const eImageDetailSchema = z.nativeEnum(ImageDetail);\r\nexport const eReasoningEffortSchema = z.nativeEnum(ReasoningEffort);\r\nexport const eReasoningSummarySchema = z.nativeEnum(ReasoningSummary);\r\nexport const eVerbositySchema = z.nativeEnum(Verbosity);\r\n\r\nexport const defaultAssistantFormValues = {\r\n  assistant: '',\r\n  id: '',\r\n  name: '',\r\n  description: '',\r\n  instructions: '',\r\n  conversation_starters: [],\r\n  model: '',\r\n  functions: [],\r\n  code_interpreter: false,\r\n  image_vision: false,\r\n  retrieval: false,\r\n  append_current_datetime: false,\r\n};\r\n\r\nexport const defaultAgentFormValues = {\r\n  agent: {},\r\n  id: '',\r\n  name: '',\r\n  description: '',\r\n  instructions: '',\r\n  model: '',\r\n  model_parameters: {},\r\n  tools: [],\r\n  provider: {},\r\n  projectIds: [],\r\n  artifacts: '',\r\n  /** @deprecated Use ACL permissions instead */\r\n  isCollaborative: false,\r\n  recursion_limit: undefined,\r\n  [Tools.execute_code]: false,\r\n  [Tools.file_search]: false,\r\n  [Tools.web_search]: false,\r\n  category: 'general',\r\n  support_contact: {\r\n    name: '',\r\n    email: '',\r\n  },\r\n};\r\n\r\nexport const ImageVisionTool: FunctionTool = {\r\n  type: Tools.function,\r\n  [Tools.function]: {\r\n    name: 'image_vision',\r\n    description: 'Get detailed text descriptions for all current image attachments.',\r\n    parameters: {\r\n      type: 'object',\r\n      properties: {},\r\n      required: [],\r\n    },\r\n  },\r\n};\r\n\r\nexport const isImageVisionTool = (tool: FunctionTool | FunctionToolCall) =>\r\n  tool.type === 'function' && tool.function?.name === ImageVisionTool.function?.name;\r\n\r\nexport const openAISettings = {\r\n  model: {\r\n    default: 'gpt-4o-mini' as const,\r\n  },\r\n  temperature: {\r\n    min: 0 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  top_p: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  presence_penalty: {\r\n    min: -2 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 0 as const,\r\n  },\r\n  frequency_penalty: {\r\n    min: -2 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 0 as const,\r\n  },\r\n  resendFiles: {\r\n    default: true as const,\r\n  },\r\n  maxContextTokens: {\r\n    default: undefined,\r\n  },\r\n  max_tokens: {\r\n    default: undefined,\r\n  },\r\n  imageDetail: {\r\n    default: ImageDetail.auto as const,\r\n    min: 0 as const,\r\n    max: 2 as const,\r\n    step: 1 as const,\r\n  },\r\n};\r\n\r\nexport const googleSettings = {\r\n  model: {\r\n    default: 'gemini-1.5-flash-latest' as const,\r\n  },\r\n  maxOutputTokens: {\r\n    min: 1 as const,\r\n    max: 64000 as const,\r\n    step: 1 as const,\r\n    default: 8192 as const,\r\n  },\r\n  temperature: {\r\n    min: 0 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  topP: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 0.95 as const,\r\n  },\r\n  topK: {\r\n    min: 1 as const,\r\n    max: 40 as const,\r\n    step: 1 as const,\r\n    default: 40 as const,\r\n  },\r\n  thinking: {\r\n    default: true as const,\r\n  },\r\n  thinkingBudget: {\r\n    min: -1 as const,\r\n    max: 32768 as const,\r\n    step: 1 as const,\r\n    /** `-1` = Dynamic Thinking, meaning the model will adjust\r\n     * the budget based on the complexity of the request.\r\n     */\r\n    default: -1 as const,\r\n  },\r\n};\r\n\r\nconst ANTHROPIC_MAX_OUTPUT = 128000 as const;\r\nconst DEFAULT_MAX_OUTPUT = 8192 as const;\r\nconst LEGACY_ANTHROPIC_MAX_OUTPUT = 4096 as const;\r\nexport const anthropicSettings = {\r\n  model: {\r\n    default: 'claude-3-5-sonnet-latest' as const,\r\n  },\r\n  temperature: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  promptCache: {\r\n    default: true as const,\r\n  },\r\n  thinking: {\r\n    default: true as const,\r\n  },\r\n  thinkingBudget: {\r\n    min: 1024 as const,\r\n    step: 100 as const,\r\n    max: 200000 as const,\r\n    default: 2000 as const,\r\n  },\r\n  maxOutputTokens: {\r\n    min: 1 as const,\r\n    max: ANTHROPIC_MAX_OUTPUT,\r\n    step: 1 as const,\r\n    default: DEFAULT_MAX_OUTPUT,\r\n    reset: (modelName: string) => {\r\n      if (/claude-3[-.]5-sonnet/.test(modelName) || /claude-3[-.]7/.test(modelName)) {\r\n        return DEFAULT_MAX_OUTPUT;\r\n      }\r\n\r\n      return 4096;\r\n    },\r\n    set: (value: number, modelName: string) => {\r\n      if (\r\n        !(/claude-3[-.]5-sonnet/.test(modelName) || /claude-3[-.]7/.test(modelName)) &&\r\n        value > LEGACY_ANTHROPIC_MAX_OUTPUT\r\n      ) {\r\n        return LEGACY_ANTHROPIC_MAX_OUTPUT;\r\n      }\r\n\r\n      return value;\r\n    },\r\n  },\r\n  topP: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 0.7 as const,\r\n  },\r\n  topK: {\r\n    min: 1 as const,\r\n    max: 40 as const,\r\n    step: 1 as const,\r\n    default: 5 as const,\r\n  },\r\n  resendFiles: {\r\n    default: true as const,\r\n  },\r\n  maxContextTokens: {\r\n    default: undefined,\r\n  },\r\n  legacy: {\r\n    maxOutputTokens: {\r\n      min: 1 as const,\r\n      max: LEGACY_ANTHROPIC_MAX_OUTPUT,\r\n      step: 1 as const,\r\n      default: LEGACY_ANTHROPIC_MAX_OUTPUT,\r\n    },\r\n  },\r\n  web_search: {\r\n    default: false as const,\r\n  },\r\n};\r\n\r\nexport const agentsSettings = {\r\n  model: {\r\n    default: 'gpt-3.5-turbo-test' as const,\r\n  },\r\n  temperature: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  top_p: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  presence_penalty: {\r\n    min: -2 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 0 as const,\r\n  },\r\n  frequency_penalty: {\r\n    min: -2 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 0 as const,\r\n  },\r\n  resendFiles: {\r\n    default: true as const,\r\n  },\r\n  maxContextTokens: {\r\n    default: undefined,\r\n  },\r\n  max_tokens: {\r\n    default: undefined,\r\n  },\r\n  imageDetail: {\r\n    default: ImageDetail.auto as const,\r\n  },\r\n};\r\n\r\nexport const endpointSettings = {\r\n  [EModelEndpoint.openAI]: openAISettings,\r\n  [EModelEndpoint.google]: googleSettings,\r\n  [EModelEndpoint.anthropic]: anthropicSettings,\r\n  [EModelEndpoint.agents]: agentsSettings,\r\n  [EModelEndpoint.bedrock]: agentsSettings,\r\n};\r\n\r\nconst google = endpointSettings[EModelEndpoint.google];\r\n\r\nexport const eModelEndpointSchema = z.nativeEnum(EModelEndpoint);\r\n\r\nexport const extendedModelEndpointSchema = z.union([eModelEndpointSchema, z.string()]);\r\n\r\nexport const tPluginAuthConfigSchema = z.object({\r\n  authField: z.string(),\r\n  label: z.string(),\r\n  description: z.string(),\r\n});\r\n\r\nexport type TPluginAuthConfig = z.infer<typeof tPluginAuthConfigSchema>;\r\n\r\nexport const tPluginSchema = z.object({\r\n  name: z.string(),\r\n  pluginKey: z.string(),\r\n  description: z.string().optional(),\r\n  icon: z.string().optional(),\r\n  authConfig: z.array(tPluginAuthConfigSchema).optional(),\r\n  authenticated: z.boolean().optional(),\r\n  chatMenu: z.boolean().optional(),\r\n  isButton: z.boolean().optional(),\r\n  toolkit: z.boolean().optional(),\r\n});\r\n\r\nexport type TPlugin = z.infer<typeof tPluginSchema>;\r\n\r\nexport type TInput = {\r\n  inputStr: string;\r\n};\r\n\r\nexport type TResPlugin = {\r\n  plugin: string;\r\n  input: string;\r\n  thought: string;\r\n  loading?: boolean;\r\n  outputs?: string;\r\n  latest?: string;\r\n  inputs?: TInput[];\r\n};\r\n\r\nexport const tExampleSchema = z.object({\r\n  input: z.object({\r\n    content: z.string(),\r\n  }),\r\n  output: z.object({\r\n    content: z.string(),\r\n  }),\r\n});\r\n\r\nexport type TExample = z.infer<typeof tExampleSchema>;\r\n\r\nexport enum EAgent {\r\n  functions = 'functions',\r\n  classic = 'classic',\r\n}\r\n\r\nexport const agentOptionSettings = {\r\n  model: {\r\n    default: 'gpt-4o-mini',\r\n  },\r\n  temperature: {\r\n    min: 0,\r\n    max: 1,\r\n    step: 0.01,\r\n    default: 0,\r\n  },\r\n  agent: {\r\n    default: EAgent.functions,\r\n    options: [EAgent.functions, EAgent.classic],\r\n  },\r\n  skipCompletion: {\r\n    default: true,\r\n  },\r\n};\r\n\r\nexport const eAgentOptionsSchema = z.nativeEnum(EAgent);\r\n\r\nexport const tAgentOptionsSchema = z.object({\r\n  agent: z.string().default(EAgent.functions),\r\n  skipCompletion: z.boolean().default(agentOptionSettings.skipCompletion.default),\r\n  model: z.string(),\r\n  temperature: z.number().default(agentOptionSettings.temperature.default),\r\n});\r\n\r\nexport const tMessageSchema = z.object({\r\n  messageId: z.string(),\r\n  endpoint: z.string().optional(),\r\n  clientId: z.string().nullable().optional(),\r\n  conversationId: z.string().nullable(),\r\n  parentMessageId: z.string().nullable(),\r\n  responseMessageId: z.string().nullable().optional(),\r\n  overrideParentMessageId: z.string().nullable().optional(),\r\n  bg: z.string().nullable().optional(),\r\n  model: z.string().nullable().optional(),\r\n  title: z.string().nullable().or(z.literal('New Chat')).default('New Chat'),\r\n  sender: z.string().optional(),\r\n  text: z.string(),\r\n  /** @deprecated */\r\n  generation: z.string().nullable().optional(),\r\n  isCreatedByUser: z.boolean(),\r\n  error: z.boolean().optional(),\r\n  clientTimestamp: z.string().optional(),\r\n  createdAt: z\r\n    .string()\r\n    .optional()\r\n    .default(() => new Date().toISOString()),\r\n  updatedAt: z\r\n    .string()\r\n    .optional()\r\n    .default(() => new Date().toISOString()),\r\n  current: z.boolean().optional(),\r\n  unfinished: z.boolean().optional(),\r\n  searchResult: z.boolean().optional(),\r\n  finish_reason: z.string().optional(),\r\n  /* assistant */\r\n  thread_id: z.string().optional(),\r\n  /* frontend components */\r\n  iconURL: z.string().nullable().optional(),\r\n  feedback: feedbackSchema.optional(),\r\n});\r\n\r\nexport type MemoryArtifact = {\r\n  key: string;\r\n  value?: string;\r\n  tokenCount?: number;\r\n  type: 'update' | 'delete' | 'error';\r\n};\r\n\r\nexport type UIResource = {\r\n  type?: string;\r\n  data?: unknown;\r\n  uri?: string;\r\n  mimeType?: string;\r\n  text?: string;\r\n  [key: string]: unknown;\r\n};\r\n\r\nexport type TAttachmentMetadata = {\r\n  type?: Tools;\r\n  messageId: string;\r\n  toolCallId: string;\r\n  [Tools.memory]?: MemoryArtifact;\r\n  [Tools.ui_resources]?: UIResource[];\r\n  [Tools.web_search]?: SearchResultData;\r\n  [Tools.file_search]?: SearchResultData;\r\n};\r\n\r\nexport type TAttachment =\r\n  | (TFile & TAttachmentMetadata)\r\n  | (Pick<TFile, 'filename' | 'filepath' | 'conversationId'> & {\r\n      expiresAt: number;\r\n    } & TAttachmentMetadata)\r\n  | (Partial<Pick<TFile, 'filename' | 'filepath'>> &\r\n      Pick<TFile, 'conversationId'> &\r\n      TAttachmentMetadata);\r\n\r\nexport type TMessage = z.input<typeof tMessageSchema> & {\r\n  children?: TMessage[];\r\n  plugin?: TResPlugin | null;\r\n  plugins?: TResPlugin[];\r\n  content?: TMessageContentParts[];\r\n  files?: Partial<TFile>[];\r\n  depth?: number;\r\n  siblingIndex?: number;\r\n  attachments?: TAttachment[];\r\n  clientTimestamp?: string;\r\n  feedback?: TFeedback;\r\n};\r\n\r\nexport const coerceNumber = z.union([z.number(), z.string()]).transform((val) => {\r\n  if (typeof val === 'string') {\r\n    return val.trim() === '' ? undefined : parseFloat(val);\r\n  }\r\n  return val;\r\n});\r\n\r\ntype DocumentTypeValue =\r\n  | null\r\n  | boolean\r\n  | number\r\n  | string\r\n  | DocumentTypeValue[]\r\n  | { [key: string]: DocumentTypeValue };\r\n\r\nconst DocumentType: z.ZodType<DocumentTypeValue> = z.lazy(() =>\r\n  z.union([\r\n    z.null(),\r\n    z.boolean(),\r\n    z.number(),\r\n    z.string(),\r\n    z.array(z.lazy(() => DocumentType)),\r\n    z.record(z.lazy(() => DocumentType)),\r\n  ]),\r\n);\r\n\r\nexport const tConversationSchema = z.object({\r\n  conversationId: z.string().nullable(),\r\n  endpoint: eModelEndpointSchema.nullable(),\r\n  endpointType: eModelEndpointSchema.nullable().optional(),\r\n  isArchived: z.boolean().optional(),\r\n  title: z.string().nullable().or(z.literal('New Chat')).default('New Chat'),\r\n  user: z.string().optional(),\r\n  messages: z.array(z.string()).optional(),\r\n  tools: z.union([z.array(tPluginSchema), z.array(z.string())]).optional(),\r\n  modelLabel: z.string().nullable().optional(),\r\n  userLabel: z.string().optional(),\r\n  model: z.string().nullable().optional(),\r\n  promptPrefix: z.string().nullable().optional(),\r\n  temperature: z.number().nullable().optional(),\r\n  topP: z.number().optional(),\r\n  topK: z.number().optional(),\r\n  top_p: z.number().optional(),\r\n  frequency_penalty: z.number().optional(),\r\n  presence_penalty: z.number().optional(),\r\n  parentMessageId: z.string().optional(),\r\n  maxOutputTokens: coerceNumber.nullable().optional(),\r\n  maxContextTokens: coerceNumber.optional(),\r\n  max_tokens: coerceNumber.optional(),\r\n  /* Anthropic */\r\n  promptCache: z.boolean().optional(),\r\n  system: z.string().optional(),\r\n  thinking: z.boolean().optional(),\r\n  thinkingBudget: coerceNumber.optional(),\r\n  stream: z.boolean().optional(),\r\n  /* artifacts */\r\n  artifacts: z.string().optional(),\r\n  /* google */\r\n  context: z.string().nullable().optional(),\r\n  examples: z.array(tExampleSchema).optional(),\r\n  /* DB */\r\n  tags: z.array(z.string()).optional(),\r\n  createdAt: z.string(),\r\n  updatedAt: z.string(),\r\n  /* Files */\r\n  resendFiles: z.boolean().optional(),\r\n  file_ids: z.array(z.string()).optional(),\r\n  /* vision */\r\n  imageDetail: eImageDetailSchema.optional(),\r\n  /* OpenAI: Reasoning models only */\r\n  reasoning_effort: eReasoningEffortSchema.optional().nullable(),\r\n  reasoning_summary: eReasoningSummarySchema.optional().nullable(),\r\n  /* OpenAI: Verbosity control */\r\n  verbosity: eVerbositySchema.optional().nullable(),\r\n  /* OpenAI: use Responses API */\r\n  useResponsesApi: z.boolean().optional(),\r\n  /* OpenAI Responses API / Anthropic API / Google API */\r\n  web_search: z.boolean().optional(),\r\n  /* disable streaming */\r\n  disableStreaming: z.boolean().optional(),\r\n  /* assistant */\r\n  assistant_id: z.string().optional(),\r\n  /* agents */\r\n  agent_id: z.string().optional(),\r\n  /* AWS Bedrock */\r\n  region: z.string().optional(),\r\n  maxTokens: coerceNumber.optional(),\r\n  additionalModelRequestFields: DocumentType.optional(),\r\n  /* assistants */\r\n  instructions: z.string().optional(),\r\n  additional_instructions: z.string().optional(),\r\n  append_current_datetime: z.boolean().optional(),\r\n  /** Used to overwrite active conversation settings when saving a Preset */\r\n  presetOverride: z.record(z.unknown()).optional(),\r\n  stop: z.array(z.string()).optional(),\r\n  /* frontend components */\r\n  greeting: z.string().optional(),\r\n  spec: z.string().nullable().optional(),\r\n  iconURL: z.string().nullable().optional(),\r\n  /* temporary chat */\r\n  expiredAt: z.string().nullable().optional(),\r\n  /* file token limits */\r\n  fileTokenLimit: coerceNumber.optional(),\r\n  /** @deprecated */\r\n  resendImages: z.boolean().optional(),\r\n  /** @deprecated */\r\n  agentOptions: tAgentOptionsSchema.nullable().optional(),\r\n  /** @deprecated Prefer `modelLabel` over `chatGptLabel` */\r\n  chatGptLabel: z.string().nullable().optional(),\r\n});\r\n\r\nexport const tPresetSchema = tConversationSchema\r\n  .omit({\r\n    conversationId: true,\r\n    createdAt: true,\r\n    updatedAt: true,\r\n    title: true,\r\n  })\r\n  .merge(\r\n    z.object({\r\n      conversationId: z.string().nullable().optional(),\r\n      presetId: z.string().nullable().optional(),\r\n      title: z.string().nullable().optional(),\r\n      defaultPreset: z.boolean().optional(),\r\n      order: z.number().optional(),\r\n      endpoint: extendedModelEndpointSchema.nullable(),\r\n    }),\r\n  );\r\n\r\nexport const tConvoUpdateSchema = tConversationSchema.merge(\r\n  z.object({\r\n    endpoint: extendedModelEndpointSchema.nullable(),\r\n    createdAt: z.string().optional(),\r\n    updatedAt: z.string().optional(),\r\n  }),\r\n);\r\n\r\nexport const tQueryParamsSchema = tConversationSchema\r\n  .pick({\r\n    // librechat settings\r\n    /** The model spec to be used */\r\n    spec: true,\r\n    /** The AI context window, overrides the system-defined window as determined by `model` value */\r\n    maxContextTokens: true,\r\n    /**\r\n     * Whether or not to re-submit files from previous messages on subsequent messages\r\n     * */\r\n    resendFiles: true,\r\n    /**\r\n     * @endpoints openAI, custom, azureOpenAI\r\n     *\r\n     * System parameter that only affects the above endpoints.\r\n     * Image detail for re-sizing according to OpenAI spec, defaults to `auto`\r\n     * */\r\n    imageDetail: true,\r\n    /**\r\n     * AKA Custom Instructions, dynamically added to chat history as a system message;\r\n     * for `bedrock` endpoint, this is used as the `system` model param if the provider uses it;\r\n     * for `assistants` endpoint, this is used as the `additional_instructions` model param:\r\n     * https://platform.openai.com/docs/api-reference/runs/createRun#runs-createrun-additional_instructions\r\n     * ; otherwise, a message with `system` role is added to the chat history\r\n     */\r\n    promptPrefix: true,\r\n    // Model parameters\r\n    /** @endpoints openAI, custom, azureOpenAI, google, anthropic, assistants, azureAssistants, bedrock */\r\n    model: true,\r\n    /** @endpoints openAI, custom, azureOpenAI, google, anthropic, bedrock */\r\n    temperature: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    presence_penalty: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    frequency_penalty: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    stop: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    top_p: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    max_tokens: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    reasoning_effort: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    reasoning_summary: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    verbosity: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    useResponsesApi: true,\r\n    /** @endpoints openAI, anthropic, google */\r\n    web_search: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    disableStreaming: true,\r\n    /** @endpoints google, anthropic, bedrock */\r\n    topP: true,\r\n    /** @endpoints google, anthropic */\r\n    topK: true,\r\n    /** @endpoints google, anthropic */\r\n    maxOutputTokens: true,\r\n    /** @endpoints anthropic */\r\n    promptCache: true,\r\n    thinking: true,\r\n    thinkingBudget: true,\r\n    /** @endpoints bedrock */\r\n    region: true,\r\n    /** @endpoints bedrock */\r\n    maxTokens: true,\r\n    /** @endpoints agents */\r\n    agent_id: true,\r\n    /** @endpoints assistants, azureAssistants */\r\n    assistant_id: true,\r\n    /** @endpoints assistants, azureAssistants */\r\n    append_current_datetime: true,\r\n    /**\r\n     * @endpoints assistants, azureAssistants\r\n     *\r\n     * Overrides existing assistant instructions, only used for the current run:\r\n     * https://platform.openai.com/docs/api-reference/runs/createRun#runs-createrun-instructions\r\n     * */\r\n    instructions: true,\r\n    /** @endpoints openAI, google, anthropic */\r\n    fileTokenLimit: true,\r\n  })\r\n  .merge(\r\n    z.object({\r\n      /** @endpoints openAI, custom, azureOpenAI, google, anthropic, assistants, azureAssistants, bedrock, agents */\r\n      endpoint: extendedModelEndpointSchema.nullable(),\r\n    }),\r\n  );\r\n\r\nexport type TPreset = z.infer<typeof tPresetSchema>;\r\n\r\nexport type TSetOption = (\r\n  param: number | string,\r\n) => (newValue: number | string | boolean | string[] | Partial<TPreset>) => void;\r\n\r\nexport type TConversation = z.infer<typeof tConversationSchema> & {\r\n  presetOverride?: Partial<TPreset>;\r\n  disableParams?: boolean;\r\n};\r\n\r\nexport const tSharedLinkSchema = z.object({\r\n  conversationId: z.string(),\r\n  shareId: z.string(),\r\n  messages: z.array(z.string()),\r\n  isPublic: z.boolean(),\r\n  title: z.string(),\r\n  createdAt: z.string(),\r\n  updatedAt: z.string(),\r\n});\r\n\r\nexport type TSharedLink = z.infer<typeof tSharedLinkSchema>;\r\n\r\nexport const tConversationTagSchema = z.object({\r\n  _id: z.string(),\r\n  user: z.string(),\r\n  tag: z.string(),\r\n  description: z.string().optional(),\r\n  createdAt: z.string(),\r\n  updatedAt: z.string(),\r\n  count: z.number(),\r\n  position: z.number(),\r\n});\r\nexport type TConversationTag = z.infer<typeof tConversationTagSchema>;\r\n\r\nexport const googleBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  modelLabel: true,\r\n  promptPrefix: true,\r\n  examples: true,\r\n  temperature: true,\r\n  maxOutputTokens: true,\r\n  artifacts: true,\r\n  topP: true,\r\n  topK: true,\r\n  thinking: true,\r\n  thinkingBudget: true,\r\n  web_search: true,\r\n  fileTokenLimit: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n  maxContextTokens: true,\r\n});\r\n\r\nexport const googleSchema = googleBaseSchema\r\n  .transform((obj: Partial<TConversation>) => removeNullishValues(obj))\r\n  .catch(() => ({}));\r\n\r\n/**\r\n   * TODO: Map the following fields:\r\n  - presence_penalty -> presencePenalty\r\n  - frequency_penalty -> frequencyPenalty\r\n  - stop -> stopSequences\r\n   */\r\nexport const googleGenConfigSchema = z\r\n  .object({\r\n    maxOutputTokens: coerceNumber.optional(),\r\n    temperature: coerceNumber.optional(),\r\n    topP: coerceNumber.optional(),\r\n    topK: coerceNumber.optional(),\r\n    presencePenalty: coerceNumber.optional(),\r\n    frequencyPenalty: coerceNumber.optional(),\r\n    stopSequences: z.array(z.string()).optional(),\r\n    thinkingConfig: z\r\n      .object({\r\n        includeThoughts: z.boolean().optional(),\r\n        thinkingBudget: coerceNumber.optional(),\r\n      })\r\n      .optional(),\r\n    web_search: z.boolean().optional(),\r\n  })\r\n  .strip()\r\n  .optional();\r\n\r\nconst gptPluginsBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  modelLabel: true,\r\n  chatGptLabel: true,\r\n  promptPrefix: true,\r\n  temperature: true,\r\n  artifacts: true,\r\n  top_p: true,\r\n  presence_penalty: true,\r\n  frequency_penalty: true,\r\n  tools: true,\r\n  agentOptions: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n  maxContextTokens: true,\r\n});\r\n\r\nexport const gptPluginsSchema = gptPluginsBaseSchema\r\n  .transform((obj) => {\r\n    const result = {\r\n      ...obj,\r\n      model: obj.model ?? 'gpt-3.5-turbo',\r\n      chatGptLabel: obj.chatGptLabel ?? obj.modelLabel ?? null,\r\n      promptPrefix: obj.promptPrefix ?? null,\r\n      temperature: obj.temperature ?? 0.8,\r\n      top_p: obj.top_p ?? 1,\r\n      presence_penalty: obj.presence_penalty ?? 0,\r\n      frequency_penalty: obj.frequency_penalty ?? 0,\r\n      tools: obj.tools ?? [],\r\n      agentOptions: obj.agentOptions ?? {\r\n        agent: EAgent.functions,\r\n        skipCompletion: true,\r\n        model: 'gpt-3.5-turbo',\r\n        temperature: 0,\r\n      },\r\n      iconURL: obj.iconURL ?? undefined,\r\n      greeting: obj.greeting ?? undefined,\r\n      spec: obj.spec ?? undefined,\r\n      maxContextTokens: obj.maxContextTokens ?? undefined,\r\n    };\r\n\r\n    if (obj.modelLabel != null && obj.modelLabel !== '') {\r\n      result.modelLabel = null;\r\n    }\r\n\r\n    return result;\r\n  })\r\n  .catch(() => ({\r\n    model: 'gpt-3.5-turbo',\r\n    chatGptLabel: null,\r\n    promptPrefix: null,\r\n    temperature: 0.8,\r\n    top_p: 1,\r\n    presence_penalty: 0,\r\n    frequency_penalty: 0,\r\n    tools: [],\r\n    agentOptions: {\r\n      agent: EAgent.functions,\r\n      skipCompletion: true,\r\n      model: 'gpt-3.5-turbo',\r\n      temperature: 0,\r\n    },\r\n    iconURL: undefined,\r\n    greeting: undefined,\r\n    spec: undefined,\r\n    maxContextTokens: undefined,\r\n  }));\r\n\r\nexport function removeNullishValues<T extends Record<string, unknown>>(\r\n  obj: T,\r\n  removeEmptyStrings?: boolean,\r\n): Partial<T> {\r\n  const newObj: Partial<T> = { ...obj };\r\n\r\n  (Object.keys(newObj) as Array<keyof T>).forEach((key) => {\r\n    const value = newObj[key];\r\n    if (value === undefined || value === null) {\r\n      delete newObj[key];\r\n    }\r\n    if (removeEmptyStrings && typeof value === 'string' && value === '') {\r\n      delete newObj[key];\r\n    }\r\n  });\r\n\r\n  return newObj;\r\n}\r\n\r\nconst assistantBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  assistant_id: true,\r\n  instructions: true,\r\n  artifacts: true,\r\n  promptPrefix: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n  append_current_datetime: true,\r\n});\r\n\r\nexport const assistantSchema = assistantBaseSchema\r\n  .transform((obj) => ({\r\n    ...obj,\r\n    model: obj.model ?? openAISettings.model.default,\r\n    assistant_id: obj.assistant_id ?? undefined,\r\n    instructions: obj.instructions ?? undefined,\r\n    promptPrefix: obj.promptPrefix ?? null,\r\n    iconURL: obj.iconURL ?? undefined,\r\n    greeting: obj.greeting ?? undefined,\r\n    spec: obj.spec ?? undefined,\r\n    append_current_datetime: obj.append_current_datetime ?? false,\r\n  }))\r\n  .catch(() => ({\r\n    model: openAISettings.model.default,\r\n    assistant_id: undefined,\r\n    instructions: undefined,\r\n    promptPrefix: null,\r\n    iconURL: undefined,\r\n    greeting: undefined,\r\n    spec: undefined,\r\n    append_current_datetime: false,\r\n  }));\r\n\r\nconst compactAssistantBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  assistant_id: true,\r\n  instructions: true,\r\n  promptPrefix: true,\r\n  artifacts: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n});\r\n\r\nexport const compactAssistantSchema = compactAssistantBaseSchema\r\n  .transform((obj) => removeNullishValues(obj))\r\n  .catch(() => ({}));\r\n\r\nexport const agentsBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  modelLabel: true,\r\n  temperature: true,\r\n  top_p: true,\r\n  presence_penalty: true,\r\n  frequency_penalty: true,\r\n  resendFiles: true,\r\n  imageDetail: true,\r\n  agent_id: true,\r\n  instructions: true,\r\n  promptPrefix: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  maxContextTokens: true,\r\n});\r\n\r\nexport const agentsSchema = agentsBaseSchema\r\n  .transform((obj) => ({\r\n    ...obj,\r\n    model: obj.model ?? agentsSettings.model.default,\r\n    modelLabel: obj.modelLabel ?? null,\r\n    temperature: obj.temperature ?? 1,\r\n    top_p: obj.top_p ?? 1,\r\n    presence_penalty: obj.presence_penalty ?? 0,\r\n    frequency_penalty: obj.frequency_penalty ?? 0,\r\n    resendFiles:\r\n      typeof obj.resendFiles === 'boolean' ? obj.resendFiles : agentsSettings.resendFiles.default,\r\n    imageDetail: obj.imageDetail ?? ImageDetail.auto,\r\n    agent_id: obj.agent_id ?? undefined,\r\n    instructions: obj.instructions ?? undefined,\r\n    promptPrefix: obj.promptPrefix ?? null,\r\n    iconURL: obj.iconURL ?? undefined,\r\n    greeting: obj.greeting ?? undefined,\r\n    maxContextTokens: obj.maxContextTokens ?? undefined,\r\n  }))\r\n  .catch(() => ({\r\n    model: agentsSettings.model.default,\r\n    modelLabel: null,\r\n    temperature: 1,\r\n    top_p: 1,\r\n    presence_penalty: 0,\r\n    frequency_penalty: 0,\r\n    resendFiles: agentsSettings.resendFiles.default,\r\n    imageDetail: ImageDetail.auto,\r\n    agent_id: undefined,\r\n    instructions: undefined,\r\n    promptPrefix: null,\r\n    iconURL: undefined,\r\n    greeting: undefined,\r\n    maxContextTokens: undefined,\r\n  }));\r\n\r\nexport const openAIBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  modelLabel: true,\r\n  chatGptLabel: true,\r\n  promptPrefix: true,\r\n  temperature: true,\r\n  top_p: true,\r\n  presence_penalty: true,\r\n  frequency_penalty: true,\r\n  resendFiles: true,\r\n  artifacts: true,\r\n  imageDetail: true,\r\n  stop: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n  maxContextTokens: true,\r\n  max_tokens: true,\r\n  reasoning_effort: true,\r\n  reasoning_summary: true,\r\n  verbosity: true,\r\n  useResponsesApi: true,\r\n  web_search: true,\r\n  disableStreaming: true,\r\n  fileTokenLimit: true,\r\n});\r\n\r\nexport const openAISchema = openAIBaseSchema\r\n  .transform((obj: Partial<TConversation>) => removeNullishValues(obj, true))\r\n  .catch(() => ({}));\r\n\r\nexport const compactGoogleSchema = googleBaseSchema\r\n  .transform((obj) => {\r\n    const newObj: Partial<TConversation> = { ...obj };\r\n    if (newObj.temperature === google.temperature.default) {\r\n      delete newObj.temperature;\r\n    }\r\n    if (newObj.maxOutputTokens === google.maxOutputTokens.default) {\r\n      delete newObj.maxOutputTokens;\r\n    }\r\n    if (newObj.topP === google.topP.default) {\r\n      delete newObj.topP;\r\n    }\r\n    if (newObj.topK === google.topK.default) {\r\n      delete newObj.topK;\r\n    }\r\n\r\n    return removeNullishValues(newObj);\r\n  })\r\n  .catch(() => ({}));\r\n\r\nexport const anthropicBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  modelLabel: true,\r\n  promptPrefix: true,\r\n  temperature: true,\r\n  maxOutputTokens: true,\r\n  topP: true,\r\n  topK: true,\r\n  resendFiles: true,\r\n  promptCache: true,\r\n  thinking: true,\r\n  thinkingBudget: true,\r\n  artifacts: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n  maxContextTokens: true,\r\n  web_search: true,\r\n  fileTokenLimit: true,\r\n  stop: true,\r\n  stream: true,\r\n});\r\n\r\nexport const anthropicSchema = anthropicBaseSchema\r\n  .transform((obj) => removeNullishValues(obj))\r\n  .catch(() => ({}));\r\n\r\nexport const compactPluginsSchema = gptPluginsBaseSchema\r\n  .transform((obj) => {\r\n    const newObj: Partial<TConversation> = { ...obj };\r\n    if (newObj.modelLabel === null) {\r\n      delete newObj.modelLabel;\r\n    }\r\n    if (newObj.chatGptLabel === null) {\r\n      delete newObj.chatGptLabel;\r\n    }\r\n    if (newObj.promptPrefix === null) {\r\n      delete newObj.promptPrefix;\r\n    }\r\n    if (newObj.temperature === 0.8) {\r\n      delete newObj.temperature;\r\n    }\r\n    if (newObj.top_p === 1) {\r\n      delete newObj.top_p;\r\n    }\r\n    if (newObj.presence_penalty === 0) {\r\n      delete newObj.presence_penalty;\r\n    }\r\n    if (newObj.frequency_penalty === 0) {\r\n      delete newObj.frequency_penalty;\r\n    }\r\n    if (newObj.tools?.length === 0) {\r\n      delete newObj.tools;\r\n    }\r\n\r\n    if (\r\n      newObj.agentOptions &&\r\n      newObj.agentOptions.agent === EAgent.functions &&\r\n      newObj.agentOptions.skipCompletion === true &&\r\n      newObj.agentOptions.model === 'gpt-3.5-turbo' &&\r\n      newObj.agentOptions.temperature === 0\r\n    ) {\r\n      delete newObj.agentOptions;\r\n    }\r\n\r\n    return removeNullishValues(newObj);\r\n  })\r\n  .catch(() => ({}));\r\n\r\nexport const tBannerSchema = z.object({\r\n  bannerId: z.string(),\r\n  message: z.string(),\r\n  displayFrom: z.string(),\r\n  displayTo: z.string(),\r\n  createdAt: z.string(),\r\n  updatedAt: z.string(),\r\n  isPublic: z.boolean(),\r\n});\r\nexport type TBanner = z.infer<typeof tBannerSchema>;\r\n\r\nexport const compactAgentsBaseSchema = tConversationSchema.pick({\r\n  spec: true,\r\n  // model: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  agent_id: true,\r\n  instructions: true,\r\n  additional_instructions: true,\r\n});\r\n\r\nexport const compactAgentsSchema = compactAgentsBaseSchema\r\n  .transform((obj) => removeNullishValues(obj))\r\n  .catch(() => ({}));\r\n","import { EToolResources } from './assistants';\r\n\r\nexport enum FileSources {\r\n  local = 'local',\r\n  firebase = 'firebase',\r\n  azure = 'azure',\r\n  azure_blob = 'azure_blob',\r\n  openai = 'openai',\r\n  s3 = 's3',\r\n  vectordb = 'vectordb',\r\n  execute_code = 'execute_code',\r\n  mistral_ocr = 'mistral_ocr',\r\n  azure_mistral_ocr = 'azure_mistral_ocr',\r\n  vertexai_mistral_ocr = 'vertexai_mistral_ocr',\r\n  text = 'text',\r\n}\r\n\r\nexport const checkOpenAIStorage = (source: string) =>\r\n  source === FileSources.openai || source === FileSources.azure;\r\n\r\nexport enum FileContext {\r\n  avatar = 'avatar',\r\n  unknown = 'unknown',\r\n  agents = 'agents',\r\n  assistants = 'assistants',\r\n  execute_code = 'execute_code',\r\n  image_generation = 'image_generation',\r\n  assistants_output = 'assistants_output',\r\n  message_attachment = 'message_attachment',\r\n  filename = 'filename',\r\n  updatedAt = 'updatedAt',\r\n  source = 'source',\r\n  filterSource = 'filterSource',\r\n  context = 'context',\r\n  bytes = 'bytes',\r\n}\r\n\r\nexport type EndpointFileConfig = {\r\n  disabled?: boolean;\r\n  fileLimit?: number;\r\n  fileSizeLimit?: number;\r\n  totalSizeLimit?: number;\r\n  supportedMimeTypes?: RegExp[];\r\n};\r\n\r\nexport type FileConfig = {\r\n  endpoints: {\r\n    [key: string]: EndpointFileConfig;\r\n  };\r\n  fileTokenLimit?: number;\r\n  serverFileSizeLimit?: number;\r\n  avatarSizeLimit?: number;\r\n  clientImageResize?: {\r\n    enabled?: boolean;\r\n    maxWidth?: number;\r\n    maxHeight?: number;\r\n    quality?: number;\r\n  };\r\n  ocr?: {\r\n    supportedMimeTypes?: RegExp[];\r\n  };\r\n  text?: {\r\n    supportedMimeTypes?: RegExp[];\r\n  };\r\n  stt?: {\r\n    supportedMimeTypes?: RegExp[];\r\n  };\r\n  checkType?: (fileType: string, supportedTypes: RegExp[]) => boolean;\r\n};\r\n\r\nexport type FileConfigInput = {\r\n  endpoints?: {\r\n    [key: string]: EndpointFileConfig;\r\n  };\r\n  serverFileSizeLimit?: number;\r\n  avatarSizeLimit?: number;\r\n  clientImageResize?: {\r\n    enabled?: boolean;\r\n    maxWidth?: number;\r\n    maxHeight?: number;\r\n    quality?: number;\r\n  };\r\n  ocr?: {\r\n    supportedMimeTypes?: string[];\r\n  };\r\n  text?: {\r\n    supportedMimeTypes?: string[];\r\n  };\r\n  stt?: {\r\n    supportedMimeTypes?: string[];\r\n  };\r\n  checkType?: (fileType: string, supportedTypes: RegExp[]) => boolean;\r\n};\r\n\r\nexport type TFile = {\r\n  _id?: string;\r\n  __v?: number;\r\n  user: string;\r\n  conversationId?: string;\r\n  message?: string;\r\n  file_id: string;\r\n  temp_file_id?: string;\r\n  bytes: number;\r\n  embedded: boolean;\r\n  filename: string;\r\n  filepath: string;\r\n  object: 'file';\r\n  type: string;\r\n  usage: number;\r\n  context?: FileContext;\r\n  source?: FileSources;\r\n  filterSource?: FileSources;\r\n  width?: number;\r\n  height?: number;\r\n  expiresAt?: string | Date;\r\n  preview?: string;\r\n  metadata?: { fileIdentifier?: string };\r\n  createdAt?: string | Date;\r\n  updatedAt?: string | Date;\r\n};\r\n\r\nexport type TFileUpload = TFile & {\r\n  temp_file_id: string;\r\n};\r\n\r\nexport type AvatarUploadResponse = {\r\n  url: string;\r\n};\r\n\r\nexport type SpeechToTextResponse = {\r\n  text: string;\r\n};\r\n\r\nexport type VoiceResponse = string[];\r\n\r\nexport type UploadMutationOptions = {\r\n  onSuccess?: (data: TFileUpload, variables: FormData, context?: unknown) => void;\r\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\r\n};\r\n\r\nexport type UploadAvatarOptions = {\r\n  onSuccess?: (data: AvatarUploadResponse, variables: FormData, context?: unknown) => void;\r\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\r\n};\r\n\r\nexport type SpeechToTextOptions = {\r\n  onSuccess?: (data: SpeechToTextResponse, variables: FormData, context?: unknown) => void;\r\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\r\n};\r\n\r\nexport type TextToSpeechOptions = {\r\n  onSuccess?: (data: ArrayBuffer, variables: FormData, context?: unknown) => void;\r\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\r\n};\r\n\r\nexport type VoiceOptions = {\r\n  onSuccess?: (data: VoiceResponse, variables: unknown, context?: unknown) => void;\r\n  onMutate?: () => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: unknown, context?: unknown) => void;\r\n};\r\n\r\nexport type DeleteFilesResponse = {\r\n  message: string;\r\n  result: Record<string, unknown>;\r\n};\r\n\r\nexport type BatchFile = {\r\n  file_id: string;\r\n  filepath: string;\r\n  embedded: boolean;\r\n  source: FileSources;\r\n  temp_file_id?: string;\r\n};\r\n\r\nexport type DeleteFilesBody = {\r\n  files: BatchFile[];\r\n  agent_id?: string;\r\n  assistant_id?: string;\r\n  tool_resource?: EToolResources;\r\n};\r\n\r\nexport type DeleteMutationOptions = {\r\n  onSuccess?: (data: DeleteFilesResponse, variables: DeleteFilesBody, context?: unknown) => void;\r\n  onMutate?: (variables: DeleteFilesBody) => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: DeleteFilesBody, context?: unknown) => void;\r\n};\r\n","import { z } from 'zod';\r\nimport type { TPreset } from './schemas';\r\nimport {\r\n  EModelEndpoint,\r\n  tPresetSchema,\r\n  eModelEndpointSchema,\r\n  AuthType,\r\n  authTypeSchema,\r\n} from './schemas';\r\n\r\nexport type TModelSpec = {\r\n  name: string;\r\n  label: string;\r\n  preset: TPreset;\r\n  order?: number;\r\n  default?: boolean;\r\n  description?: string;\r\n  showIconInMenu?: boolean;\r\n  showIconInHeader?: boolean;\r\n  iconURL?: string | EModelEndpoint; // Allow using project-included icons\r\n  authType?: AuthType;\r\n};\r\n\r\nexport const tModelSpecSchema = z.object({\r\n  name: z.string(),\r\n  label: z.string(),\r\n  preset: tPresetSchema,\r\n  order: z.number().optional(),\r\n  default: z.boolean().optional(),\r\n  description: z.string().optional(),\r\n  showIconInMenu: z.boolean().optional(),\r\n  showIconInHeader: z.boolean().optional(),\r\n  iconURL: z.union([z.string(), eModelEndpointSchema]).optional(),\r\n  authType: authTypeSchema.optional(),\r\n});\r\n\r\nexport const specsConfigSchema = z.object({\r\n  enforce: z.boolean().default(false),\r\n  prioritize: z.boolean().default(true),\r\n  list: z.array(tModelSpecSchema).min(1),\r\n  addedEndpoints: z.array(z.union([z.string(), eModelEndpointSchema])).optional(),\r\n});\r\n\r\nexport type TSpecsConfig = z.infer<typeof specsConfigSchema>;\r\n","import { z } from 'zod';\r\nimport { EModelEndpoint } from './schemas';\r\nimport type { EndpointFileConfig, FileConfig } from './types/files';\r\n\r\nexport const supportsFiles = {\r\n  [EModelEndpoint.openAI]: true,\r\n  [EModelEndpoint.google]: true,\r\n  [EModelEndpoint.assistants]: true,\r\n  [EModelEndpoint.azureAssistants]: true,\r\n  [EModelEndpoint.agents]: true,\r\n  [EModelEndpoint.azureOpenAI]: true,\r\n  [EModelEndpoint.anthropic]: true,\r\n  [EModelEndpoint.custom]: true,\r\n  [EModelEndpoint.bedrock]: true,\r\n};\r\n\r\nexport const excelFileTypes = [\r\n  'application/vnd.ms-excel',\r\n  'application/msexcel',\r\n  'application/x-msexcel',\r\n  'application/x-ms-excel',\r\n  'application/x-excel',\r\n  'application/x-dos_ms_excel',\r\n  'application/xls',\r\n  'application/x-xls',\r\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n];\r\n\r\nexport const fullMimeTypesList = [\r\n  'text/x-c',\r\n  'text/x-c++',\r\n  'application/csv',\r\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n  'text/html',\r\n  'text/x-java',\r\n  'application/json',\r\n  'text/markdown',\r\n  'application/pdf',\r\n  'text/x-php',\r\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n  'text/x-python',\r\n  'text/x-script.python',\r\n  'text/x-ruby',\r\n  'text/x-tex',\r\n  'text/plain',\r\n  'text/css',\r\n  'text/vtt',\r\n  'image/jpeg',\r\n  'text/javascript',\r\n  'image/gif',\r\n  'image/png',\r\n  'image/heic',\r\n  'image/heif',\r\n  'application/x-tar',\r\n  'application/typescript',\r\n  'application/xml',\r\n  'application/zip',\r\n  'image/svg',\r\n  'image/svg+xml',\r\n  ...excelFileTypes,\r\n];\r\n\r\nexport const codeInterpreterMimeTypesList = [\r\n  'text/x-c',\r\n  'text/x-c++',\r\n  'application/csv',\r\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n  'text/html',\r\n  'text/x-java',\r\n  'application/json',\r\n  'text/markdown',\r\n  'application/pdf',\r\n  'text/x-php',\r\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n  'text/x-python',\r\n  'text/x-script.python',\r\n  'text/x-ruby',\r\n  'text/x-tex',\r\n  'text/plain',\r\n  'text/css',\r\n  'image/jpeg',\r\n  'text/javascript',\r\n  'image/gif',\r\n  'image/png',\r\n  'image/heic',\r\n  'image/heif',\r\n  'application/x-tar',\r\n  'application/typescript',\r\n  'application/xml',\r\n  'application/zip',\r\n  ...excelFileTypes,\r\n];\r\n\r\nexport const retrievalMimeTypesList = [\r\n  'text/x-c',\r\n  'text/x-c++',\r\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n  'text/html',\r\n  'text/x-java',\r\n  'application/json',\r\n  'text/markdown',\r\n  'application/pdf',\r\n  'text/x-php',\r\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n  'text/x-python',\r\n  'text/x-script.python',\r\n  'text/x-ruby',\r\n  'text/x-tex',\r\n  'text/plain',\r\n];\r\n\r\nexport const imageExtRegex = /\\.(jpg|jpeg|png|gif|webp|heic|heif)$/i;\r\n\r\nexport const excelMimeTypes =\r\n  /^application\\/(vnd\\.ms-excel|msexcel|x-msexcel|x-ms-excel|x-excel|x-dos_ms_excel|xls|x-xls|vnd\\.openxmlformats-officedocument\\.spreadsheetml\\.sheet)$/;\r\n\r\nexport const textMimeTypes =\r\n  /^(text\\/(x-c|x-csharp|tab-separated-values|x-c\\+\\+|x-h|x-java|html|markdown|x-php|x-python|x-script\\.python|x-ruby|x-tex|plain|css|vtt|javascript|csv))$/;\r\n\r\nexport const applicationMimeTypes =\r\n  /^(application\\/(epub\\+zip|csv|json|pdf|x-tar|typescript|vnd\\.openxmlformats-officedocument\\.(wordprocessingml\\.document|presentationml\\.presentation|spreadsheetml\\.sheet)|xml|zip))$/;\r\n\r\nexport const imageMimeTypes = /^image\\/(jpeg|gif|png|webp|heic|heif)$/;\r\n\r\nexport const audioMimeTypes =\r\n  /^audio\\/(mp3|mpeg|mpeg3|wav|wave|x-wav|ogg|vorbis|mp4|x-m4a|flac|x-flac|webm)$/;\r\n\r\nexport const defaultOCRMimeTypes = [\r\n  imageMimeTypes,\r\n  /^application\\/pdf$/,\r\n  /^application\\/vnd\\.openxmlformats-officedocument\\.(wordprocessingml\\.document|presentationml\\.presentation|spreadsheetml\\.sheet)$/,\r\n  /^application\\/vnd\\.ms-(word|powerpoint|excel)$/,\r\n  /^application\\/epub\\+zip$/,\r\n];\r\n\r\nexport const defaultTextMimeTypes = [/^[\\w.-]+\\/[\\w.-]+$/];\r\n\r\nexport const defaultSTTMimeTypes = [audioMimeTypes];\r\n\r\nexport const supportedMimeTypes = [\r\n  textMimeTypes,\r\n  excelMimeTypes,\r\n  applicationMimeTypes,\r\n  imageMimeTypes,\r\n  audioMimeTypes,\r\n  /** Supported by LC Code Interpreter PAI */\r\n  /^image\\/(svg|svg\\+xml)$/,\r\n];\r\n\r\nexport const codeInterpreterMimeTypes = [\r\n  textMimeTypes,\r\n  excelMimeTypes,\r\n  applicationMimeTypes,\r\n  imageMimeTypes,\r\n];\r\n\r\nexport const codeTypeMapping: { [key: string]: string } = {\r\n  c: 'text/x-c',\r\n  cs: 'text/x-csharp',\r\n  cpp: 'text/x-c++',\r\n  h: 'text/x-h',\r\n  md: 'text/markdown',\r\n  php: 'text/x-php',\r\n  py: 'text/x-python',\r\n  rb: 'text/x-ruby',\r\n  tex: 'text/x-tex',\r\n  js: 'text/javascript',\r\n  sh: 'application/x-sh',\r\n  ts: 'application/typescript',\r\n  tar: 'application/x-tar',\r\n  zip: 'application/zip',\r\n  yml: 'application/x-yaml',\r\n  yaml: 'application/x-yaml',\r\n  log: 'text/plain',\r\n  tsv: 'text/tab-separated-values',\r\n};\r\n\r\nexport const retrievalMimeTypes = [\r\n  /^(text\\/(x-c|x-c\\+\\+|x-h|html|x-java|markdown|x-php|x-python|x-script\\.python|x-ruby|x-tex|plain|vtt|xml))$/,\r\n  /^(application\\/(json|pdf|vnd\\.openxmlformats-officedocument\\.(wordprocessingml\\.document|presentationml\\.presentation)))$/,\r\n];\r\n\r\nexport const megabyte = 1024 * 1024;\r\n/** Helper function to get megabytes value */\r\nexport const mbToBytes = (mb: number): number => mb * megabyte;\r\n\r\nconst defaultSizeLimit = mbToBytes(512);\r\nconst defaultTokenLimit = 100000;\r\nconst assistantsFileConfig = {\r\n  fileLimit: 10,\r\n  fileSizeLimit: defaultSizeLimit,\r\n  totalSizeLimit: defaultSizeLimit,\r\n  supportedMimeTypes,\r\n  disabled: false,\r\n};\r\n\r\nexport const fileConfig = {\r\n  endpoints: {\r\n    [EModelEndpoint.assistants]: assistantsFileConfig,\r\n    [EModelEndpoint.azureAssistants]: assistantsFileConfig,\r\n    [EModelEndpoint.agents]: assistantsFileConfig,\r\n    default: {\r\n      fileLimit: 10,\r\n      fileSizeLimit: defaultSizeLimit,\r\n      totalSizeLimit: defaultSizeLimit,\r\n      supportedMimeTypes,\r\n      disabled: false,\r\n    },\r\n  },\r\n  serverFileSizeLimit: defaultSizeLimit,\r\n  avatarSizeLimit: mbToBytes(2),\r\n  fileTokenLimit: defaultTokenLimit,\r\n  clientImageResize: {\r\n    enabled: false,\r\n    maxWidth: 1900,\r\n    maxHeight: 1900,\r\n    quality: 0.92,\r\n  },\r\n  ocr: {\r\n    supportedMimeTypes: defaultOCRMimeTypes,\r\n  },\r\n  text: {\r\n    supportedMimeTypes: defaultTextMimeTypes,\r\n  },\r\n  stt: {\r\n    supportedMimeTypes: defaultSTTMimeTypes,\r\n  },\r\n  checkType: function (fileType: string, supportedTypes: RegExp[] = supportedMimeTypes) {\r\n    return supportedTypes.some((regex) => regex.test(fileType));\r\n  },\r\n};\r\n\r\nconst supportedMimeTypesSchema = z\r\n  .array(z.any())\r\n  .optional()\r\n  .refine(\r\n    (mimeTypes) => {\r\n      if (!mimeTypes) {\r\n        return true;\r\n      }\r\n      return mimeTypes.every(\r\n        (mimeType) => mimeType instanceof RegExp || typeof mimeType === 'string',\r\n      );\r\n    },\r\n    {\r\n      message: 'Each mimeType must be a string or a RegExp object.',\r\n    },\r\n  );\r\n\r\nexport const endpointFileConfigSchema = z.object({\r\n  disabled: z.boolean().optional(),\r\n  fileLimit: z.number().min(0).optional(),\r\n  fileSizeLimit: z.number().min(0).optional(),\r\n  totalSizeLimit: z.number().min(0).optional(),\r\n  supportedMimeTypes: supportedMimeTypesSchema.optional(),\r\n});\r\n\r\nexport const fileConfigSchema = z.object({\r\n  endpoints: z.record(endpointFileConfigSchema).optional(),\r\n  serverFileSizeLimit: z.number().min(0).optional(),\r\n  avatarSizeLimit: z.number().min(0).optional(),\r\n  fileTokenLimit: z.number().min(0).optional(),\r\n  imageGeneration: z\r\n    .object({\r\n      percentage: z.number().min(0).max(100).optional(),\r\n      px: z.number().min(0).optional(),\r\n    })\r\n    .optional(),\r\n  clientImageResize: z\r\n    .object({\r\n      enabled: z.boolean().optional(),\r\n      maxWidth: z.number().min(0).optional(),\r\n      maxHeight: z.number().min(0).optional(),\r\n      quality: z.number().min(0).max(1).optional(),\r\n    })\r\n    .optional(),\r\n  ocr: z\r\n    .object({\r\n      supportedMimeTypes: supportedMimeTypesSchema.optional(),\r\n    })\r\n    .optional(),\r\n  text: z\r\n    .object({\r\n      supportedMimeTypes: supportedMimeTypesSchema.optional(),\r\n    })\r\n    .optional(),\r\n});\r\n\r\n/** Helper function to safely convert string patterns to RegExp objects */\r\nexport const convertStringsToRegex = (patterns: string[]): RegExp[] =>\r\n  patterns.reduce((acc: RegExp[], pattern) => {\r\n    try {\r\n      const regex = new RegExp(pattern);\r\n      acc.push(regex);\r\n    } catch (error) {\r\n      console.error(`Invalid regex pattern \"${pattern}\" skipped.`, error);\r\n    }\r\n    return acc;\r\n  }, []);\r\n\r\nexport function mergeFileConfig(dynamic: z.infer<typeof fileConfigSchema> | undefined): FileConfig {\r\n  const mergedConfig: FileConfig = {\r\n    ...fileConfig,\r\n    ocr: {\r\n      ...fileConfig.ocr,\r\n      supportedMimeTypes: fileConfig.ocr?.supportedMimeTypes || [],\r\n    },\r\n    text: {\r\n      ...fileConfig.text,\r\n      supportedMimeTypes: fileConfig.text?.supportedMimeTypes || [],\r\n    },\r\n    stt: {\r\n      ...fileConfig.stt,\r\n      supportedMimeTypes: fileConfig.stt?.supportedMimeTypes || [],\r\n    },\r\n  };\r\n  if (!dynamic) {\r\n    return mergedConfig;\r\n  }\r\n\r\n  if (dynamic.serverFileSizeLimit !== undefined) {\r\n    mergedConfig.serverFileSizeLimit = mbToBytes(dynamic.serverFileSizeLimit);\r\n  }\r\n\r\n  if (dynamic.avatarSizeLimit !== undefined) {\r\n    mergedConfig.avatarSizeLimit = mbToBytes(dynamic.avatarSizeLimit);\r\n  }\r\n\r\n  if (dynamic.fileTokenLimit !== undefined) {\r\n    mergedConfig.fileTokenLimit = dynamic.fileTokenLimit;\r\n  }\r\n\r\n  // Merge clientImageResize configuration\r\n  if (dynamic.clientImageResize !== undefined) {\r\n    mergedConfig.clientImageResize = {\r\n      ...mergedConfig.clientImageResize,\r\n      ...dynamic.clientImageResize,\r\n    };\r\n  }\r\n\r\n  if (dynamic.ocr !== undefined) {\r\n    mergedConfig.ocr = {\r\n      ...mergedConfig.ocr,\r\n      ...dynamic.ocr,\r\n    };\r\n    if (dynamic.ocr.supportedMimeTypes) {\r\n      mergedConfig.ocr.supportedMimeTypes = convertStringsToRegex(dynamic.ocr.supportedMimeTypes);\r\n    }\r\n  }\r\n\r\n  if (dynamic.text !== undefined) {\r\n    mergedConfig.text = {\r\n      ...mergedConfig.text,\r\n      ...dynamic.text,\r\n    };\r\n    if (dynamic.text.supportedMimeTypes) {\r\n      mergedConfig.text.supportedMimeTypes = convertStringsToRegex(dynamic.text.supportedMimeTypes);\r\n    }\r\n  }\r\n\r\n  if (!dynamic.endpoints) {\r\n    return mergedConfig;\r\n  }\r\n\r\n  for (const key in dynamic.endpoints) {\r\n    const dynamicEndpoint = (dynamic.endpoints as Record<string, EndpointFileConfig>)[key];\r\n\r\n    if (!mergedConfig.endpoints[key]) {\r\n      mergedConfig.endpoints[key] = {};\r\n    }\r\n\r\n    const mergedEndpoint = mergedConfig.endpoints[key];\r\n\r\n    if (dynamicEndpoint.disabled === true) {\r\n      mergedEndpoint.disabled = true;\r\n      mergedEndpoint.fileLimit = 0;\r\n      mergedEndpoint.fileSizeLimit = 0;\r\n      mergedEndpoint.totalSizeLimit = 0;\r\n      mergedEndpoint.supportedMimeTypes = [];\r\n      continue;\r\n    }\r\n\r\n    if (dynamicEndpoint.fileSizeLimit !== undefined) {\r\n      mergedEndpoint.fileSizeLimit = mbToBytes(dynamicEndpoint.fileSizeLimit);\r\n    }\r\n\r\n    if (dynamicEndpoint.totalSizeLimit !== undefined) {\r\n      mergedEndpoint.totalSizeLimit = mbToBytes(dynamicEndpoint.totalSizeLimit);\r\n    }\r\n\r\n    const configKeys = ['fileLimit'] as const;\r\n    configKeys.forEach((field) => {\r\n      if (dynamicEndpoint[field] !== undefined) {\r\n        mergedEndpoint[field] = dynamicEndpoint[field];\r\n      }\r\n    });\r\n\r\n    if (dynamicEndpoint.supportedMimeTypes) {\r\n      mergedEndpoint.supportedMimeTypes = convertStringsToRegex(\r\n        dynamicEndpoint.supportedMimeTypes as unknown as string[],\r\n      );\r\n    }\r\n  }\r\n\r\n  return mergedConfig;\r\n}\r\n","/* eslint-disable @typescript-eslint/no-namespace */\r\nimport { StepTypes, ContentTypes, ToolCallTypes } from './runs';\r\nimport type { TAttachment, TPlugin } from 'src/schemas';\r\nimport type { FunctionToolCall } from './assistants';\r\n\r\nexport namespace Agents {\r\n  export type MessageType = 'human' | 'ai' | 'generic' | 'system' | 'function' | 'tool' | 'remove';\r\n\r\n  export type ImageDetail = 'auto' | 'low' | 'high';\r\n\r\n  export type ReasoningContentText = {\r\n    type: ContentTypes.THINK;\r\n    think: string;\r\n  };\r\n\r\n  export type MessageContentText = {\r\n    type: ContentTypes.TEXT;\r\n    text: string;\r\n    tool_call_ids?: string[];\r\n  };\r\n\r\n  export type AgentUpdate = {\r\n    type: ContentTypes.AGENT_UPDATE;\r\n    agent_update: {\r\n      index: number;\r\n      runId: string;\r\n      agentId: string;\r\n    };\r\n  };\r\n\r\n  export type MessageContentImageUrl = {\r\n    type: ContentTypes.IMAGE_URL;\r\n    image_url: string | { url: string; detail?: ImageDetail };\r\n  };\r\n\r\n  export type MessageContentComplex =\r\n    | ReasoningContentText\r\n    | AgentUpdate\r\n    | MessageContentText\r\n    | MessageContentImageUrl\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    | (Record<string, any> & { type?: ContentTypes | string })\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    | (Record<string, any> & { type?: never });\r\n\r\n  export type MessageContent = string | MessageContentComplex[];\r\n\r\n  /**\r\n   * A call to a tool.\r\n   */\r\n  export type ToolCall = {\r\n    /** Type (\"tool_call\") according to Assistants Tool Call Structure */\r\n    type: ToolCallTypes.TOOL_CALL;\r\n    /** The name of the tool to be called */\r\n    name: string;\r\n\r\n    /** The arguments to the tool call */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    args?: string | Record<string, any>;\r\n\r\n    /** If provided, an identifier associated with the tool call */\r\n    id?: string;\r\n    /** If provided, the output of the tool call */\r\n    output?: string;\r\n    /** Auth URL */\r\n    auth?: string;\r\n    /** Expiration time */\r\n    expires_at?: number;\r\n  };\r\n\r\n  export type ToolEndEvent = {\r\n    /** The Step Id of the Tool Call */\r\n    id: string;\r\n    /** The Completed Tool Call */\r\n    tool_call?: ToolCall;\r\n    /** The content index of the tool call */\r\n    index: number;\r\n  };\r\n\r\n  export type ToolCallContent = {\r\n    type: ContentTypes.TOOL_CALL;\r\n    tool_call?: ToolCall;\r\n  };\r\n\r\n  /**\r\n   * A chunk of a tool call (e.g., as part of a stream).\r\n   * When merging ToolCallChunks (e.g., via AIMessageChunk.__add__),\r\n   * all string attributes are concatenated. Chunks are only merged if their\r\n   * values of `index` are equal and not None.\r\n   *\r\n   * @example\r\n   * ```ts\r\n   * const leftChunks = [\r\n   *   {\r\n   *     name: \"foo\",\r\n   *     args: '{\"a\":',\r\n   *     index: 0\r\n   *   }\r\n   * ];\r\n   *\r\n   * const leftAIMessageChunk = new AIMessageChunk({\r\n   *   content: \"\",\r\n   *   tool_call_chunks: leftChunks\r\n   * });\r\n   *\r\n   * const rightChunks = [\r\n   *   {\r\n   *     name: undefined,\r\n   *     args: '1}',\r\n   *     index: 0\r\n   *   }\r\n   * ];\r\n   *\r\n   * const rightAIMessageChunk = new AIMessageChunk({\r\n   *   content: \"\",\r\n   *   tool_call_chunks: rightChunks\r\n   * });\r\n   *\r\n   * const result = leftAIMessageChunk.concat(rightAIMessageChunk);\r\n   * // result.tool_call_chunks is equal to:\r\n   * // [\r\n   * //   {\r\n   * //     name: \"foo\",\r\n   * //     args: '{\"a\":1}'\r\n   * //     index: 0\r\n   * //   }\r\n   * // ]\r\n   * ```\r\n   *\r\n   * @property {string} [name] - If provided, a substring of the name of the tool to be called\r\n   * @property {string} [args] - If provided, a JSON substring of the arguments to the tool call\r\n   * @property {string} [id] - If provided, a substring of an identifier for the tool call\r\n   * @property {number} [index] - If provided, the index of the tool call in a sequence\r\n   */\r\n  export type ToolCallChunk = {\r\n    name?: string;\r\n\r\n    args?: string;\r\n\r\n    id?: string;\r\n\r\n    index?: number;\r\n\r\n    type?: 'tool_call_chunk';\r\n  };\r\n\r\n  /** Event names are of the format: on_[runnable_type]_(start|stream|end).\r\n\r\n  Runnable types are one of:\r\n\r\n  llm - used by non chat models\r\n  chat_model - used by chat models\r\n  prompt -- e.g., ChatPromptTemplate\r\n  tool -- LangChain tools\r\n  chain - most Runnables are of this type\r\n  Further, the events are categorized as one of:\r\n\r\n  start - when the runnable starts\r\n  stream - when the runnable is streaming\r\n  end - when the runnable ends\r\n  start, stream and end are associated with slightly different data payload.\r\n\r\n  Please see the documentation for EventData for more details. */\r\n  export type EventName = string;\r\n  export type RunStep = {\r\n    type: StepTypes;\r\n    id: string; // #new\r\n    runId?: string; // #new\r\n    index: number; // #new\r\n    stepIndex?: number; // #new\r\n    stepDetails: StepDetails;\r\n    usage: null | object;\r\n  };\r\n  /**\r\n   * Represents a run step delta i.e. any changed fields on a run step during\r\n   * streaming.\r\n   */\r\n  export interface RunStepDeltaEvent {\r\n    /**\r\n     * The identifier of the run step, which can be referenced in API endpoints.\r\n     */\r\n    id: string;\r\n    /**\r\n     * The delta containing the fields that have changed on the run step.\r\n     */\r\n    delta: ToolCallDelta;\r\n  }\r\n  export type StepDetails = MessageCreationDetails | ToolCallsDetails;\r\n  export type MessageCreationDetails = {\r\n    type: StepTypes.MESSAGE_CREATION;\r\n    message_creation: {\r\n      message_id: string;\r\n    };\r\n  };\r\n  export type ToolCallsDetails = {\r\n    type: StepTypes.TOOL_CALLS;\r\n    tool_calls: AgentToolCall[];\r\n  };\r\n  export type ToolCallDelta = {\r\n    type: StepTypes.TOOL_CALLS | string;\r\n    tool_calls?: ToolCallChunk[];\r\n    auth?: string;\r\n    expires_at?: number;\r\n  };\r\n  export type AgentToolCall = FunctionToolCall | ToolCall;\r\n  export interface ExtendedMessageContent {\r\n    type?: string;\r\n    text?: string;\r\n    input?: string;\r\n    index?: number;\r\n    id?: string;\r\n    name?: string;\r\n  }\r\n  /**\r\n   * Represents a message delta i.e. any changed fields on a message during\r\n   * streaming.\r\n   */\r\n  export interface MessageDeltaEvent {\r\n    /**\r\n     * The identifier of the message, which can be referenced in API endpoints.\r\n     */\r\n    id: string;\r\n    /**\r\n     * The delta containing the fields that have changed on the Message.\r\n     */\r\n    delta: MessageDelta;\r\n  }\r\n  /**\r\n   * The delta containing the fields that have changed on the Message.\r\n   */\r\n  export interface MessageDelta {\r\n    /**\r\n     * The content of the message in array of text and/or images.\r\n     */\r\n    content?: Agents.MessageContentComplex[];\r\n  }\r\n\r\n  /**\r\n   * Represents a reasoning delta i.e. any changed fields on a message during\r\n   * streaming.\r\n   */\r\n  export interface ReasoningDeltaEvent {\r\n    /**\r\n     * The identifier of the message, which can be referenced in API endpoints.\r\n     */\r\n    id: string;\r\n\r\n    /**\r\n     * The delta containing the fields that have changed.\r\n     */\r\n    delta: ReasoningDelta;\r\n  }\r\n\r\n  /**\r\n   * The reasoning delta containing the fields that have changed on the Message.\r\n   */\r\n  export interface ReasoningDelta {\r\n    /**\r\n     * The content of the message in array of text and/or images.\r\n     */\r\n    content?: MessageContentComplex[];\r\n  }\r\n\r\n  export type ReasoningDeltaUpdate = { type: ContentTypes.THINK; think: string };\r\n  export type ContentType =\r\n    | ContentTypes.THINK\r\n    | ContentTypes.TEXT\r\n    | ContentTypes.IMAGE_URL\r\n    | string;\r\n}\r\n\r\nexport type ToolCallResult = {\r\n  user: string;\r\n  toolId: string;\r\n  result?: unknown;\r\n  messageId: string;\r\n  partIndex?: number;\r\n  blockIndex?: number;\r\n  conversationId: string;\r\n  attachments?: TAttachment[];\r\n};\r\n\r\nexport enum AuthTypeEnum {\r\n  ServiceHttp = 'service_http',\r\n  OAuth = 'oauth',\r\n  None = 'none',\r\n}\r\n\r\nexport enum AuthorizationTypeEnum {\r\n  Bearer = 'bearer',\r\n  Basic = 'basic',\r\n  Custom = 'custom',\r\n}\r\n\r\nexport enum TokenExchangeMethodEnum {\r\n  DefaultPost = 'default_post',\r\n  BasicAuthHeader = 'basic_auth_header',\r\n}\r\n\r\nexport type Action = {\r\n  action_id: string;\r\n  type?: string;\r\n  settings?: Record<string, unknown>;\r\n  metadata: ActionMetadata;\r\n  version: number | string;\r\n} & ({ assistant_id: string; agent_id?: never } | { assistant_id?: never; agent_id: string });\r\n\r\nexport type ActionMetadata = {\r\n  api_key?: string;\r\n  auth?: ActionAuth;\r\n  domain?: string;\r\n  privacy_policy_url?: string;\r\n  raw_spec?: string;\r\n  oauth_client_id?: string;\r\n  oauth_client_secret?: string;\r\n};\r\n\r\nexport type ActionAuth = {\r\n  authorization_type?: AuthorizationTypeEnum;\r\n  custom_auth_header?: string;\r\n  type?: AuthTypeEnum;\r\n  authorization_content_type?: string;\r\n  authorization_url?: string;\r\n  client_url?: string;\r\n  scope?: string;\r\n  token_exchange_method?: TokenExchangeMethodEnum;\r\n};\r\n\r\nexport type ActionMetadataRuntime = ActionMetadata & {\r\n  oauth_access_token?: string;\r\n  oauth_refresh_token?: string;\r\n  oauth_token_expires_at?: Date;\r\n};\r\n\r\nexport type MCP = {\r\n  mcp_id: string;\r\n  metadata: MCPMetadata;\r\n} & ({ assistant_id: string; agent_id?: never } | { assistant_id?: never; agent_id?: string });\r\n\r\nexport type MCPMetadata = Omit<ActionMetadata, 'auth'> & {\r\n  name?: string;\r\n  description?: string;\r\n  url?: string;\r\n  tools?: string[];\r\n  auth?: MCPAuth;\r\n  icon?: string;\r\n  trust?: boolean;\r\n};\r\n\r\nexport type MCPAuth = ActionAuth;\r\n\r\nexport type AgentToolType = {\r\n  tool_id: string;\r\n  metadata: ToolMetadata;\r\n} & ({ assistant_id: string; agent_id?: never } | { assistant_id?: never; agent_id?: string });\r\n\r\nexport type ToolMetadata = TPlugin;\r\n","import { z } from 'zod';\r\nimport { TokenExchangeMethodEnum } from './types/agents';\r\nimport { extractEnvVariable } from './utils';\r\n\r\nconst BaseOptionsSchema = z.object({\r\n  /**\r\n   * Controls whether the MCP server is initialized during application startup.\r\n   * - true (default): Server is initialized during app startup and included in app-level connections\r\n   * - false: Skips initialization at startup and excludes from app-level connections - useful for servers\r\n   *   requiring manual authentication (e.g., GitHub PAT tokens) that need to be configured through the UI after startup\r\n   */\r\n  startup: z.boolean().optional(),\r\n  iconPath: z.string().optional(),\r\n  timeout: z.number().optional(),\r\n  initTimeout: z.number().optional(),\r\n  /** Controls visibility in chat dropdown menu (MCPSelect) */\r\n  chatMenu: z.boolean().optional(),\r\n  /**\r\n   * Controls server instruction behavior:\r\n   * - undefined/not set: No instructions included (default)\r\n   * - true: Use server-provided instructions\r\n   * - string: Use custom instructions (overrides server-provided)\r\n   */\r\n  serverInstructions: z.union([z.boolean(), z.string()]).optional(),\r\n  /**\r\n   * Whether this server requires OAuth authentication\r\n   * If not specified, will be auto-detected during construction\r\n   */\r\n  requiresOAuth: z.boolean().optional(),\r\n  /**\r\n   * OAuth configuration for SSE and Streamable HTTP transports\r\n   * - Optional: OAuth can be auto-discovered on 401 responses\r\n   * - Pre-configured values will skip discovery steps\r\n   */\r\n  oauth: z\r\n    .object({\r\n      /** OAuth authorization endpoint (optional - can be auto-discovered) */\r\n      authorization_url: z.string().url().optional(),\r\n      /** OAuth token endpoint (optional - can be auto-discovered) */\r\n      token_url: z.string().url().optional(),\r\n      /** OAuth client ID (optional - can use dynamic registration) */\r\n      client_id: z.string().optional(),\r\n      /** OAuth client secret (optional - can use dynamic registration) */\r\n      client_secret: z.string().optional(),\r\n      /** OAuth scopes to request */\r\n      scope: z.string().optional(),\r\n      /** OAuth redirect URI (defaults to /api/mcp/{serverName}/oauth/callback) */\r\n      redirect_uri: z.string().url().optional(),\r\n      /** Token exchange method */\r\n      token_exchange_method: z.nativeEnum(TokenExchangeMethodEnum).optional(),\r\n      /** Supported grant types (defaults to ['authorization_code', 'refresh_token']) */\r\n      grant_types_supported: z.array(z.string()).optional(),\r\n      /** Supported token endpoint authentication methods (defaults to ['client_secret_basic', 'client_secret_post']) */\r\n      token_endpoint_auth_methods_supported: z.array(z.string()).optional(),\r\n      /** Supported response types (defaults to ['code']) */\r\n      response_types_supported: z.array(z.string()).optional(),\r\n      /** Supported code challenge methods (defaults to ['S256', 'plain']) */\r\n      code_challenge_methods_supported: z.array(z.string()).optional(),\r\n      /** OAuth revocation endpoint (optional - can be auto-discovered) */\r\n      revocation_endpoint: z.string().url().optional(),\r\n      /** OAuth revocation endpoint authentication methods supported (optional - can be auto-discovered) */\r\n      revocation_endpoint_auth_methods_supported: z.array(z.string()).optional(),\r\n    })\r\n    .optional(),\r\n  customUserVars: z\r\n    .record(\r\n      z.string(),\r\n      z.object({\r\n        title: z.string(),\r\n        description: z.string(),\r\n      }),\r\n    )\r\n    .optional(),\r\n});\r\n\r\nexport const StdioOptionsSchema = BaseOptionsSchema.extend({\r\n  type: z.literal('stdio').optional(),\r\n  /**\r\n   * The executable to run to start the server.\r\n   */\r\n  command: z.string(),\r\n  /**\r\n   * Command line arguments to pass to the executable.\r\n   */\r\n  args: z.array(z.string()),\r\n  /**\r\n   * The environment to use when spawning the process.\r\n   *\r\n   * If not specified, the result of getDefaultEnvironment() will be used.\r\n   * Environment variables can be referenced using ${VAR_NAME} syntax.\r\n   */\r\n  env: z\r\n    .record(z.string(), z.string())\r\n    .optional()\r\n    .transform((env) => {\r\n      if (!env) {\r\n        return env;\r\n      }\r\n\r\n      const processedEnv: Record<string, string> = {};\r\n      for (const [key, value] of Object.entries(env)) {\r\n        processedEnv[key] = extractEnvVariable(value);\r\n      }\r\n      return processedEnv;\r\n    }),\r\n  /**\r\n   * How to handle stderr of the child process. This matches the semantics of Node's `child_process.spawn`.\r\n   *\r\n   * @type {import('node:child_process').IOType | import('node:stream').Stream | number}\r\n   *\r\n   * The default is \"inherit\", meaning messages to stderr will be printed to the parent process's stderr.\r\n   */\r\n  stderr: z.any().optional(),\r\n});\r\n\r\nexport const WebSocketOptionsSchema = BaseOptionsSchema.extend({\r\n  type: z.literal('websocket').optional(),\r\n  url: z\r\n    .string()\r\n    .transform((val: string) => extractEnvVariable(val))\r\n    .pipe(z.string().url())\r\n    .refine(\r\n      (val: string) => {\r\n        const protocol = new URL(val).protocol;\r\n        return protocol === 'ws:' || protocol === 'wss:';\r\n      },\r\n      {\r\n        message: 'WebSocket URL must start with ws:// or wss://',\r\n      },\r\n    ),\r\n});\r\n\r\nexport const SSEOptionsSchema = BaseOptionsSchema.extend({\r\n  type: z.literal('sse').optional(),\r\n  headers: z.record(z.string(), z.string()).optional(),\r\n  url: z\r\n    .string()\r\n    .transform((val: string) => extractEnvVariable(val))\r\n    .pipe(z.string().url())\r\n    .refine(\r\n      (val: string) => {\r\n        const protocol = new URL(val).protocol;\r\n        return protocol !== 'ws:' && protocol !== 'wss:';\r\n      },\r\n      {\r\n        message: 'SSE URL must not start with ws:// or wss://',\r\n      },\r\n    ),\r\n});\r\n\r\nexport const StreamableHTTPOptionsSchema = BaseOptionsSchema.extend({\r\n  type: z.union([z.literal('streamable-http'), z.literal('http')]),\r\n  headers: z.record(z.string(), z.string()).optional(),\r\n  url: z\r\n    .string()\r\n    .transform((val: string) => extractEnvVariable(val))\r\n    .pipe(z.string().url())\r\n    .refine(\r\n      (val: string) => {\r\n        const protocol = new URL(val).protocol;\r\n        return protocol !== 'ws:' && protocol !== 'wss:';\r\n      },\r\n      {\r\n        message: 'Streamable HTTP URL must not start with ws:// or wss://',\r\n      },\r\n    ),\r\n});\r\n\r\nexport const MCPOptionsSchema = z.union([\r\n  StdioOptionsSchema,\r\n  WebSocketOptionsSchema,\r\n  SSEOptionsSchema,\r\n  StreamableHTTPOptionsSchema,\r\n]);\r\n\r\nexport const MCPServersSchema = z.record(z.string(), MCPOptionsSchema);\r\n\r\nexport type MCPOptions = z.infer<typeof MCPOptionsSchema>;\r\n","import type { AssistantsEndpoint } from './schemas';\r\nimport * as q from './types/queries';\r\nimport { ResourceType } from './accessPermissions';\r\n\r\nlet BASE_URL = '';\r\nif (\r\n  typeof process === 'undefined' ||\r\n  (process as typeof process & { browser?: boolean }).browser === true\r\n) {\r\n  // process is only available in node context, or process.browser is true in client-side code\r\n  // This is to ensure that the BASE_URL is set correctly based on the <base>\r\n  // element in the HTML document, if it exists.\r\n  const baseEl = document.querySelector('base');\r\n  BASE_URL = baseEl?.getAttribute('href') || '/';\r\n}\r\n\r\nif (BASE_URL && BASE_URL.endsWith('/')) {\r\n  BASE_URL = BASE_URL.slice(0, -1);\r\n}\r\n\r\nexport const apiBaseUrl = () => BASE_URL;\r\n\r\n// Testing this buildQuery function\r\nconst buildQuery = (params: Record<string, unknown>): string => {\r\n  const query = Object.entries(params)\r\n    .filter(([, value]) => {\r\n      if (Array.isArray(value)) {\r\n        return value.length > 0;\r\n      }\r\n      return value !== undefined && value !== null && value !== '';\r\n    })\r\n    .map(([key, value]) => {\r\n      if (Array.isArray(value)) {\r\n        return value.map((v) => `${key}=${encodeURIComponent(v)}`).join('&');\r\n      }\r\n      return `${key}=${encodeURIComponent(String(value))}`;\r\n    })\r\n    .join('&');\r\n  return query ? `?${query}` : '';\r\n};\r\n\r\nexport const health = () => `${BASE_URL}/health`;\r\nexport const user = () => `${BASE_URL}/api/user`;\r\n\r\nexport const balance = () => `${BASE_URL}/api/balance`;\r\n\r\nexport const userPlugins = () => `${BASE_URL}/api/user/plugins`;\r\n\r\nexport const deleteUser = () => `${BASE_URL}/api/user/delete`;\r\n\r\nconst messagesRoot = `${BASE_URL}/api/messages`;\r\n\r\nexport const messages = (params: q.MessagesListParams) => {\r\n  const { conversationId, messageId, ...rest } = params;\r\n\r\n  if (conversationId && messageId) {\r\n    return `${messagesRoot}/${conversationId}/${messageId}`;\r\n  }\r\n\r\n  if (conversationId) {\r\n    return `${messagesRoot}/${conversationId}`;\r\n  }\r\n\r\n  return `${messagesRoot}${buildQuery(rest)}`;\r\n};\r\n\r\nexport const messagesArtifacts = (messageId: string) => `${messagesRoot}/artifacts/${messageId}`;\r\n\r\nconst shareRoot = `${BASE_URL}/api/share`;\r\nexport const shareMessages = (shareId: string) => `${shareRoot}/${shareId}`;\r\nexport const getSharedLink = (conversationId: string) => `${shareRoot}/link/${conversationId}`;\r\nexport const getSharedLinks = (\r\n  pageSize: number,\r\n  isPublic: boolean,\r\n  sortBy: 'title' | 'createdAt',\r\n  sortDirection: 'asc' | 'desc',\r\n  search?: string,\r\n  cursor?: string,\r\n) =>\r\n  `${shareRoot}?pageSize=${pageSize}&isPublic=${isPublic}&sortBy=${sortBy}&sortDirection=${sortDirection}${\r\n    search ? `&search=${search}` : ''\r\n  }${cursor ? `&cursor=${cursor}` : ''}`;\r\nexport const createSharedLink = (conversationId: string) => `${shareRoot}/${conversationId}`;\r\nexport const updateSharedLink = (shareId: string) => `${shareRoot}/${shareId}`;\r\n\r\nconst keysEndpoint = `${BASE_URL}/api/keys`;\r\n\r\nexport const keys = () => keysEndpoint;\r\n\r\nexport const userKeyQuery = (name: string) => `${keysEndpoint}?name=${name}`;\r\n\r\nexport const revokeUserKey = (name: string) => `${keysEndpoint}/${name}`;\r\n\r\nexport const revokeAllUserKeys = () => `${keysEndpoint}?all=true`;\r\n\r\nexport const conversationsRoot = `${BASE_URL}/api/convos`;\r\n\r\nexport const conversations = (params: q.ConversationListParams) => {\r\n  return `${conversationsRoot}${buildQuery(params)}`;\r\n};\r\n\r\nexport const conversationById = (id: string) => `${conversationsRoot}/${id}`;\r\n\r\nexport const genTitle = () => `${conversationsRoot}/gen_title`;\r\n\r\nexport const updateConversation = () => `${conversationsRoot}/update`;\r\n\r\nexport const deleteConversation = () => `${conversationsRoot}`;\r\n\r\nexport const deleteAllConversation = () => `${conversationsRoot}/all`;\r\n\r\nexport const importConversation = () => `${conversationsRoot}/import`;\r\n\r\nexport const forkConversation = () => `${conversationsRoot}/fork`;\r\n\r\nexport const duplicateConversation = () => `${conversationsRoot}/duplicate`;\r\n\r\nexport const search = (q: string, cursor?: string | null) =>\r\n  `${BASE_URL}/api/search?q=${q}${cursor ? `&cursor=${cursor}` : ''}`;\r\n\r\nexport const searchEnabled = () => `${BASE_URL}/api/search/enable`;\r\n\r\nexport const presets = () => `${BASE_URL}/api/presets`;\r\n\r\nexport const deletePreset = () => `${BASE_URL}/api/presets/delete`;\r\n\r\nexport const aiEndpoints = () => `${BASE_URL}/api/endpoints`;\r\n\r\nexport const models = () => `${BASE_URL}/api/models`;\r\n\r\nexport const tokenizer = () => `${BASE_URL}/api/tokenizer`;\r\n\r\nexport const login = () => `${BASE_URL}/api/auth/login`;\r\n\r\nexport const logout = () => `${BASE_URL}/api/auth/logout`;\r\n\r\nexport const register = () => `${BASE_URL}/api/auth/register`;\r\n\r\nexport const loginFacebook = () => `${BASE_URL}/api/auth/facebook`;\r\n\r\nexport const loginGoogle = () => `${BASE_URL}/api/auth/google`;\r\n\r\nexport const refreshToken = (retry?: boolean) =>\r\n  `${BASE_URL}/api/auth/refresh${retry === true ? '?retry=true' : ''}`;\r\n\r\nexport const requestPasswordReset = () => `${BASE_URL}/api/auth/requestPasswordReset`;\r\n\r\nexport const resetPassword = () => `${BASE_URL}/api/auth/resetPassword`;\r\n\r\nexport const verifyEmail = () => `${BASE_URL}/api/user/verify`;\r\n\r\nexport const resendVerificationEmail = () => `${BASE_URL}/api/user/verify/resend`;\r\n\r\nexport const plugins = () => `${BASE_URL}/api/plugins`;\r\n\r\nexport const mcpReinitialize = (serverName: string) =>\r\n  `${BASE_URL}/api/mcp/${serverName}/reinitialize`;\r\nexport const mcpConnectionStatus = () => `${BASE_URL}/api/mcp/connection/status`;\r\nexport const mcpServerConnectionStatus = (serverName: string) =>\r\n  `${BASE_URL}/api/mcp/connection/status/${serverName}`;\r\nexport const mcpAuthValues = (serverName: string) => {\r\n  return `${BASE_URL}/api/mcp/${serverName}/auth-values`;\r\n};\r\n\r\nexport const cancelMCPOAuth = (serverName: string) => {\r\n  return `${BASE_URL}/api/mcp/oauth/cancel/${serverName}`;\r\n};\r\n\r\nexport const config = () => `${BASE_URL}/api/config`;\r\n\r\nexport const prompts = () => `${BASE_URL}/api/prompts`;\r\n\r\nexport const addPromptToGroup = (groupId: string) =>\r\n  `${BASE_URL}/api/prompts/groups/${groupId}/prompts`;\r\n\r\nexport const assistants = ({\r\n  path = '',\r\n  options,\r\n  version,\r\n  endpoint,\r\n  isAvatar,\r\n}: {\r\n  path?: string;\r\n  options?: object;\r\n  endpoint?: AssistantsEndpoint;\r\n  version: number | string;\r\n  isAvatar?: boolean;\r\n}) => {\r\n  let url = isAvatar === true ? `${images()}/assistants` : `${BASE_URL}/api/assistants/v${version}`;\r\n\r\n  if (path && path !== '') {\r\n    url += `/${path}`;\r\n  }\r\n\r\n  if (endpoint) {\r\n    options = {\r\n      ...(options ?? {}),\r\n      endpoint,\r\n    };\r\n  }\r\n\r\n  if (options && Object.keys(options).length > 0) {\r\n    const queryParams = new URLSearchParams(options as Record<string, string>).toString();\r\n    url += `?${queryParams}`;\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nexport const agents = ({ path = '', options }: { path?: string; options?: object }) => {\r\n  let url = `${BASE_URL}/api/agents`;\r\n\r\n  if (path && path !== '') {\r\n    url += `/${path}`;\r\n  }\r\n\r\n  if (options && Object.keys(options).length > 0) {\r\n    const queryParams = new URLSearchParams(options as Record<string, string>).toString();\r\n    url += `?${queryParams}`;\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nexport const mcp = {\r\n  tools: `${BASE_URL}/api/mcp/tools`,\r\n};\r\n\r\nexport const revertAgentVersion = (agent_id: string) => `${agents({ path: `${agent_id}/revert` })}`;\r\n\r\nexport const files = () => `${BASE_URL}/api/files`;\r\nexport const fileUpload = () => `${BASE_URL}/api/files`;\r\nexport const fileDelete = () => `${BASE_URL}/api/files`;\r\nexport const fileDownload = (userId: string, fileId: string) =>\r\n  `${BASE_URL}/api/files/download/${userId}/${fileId}`;\r\nexport const fileConfig = () => `${BASE_URL}/api/files/config`;\r\nexport const agentFiles = (agentId: string) => `${BASE_URL}/api/files/agent/${agentId}`;\r\n\r\nexport const images = () => `${files()}/images`;\r\n\r\nexport const avatar = () => `${images()}/avatar`;\r\n\r\nexport const speech = () => `${files()}/speech`;\r\n\r\nexport const speechToText = () => `${speech()}/stt`;\r\n\r\nexport const textToSpeech = () => `${speech()}/tts`;\r\n\r\nexport const textToSpeechManual = () => `${textToSpeech()}/manual`;\r\n\r\nexport const textToSpeechVoices = () => `${textToSpeech()}/voices`;\r\n\r\nexport const getCustomConfigSpeech = () => `${speech()}/config/get`;\r\n\r\nexport const getPromptGroup = (_id: string) => `${prompts()}/groups/${_id}`;\r\n\r\nexport const getPromptGroupsWithFilters = (filter: object) => {\r\n  let url = `${prompts()}/groups`;\r\n  // Filter out undefined/null values\r\n  const cleanedFilter = Object.entries(filter).reduce(\r\n    (acc, [key, value]) => {\r\n      if (value !== undefined && value !== null && value !== '') {\r\n        acc[key] = value;\r\n      }\r\n      return acc;\r\n    },\r\n    {} as Record<string, string>,\r\n  );\r\n\r\n  if (Object.keys(cleanedFilter).length > 0) {\r\n    const queryParams = new URLSearchParams(cleanedFilter).toString();\r\n    url += `?${queryParams}`;\r\n  }\r\n  return url;\r\n};\r\n\r\nexport const getPromptsWithFilters = (filter: object) => {\r\n  let url = prompts();\r\n  if (Object.keys(filter).length > 0) {\r\n    const queryParams = new URLSearchParams(filter as Record<string, string>).toString();\r\n    url += `?${queryParams}`;\r\n  }\r\n  return url;\r\n};\r\n\r\nexport const getPrompt = (_id: string) => `${prompts()}/${_id}`;\r\n\r\nexport const getRandomPrompts = (limit: number, skip: number) =>\r\n  `${prompts()}/random?limit=${limit}&skip=${skip}`;\r\n\r\nexport const postPrompt = prompts;\r\n\r\nexport const updatePromptGroup = getPromptGroup;\r\n\r\nexport const updatePromptLabels = (_id: string) => `${getPrompt(_id)}/labels`;\r\n\r\nexport const updatePromptTag = (_id: string) => `${getPrompt(_id)}/tags/production`;\r\n\r\nexport const deletePromptGroup = getPromptGroup;\r\n\r\nexport const deletePrompt = ({ _id, groupId }: { _id: string; groupId: string }) => {\r\n  return `${prompts()}/${_id}?groupId=${groupId}`;\r\n};\r\n\r\nexport const getCategories = () => `${BASE_URL}/api/categories`;\r\n\r\nexport const getAllPromptGroups = () => `${prompts()}/all`;\r\n\r\n/* Roles */\r\nexport const roles = () => `${BASE_URL}/api/roles`;\r\nexport const getRole = (roleName: string) => `${roles()}/${roleName.toLowerCase()}`;\r\nexport const updatePromptPermissions = (roleName: string) => `${getRole(roleName)}/prompts`;\r\nexport const updateMemoryPermissions = (roleName: string) => `${getRole(roleName)}/memories`;\r\nexport const updateAgentPermissions = (roleName: string) => `${getRole(roleName)}/agents`;\r\nexport const updatePeoplePickerPermissions = (roleName: string) =>\r\n  `${getRole(roleName)}/people-picker`;\r\n\r\nexport const updateMarketplacePermissions = (roleName: string) =>\r\n  `${getRole(roleName)}/marketplace`;\r\n\r\n/* Conversation Tags */\r\nexport const conversationTags = (tag?: string) =>\r\n  `${BASE_URL}/api/tags${tag != null && tag ? `/${encodeURIComponent(tag)}` : ''}`;\r\n\r\nexport const conversationTagsList = (pageNumber: string, sort?: string, order?: string) =>\r\n  `${conversationTags()}/list?pageNumber=${pageNumber}${sort ? `&sort=${sort}` : ''}${\r\n    order ? `&order=${order}` : ''\r\n  }`;\r\n\r\nexport const addTagToConversation = (conversationId: string) =>\r\n  `${conversationTags()}/convo/${conversationId}`;\r\n\r\nexport const userTerms = () => `${BASE_URL}/api/user/terms`;\r\nexport const acceptUserTerms = () => `${BASE_URL}/api/user/terms/accept`;\r\nexport const banner = () => `${BASE_URL}/api/banner`;\r\n\r\n// Message Feedback\r\nexport const feedback = (conversationId: string, messageId: string) =>\r\n  `${BASE_URL}/api/messages/${conversationId}/${messageId}/feedback`;\r\n\r\n// Two-Factor Endpoints\r\nexport const enableTwoFactor = () => `${BASE_URL}/api/auth/2fa/enable`;\r\nexport const verifyTwoFactor = () => `${BASE_URL}/api/auth/2fa/verify`;\r\nexport const confirmTwoFactor = () => `${BASE_URL}/api/auth/2fa/confirm`;\r\nexport const disableTwoFactor = () => `${BASE_URL}/api/auth/2fa/disable`;\r\nexport const regenerateBackupCodes = () => `${BASE_URL}/api/auth/2fa/backup/regenerate`;\r\nexport const verifyTwoFactorTemp = () => `${BASE_URL}/api/auth/2fa/verify-temp`;\r\n\r\n/* Memories */\r\nexport const memories = () => `${BASE_URL}/api/memories`;\r\nexport const memory = (key: string) => `${memories()}/${encodeURIComponent(key)}`;\r\nexport const memoryPreferences = () => `${memories()}/preferences`;\r\n\r\nexport const searchPrincipals = (params: q.PrincipalSearchParams) => {\r\n  const { q: query, limit, types } = params;\r\n  let url = `${BASE_URL}/api/permissions/search-principals?q=${encodeURIComponent(query)}`;\r\n\r\n  if (limit !== undefined) {\r\n    url += `&limit=${limit}`;\r\n  }\r\n\r\n  if (types && types.length > 0) {\r\n    url += `&types=${types.join(',')}`;\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nexport const getAccessRoles = (resourceType: ResourceType) =>\r\n  `${BASE_URL}/api/permissions/${resourceType}/roles`;\r\n\r\nexport const getResourcePermissions = (resourceType: ResourceType, resourceId: string) =>\r\n  `${BASE_URL}/api/permissions/${resourceType}/${resourceId}`;\r\n\r\nexport const updateResourcePermissions = (resourceType: ResourceType, resourceId: string) =>\r\n  `${BASE_URL}/api/permissions/${resourceType}/${resourceId}`;\r\n\r\nexport const getEffectivePermissions = (resourceType: ResourceType, resourceId: string) =>\r\n  `${BASE_URL}/api/permissions/${resourceType}/${resourceId}/effective`;\r\n\r\n// SharePoint Graph API Token\r\nexport const graphToken = (scopes: string) =>\r\n  `${BASE_URL}/api/auth/graph-token?scopes=${encodeURIComponent(scopes)}`;\r\n","import { z } from 'zod';\r\nimport type { ZodError } from 'zod';\r\nimport type { TModelsConfig } from './types';\r\nimport { EModelEndpoint, eModelEndpointSchema } from './schemas';\r\nimport { specsConfigSchema, TSpecsConfig } from './models';\r\nimport { fileConfigSchema } from './file-config';\r\nimport { FileSources } from './types/files';\r\nimport { MCPServersSchema } from './mcp';\r\nimport { apiBaseUrl } from './api-endpoints';\r\n\r\nexport const defaultSocialLogins = ['google', 'facebook', 'openid', 'github', 'discord', 'saml'];\r\n\r\nexport const defaultRetrievalModels = [\r\n  'gpt-4o',\r\n  'o1-preview-2024-09-12',\r\n  'o1-preview',\r\n  'o1-mini-2024-09-12',\r\n  'o1-mini',\r\n  'o3-mini',\r\n  'chatgpt-4o-latest',\r\n  'gpt-4o-2024-05-13',\r\n  'gpt-4o-2024-08-06',\r\n  'gpt-4o-mini',\r\n  'gpt-4o-mini-2024-07-18',\r\n  'gpt-4-turbo-preview',\r\n  'gpt-3.5-turbo-0125',\r\n  'gpt-4-0125-preview',\r\n  'gpt-4-1106-preview',\r\n  'gpt-3.5-turbo-1106',\r\n  'gpt-3.5-turbo-0125',\r\n  'gpt-4-turbo',\r\n  'gpt-4-0125',\r\n  'gpt-4-1106',\r\n];\r\n\r\nexport const excludedKeys = new Set([\r\n  'conversationId',\r\n  'title',\r\n  'iconURL',\r\n  'greeting',\r\n  'endpoint',\r\n  'endpointType',\r\n  'createdAt',\r\n  'updatedAt',\r\n  'expiredAt',\r\n  'messages',\r\n  'isArchived',\r\n  'tags',\r\n  'user',\r\n  '__v',\r\n  '_id',\r\n  'tools',\r\n  'model',\r\n  'files',\r\n  'spec',\r\n  'disableParams',\r\n]);\r\n\r\nexport enum SettingsViews {\r\n  default = 'default',\r\n  advanced = 'advanced',\r\n}\r\n\r\nexport const fileSourceSchema = z.nativeEnum(FileSources);\r\n\r\nexport const fileStrategiesSchema = z\r\n  .object({\r\n    default: fileSourceSchema.optional(),\r\n    avatar: fileSourceSchema.optional(),\r\n    image: fileSourceSchema.optional(),\r\n    document: fileSourceSchema.optional(),\r\n  })\r\n  .optional();\r\n\r\n// Helper type to extract the shape of the Zod object schema\r\ntype SchemaShape<T> = T extends z.ZodObject<infer U> ? U : never;\r\n\r\n// Helper type to determine the default value or undefined based on whether the field has a default\r\ntype DefaultValue<T> =\r\n  T extends z.ZodDefault<z.ZodTypeAny> ? ReturnType<T['_def']['defaultValue']> : undefined;\r\n\r\n// Extract default values or undefined from the schema shape\r\ntype ExtractDefaults<T> = {\r\n  [P in keyof T]: DefaultValue<T[P]>;\r\n};\r\n\r\nexport type SchemaDefaults<T> = ExtractDefaults<SchemaShape<T>>;\r\n\r\nexport type TConfigDefaults = SchemaDefaults<typeof configSchema>;\r\n\r\nexport function getSchemaDefaults<Schema extends z.AnyZodObject>(\r\n  schema: Schema,\r\n): ExtractDefaults<SchemaShape<Schema>> {\r\n  const shape = schema.shape;\r\n  const entries = Object.entries(shape).map(([key, value]) => {\r\n    if (value instanceof z.ZodDefault) {\r\n      // Extract default value if it exists\r\n      return [key, value._def.defaultValue()];\r\n    }\r\n    return [key, undefined];\r\n  });\r\n\r\n  // Create the object with the right types\r\n  return Object.fromEntries(entries) as ExtractDefaults<SchemaShape<Schema>>;\r\n}\r\n\r\nexport const modelConfigSchema = z\r\n  .object({\r\n    deploymentName: z.string().optional(),\r\n    version: z.string().optional(),\r\n    assistants: z.boolean().optional(),\r\n  })\r\n  .or(z.boolean());\r\n\r\nexport type TAzureModelConfig = z.infer<typeof modelConfigSchema>;\r\n\r\nexport const azureBaseSchema = z.object({\r\n  apiKey: z.string(),\r\n  serverless: z.boolean().optional(),\r\n  instanceName: z.string().optional(),\r\n  deploymentName: z.string().optional(),\r\n  assistants: z.boolean().optional(),\r\n  addParams: z.record(z.any()).optional(),\r\n  dropParams: z.array(z.string()).optional(),\r\n  forcePrompt: z.boolean().optional(),\r\n  version: z.string().optional(),\r\n  baseURL: z.string().optional(),\r\n  additionalHeaders: z.record(z.any()).optional(),\r\n});\r\n\r\nexport type TAzureBaseSchema = z.infer<typeof azureBaseSchema>;\r\n\r\nexport const azureGroupSchema = z\r\n  .object({\r\n    group: z.string(),\r\n    models: z.record(z.string(), modelConfigSchema),\r\n  })\r\n  .required()\r\n  .and(azureBaseSchema);\r\n\r\nexport const azureGroupConfigsSchema = z.array(azureGroupSchema).min(1);\r\nexport type TAzureGroup = z.infer<typeof azureGroupSchema>;\r\nexport type TAzureGroups = z.infer<typeof azureGroupConfigsSchema>;\r\nexport type TAzureModelMapSchema = {\r\n  // deploymentName?: string;\r\n  // version?: string;\r\n  group: string;\r\n};\r\n\r\nexport type TAzureModelGroupMap = Record<string, TAzureModelMapSchema | undefined>;\r\nexport type TAzureGroupMap = Record<\r\n  string,\r\n  (TAzureBaseSchema & { models: Record<string, TAzureModelConfig | undefined> }) | undefined\r\n>;\r\n\r\nexport type TValidatedAzureConfig = {\r\n  modelNames: string[];\r\n  modelGroupMap: TAzureModelGroupMap;\r\n  groupMap: TAzureGroupMap;\r\n};\r\n\r\nexport type TAzureConfigValidationResult = TValidatedAzureConfig & {\r\n  isValid: boolean;\r\n  errors: (ZodError | string)[];\r\n};\r\n\r\nexport enum Capabilities {\r\n  code_interpreter = 'code_interpreter',\r\n  image_vision = 'image_vision',\r\n  retrieval = 'retrieval',\r\n  actions = 'actions',\r\n  tools = 'tools',\r\n}\r\n\r\nexport enum AgentCapabilities {\r\n  hide_sequential_outputs = 'hide_sequential_outputs',\r\n  end_after_tools = 'end_after_tools',\r\n  execute_code = 'execute_code',\r\n  file_search = 'file_search',\r\n  web_search = 'web_search',\r\n  artifacts = 'artifacts',\r\n  actions = 'actions',\r\n  context = 'context',\r\n  tools = 'tools',\r\n  chain = 'chain',\r\n  ocr = 'ocr',\r\n}\r\n\r\nexport const defaultAssistantsVersion = {\r\n  [EModelEndpoint.assistants]: 2,\r\n  [EModelEndpoint.azureAssistants]: 1,\r\n};\r\n\r\nexport const baseEndpointSchema = z.object({\r\n  streamRate: z.number().optional(),\r\n  baseURL: z.string().optional(),\r\n  titlePrompt: z.string().optional(),\r\n  titleModel: z.string().optional(),\r\n  titleConvo: z.boolean().optional(),\r\n  titleMethod: z\r\n    .union([z.literal('completion'), z.literal('functions'), z.literal('structured')])\r\n    .optional(),\r\n  titleEndpoint: z.string().optional(),\r\n  titlePromptTemplate: z.string().optional(),\r\n});\r\n\r\nexport type TBaseEndpoint = z.infer<typeof baseEndpointSchema>;\r\n\r\nexport const bedrockEndpointSchema = baseEndpointSchema.merge(\r\n  z.object({\r\n    availableRegions: z.array(z.string()).optional(),\r\n  }),\r\n);\r\n\r\nexport const assistantEndpointSchema = baseEndpointSchema.merge(\r\n  z.object({\r\n    /* assistants specific */\r\n    disableBuilder: z.boolean().optional(),\r\n    pollIntervalMs: z.number().optional(),\r\n    timeoutMs: z.number().optional(),\r\n    version: z.union([z.string(), z.number()]).default(2),\r\n    supportedIds: z.array(z.string()).min(1).optional(),\r\n    excludedIds: z.array(z.string()).min(1).optional(),\r\n    privateAssistants: z.boolean().optional(),\r\n    retrievalModels: z.array(z.string()).min(1).optional().default(defaultRetrievalModels),\r\n    capabilities: z\r\n      .array(z.nativeEnum(Capabilities))\r\n      .optional()\r\n      .default([\r\n        Capabilities.code_interpreter,\r\n        Capabilities.image_vision,\r\n        Capabilities.retrieval,\r\n        Capabilities.actions,\r\n        Capabilities.tools,\r\n      ]),\r\n    /* general */\r\n    apiKey: z.string().optional(),\r\n    models: z\r\n      .object({\r\n        default: z.array(z.string()).min(1),\r\n        fetch: z.boolean().optional(),\r\n        userIdQuery: z.boolean().optional(),\r\n      })\r\n      .optional(),\r\n    headers: z.record(z.any()).optional(),\r\n  }),\r\n);\r\n\r\nexport type TAssistantEndpoint = z.infer<typeof assistantEndpointSchema>;\r\n\r\nexport const defaultAgentCapabilities = [\r\n  AgentCapabilities.execute_code,\r\n  AgentCapabilities.file_search,\r\n  AgentCapabilities.web_search,\r\n  AgentCapabilities.artifacts,\r\n  AgentCapabilities.actions,\r\n  AgentCapabilities.context,\r\n  AgentCapabilities.tools,\r\n  AgentCapabilities.chain,\r\n  AgentCapabilities.ocr,\r\n];\r\n\r\nexport const agentsEndpointSchema = baseEndpointSchema\r\n  .merge(\r\n    z.object({\r\n      /* agents specific */\r\n      recursionLimit: z.number().optional(),\r\n      disableBuilder: z.boolean().optional().default(false),\r\n      maxRecursionLimit: z.number().optional(),\r\n      maxCitations: z.number().min(1).max(50).optional().default(30),\r\n      maxCitationsPerFile: z.number().min(1).max(10).optional().default(7),\r\n      minRelevanceScore: z.number().min(0.0).max(1.0).optional().default(0.45),\r\n      allowedProviders: z.array(z.union([z.string(), eModelEndpointSchema])).optional(),\r\n      capabilities: z\r\n        .array(z.nativeEnum(AgentCapabilities))\r\n        .optional()\r\n        .default(defaultAgentCapabilities),\r\n    }),\r\n  )\r\n  .default({\r\n    disableBuilder: false,\r\n    capabilities: defaultAgentCapabilities,\r\n    maxCitations: 30,\r\n    maxCitationsPerFile: 7,\r\n    minRelevanceScore: 0.45,\r\n  });\r\n\r\nexport type TAgentsEndpoint = z.infer<typeof agentsEndpointSchema>;\r\n\r\nexport const endpointSchema = baseEndpointSchema.merge(\r\n  z.object({\r\n    name: z.string().refine((value) => !eModelEndpointSchema.safeParse(value).success, {\r\n      message: `Value cannot be one of the default endpoint (EModelEndpoint) values: ${Object.values(\r\n        EModelEndpoint,\r\n      ).join(', ')}`,\r\n    }),\r\n    apiKey: z.string(),\r\n    baseURL: z.string(),\r\n    models: z.object({\r\n      default: z.array(z.string()).min(1),\r\n      fetch: z.boolean().optional(),\r\n      userIdQuery: z.boolean().optional(),\r\n    }),\r\n    summarize: z.boolean().optional(),\r\n    summaryModel: z.string().optional(),\r\n    iconURL: z.string().optional(),\r\n    forcePrompt: z.boolean().optional(),\r\n    modelDisplayLabel: z.string().optional(),\r\n    headers: z.record(z.any()).optional(),\r\n    addParams: z.record(z.any()).optional(),\r\n    dropParams: z.array(z.string()).optional(),\r\n    customParams: z\r\n      .object({\r\n        defaultParamsEndpoint: z.string().default('custom'),\r\n        paramDefinitions: z.array(z.record(z.any())).optional(),\r\n      })\r\n      .strict(),\r\n    customOrder: z.number().optional(),\r\n    directEndpoint: z.boolean().optional(),\r\n    titleMessageRole: z.string().optional(),\r\n  }),\r\n);\r\n\r\nexport type TEndpoint = z.infer<typeof endpointSchema>;\r\n\r\nexport const azureEndpointSchema = z\r\n  .object({\r\n    groups: azureGroupConfigsSchema,\r\n    plugins: z.boolean().optional(),\r\n    assistants: z.boolean().optional(),\r\n  })\r\n  .and(\r\n    endpointSchema\r\n      .pick({\r\n        streamRate: true,\r\n        titleConvo: true,\r\n        titleMethod: true,\r\n        titleModel: true,\r\n        titlePrompt: true,\r\n        titlePromptTemplate: true,\r\n        summarize: true,\r\n        summaryModel: true,\r\n        customOrder: true,\r\n      })\r\n      .partial(),\r\n  );\r\n\r\nexport type TAzureConfig = Omit<z.infer<typeof azureEndpointSchema>, 'groups'> &\r\n  TAzureConfigValidationResult;\r\n\r\nconst ttsOpenaiSchema = z.object({\r\n  url: z.string().optional(),\r\n  apiKey: z.string(),\r\n  model: z.string(),\r\n  voices: z.array(z.string()),\r\n});\r\n\r\nconst ttsAzureOpenAISchema = z.object({\r\n  instanceName: z.string(),\r\n  apiKey: z.string(),\r\n  deploymentName: z.string(),\r\n  apiVersion: z.string(),\r\n  model: z.string(),\r\n  voices: z.array(z.string()),\r\n});\r\n\r\nconst ttsElevenLabsSchema = z.object({\r\n  url: z.string().optional(),\r\n  websocketUrl: z.string().optional(),\r\n  apiKey: z.string(),\r\n  model: z.string(),\r\n  voices: z.array(z.string()),\r\n  voice_settings: z\r\n    .object({\r\n      similarity_boost: z.number().optional(),\r\n      stability: z.number().optional(),\r\n      style: z.number().optional(),\r\n      use_speaker_boost: z.boolean().optional(),\r\n    })\r\n    .optional(),\r\n  pronunciation_dictionary_locators: z.array(z.string()).optional(),\r\n});\r\n\r\nconst ttsLocalaiSchema = z.object({\r\n  url: z.string(),\r\n  apiKey: z.string().optional(),\r\n  voices: z.array(z.string()),\r\n  backend: z.string(),\r\n});\r\n\r\nconst ttsSchema = z.object({\r\n  openai: ttsOpenaiSchema.optional(),\r\n  azureOpenAI: ttsAzureOpenAISchema.optional(),\r\n  elevenlabs: ttsElevenLabsSchema.optional(),\r\n  localai: ttsLocalaiSchema.optional(),\r\n});\r\n\r\nconst sttOpenaiSchema = z.object({\r\n  url: z.string().optional(),\r\n  apiKey: z.string(),\r\n  model: z.string(),\r\n});\r\n\r\nconst sttAzureOpenAISchema = z.object({\r\n  instanceName: z.string(),\r\n  apiKey: z.string(),\r\n  deploymentName: z.string(),\r\n  apiVersion: z.string(),\r\n});\r\n\r\nconst sttSchema = z.object({\r\n  openai: sttOpenaiSchema.optional(),\r\n  azureOpenAI: sttAzureOpenAISchema.optional(),\r\n});\r\n\r\nconst speechTab = z\r\n  .object({\r\n    conversationMode: z.boolean().optional(),\r\n    advancedMode: z.boolean().optional(),\r\n    speechToText: z\r\n      .boolean()\r\n      .optional()\r\n      .or(\r\n        z.object({\r\n          engineSTT: z.string().optional(),\r\n          languageSTT: z.string().optional(),\r\n          autoTranscribeAudio: z.boolean().optional(),\r\n          decibelValue: z.number().optional(),\r\n          autoSendText: z.number().optional(),\r\n        }),\r\n      )\r\n      .optional(),\r\n    textToSpeech: z\r\n      .boolean()\r\n      .optional()\r\n      .or(\r\n        z.object({\r\n          engineTTS: z.string().optional(),\r\n          voice: z.string().optional(),\r\n          languageTTS: z.string().optional(),\r\n          automaticPlayback: z.boolean().optional(),\r\n          playbackRate: z.number().optional(),\r\n          cacheTTS: z.boolean().optional(),\r\n        }),\r\n      )\r\n      .optional(),\r\n  })\r\n  .optional();\r\n\r\nexport enum RateLimitPrefix {\r\n  FILE_UPLOAD = 'FILE_UPLOAD',\r\n  IMPORT = 'IMPORT',\r\n  TTS = 'TTS',\r\n  STT = 'STT',\r\n}\r\n\r\nexport const rateLimitSchema = z.object({\r\n  fileUploads: z\r\n    .object({\r\n      ipMax: z.number().optional(),\r\n      ipWindowInMinutes: z.number().optional(),\r\n      userMax: z.number().optional(),\r\n      userWindowInMinutes: z.number().optional(),\r\n    })\r\n    .optional(),\r\n  conversationsImport: z\r\n    .object({\r\n      ipMax: z.number().optional(),\r\n      ipWindowInMinutes: z.number().optional(),\r\n      userMax: z.number().optional(),\r\n      userWindowInMinutes: z.number().optional(),\r\n    })\r\n    .optional(),\r\n  tts: z\r\n    .object({\r\n      ipMax: z.number().optional(),\r\n      ipWindowInMinutes: z.number().optional(),\r\n      userMax: z.number().optional(),\r\n      userWindowInMinutes: z.number().optional(),\r\n    })\r\n    .optional(),\r\n  stt: z\r\n    .object({\r\n      ipMax: z.number().optional(),\r\n      ipWindowInMinutes: z.number().optional(),\r\n      userMax: z.number().optional(),\r\n      userWindowInMinutes: z.number().optional(),\r\n    })\r\n    .optional(),\r\n});\r\n\r\nexport enum EImageOutputType {\r\n  PNG = 'png',\r\n  WEBP = 'webp',\r\n  JPEG = 'jpeg',\r\n}\r\n\r\nconst termsOfServiceSchema = z.object({\r\n  externalUrl: z.string().optional(),\r\n  openNewTab: z.boolean().optional(),\r\n  modalAcceptance: z.boolean().optional(),\r\n  modalTitle: z.string().optional(),\r\n  modalContent: z.string().or(z.array(z.string())).optional(),\r\n});\r\n\r\nexport type TTermsOfService = z.infer<typeof termsOfServiceSchema>;\r\n\r\nconst mcpServersSchema = z.object({\r\n  placeholder: z.string().optional(),\r\n});\r\n\r\nexport type TMcpServersConfig = z.infer<typeof mcpServersSchema>;\r\n\r\nexport const interfaceSchema = z\r\n  .object({\r\n    privacyPolicy: z\r\n      .object({\r\n        externalUrl: z.string().optional(),\r\n        openNewTab: z.boolean().optional(),\r\n      })\r\n      .optional(),\r\n    termsOfService: termsOfServiceSchema.optional(),\r\n    customWelcome: z.string().optional(),\r\n    mcpServers: mcpServersSchema.optional(),\r\n    endpointsMenu: z.boolean().optional(),\r\n    modelSelect: z.boolean().optional(),\r\n    parameters: z.boolean().optional(),\r\n    sidePanel: z.boolean().optional(),\r\n    multiConvo: z.boolean().optional(),\r\n    bookmarks: z.boolean().optional(),\r\n    memories: z.boolean().optional(),\r\n    presets: z.boolean().optional(),\r\n    prompts: z.boolean().optional(),\r\n    agents: z.boolean().optional(),\r\n    temporaryChat: z.boolean().optional(),\r\n    temporaryChatRetention: z.number().min(1).max(8760).optional(),\r\n    runCode: z.boolean().optional(),\r\n    webSearch: z.boolean().optional(),\r\n    peoplePicker: z\r\n      .object({\r\n        users: z.boolean().optional(),\r\n        groups: z.boolean().optional(),\r\n        roles: z.boolean().optional(),\r\n      })\r\n      .optional(),\r\n    marketplace: z\r\n      .object({\r\n        use: z.boolean().optional(),\r\n      })\r\n      .optional(),\r\n    fileSearch: z.boolean().optional(),\r\n    fileCitations: z.boolean().optional(),\r\n  })\r\n  .default({\r\n    endpointsMenu: true,\r\n    modelSelect: true,\r\n    parameters: true,\r\n    sidePanel: true,\r\n    presets: true,\r\n    multiConvo: true,\r\n    bookmarks: true,\r\n    memories: true,\r\n    prompts: true,\r\n    agents: true,\r\n    temporaryChat: true,\r\n    runCode: true,\r\n    webSearch: true,\r\n    peoplePicker: {\r\n      users: true,\r\n      groups: true,\r\n      roles: true,\r\n    },\r\n    marketplace: {\r\n      use: false,\r\n    },\r\n    fileSearch: true,\r\n    fileCitations: true,\r\n  });\r\n\r\nexport type TInterfaceConfig = z.infer<typeof interfaceSchema>;\r\nexport type TBalanceConfig = z.infer<typeof balanceSchema>;\r\nexport type TTransactionsConfig = z.infer<typeof transactionsSchema>;\r\n\r\nexport const turnstileOptionsSchema = z\r\n  .object({\r\n    language: z.string().default('auto'),\r\n    size: z.enum(['normal', 'compact', 'flexible', 'invisible']).default('normal'),\r\n  })\r\n  .default({\r\n    language: 'auto',\r\n    size: 'normal',\r\n  });\r\n\r\nexport const turnstileSchema = z.object({\r\n  siteKey: z.string(),\r\n  options: turnstileOptionsSchema.optional(),\r\n});\r\n\r\nexport type TTurnstileConfig = z.infer<typeof turnstileSchema>;\r\n\r\nexport type TStartupConfig = {\r\n  appTitle: string;\r\n  socialLogins?: string[];\r\n  interface?: TInterfaceConfig;\r\n  turnstile?: TTurnstileConfig;\r\n  balance?: TBalanceConfig;\r\n  transactions?: TTransactionsConfig;\r\n  discordLoginEnabled: boolean;\r\n  facebookLoginEnabled: boolean;\r\n  githubLoginEnabled: boolean;\r\n  googleLoginEnabled: boolean;\r\n  openidLoginEnabled: boolean;\r\n  appleLoginEnabled: boolean;\r\n  samlLoginEnabled: boolean;\r\n  openidLabel: string;\r\n  openidImageUrl: string;\r\n  openidAutoRedirect: boolean;\r\n  samlLabel: string;\r\n  samlImageUrl: string;\r\n  /** LDAP Auth Configuration */\r\n  ldap?: {\r\n    /** LDAP enabled */\r\n    enabled: boolean;\r\n    /** Whether LDAP uses username vs. email */\r\n    username?: boolean;\r\n  };\r\n  serverDomain: string;\r\n  emailLoginEnabled: boolean;\r\n  registrationEnabled: boolean;\r\n  socialLoginEnabled: boolean;\r\n  passwordResetEnabled: boolean;\r\n  emailEnabled: boolean;\r\n  showBirthdayIcon: boolean;\r\n  helpAndFaqURL: string;\r\n  customFooter?: string;\r\n  modelSpecs?: TSpecsConfig;\r\n  sharedLinksEnabled: boolean;\r\n  publicSharedLinksEnabled: boolean;\r\n  analyticsGtmId?: string;\r\n  instanceProjectId: string;\r\n  bundlerURL?: string;\r\n  staticBundlerURL?: string;\r\n  sharePointFilePickerEnabled?: boolean;\r\n  sharePointBaseUrl?: string;\r\n  sharePointPickerGraphScope?: string;\r\n  sharePointPickerSharePointScope?: string;\r\n  openidReuseTokens?: boolean;\r\n  minPasswordLength?: number;\r\n  webSearch?: {\r\n    searchProvider?: SearchProviders;\r\n    scraperType?: ScraperTypes;\r\n    rerankerType?: RerankerTypes;\r\n  };\r\n  mcpServers?: Record<\r\n    string,\r\n    {\r\n      customUserVars: Record<\r\n        string,\r\n        {\r\n          title: string;\r\n          description: string;\r\n        }\r\n      >;\r\n      chatMenu?: boolean;\r\n      isOAuth?: boolean;\r\n      startup?: boolean;\r\n    }\r\n  >;\r\n  mcpPlaceholder?: string;\r\n};\r\n\r\nexport enum OCRStrategy {\r\n  MISTRAL_OCR = 'mistral_ocr',\r\n  CUSTOM_OCR = 'custom_ocr',\r\n  AZURE_MISTRAL_OCR = 'azure_mistral_ocr',\r\n  VERTEXAI_MISTRAL_OCR = 'vertexai_mistral_ocr',\r\n}\r\n\r\nexport enum SearchCategories {\r\n  PROVIDERS = 'providers',\r\n  SCRAPERS = 'scrapers',\r\n  RERANKERS = 'rerankers',\r\n}\r\n\r\nexport enum SearchProviders {\r\n  SERPER = 'serper',\r\n  SEARXNG = 'searxng',\r\n}\r\n\r\nexport enum ScraperTypes {\r\n  FIRECRAWL = 'firecrawl',\r\n  SERPER = 'serper',\r\n}\r\n\r\nexport enum RerankerTypes {\r\n  JINA = 'jina',\r\n  COHERE = 'cohere',\r\n}\r\n\r\nexport enum SafeSearchTypes {\r\n  OFF = 0,\r\n  MODERATE = 1,\r\n  STRICT = 2,\r\n}\r\n\r\nexport const webSearchSchema = z.object({\r\n  serperApiKey: z.string().optional().default('${SERPER_API_KEY}'),\r\n  searxngInstanceUrl: z.string().optional().default('${SEARXNG_INSTANCE_URL}'),\r\n  searxngApiKey: z.string().optional().default('${SEARXNG_API_KEY}'),\r\n  firecrawlApiKey: z.string().optional().default('${FIRECRAWL_API_KEY}'),\r\n  firecrawlApiUrl: z.string().optional().default('${FIRECRAWL_API_URL}'),\r\n  jinaApiKey: z.string().optional().default('${JINA_API_KEY}'),\r\n  jinaApiUrl: z.string().optional().default('${JINA_API_URL}'),\r\n  cohereApiKey: z.string().optional().default('${COHERE_API_KEY}'),\r\n  searchProvider: z.nativeEnum(SearchProviders).optional(),\r\n  scraperType: z.nativeEnum(ScraperTypes).optional(),\r\n  rerankerType: z.nativeEnum(RerankerTypes).optional(),\r\n  scraperTimeout: z.number().optional(),\r\n  safeSearch: z.nativeEnum(SafeSearchTypes).default(SafeSearchTypes.MODERATE),\r\n  firecrawlOptions: z\r\n    .object({\r\n      formats: z.array(z.string()).optional(),\r\n      includeTags: z.array(z.string()).optional(),\r\n      excludeTags: z.array(z.string()).optional(),\r\n      headers: z.record(z.string()).optional(),\r\n      waitFor: z.number().optional(),\r\n      timeout: z.number().optional(),\r\n      maxAge: z.number().optional(),\r\n      mobile: z.boolean().optional(),\r\n      skipTlsVerification: z.boolean().optional(),\r\n      blockAds: z.boolean().optional(),\r\n      removeBase64Images: z.boolean().optional(),\r\n      parsePDF: z.boolean().optional(),\r\n      storeInCache: z.boolean().optional(),\r\n      zeroDataRetention: z.boolean().optional(),\r\n      location: z\r\n        .object({\r\n          country: z.string().optional(),\r\n          languages: z.array(z.string()).optional(),\r\n        })\r\n        .optional(),\r\n      onlyMainContent: z.boolean().optional(),\r\n      changeTrackingOptions: z\r\n        .object({\r\n          modes: z.array(z.string()).optional(),\r\n          schema: z.record(z.unknown()).optional(),\r\n          prompt: z.string().optional(),\r\n          tag: z.string().nullable().optional(),\r\n        })\r\n        .optional(),\r\n    })\r\n    .optional(),\r\n});\r\n\r\nexport type TWebSearchConfig = z.infer<typeof webSearchSchema>;\r\n\r\nexport const ocrSchema = z.object({\r\n  mistralModel: z.string().optional(),\r\n  apiKey: z.string().optional().default('${OCR_API_KEY}'),\r\n  baseURL: z.string().optional().default('${OCR_BASEURL}'),\r\n  strategy: z.nativeEnum(OCRStrategy).default(OCRStrategy.MISTRAL_OCR),\r\n});\r\n\r\nexport const balanceSchema = z.object({\r\n  enabled: z.boolean().optional().default(false),\r\n  startBalance: z.number().optional().default(20000),\r\n  autoRefillEnabled: z.boolean().optional().default(false),\r\n  refillIntervalValue: z.number().optional().default(30),\r\n  refillIntervalUnit: z\r\n    .enum(['seconds', 'minutes', 'hours', 'days', 'weeks', 'months'])\r\n    .optional()\r\n    .default('days'),\r\n  refillAmount: z.number().optional().default(10000),\r\n});\r\n\r\nexport const transactionsSchema = z.object({\r\n  enabled: z.boolean().optional().default(true),\r\n});\r\n\r\nexport const memorySchema = z.object({\r\n  disabled: z.boolean().optional(),\r\n  validKeys: z.array(z.string()).optional(),\r\n  tokenLimit: z.number().optional(),\r\n  charLimit: z.number().optional().default(10000),\r\n  personalize: z.boolean().default(true),\r\n  messageWindowSize: z.number().optional().default(5),\r\n  agent: z\r\n    .union([\r\n      z.object({\r\n        id: z.string(),\r\n      }),\r\n      z.object({\r\n        provider: z.string(),\r\n        model: z.string(),\r\n        instructions: z.string().optional(),\r\n        model_parameters: z.record(z.any()).optional(),\r\n      }),\r\n    ])\r\n    .optional(),\r\n});\r\n\r\nexport type TMemoryConfig = z.infer<typeof memorySchema>;\r\n\r\nconst customEndpointsSchema = z.array(endpointSchema.partial()).optional();\r\n\r\nexport const configSchema = z.object({\r\n  version: z.string(),\r\n  cache: z.boolean().default(true),\r\n  ocr: ocrSchema.optional(),\r\n  webSearch: webSearchSchema.optional(),\r\n  memory: memorySchema.optional(),\r\n  secureImageLinks: z.boolean().optional(),\r\n  imageOutputType: z.nativeEnum(EImageOutputType).default(EImageOutputType.PNG),\r\n  includedTools: z.array(z.string()).optional(),\r\n  filteredTools: z.array(z.string()).optional(),\r\n  mcpServers: MCPServersSchema.optional(),\r\n  interface: interfaceSchema,\r\n  turnstile: turnstileSchema.optional(),\r\n  fileStrategy: fileSourceSchema.default(FileSources.local),\r\n  fileStrategies: fileStrategiesSchema,\r\n  actions: z\r\n    .object({\r\n      allowedDomains: z.array(z.string()).optional(),\r\n    })\r\n    .optional(),\r\n  registration: z\r\n    .object({\r\n      socialLogins: z.array(z.string()).optional(),\r\n      allowedDomains: z.array(z.string()).optional(),\r\n    })\r\n    .default({ socialLogins: defaultSocialLogins }),\r\n  balance: balanceSchema.optional(),\r\n  transactions: transactionsSchema.optional(),\r\n  speech: z\r\n    .object({\r\n      tts: ttsSchema.optional(),\r\n      stt: sttSchema.optional(),\r\n      speechTab: speechTab.optional(),\r\n    })\r\n    .optional(),\r\n  rateLimits: rateLimitSchema.optional(),\r\n  fileConfig: fileConfigSchema.optional(),\r\n  modelSpecs: specsConfigSchema.optional(),\r\n  endpoints: z\r\n    .object({\r\n      all: baseEndpointSchema.optional(),\r\n      [EModelEndpoint.openAI]: baseEndpointSchema.optional(),\r\n      [EModelEndpoint.google]: baseEndpointSchema.optional(),\r\n      [EModelEndpoint.anthropic]: baseEndpointSchema.optional(),\r\n      [EModelEndpoint.gptPlugins]: baseEndpointSchema.optional(),\r\n      [EModelEndpoint.azureOpenAI]: azureEndpointSchema.optional(),\r\n      [EModelEndpoint.azureAssistants]: assistantEndpointSchema.optional(),\r\n      [EModelEndpoint.assistants]: assistantEndpointSchema.optional(),\r\n      [EModelEndpoint.agents]: agentsEndpointSchema.optional(),\r\n      [EModelEndpoint.custom]: customEndpointsSchema.optional(),\r\n      [EModelEndpoint.bedrock]: baseEndpointSchema.optional(),\r\n    })\r\n    .strict()\r\n    .refine((data) => Object.keys(data).length > 0, {\r\n      message: 'At least one `endpoints` field must be provided.',\r\n    })\r\n    .optional(),\r\n});\r\n\r\nexport const getConfigDefaults = () => getSchemaDefaults(configSchema);\r\n\r\nexport type TCustomConfig = z.infer<typeof configSchema>;\r\nexport type TCustomEndpoints = z.infer<typeof customEndpointsSchema>;\r\n\r\nexport type TProviderSchema =\r\n  | z.infer<typeof ttsOpenaiSchema>\r\n  | z.infer<typeof ttsElevenLabsSchema>\r\n  | z.infer<typeof ttsLocalaiSchema>\r\n  | undefined;\r\n\r\nexport enum KnownEndpoints {\r\n  anyscale = 'anyscale',\r\n  apipie = 'apipie',\r\n  cohere = 'cohere',\r\n  fireworks = 'fireworks',\r\n  deepseek = 'deepseek',\r\n  groq = 'groq',\r\n  huggingface = 'huggingface',\r\n  mistral = 'mistral',\r\n  mlx = 'mlx',\r\n  ollama = 'ollama',\r\n  openrouter = 'openrouter',\r\n  perplexity = 'perplexity',\r\n  shuttleai = 'shuttleai',\r\n  'together.ai' = 'together.ai',\r\n  unify = 'unify',\r\n  vercel = 'vercel',\r\n  xai = 'xai',\r\n}\r\n\r\nexport enum FetchTokenConfig {\r\n  openrouter = KnownEndpoints.openrouter,\r\n}\r\n\r\nexport const defaultEndpoints: EModelEndpoint[] = [\r\n  EModelEndpoint.openAI,\r\n  EModelEndpoint.assistants,\r\n  EModelEndpoint.azureAssistants,\r\n  EModelEndpoint.azureOpenAI,\r\n  EModelEndpoint.agents,\r\n  EModelEndpoint.chatGPTBrowser,\r\n  EModelEndpoint.gptPlugins,\r\n  EModelEndpoint.google,\r\n  EModelEndpoint.anthropic,\r\n  EModelEndpoint.custom,\r\n  EModelEndpoint.bedrock,\r\n];\r\n\r\nexport const alternateName = {\r\n  [EModelEndpoint.openAI]: 'OpenAI',\r\n  [EModelEndpoint.assistants]: 'Assistants',\r\n  [EModelEndpoint.agents]: 'My Agents',\r\n  [EModelEndpoint.azureAssistants]: 'Azure Assistants',\r\n  [EModelEndpoint.azureOpenAI]: 'Azure OpenAI',\r\n  [EModelEndpoint.chatGPTBrowser]: 'ChatGPT',\r\n  [EModelEndpoint.gptPlugins]: 'Plugins',\r\n  [EModelEndpoint.google]: 'Google',\r\n  [EModelEndpoint.anthropic]: 'Anthropic',\r\n  [EModelEndpoint.custom]: 'Custom',\r\n  [EModelEndpoint.bedrock]: 'AWS Bedrock',\r\n  [KnownEndpoints.ollama]: 'Ollama',\r\n  [KnownEndpoints.deepseek]: 'DeepSeek',\r\n  [KnownEndpoints.xai]: 'xAI',\r\n  [KnownEndpoints.vercel]: 'Vercel',\r\n};\r\n\r\nconst sharedOpenAIModels = [\r\n  'gpt-4o-mini',\r\n  'gpt-4o',\r\n  'gpt-4.5-preview',\r\n  'gpt-4.5-preview-2025-02-27',\r\n  'gpt-3.5-turbo',\r\n  'gpt-3.5-turbo-0125',\r\n  'gpt-4-turbo',\r\n  'gpt-4-turbo-2024-04-09',\r\n  'gpt-4-0125-preview',\r\n  'gpt-4-turbo-preview',\r\n  'gpt-4-1106-preview',\r\n  'gpt-3.5-turbo-1106',\r\n  'gpt-3.5-turbo-16k-0613',\r\n  'gpt-3.5-turbo-16k',\r\n  'gpt-4',\r\n  'gpt-4-0314',\r\n  'gpt-4-32k-0314',\r\n  'gpt-4-0613',\r\n  'gpt-3.5-turbo-0613',\r\n];\r\n\r\nconst sharedAnthropicModels = [\r\n  'claude-sonnet-4-5',\r\n  'claude-sonnet-4-5-20250929',\r\n  'claude-opus-4-1',\r\n  'claude-opus-4-1-20250805',\r\n  'claude-sonnet-4-20250514',\r\n  'claude-sonnet-4-0',\r\n  'claude-opus-4-20250514',\r\n  'claude-opus-4-0',\r\n  'claude-3-7-sonnet-latest',\r\n  'claude-3-7-sonnet-20250219',\r\n  'claude-3-5-haiku-20241022',\r\n  'claude-3-5-sonnet-20241022',\r\n  'claude-3-5-sonnet-20240620',\r\n  'claude-3-5-sonnet-latest',\r\n  'claude-3-opus-20240229',\r\n  'claude-3-sonnet-20240229',\r\n  'claude-3-haiku-20240307',\r\n  'claude-2.1',\r\n  'claude-2',\r\n  'claude-1.2',\r\n  'claude-1',\r\n  'claude-1-100k',\r\n  'claude-instant-1',\r\n  'claude-instant-1-100k',\r\n];\r\n\r\nexport const bedrockModels = [\r\n  'anthropic.claude-3-5-sonnet-20241022-v2:0',\r\n  'anthropic.claude-3-5-sonnet-20240620-v1:0',\r\n  'anthropic.claude-3-5-haiku-20241022-v1:0',\r\n  'anthropic.claude-3-haiku-20240307-v1:0',\r\n  'anthropic.claude-3-opus-20240229-v1:0',\r\n  'anthropic.claude-3-sonnet-20240229-v1:0',\r\n  'anthropic.claude-v2',\r\n  'anthropic.claude-v2:1',\r\n  'anthropic.claude-instant-v1',\r\n  // 'cohere.command-text-v14', // no conversation history\r\n  // 'cohere.command-light-text-v14', // no conversation history\r\n  'cohere.command-r-v1:0',\r\n  'cohere.command-r-plus-v1:0',\r\n  'meta.llama2-13b-chat-v1',\r\n  'meta.llama2-70b-chat-v1',\r\n  'meta.llama3-8b-instruct-v1:0',\r\n  'meta.llama3-70b-instruct-v1:0',\r\n  'meta.llama3-1-8b-instruct-v1:0',\r\n  'meta.llama3-1-70b-instruct-v1:0',\r\n  'meta.llama3-1-405b-instruct-v1:0',\r\n  'mistral.mistral-7b-instruct-v0:2',\r\n  'mistral.mixtral-8x7b-instruct-v0:1',\r\n  'mistral.mistral-large-2402-v1:0',\r\n  'mistral.mistral-large-2407-v1:0',\r\n  'mistral.mistral-small-2402-v1:0',\r\n  'ai21.jamba-instruct-v1:0',\r\n  // 'ai21.j2-mid-v1', // no streaming\r\n  // 'ai21.j2-ultra-v1', no conversation history\r\n  'amazon.titan-text-lite-v1',\r\n  'amazon.titan-text-express-v1',\r\n  'amazon.titan-text-premier-v1:0',\r\n];\r\n\r\nexport const defaultModels = {\r\n  [EModelEndpoint.azureAssistants]: sharedOpenAIModels,\r\n  [EModelEndpoint.assistants]: [...sharedOpenAIModels, 'chatgpt-4o-latest'],\r\n  [EModelEndpoint.agents]: sharedOpenAIModels, // TODO: Add agent models (agentsModels)\r\n  [EModelEndpoint.google]: [\r\n    // Gemini 2.5 Models\r\n    'gemini-2.5-pro',\r\n    'gemini-2.5-flash',\r\n    'gemini-2.5-flash-lite',\r\n    // Gemini 2.0 Models\r\n    'gemini-2.0-flash-001',\r\n    'gemini-2.0-flash-lite',\r\n  ],\r\n  [EModelEndpoint.anthropic]: sharedAnthropicModels,\r\n  [EModelEndpoint.openAI]: [\r\n    ...sharedOpenAIModels,\r\n    'chatgpt-4o-latest',\r\n    'gpt-4-vision-preview',\r\n    'gpt-3.5-turbo-instruct-0914',\r\n    'gpt-3.5-turbo-instruct',\r\n  ],\r\n  [EModelEndpoint.bedrock]: bedrockModels,\r\n};\r\n\r\nconst fitlerAssistantModels = (str: string) => {\r\n  return /gpt-4|gpt-3\\\\.5/i.test(str) && !/vision|instruct/i.test(str);\r\n};\r\n\r\nconst openAIModels = defaultModels[EModelEndpoint.openAI];\r\n\r\nexport const initialModelsConfig: TModelsConfig = {\r\n  initial: [],\r\n  [EModelEndpoint.openAI]: openAIModels,\r\n  [EModelEndpoint.assistants]: openAIModels.filter(fitlerAssistantModels),\r\n  [EModelEndpoint.agents]: openAIModels, // TODO: Add agent models (agentsModels)\r\n  [EModelEndpoint.gptPlugins]: openAIModels,\r\n  [EModelEndpoint.azureOpenAI]: openAIModels,\r\n  [EModelEndpoint.chatGPTBrowser]: ['text-davinci-002-render-sha'],\r\n  [EModelEndpoint.google]: defaultModels[EModelEndpoint.google],\r\n  [EModelEndpoint.anthropic]: defaultModels[EModelEndpoint.anthropic],\r\n  [EModelEndpoint.bedrock]: defaultModels[EModelEndpoint.bedrock],\r\n};\r\n\r\nexport const EndpointURLs = {\r\n  [EModelEndpoint.assistants]: `${apiBaseUrl()}/api/assistants/v2/chat`,\r\n  [EModelEndpoint.azureAssistants]: `${apiBaseUrl()}/api/assistants/v1/chat`,\r\n  [EModelEndpoint.agents]: `${apiBaseUrl()}/api/${EModelEndpoint.agents}/chat`,\r\n} as const;\r\n\r\nexport const modularEndpoints = new Set<EModelEndpoint | string>([\r\n  EModelEndpoint.gptPlugins,\r\n  EModelEndpoint.anthropic,\r\n  EModelEndpoint.google,\r\n  EModelEndpoint.openAI,\r\n  EModelEndpoint.azureOpenAI,\r\n  EModelEndpoint.custom,\r\n  EModelEndpoint.agents,\r\n  EModelEndpoint.bedrock,\r\n]);\r\n\r\nexport const supportsBalanceCheck = {\r\n  [EModelEndpoint.custom]: true,\r\n  [EModelEndpoint.openAI]: true,\r\n  [EModelEndpoint.anthropic]: true,\r\n  [EModelEndpoint.gptPlugins]: true,\r\n  [EModelEndpoint.assistants]: true,\r\n  [EModelEndpoint.agents]: true,\r\n  [EModelEndpoint.azureAssistants]: true,\r\n  [EModelEndpoint.azureOpenAI]: true,\r\n  [EModelEndpoint.bedrock]: true,\r\n};\r\n\r\nexport const visionModels = [\r\n  'qwen-vl',\r\n  'grok-vision',\r\n  'grok-2-vision',\r\n  'grok-3',\r\n  'gpt-4o-mini',\r\n  'gpt-4o',\r\n  'gpt-4-turbo',\r\n  'gpt-4-vision',\r\n  'o4-mini',\r\n  'o3',\r\n  'o1',\r\n  'gpt-4.1',\r\n  'gpt-4.5',\r\n  'llava',\r\n  'llava-13b',\r\n  'gemini-pro-vision',\r\n  'claude-3',\r\n  'gemma',\r\n  'gemini-exp',\r\n  'gemini-1.5',\r\n  'gemini-2',\r\n  'gemini-2.5',\r\n  'gemini-3',\r\n  'moondream',\r\n  'llama3.2-vision',\r\n  'llama-3.2-11b-vision',\r\n  'llama-3-2-11b-vision',\r\n  'llama-3.2-90b-vision',\r\n  'llama-3-2-90b-vision',\r\n  'llama-4',\r\n  'claude-opus-4',\r\n  'claude-sonnet-4',\r\n  'claude-haiku-4',\r\n];\r\nexport enum VisionModes {\r\n  generative = 'generative',\r\n  agents = 'agents',\r\n}\r\n\r\nexport function validateVisionModel({\r\n  model,\r\n  additionalModels = [],\r\n  availableModels,\r\n}: {\r\n  model: string;\r\n  additionalModels?: string[];\r\n  availableModels?: string[];\r\n}) {\r\n  if (!model) {\r\n    return false;\r\n  }\r\n\r\n  if (model.includes('gpt-4-turbo-preview') || model.includes('o1-mini')) {\r\n    return false;\r\n  }\r\n\r\n  if (availableModels && !availableModels.includes(model)) {\r\n    return false;\r\n  }\r\n\r\n  return visionModels.concat(additionalModels).some((visionModel) => model.includes(visionModel));\r\n}\r\n\r\nexport const imageGenTools = new Set(['dalle', 'dall-e', 'stable-diffusion', 'flux']);\r\n\r\n/**\r\n * Enum for collections using infinite queries\r\n */\r\nexport enum InfiniteCollections {\r\n  /**\r\n   * Collection for Prompt Groups\r\n   */\r\n  PROMPT_GROUPS = 'promptGroups',\r\n  /**\r\n   * Collection for Shared Links\r\n   */\r\n  SHARED_LINKS = 'sharedLinks',\r\n}\r\n\r\n/**\r\n * Enum for time intervals\r\n */\r\nexport enum Time {\r\n  ONE_DAY = 86400000,\r\n  ONE_HOUR = 3600000,\r\n  THIRTY_MINUTES = 1800000,\r\n  TEN_MINUTES = 600000,\r\n  FIVE_MINUTES = 300000,\r\n  THREE_MINUTES = 180000,\r\n  TWO_MINUTES = 120000,\r\n  ONE_MINUTE = 60000,\r\n  THIRTY_SECONDS = 30000,\r\n}\r\n\r\n/**\r\n * Enum for cache keys.\r\n */\r\nexport enum CacheKeys {\r\n  /**\r\n   * Key for the config store namespace.\r\n   */\r\n  CONFIG_STORE = 'CONFIG_STORE',\r\n  /**\r\n   * Key for the roles cache.\r\n   */\r\n  ROLES = 'ROLES',\r\n  /**\r\n   * Key for the plugins cache.\r\n   */\r\n  PLUGINS = 'PLUGINS',\r\n  /**\r\n   * Key for the title generation cache.\r\n   */\r\n  GEN_TITLE = 'GEN_TITLE',\r\n  /**\r\n   * Key for the tools cache.\r\n   */\r\n  TOOLS = 'TOOLS',\r\n  /**\r\n   * Key for the model config cache.\r\n   */\r\n  MODELS_CONFIG = 'MODELS_CONFIG',\r\n  /**\r\n   * Key for the model queries cache.\r\n   */\r\n  MODEL_QUERIES = 'MODEL_QUERIES',\r\n  /**\r\n   * Key for the default startup config cache.\r\n   */\r\n  STARTUP_CONFIG = 'STARTUP_CONFIG',\r\n  /**\r\n   * Key for the default endpoint config cache.\r\n   */\r\n  ENDPOINT_CONFIG = 'ENDPOINT_CONFIG',\r\n  /**\r\n   * Key for accessing the model token config cache.\r\n   */\r\n  TOKEN_CONFIG = 'TOKEN_CONFIG',\r\n  /**\r\n   * Key for the app config namespace.\r\n   */\r\n  APP_CONFIG = 'APP_CONFIG',\r\n  /**\r\n   * Key for accessing Abort Keys\r\n   */\r\n  ABORT_KEYS = 'ABORT_KEYS',\r\n  /**\r\n   * Key for the bans cache.\r\n   */\r\n  BANS = 'BANS',\r\n  /**\r\n   * Key for the encoded domains cache.\r\n   * Used by Azure OpenAI Assistants.\r\n   */\r\n  ENCODED_DOMAINS = 'ENCODED_DOMAINS',\r\n  /**\r\n   * Key for the cached audio run Ids.\r\n   */\r\n  AUDIO_RUNS = 'AUDIO_RUNS',\r\n  /**\r\n   * Key for in-progress messages.\r\n   */\r\n  MESSAGES = 'MESSAGES',\r\n  /**\r\n   * Key for in-progress flow states.\r\n   */\r\n  FLOWS = 'FLOWS',\r\n  /**\r\n   * Key for pending chat requests (concurrency check)\r\n   */\r\n  PENDING_REQ = 'PENDING_REQ',\r\n  /**\r\n   * Key for s3 check intervals per user\r\n   */\r\n  S3_EXPIRY_INTERVAL = 'S3_EXPIRY_INTERVAL',\r\n  /**\r\n   * key for open id exchanged tokens\r\n   */\r\n  OPENID_EXCHANGED_TOKENS = 'OPENID_EXCHANGED_TOKENS',\r\n  /**\r\n   * Key for OpenID session.\r\n   */\r\n  OPENID_SESSION = 'OPENID_SESSION',\r\n  /**\r\n   * Key for SAML session.\r\n   */\r\n  SAML_SESSION = 'SAML_SESSION',\r\n}\r\n\r\n/**\r\n * Enum for violation types, used to identify, log, and cache violations.\r\n */\r\nexport enum ViolationTypes {\r\n  /**\r\n   * File Upload Violations (exceeding limit).\r\n   */\r\n  FILE_UPLOAD_LIMIT = 'file_upload_limit',\r\n  /**\r\n   * Illegal Model Request (not available).\r\n   */\r\n  ILLEGAL_MODEL_REQUEST = 'illegal_model_request',\r\n  /**\r\n   * Token Limit Violation.\r\n   */\r\n  TOKEN_BALANCE = 'token_balance',\r\n  /**\r\n   * An issued ban.\r\n   */\r\n  BAN = 'ban',\r\n  /**\r\n   * TTS Request Limit Violation.\r\n   */\r\n  TTS_LIMIT = 'tts_limit',\r\n  /**\r\n   * STT Request Limit Violation.\r\n   */\r\n  STT_LIMIT = 'stt_limit',\r\n  /**\r\n   * Reset Password Limit Violation.\r\n   */\r\n  RESET_PASSWORD_LIMIT = 'reset_password_limit',\r\n  /**\r\n   * Verify Email Limit Violation.\r\n   */\r\n  VERIFY_EMAIL_LIMIT = 'verify_email_limit',\r\n  /**\r\n   * Verify Conversation Access violation.\r\n   */\r\n  CONVO_ACCESS = 'convo_access',\r\n  /**\r\n   * Tool Call Limit Violation.\r\n   */\r\n  TOOL_CALL_LIMIT = 'tool_call_limit',\r\n  /**\r\n   * General violation (catch-all).\r\n   */\r\n  GENERAL = 'general',\r\n  /**\r\n   * Login attempt violations.\r\n   */\r\n  LOGINS = 'logins',\r\n  /**\r\n   * Concurrent request violations.\r\n   */\r\n  CONCURRENT = 'concurrent',\r\n  /**\r\n   * Non-browser access violations.\r\n   */\r\n  NON_BROWSER = 'non_browser',\r\n  /**\r\n   * Message limit violations.\r\n   */\r\n  MESSAGE_LIMIT = 'message_limit',\r\n  /**\r\n   * Registration violations.\r\n   */\r\n  REGISTRATIONS = 'registrations',\r\n}\r\n\r\n/**\r\n * Enum for error message types that are not \"violations\" as above, used to identify client-facing errors.\r\n */\r\nexport enum ErrorTypes {\r\n  /**\r\n   * No User-provided Key.\r\n   */\r\n  NO_USER_KEY = 'no_user_key',\r\n  /**\r\n   * Expired User-provided Key.\r\n   */\r\n  EXPIRED_USER_KEY = 'expired_user_key',\r\n  /**\r\n   * Invalid User-provided Key.\r\n   */\r\n  INVALID_USER_KEY = 'invalid_user_key',\r\n  /**\r\n   * No Base URL Provided.\r\n   */\r\n  NO_BASE_URL = 'no_base_url',\r\n  /**\r\n   * Moderation error\r\n   */\r\n  MODERATION = 'moderation',\r\n  /**\r\n   * Prompt exceeds max length\r\n   */\r\n  INPUT_LENGTH = 'INPUT_LENGTH',\r\n  /**\r\n   * Invalid request error, API rejected request\r\n   */\r\n  INVALID_REQUEST = 'invalid_request_error',\r\n  /**\r\n   * Invalid action request error, likely not on list of allowed domains\r\n   */\r\n  INVALID_ACTION = 'invalid_action_error',\r\n  /**\r\n   * Invalid request error, API rejected request\r\n   */\r\n  NO_SYSTEM_MESSAGES = 'no_system_messages',\r\n  /**\r\n   * Google provider returned an error\r\n   */\r\n  GOOGLE_ERROR = 'google_error',\r\n  /**\r\n   * Google provider does not allow custom tools with built-in tools\r\n   */\r\n  GOOGLE_TOOL_CONFLICT = 'google_tool_conflict',\r\n  /**\r\n   * Invalid Agent Provider (excluded by Admin)\r\n   */\r\n  INVALID_AGENT_PROVIDER = 'invalid_agent_provider',\r\n  /**\r\n   * Missing model selection\r\n   */\r\n  MISSING_MODEL = 'missing_model',\r\n  /**\r\n   * Models configuration not loaded\r\n   */\r\n  MODELS_NOT_LOADED = 'models_not_loaded',\r\n  /**\r\n   * Endpoint models not loaded\r\n   */\r\n  ENDPOINT_MODELS_NOT_LOADED = 'endpoint_models_not_loaded',\r\n  /**\r\n   * Generic Authentication failure\r\n   */\r\n  AUTH_FAILED = 'auth_failed',\r\n}\r\n\r\n/**\r\n * Enum for authentication keys.\r\n */\r\nexport enum AuthKeys {\r\n  /**\r\n   * Key for the Service Account to use Vertex AI.\r\n   */\r\n  GOOGLE_SERVICE_KEY = 'GOOGLE_SERVICE_KEY',\r\n  /**\r\n   * API key to use Google Generative AI.\r\n   *\r\n   * Note: this is not for Environment Variables, but to access encrypted object values.\r\n   */\r\n  GOOGLE_API_KEY = 'GOOGLE_API_KEY',\r\n}\r\n\r\n/**\r\n * Enum for Image Detail Cost.\r\n *\r\n * **Low Res Fixed Cost:** `85`\r\n *\r\n * **High Res Calculation:**\r\n *\r\n * Number of `512px` Tiles * `170` + `85` (Additional Cost)\r\n */\r\nexport enum ImageDetailCost {\r\n  /**\r\n   * Low resolution is a fixed value.\r\n   */\r\n  LOW = 85,\r\n  /**\r\n   * High resolution Cost Per Tile\r\n   */\r\n  HIGH = 170,\r\n  /**\r\n   * Additional Cost added to High Resolution Total Cost\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\r\n  ADDITIONAL = 85,\r\n}\r\n\r\n/**\r\n * Tab values for Settings Dialog\r\n */\r\nexport enum SettingsTabValues {\r\n  /**\r\n   * Tab for General Settings\r\n   */\r\n  GENERAL = 'general',\r\n  /**\r\n   * Tab for Chat Settings\r\n   */\r\n  CHAT = 'chat',\r\n  /**\r\n   * Tab for Speech Settings\r\n   */\r\n  SPEECH = 'speech',\r\n  /**\r\n   * Tab for Beta Features\r\n   */\r\n  BETA = 'beta',\r\n  /**\r\n   * Tab for Data Controls\r\n   */\r\n  DATA = 'data',\r\n  /**\r\n   * Tab for Balance Settings\r\n   */\r\n  BALANCE = 'balance',\r\n  /**\r\n   * Tab for Account Settings\r\n   */\r\n  ACCOUNT = 'account',\r\n  /**\r\n   * Chat input commands\r\n   */\r\n  COMMANDS = 'commands',\r\n  /**\r\n   * Tab for Personalization Settings\r\n   */\r\n  PERSONALIZATION = 'personalization',\r\n}\r\n\r\nexport enum STTProviders {\r\n  /**\r\n   * Provider for OpenAI STT\r\n   */\r\n  OPENAI = 'openai',\r\n  /**\r\n   * Provider for Microsoft Azure STT\r\n   */\r\n  AZURE_OPENAI = 'azureOpenAI',\r\n}\r\n\r\nexport enum TTSProviders {\r\n  /**\r\n   * Provider for OpenAI TTS\r\n   */\r\n  OPENAI = 'openai',\r\n  /**\r\n   * Provider for Microsoft Azure OpenAI TTS\r\n   */\r\n  AZURE_OPENAI = 'azureOpenAI',\r\n  /**\r\n   * Provider for ElevenLabs TTS\r\n   */\r\n  ELEVENLABS = 'elevenlabs',\r\n  /**\r\n   * Provider for LocalAI TTS\r\n   */\r\n  LOCALAI = 'localai',\r\n}\r\n\r\n/** Enum for app-wide constants */\r\nexport enum Constants {\r\n  /** Key for the app's version. */\r\n  VERSION = 'v0.8.0-rc4',\r\n  /** Key for the Custom Config's version (librechat.yaml). */\r\n  CONFIG_VERSION = '1.2.9',\r\n  /** Standard value for the first message's `parentMessageId` value, to indicate no parent exists. */\r\n  NO_PARENT = '00000000-0000-0000-0000-000000000000',\r\n  /** Standard value to use whatever the submission prelim. `responseMessageId` is */\r\n  USE_PRELIM_RESPONSE_MESSAGE_ID = 'USE_PRELIM_RESPONSE_MESSAGE_ID',\r\n  /** Standard value for the initial conversationId before a request is sent */\r\n  NEW_CONVO = 'new',\r\n  /** Standard value for the temporary conversationId after a request is sent and before the server responds */\r\n  PENDING_CONVO = 'PENDING',\r\n  /** Standard value for the conversationId used for search queries */\r\n  SEARCH = 'search',\r\n  /** Fixed, encoded domain length for Azure OpenAI Assistants Function name parsing. */\r\n  ENCODED_DOMAIN_LENGTH = 10,\r\n  /** Identifier for using current_model in multi-model requests. */\r\n  CURRENT_MODEL = 'current_model',\r\n  /** Common divider for text values */\r\n  COMMON_DIVIDER = '__',\r\n  /** Max length for commands */\r\n  COMMANDS_MAX_LENGTH = 56,\r\n  /** Default Stream Rate (ms) */\r\n  DEFAULT_STREAM_RATE = 1,\r\n  /** Saved Tag */\r\n  SAVED_TAG = 'Saved',\r\n  /** Max number of Conversation starters for Agents/Assistants */\r\n  MAX_CONVO_STARTERS = 4,\r\n  /** Global/instance Project Name */\r\n  GLOBAL_PROJECT_NAME = 'instance',\r\n  /** Delimiter for MCP tools */\r\n  mcp_delimiter = '_mcp_',\r\n  /** Prefix for MCP plugins */\r\n  mcp_prefix = 'mcp_',\r\n  /** Unique value to indicate all MCP servers. For backend use only. */\r\n  mcp_all = 'sys__all__sys',\r\n  /**\r\n   * Unique value to indicate the MCP tool was added to an agent.\r\n   * This helps inform the UI if the mcp server was previously added.\r\n   * */\r\n  mcp_server = 'sys__server__sys',\r\n  /** Placeholder Agent ID for Ephemeral Agents */\r\n  EPHEMERAL_AGENT_ID = 'ephemeral',\r\n}\r\n\r\nexport enum LocalStorageKeys {\r\n  /** Key for the admin defined App Title */\r\n  APP_TITLE = 'appTitle',\r\n  /** Key for the last conversation setup. */\r\n  LAST_CONVO_SETUP = 'lastConversationSetup',\r\n  /** Key for the last selected model. */\r\n  LAST_MODEL = 'lastSelectedModel',\r\n  /** Key for the last selected tools. */\r\n  LAST_TOOLS = 'lastSelectedTools',\r\n  /** Key for the last selected spec by name*/\r\n  LAST_SPEC = 'lastSelectedSpec',\r\n  /** Key for temporary files to delete */\r\n  FILES_TO_DELETE = 'filesToDelete',\r\n  /** Prefix key for the last selected assistant ID by index */\r\n  ASST_ID_PREFIX = 'assistant_id__',\r\n  /** Prefix key for the last selected agent ID by index */\r\n  AGENT_ID_PREFIX = 'agent_id__',\r\n  /** Key for the last selected fork setting */\r\n  FORK_SETTING = 'forkSetting',\r\n  /** Key for remembering the last selected option, instead of manually selecting */\r\n  REMEMBER_FORK_OPTION = 'rememberDefaultFork',\r\n  /** Key for remembering the split at target fork option modifier */\r\n  FORK_SPLIT_AT_TARGET = 'splitAtTarget',\r\n  /** Key for saving text drafts */\r\n  TEXT_DRAFT = 'textDraft_',\r\n  /** Key for saving file drafts */\r\n  FILES_DRAFT = 'filesDraft_',\r\n  /** Key for last Selected Prompt Category */\r\n  LAST_PROMPT_CATEGORY = 'lastPromptCategory',\r\n  /** Key for rendering User Messages as Markdown */\r\n  ENABLE_USER_MSG_MARKDOWN = 'enableUserMsgMarkdown',\r\n  /** Key for displaying analysis tool code input */\r\n  SHOW_ANALYSIS_CODE = 'showAnalysisCode',\r\n  /** Last selected MCP values per conversation ID */\r\n  LAST_MCP_ = 'LAST_MCP_',\r\n  /** Last checked toggle for Code Interpreter API per conversation ID */\r\n  LAST_CODE_TOGGLE_ = 'LAST_CODE_TOGGLE_',\r\n  /** Last checked toggle for Web Search per conversation ID */\r\n  LAST_WEB_SEARCH_TOGGLE_ = 'LAST_WEB_SEARCH_TOGGLE_',\r\n  /** Last checked toggle for File Search per conversation ID */\r\n  LAST_FILE_SEARCH_TOGGLE_ = 'LAST_FILE_SEARCH_TOGGLE_',\r\n  /** Last checked toggle for Artifacts per conversation ID */\r\n  LAST_ARTIFACTS_TOGGLE_ = 'LAST_ARTIFACTS_TOGGLE_',\r\n  /** Key for the last selected agent provider */\r\n  LAST_AGENT_PROVIDER = 'lastAgentProvider',\r\n  /** Key for the last selected agent model */\r\n  LAST_AGENT_MODEL = 'lastAgentModel',\r\n  /** Pin state for MCP tools per conversation ID */\r\n  PIN_MCP_ = 'PIN_MCP_',\r\n  /** Pin state for Web Search per conversation ID */\r\n  PIN_WEB_SEARCH_ = 'PIN_WEB_SEARCH_',\r\n  /** Pin state for Code Interpreter per conversation ID */\r\n  PIN_CODE_INTERPRETER_ = 'PIN_CODE_INTERPRETER_',\r\n}\r\n\r\nexport enum ForkOptions {\r\n  /** Key for direct path option */\r\n  DIRECT_PATH = 'directPath',\r\n  /** Key for including branches */\r\n  INCLUDE_BRANCHES = 'includeBranches',\r\n  /** Key for target level fork (default) */\r\n  TARGET_LEVEL = 'targetLevel',\r\n  /** Default option */\r\n  DEFAULT = 'default',\r\n}\r\n\r\n/**\r\n * Enum for Cohere related constants\r\n */\r\nexport enum CohereConstants {\r\n  /**\r\n   * Cohere API Endpoint, for special handling\r\n   */\r\n  API_URL = 'https://api.cohere.ai/v1',\r\n  /**\r\n   * Role for \"USER\" messages\r\n   */\r\n  ROLE_USER = 'USER',\r\n  /**\r\n   * Role for \"SYSTEM\" messages\r\n   */\r\n  ROLE_SYSTEM = 'SYSTEM',\r\n  /**\r\n   * Role for \"CHATBOT\" messages\r\n   */\r\n  ROLE_CHATBOT = 'CHATBOT',\r\n  /**\r\n   * Title message as required by Cohere\r\n   */\r\n  TITLE_MESSAGE = 'TITLE:',\r\n}\r\n\r\nexport enum SystemCategories {\r\n  ALL = 'sys__all__sys',\r\n  MY_PROMPTS = 'sys__my__prompts__sys',\r\n  NO_CATEGORY = 'sys__no__category__sys',\r\n  SHARED_PROMPTS = 'sys__shared__prompts__sys',\r\n}\r\n\r\nexport const providerEndpointMap = {\r\n  [EModelEndpoint.openAI]: EModelEndpoint.openAI,\r\n  [EModelEndpoint.bedrock]: EModelEndpoint.bedrock,\r\n  [EModelEndpoint.anthropic]: EModelEndpoint.anthropic,\r\n  [EModelEndpoint.azureOpenAI]: EModelEndpoint.azureOpenAI,\r\n};\r\n\r\nexport const specialVariables = {\r\n  current_date: true,\r\n  current_user: true,\r\n  iso_datetime: true,\r\n  current_datetime: true,\r\n};\r\n\r\nexport type TSpecialVarLabel = `com_ui_special_var_${keyof typeof specialVariables}`;\r\n","export enum ContentTypes {\r\n  TEXT = 'text',\r\n  THINK = 'think',\r\n  TEXT_DELTA = 'text_delta',\r\n  TOOL_CALL = 'tool_call',\r\n  IMAGE_FILE = 'image_file',\r\n  IMAGE_URL = 'image_url',\r\n  AGENT_UPDATE = 'agent_update',\r\n  ERROR = 'error',\r\n}\r\n\r\nexport enum StepTypes {\r\n  TOOL_CALLS = 'tool_calls',\r\n  MESSAGE_CREATION = 'message_creation',\r\n}\r\n\r\nexport enum ToolCallTypes {\r\n  FUNCTION = 'function',\r\n  RETRIEVAL = 'retrieval',\r\n  FILE_SEARCH = 'file_search',\r\n  CODE_INTERPRETER = 'code_interpreter',\r\n  /* Agents Tool Call */\r\n  TOOL_CALL = 'tool_call',\r\n}\r\n","import { z } from 'zod';\r\nimport * as s from './schemas';\r\n\r\ntype ThinkingConfig = {\r\n  type: 'enabled';\r\n  budget_tokens: number;\r\n};\r\ntype AnthropicReasoning = {\r\n  thinking?: ThinkingConfig | boolean;\r\n  thinkingBudget?: number;\r\n};\r\n\r\ntype AnthropicInput = BedrockConverseInput & {\r\n  additionalModelRequestFields: BedrockConverseInput['additionalModelRequestFields'] &\r\n    AnthropicReasoning;\r\n};\r\n\r\nexport const bedrockInputSchema = s.tConversationSchema\r\n  .pick({\r\n    /* LibreChat params; optionType: 'conversation' */\r\n    modelLabel: true,\r\n    promptPrefix: true,\r\n    resendFiles: true,\r\n    iconURL: true,\r\n    greeting: true,\r\n    spec: true,\r\n    maxOutputTokens: true,\r\n    maxContextTokens: true,\r\n    artifacts: true,\r\n    /* Bedrock params; optionType: 'model' */\r\n    region: true,\r\n    system: true,\r\n    model: true,\r\n    maxTokens: true,\r\n    temperature: true,\r\n    topP: true,\r\n    stop: true,\r\n    thinking: true,\r\n    thinkingBudget: true,\r\n    /* Catch-all fields */\r\n    topK: true,\r\n    additionalModelRequestFields: true,\r\n  })\r\n  .transform((obj) => {\r\n    if ((obj as AnthropicInput).additionalModelRequestFields?.thinking != null) {\r\n      const _obj = obj as AnthropicInput;\r\n      obj.thinking = !!_obj.additionalModelRequestFields.thinking;\r\n      obj.thinkingBudget =\r\n        typeof _obj.additionalModelRequestFields.thinking === 'object'\r\n          ? (_obj.additionalModelRequestFields.thinking as ThinkingConfig)?.budget_tokens\r\n          : undefined;\r\n      delete obj.additionalModelRequestFields;\r\n    }\r\n    return s.removeNullishValues(obj);\r\n  })\r\n  .catch(() => ({}));\r\n\r\nexport type BedrockConverseInput = z.infer<typeof bedrockInputSchema>;\r\n\r\nexport const bedrockInputParser = s.tConversationSchema\r\n  .pick({\r\n    /* LibreChat params; optionType: 'conversation' */\r\n    modelLabel: true,\r\n    promptPrefix: true,\r\n    resendFiles: true,\r\n    iconURL: true,\r\n    greeting: true,\r\n    spec: true,\r\n    artifacts: true,\r\n    maxOutputTokens: true,\r\n    maxContextTokens: true,\r\n    /* Bedrock params; optionType: 'model' */\r\n    region: true,\r\n    model: true,\r\n    maxTokens: true,\r\n    temperature: true,\r\n    topP: true,\r\n    stop: true,\r\n    thinking: true,\r\n    thinkingBudget: true,\r\n    /* Catch-all fields */\r\n    topK: true,\r\n    additionalModelRequestFields: true,\r\n  })\r\n  .catchall(z.any())\r\n  .transform((data) => {\r\n    const knownKeys = [\r\n      'modelLabel',\r\n      'promptPrefix',\r\n      'resendFiles',\r\n      'iconURL',\r\n      'greeting',\r\n      'spec',\r\n      'maxOutputTokens',\r\n      'artifacts',\r\n      'additionalModelRequestFields',\r\n      'region',\r\n      'model',\r\n      'maxTokens',\r\n      'temperature',\r\n      'topP',\r\n      'stop',\r\n    ];\r\n\r\n    const additionalFields: Record<string, unknown> = {};\r\n    const typedData = data as Record<string, unknown>;\r\n\r\n    Object.entries(typedData).forEach(([key, value]) => {\r\n      if (!knownKeys.includes(key)) {\r\n        if (key === 'topK') {\r\n          additionalFields['top_k'] = value;\r\n        } else {\r\n          additionalFields[key] = value;\r\n        }\r\n        delete typedData[key];\r\n      }\r\n    });\r\n\r\n    /** Default thinking and thinkingBudget for 'anthropic.claude-3-7-sonnet' models, if not defined */\r\n    if (\r\n      typeof typedData.model === 'string' &&\r\n      (typedData.model.includes('anthropic.claude-3-7-sonnet') ||\r\n        /anthropic\\.claude-(?:[4-9](?:\\.\\d+)?(?:-\\d+)?-(?:sonnet|opus|haiku)|(?:sonnet|opus|haiku)-[4-9])/.test(\r\n          typedData.model,\r\n        ))\r\n    ) {\r\n      if (additionalFields.thinking === undefined) {\r\n        additionalFields.thinking = true;\r\n      } else if (additionalFields.thinking === false) {\r\n        delete additionalFields.thinking;\r\n        delete additionalFields.thinkingBudget;\r\n      }\r\n\r\n      if (additionalFields.thinking === true && additionalFields.thinkingBudget === undefined) {\r\n        additionalFields.thinkingBudget = 2000;\r\n      }\r\n      additionalFields.anthropic_beta = ['output-128k-2025-02-19'];\r\n    } else if (additionalFields.thinking != null || additionalFields.thinkingBudget != null) {\r\n      delete additionalFields.thinking;\r\n      delete additionalFields.thinkingBudget;\r\n    }\r\n\r\n    if (Object.keys(additionalFields).length > 0) {\r\n      typedData.additionalModelRequestFields = {\r\n        ...((typedData.additionalModelRequestFields as Record<string, unknown> | undefined) || {}),\r\n        ...additionalFields,\r\n      };\r\n    }\r\n\r\n    if (typedData.maxOutputTokens !== undefined) {\r\n      typedData.maxTokens = typedData.maxOutputTokens;\r\n    } else if (typedData.maxTokens !== undefined) {\r\n      typedData.maxOutputTokens = typedData.maxTokens;\r\n    }\r\n\r\n    return s.removeNullishValues(typedData) as BedrockConverseInput;\r\n  })\r\n  .catch(() => ({}));\r\n\r\n/**\r\n * Configures the \"thinking\" parameter based on given input and thinking options.\r\n *\r\n * @param data - The parsed Bedrock request options object\r\n * @returns The object with thinking configured appropriately\r\n */\r\nfunction configureThinking(data: AnthropicInput): AnthropicInput {\r\n  const updatedData = { ...data };\r\n  if (updatedData.additionalModelRequestFields?.thinking === true) {\r\n    updatedData.maxTokens = updatedData.maxTokens ?? updatedData.maxOutputTokens ?? 8192;\r\n    delete updatedData.maxOutputTokens;\r\n    const thinkingConfig: AnthropicReasoning['thinking'] = {\r\n      type: 'enabled',\r\n      budget_tokens: updatedData.additionalModelRequestFields.thinkingBudget ?? 2000,\r\n    };\r\n\r\n    if (thinkingConfig.budget_tokens > updatedData.maxTokens) {\r\n      thinkingConfig.budget_tokens = Math.floor(updatedData.maxTokens * 0.9);\r\n    }\r\n    updatedData.additionalModelRequestFields.thinking = thinkingConfig;\r\n    delete updatedData.additionalModelRequestFields.thinkingBudget;\r\n  }\r\n  return updatedData;\r\n}\r\n\r\nexport const bedrockOutputParser = (data: Record<string, unknown>) => {\r\n  const knownKeys = [...Object.keys(s.tConversationSchema.shape), 'topK', 'top_k'];\r\n  let result: Record<string, unknown> = {};\r\n\r\n  // Extract known fields from the root level\r\n  Object.entries(data).forEach(([key, value]) => {\r\n    if (knownKeys.includes(key)) {\r\n      result[key] = value;\r\n    }\r\n  });\r\n\r\n  // Extract known fields from additionalModelRequestFields\r\n  if (\r\n    typeof data.additionalModelRequestFields === 'object' &&\r\n    data.additionalModelRequestFields !== null\r\n  ) {\r\n    Object.entries(data.additionalModelRequestFields as Record<string, unknown>).forEach(\r\n      ([key, value]) => {\r\n        if (knownKeys.includes(key)) {\r\n          if (key === 'top_k') {\r\n            result['topK'] = value;\r\n          } else if (key === 'thinking' || key === 'thinkingBudget') {\r\n            return;\r\n          } else {\r\n            result[key] = value;\r\n          }\r\n        }\r\n      },\r\n    );\r\n  }\r\n\r\n  // Handle maxTokens and maxOutputTokens\r\n  if (result.maxTokens !== undefined && result.maxOutputTokens === undefined) {\r\n    result.maxOutputTokens = result.maxTokens;\r\n  } else if (result.maxOutputTokens !== undefined && result.maxTokens === undefined) {\r\n    result.maxTokens = result.maxOutputTokens;\r\n  }\r\n\r\n  result = configureThinking(result as AnthropicInput);\r\n  // Remove additionalModelRequestFields from the result if it doesn't thinking config\r\n  if ((result as AnthropicInput).additionalModelRequestFields?.thinking == null) {\r\n    delete result.additionalModelRequestFields;\r\n  }\r\n\r\n  return result;\r\n};\r\n","import dayjs from 'dayjs';\r\nimport type { ZodIssue } from 'zod';\r\nimport type * as a from './types/assistants';\r\nimport type * as s from './schemas';\r\nimport type * as t from './types';\r\nimport { ContentTypes } from './types/runs';\r\nimport {\r\n  openAISchema,\r\n  googleSchema,\r\n  EModelEndpoint,\r\n  anthropicSchema,\r\n  assistantSchema,\r\n  gptPluginsSchema,\r\n  // agentsSchema,\r\n  compactAgentsSchema,\r\n  compactGoogleSchema,\r\n  compactPluginsSchema,\r\n  compactAssistantSchema,\r\n} from './schemas';\r\nimport { bedrockInputSchema } from './bedrock';\r\nimport { alternateName } from './config';\r\n\r\ntype EndpointSchema =\r\n  | typeof openAISchema\r\n  | typeof googleSchema\r\n  | typeof anthropicSchema\r\n  | typeof gptPluginsSchema\r\n  | typeof assistantSchema\r\n  | typeof compactAgentsSchema\r\n  | typeof bedrockInputSchema;\r\n\r\nexport type EndpointSchemaKey = Exclude<EModelEndpoint, EModelEndpoint.chatGPTBrowser>;\r\n\r\nconst endpointSchemas: Record<EndpointSchemaKey, EndpointSchema> = {\r\n  [EModelEndpoint.openAI]: openAISchema,\r\n  [EModelEndpoint.azureOpenAI]: openAISchema,\r\n  [EModelEndpoint.custom]: openAISchema,\r\n  [EModelEndpoint.google]: googleSchema,\r\n  [EModelEndpoint.anthropic]: anthropicSchema,\r\n  [EModelEndpoint.gptPlugins]: gptPluginsSchema,\r\n  [EModelEndpoint.assistants]: assistantSchema,\r\n  [EModelEndpoint.azureAssistants]: assistantSchema,\r\n  [EModelEndpoint.agents]: compactAgentsSchema,\r\n  [EModelEndpoint.bedrock]: bedrockInputSchema,\r\n};\r\n\r\n// const schemaCreators: Record<EModelEndpoint, (customSchema: DefaultSchemaValues) => EndpointSchema> = {\r\n//   [EModelEndpoint.google]: createGoogleSchema,\r\n// };\r\n\r\n/** Get the enabled endpoints from the `ENDPOINTS` environment variable */\r\nexport function getEnabledEndpoints() {\r\n  const defaultEndpoints: string[] = [\r\n    EModelEndpoint.openAI,\r\n    EModelEndpoint.agents,\r\n    EModelEndpoint.assistants,\r\n    EModelEndpoint.azureAssistants,\r\n    EModelEndpoint.azureOpenAI,\r\n    EModelEndpoint.google,\r\n    EModelEndpoint.chatGPTBrowser,\r\n    EModelEndpoint.gptPlugins,\r\n    EModelEndpoint.anthropic,\r\n    EModelEndpoint.bedrock,\r\n  ];\r\n\r\n  const endpointsEnv = process.env.ENDPOINTS ?? '';\r\n  let enabledEndpoints = defaultEndpoints;\r\n  if (endpointsEnv) {\r\n    enabledEndpoints = endpointsEnv\r\n      .split(',')\r\n      .filter((endpoint) => endpoint.trim())\r\n      .map((endpoint) => endpoint.trim());\r\n  }\r\n  return enabledEndpoints;\r\n}\r\n\r\n/** Orders an existing EndpointsConfig object based on enabled endpoint/custom ordering */\r\nexport function orderEndpointsConfig(endpointsConfig: t.TEndpointsConfig) {\r\n  if (!endpointsConfig) {\r\n    return {};\r\n  }\r\n  const enabledEndpoints = getEnabledEndpoints();\r\n  const endpointKeys = Object.keys(endpointsConfig);\r\n  const defaultCustomIndex = enabledEndpoints.indexOf(EModelEndpoint.custom);\r\n  return endpointKeys.reduce(\r\n    (accumulatedConfig: Record<string, t.TConfig | null | undefined>, currentEndpointKey) => {\r\n      const isCustom = !(currentEndpointKey in EModelEndpoint);\r\n      const isEnabled = enabledEndpoints.includes(currentEndpointKey);\r\n      if (!isEnabled && !isCustom) {\r\n        return accumulatedConfig;\r\n      }\r\n\r\n      const index = enabledEndpoints.indexOf(currentEndpointKey);\r\n\r\n      if (isCustom) {\r\n        accumulatedConfig[currentEndpointKey] = {\r\n          order: defaultCustomIndex >= 0 ? defaultCustomIndex : 9999,\r\n          ...(endpointsConfig[currentEndpointKey] as Omit<t.TConfig, 'order'> & { order?: number }),\r\n        };\r\n      } else if (endpointsConfig[currentEndpointKey]) {\r\n        accumulatedConfig[currentEndpointKey] = {\r\n          ...endpointsConfig[currentEndpointKey],\r\n          order: index,\r\n        };\r\n      }\r\n      return accumulatedConfig;\r\n    },\r\n    {},\r\n  );\r\n}\r\n\r\n/** Converts an array of Zod issues into a string. */\r\nexport function errorsToString(errors: ZodIssue[]) {\r\n  return errors\r\n    .map((error) => {\r\n      const field = error.path.join('.');\r\n      const message = error.message;\r\n\r\n      return `${field}: ${message}`;\r\n    })\r\n    .join(' ');\r\n}\r\n\r\nexport function getFirstDefinedValue(possibleValues: string[]) {\r\n  let returnValue;\r\n  for (const value of possibleValues) {\r\n    if (value) {\r\n      returnValue = value;\r\n      break;\r\n    }\r\n  }\r\n  return returnValue;\r\n}\r\n\r\nexport function getNonEmptyValue(possibleValues: string[]) {\r\n  for (const value of possibleValues) {\r\n    if (value && value.trim() !== '') {\r\n      return value;\r\n    }\r\n  }\r\n  return undefined;\r\n}\r\n\r\nexport type TPossibleValues = {\r\n  models: string[];\r\n  secondaryModels?: string[];\r\n};\r\n\r\nexport const parseConvo = ({\r\n  endpoint,\r\n  endpointType,\r\n  conversation,\r\n  possibleValues,\r\n}: {\r\n  endpoint: EndpointSchemaKey;\r\n  endpointType?: EndpointSchemaKey | null;\r\n  conversation: Partial<s.TConversation | s.TPreset> | null;\r\n  possibleValues?: TPossibleValues;\r\n  // TODO: POC for default schema\r\n  // defaultSchema?: Partial<EndpointSchema>,\r\n}) => {\r\n  let schema = endpointSchemas[endpoint] as EndpointSchema | undefined;\r\n\r\n  if (!schema && !endpointType) {\r\n    throw new Error(`Unknown endpoint: ${endpoint}`);\r\n  } else if (!schema && endpointType) {\r\n    schema = endpointSchemas[endpointType];\r\n  }\r\n\r\n  // if (defaultSchema && schemaCreators[endpoint]) {\r\n  //   schema = schemaCreators[endpoint](defaultSchema);\r\n  // }\r\n\r\n  const convo = schema?.parse(conversation) as s.TConversation | undefined;\r\n  const { models, secondaryModels } = possibleValues ?? {};\r\n\r\n  if (models && convo) {\r\n    convo.model = getFirstDefinedValue(models) ?? convo.model;\r\n  }\r\n\r\n  if (secondaryModels && convo?.agentOptions) {\r\n    convo.agentOptions.model = getFirstDefinedValue(secondaryModels) ?? convo.agentOptions.model;\r\n  }\r\n\r\n  return convo;\r\n};\r\n\r\n/** Match GPT followed by digit, optional decimal, and optional suffix\r\n *\r\n * Examples: gpt-4, gpt-4o, gpt-4.5, gpt-5a, etc. */\r\nconst extractGPTVersion = (modelStr: string): string => {\r\n  const gptMatch = modelStr.match(/gpt-(\\d+(?:\\.\\d+)?)([a-z])?/i);\r\n  if (gptMatch) {\r\n    const version = gptMatch[1];\r\n    const suffix = gptMatch[2] || '';\r\n    return `GPT-${version}${suffix}`;\r\n  }\r\n  return '';\r\n};\r\n\r\n/** Match omni models (o1, o3, etc.), \"o\" followed by a digit, possibly with decimal */\r\nconst extractOmniVersion = (modelStr: string): string => {\r\n  const omniMatch = modelStr.match(/\\bo(\\d+(?:\\.\\d+)?)\\b/i);\r\n  if (omniMatch) {\r\n    const version = omniMatch[1];\r\n    return `o${version}`;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport const getResponseSender = (endpointOption: t.TEndpointOption): string => {\r\n  const {\r\n    model: _m,\r\n    endpoint: _e,\r\n    endpointType,\r\n    modelDisplayLabel: _mdl,\r\n    chatGptLabel: _cgl,\r\n    modelLabel: _ml,\r\n  } = endpointOption;\r\n\r\n  const endpoint = _e as EModelEndpoint;\r\n\r\n  const model = _m ?? '';\r\n  const modelDisplayLabel = _mdl ?? '';\r\n  const chatGptLabel = _cgl ?? '';\r\n  const modelLabel = _ml ?? '';\r\n  if (\r\n    [\r\n      EModelEndpoint.openAI,\r\n      EModelEndpoint.bedrock,\r\n      EModelEndpoint.gptPlugins,\r\n      EModelEndpoint.azureOpenAI,\r\n      EModelEndpoint.chatGPTBrowser,\r\n    ].includes(endpoint)\r\n  ) {\r\n    if (chatGptLabel) {\r\n      return chatGptLabel;\r\n    } else if (modelLabel) {\r\n      return modelLabel;\r\n    } else if (model && extractOmniVersion(model)) {\r\n      return extractOmniVersion(model);\r\n    } else if (model && (model.includes('mistral') || model.includes('codestral'))) {\r\n      return 'Mistral';\r\n    } else if (model && model.includes('deepseek')) {\r\n      return 'Deepseek';\r\n    } else if (model && model.includes('gpt-')) {\r\n      const gptVersion = extractGPTVersion(model);\r\n      return gptVersion || 'GPT';\r\n    }\r\n    return (alternateName[endpoint] as string | undefined) ?? 'ChatGPT';\r\n  }\r\n\r\n  if (endpoint === EModelEndpoint.anthropic) {\r\n    return modelLabel || 'Claude';\r\n  }\r\n\r\n  if (endpoint === EModelEndpoint.bedrock) {\r\n    return modelLabel || alternateName[endpoint];\r\n  }\r\n\r\n  if (endpoint === EModelEndpoint.google) {\r\n    if (modelLabel) {\r\n      return modelLabel;\r\n    } else if (model?.toLowerCase().includes('gemma') === true) {\r\n      return 'Gemma';\r\n    }\r\n\r\n    return 'Gemini';\r\n  }\r\n\r\n  if (endpoint === EModelEndpoint.custom || endpointType === EModelEndpoint.custom) {\r\n    if (modelLabel) {\r\n      return modelLabel;\r\n    } else if (chatGptLabel) {\r\n      return chatGptLabel;\r\n    } else if (model && extractOmniVersion(model)) {\r\n      return extractOmniVersion(model);\r\n    } else if (model && (model.includes('mistral') || model.includes('codestral'))) {\r\n      return 'Mistral';\r\n    } else if (model && model.includes('deepseek')) {\r\n      return 'Deepseek';\r\n    } else if (model && model.includes('gpt-')) {\r\n      const gptVersion = extractGPTVersion(model);\r\n      return gptVersion || 'GPT';\r\n    } else if (modelDisplayLabel) {\r\n      return modelDisplayLabel;\r\n    }\r\n\r\n    return 'AI';\r\n  }\r\n\r\n  return '';\r\n};\r\n\r\ntype CompactEndpointSchema =\r\n  | typeof openAISchema\r\n  | typeof compactAssistantSchema\r\n  | typeof compactAgentsSchema\r\n  | typeof compactGoogleSchema\r\n  | typeof anthropicSchema\r\n  | typeof bedrockInputSchema\r\n  | typeof compactPluginsSchema;\r\n\r\nconst compactEndpointSchemas: Record<EndpointSchemaKey, CompactEndpointSchema> = {\r\n  [EModelEndpoint.openAI]: openAISchema,\r\n  [EModelEndpoint.azureOpenAI]: openAISchema,\r\n  [EModelEndpoint.custom]: openAISchema,\r\n  [EModelEndpoint.assistants]: compactAssistantSchema,\r\n  [EModelEndpoint.azureAssistants]: compactAssistantSchema,\r\n  [EModelEndpoint.agents]: compactAgentsSchema,\r\n  [EModelEndpoint.google]: compactGoogleSchema,\r\n  [EModelEndpoint.bedrock]: bedrockInputSchema,\r\n  [EModelEndpoint.anthropic]: anthropicSchema,\r\n  [EModelEndpoint.gptPlugins]: compactPluginsSchema,\r\n};\r\n\r\nexport const parseCompactConvo = ({\r\n  endpoint,\r\n  endpointType,\r\n  conversation,\r\n  possibleValues,\r\n}: {\r\n  endpoint?: EndpointSchemaKey;\r\n  endpointType?: EndpointSchemaKey | null;\r\n  conversation: Partial<s.TConversation | s.TPreset>;\r\n  possibleValues?: TPossibleValues;\r\n  // TODO: POC for default schema\r\n  // defaultSchema?: Partial<EndpointSchema>,\r\n}) => {\r\n  if (!endpoint) {\r\n    throw new Error(`undefined endpoint: ${endpoint}`);\r\n  }\r\n\r\n  let schema = compactEndpointSchemas[endpoint] as CompactEndpointSchema | undefined;\r\n\r\n  if (!schema && !endpointType) {\r\n    throw new Error(`Unknown endpoint: ${endpoint}`);\r\n  } else if (!schema && endpointType) {\r\n    schema = compactEndpointSchemas[endpointType];\r\n  }\r\n\r\n  if (!schema) {\r\n    throw new Error(`Unknown endpointType: ${endpointType}`);\r\n  }\r\n\r\n  const convo = schema.parse(conversation) as s.TConversation | null;\r\n  // const { models, secondaryModels } = possibleValues ?? {};\r\n  const { models } = possibleValues ?? {};\r\n\r\n  if (models && convo) {\r\n    convo.model = getFirstDefinedValue(models) ?? convo.model;\r\n  }\r\n\r\n  // if (secondaryModels && convo.agentOptions) {\r\n  //   convo.agentOptionmodel = getFirstDefinedValue(secondaryModels) ?? convo.agentOptionmodel;\r\n  // }\r\n\r\n  return convo;\r\n};\r\n\r\nexport function parseTextParts(\r\n  contentParts: a.TMessageContentParts[],\r\n  skipReasoning: boolean = false,\r\n): string {\r\n  let result = '';\r\n\r\n  for (const part of contentParts) {\r\n    if (!part.type) {\r\n      continue;\r\n    }\r\n    if (part.type === ContentTypes.TEXT) {\r\n      const textValue = typeof part.text === 'string' ? part.text : part.text.value;\r\n\r\n      if (\r\n        result.length > 0 &&\r\n        textValue.length > 0 &&\r\n        result[result.length - 1] !== ' ' &&\r\n        textValue[0] !== ' '\r\n      ) {\r\n        result += ' ';\r\n      }\r\n      result += textValue;\r\n    } else if (part.type === ContentTypes.THINK && !skipReasoning) {\r\n      const textValue = typeof part.think === 'string' ? part.think : '';\r\n      if (\r\n        result.length > 0 &&\r\n        textValue.length > 0 &&\r\n        result[result.length - 1] !== ' ' &&\r\n        textValue[0] !== ' '\r\n      ) {\r\n        result += ' ';\r\n      }\r\n      result += textValue;\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport const SEPARATORS = ['.', '?', '!', '', '', '', ';', '', '', '\\n', '```'];\r\n\r\nexport function findLastSeparatorIndex(text: string, separators = SEPARATORS): number {\r\n  let lastIndex = -1;\r\n  for (const separator of separators) {\r\n    const index = text.lastIndexOf(separator);\r\n    if (index > lastIndex) {\r\n      lastIndex = index;\r\n    }\r\n  }\r\n  return lastIndex;\r\n}\r\n\r\nexport function replaceSpecialVars({ text, user }: { text: string; user?: t.TUser | null }) {\r\n  let result = text;\r\n  if (!result) {\r\n    return result;\r\n  }\r\n\r\n  // e.g., \"2024-04-29 (1)\" (1=Monday)\r\n  const currentDate = dayjs().format('YYYY-MM-DD');\r\n  const dayNumber = dayjs().day();\r\n  const combinedDate = `${currentDate} (${dayNumber})`;\r\n  result = result.replace(/{{current_date}}/gi, combinedDate);\r\n\r\n  const currentDatetime = dayjs().format('YYYY-MM-DD HH:mm:ss');\r\n  result = result.replace(/{{current_datetime}}/gi, `${currentDatetime} (${dayNumber})`);\r\n\r\n  const isoDatetime = dayjs().toISOString();\r\n  result = result.replace(/{{iso_datetime}}/gi, isoDatetime);\r\n\r\n  if (user && user.name) {\r\n    result = result.replace(/{{current_user}}/gi, user.name);\r\n  }\r\n\r\n  return result;\r\n}\r\n","import type { ZodError } from 'zod';\r\nimport type {\r\n  TAzureGroups,\r\n  TAzureGroupMap,\r\n  TAzureModelGroupMap,\r\n  TValidatedAzureConfig,\r\n  TAzureConfigValidationResult,\r\n} from '../src/config';\r\nimport { extractEnvVariable, envVarRegex } from '../src/utils';\r\nimport { azureGroupConfigsSchema } from '../src/config';\r\nimport { errorsToString } from '../src/parsers';\r\n\r\nexport const deprecatedAzureVariables = [\r\n  /* \"related to\" precedes description text */\r\n  { key: 'AZURE_OPENAI_DEFAULT_MODEL', description: 'setting a default model' },\r\n  { key: 'AZURE_OPENAI_MODELS', description: 'setting models' },\r\n  {\r\n    key: 'AZURE_USE_MODEL_AS_DEPLOYMENT_NAME',\r\n    description: 'using model names as deployment names',\r\n  },\r\n  { key: 'AZURE_API_KEY', description: 'setting a single Azure API key' },\r\n  { key: 'AZURE_OPENAI_API_INSTANCE_NAME', description: 'setting a single Azure instance name' },\r\n  {\r\n    key: 'AZURE_OPENAI_API_DEPLOYMENT_NAME',\r\n    description: 'setting a single Azure deployment name',\r\n  },\r\n  { key: 'AZURE_OPENAI_API_VERSION', description: 'setting a single Azure API version' },\r\n  {\r\n    key: 'AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME',\r\n    description: 'setting a single Azure completions deployment name',\r\n  },\r\n  {\r\n    key: 'AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME',\r\n    description: 'setting a single Azure embeddings deployment name',\r\n  },\r\n  {\r\n    key: 'PLUGINS_USE_AZURE',\r\n    description: 'using Azure for Plugins',\r\n  },\r\n];\r\n\r\nexport const conflictingAzureVariables = [\r\n  {\r\n    key: 'INSTANCE_NAME',\r\n  },\r\n  {\r\n    key: 'DEPLOYMENT_NAME',\r\n  },\r\n];\r\n\r\nexport function validateAzureGroups(configs: TAzureGroups): TAzureConfigValidationResult {\r\n  let isValid = true;\r\n  const modelNames: string[] = [];\r\n  const modelGroupMap: TAzureModelGroupMap = {};\r\n  const groupMap: TAzureGroupMap = {};\r\n  const errors: (ZodError | string)[] = [];\r\n\r\n  const result = azureGroupConfigsSchema.safeParse(configs);\r\n  if (!result.success) {\r\n    isValid = false;\r\n    errors.push(errorsToString(result.error.errors));\r\n  } else {\r\n    for (const group of result.data) {\r\n      const {\r\n        group: groupName,\r\n        apiKey,\r\n        instanceName = '',\r\n        deploymentName = '',\r\n        version = '',\r\n        baseURL = '',\r\n        additionalHeaders,\r\n        models,\r\n        serverless = false,\r\n        ...rest\r\n      } = group;\r\n\r\n      if (groupMap[groupName]) {\r\n        errors.push(`Duplicate group name detected: \"${groupName}\". Group names must be unique.`);\r\n        return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n      }\r\n\r\n      if (serverless && !baseURL) {\r\n        errors.push(`Group \"${groupName}\" is serverless but missing mandatory \"baseURL.\"`);\r\n        return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n      }\r\n\r\n      if (!instanceName && !serverless) {\r\n        errors.push(\r\n          `Group \"${groupName}\" is missing an \"instanceName\" for non-serverless configuration.`,\r\n        );\r\n        return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n      }\r\n\r\n      groupMap[groupName] = {\r\n        apiKey,\r\n        instanceName,\r\n        deploymentName,\r\n        version,\r\n        baseURL,\r\n        additionalHeaders,\r\n        models,\r\n        serverless,\r\n        ...rest,\r\n      };\r\n\r\n      for (const modelName in group.models) {\r\n        modelNames.push(modelName);\r\n        const model = group.models[modelName];\r\n\r\n        if (modelGroupMap[modelName]) {\r\n          errors.push(\r\n            `Duplicate model name detected: \"${modelName}\". Model names must be unique across groups.`,\r\n          );\r\n          return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n        }\r\n\r\n        if (serverless) {\r\n          modelGroupMap[modelName] = {\r\n            group: groupName,\r\n          };\r\n          continue;\r\n        }\r\n\r\n        const groupDeploymentName = group.deploymentName ?? '';\r\n        const groupVersion = group.version ?? '';\r\n        if (typeof model === 'boolean') {\r\n          // For boolean models, check if group-level deploymentName and version are present.\r\n          if (!groupDeploymentName || !groupVersion) {\r\n            errors.push(\r\n              `Model \"${modelName}\" in group \"${groupName}\" is missing a deploymentName or version.`,\r\n            );\r\n            return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n          }\r\n\r\n          modelGroupMap[modelName] = {\r\n            group: groupName,\r\n          };\r\n        } else {\r\n          const modelDeploymentName = model.deploymentName ?? '';\r\n          const modelVersion = model.version ?? '';\r\n          // For object models, check if deploymentName and version are required but missing.\r\n          if ((!modelDeploymentName && !groupDeploymentName) || (!modelVersion && !groupVersion)) {\r\n            errors.push(\r\n              `Model \"${modelName}\" in group \"${groupName}\" is missing a required deploymentName or version.`,\r\n            );\r\n            return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n          }\r\n\r\n          modelGroupMap[modelName] = {\r\n            group: groupName,\r\n            // deploymentName: modelDeploymentName || groupDeploymentName,\r\n            // version: modelVersion || groupVersion,\r\n          };\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return { isValid, modelNames, modelGroupMap, groupMap, errors };\r\n}\r\n\r\ntype AzureOptions = {\r\n  azureOpenAIApiKey: string;\r\n  azureOpenAIApiInstanceName?: string;\r\n  azureOpenAIApiDeploymentName?: string;\r\n  azureOpenAIApiVersion?: string;\r\n};\r\n\r\ntype MappedAzureConfig = {\r\n  azureOptions: AzureOptions;\r\n  baseURL?: string;\r\n  headers?: Record<string, string>;\r\n  serverless?: boolean;\r\n};\r\n\r\nexport function mapModelToAzureConfig({\r\n  modelName,\r\n  modelGroupMap,\r\n  groupMap,\r\n}: Omit<TValidatedAzureConfig, 'modelNames'> & {\r\n  modelName: string;\r\n}): MappedAzureConfig {\r\n  const modelConfig = modelGroupMap[modelName];\r\n  if (!modelConfig) {\r\n    throw new Error(`Model named \"${modelName}\" not found in configuration.`);\r\n  }\r\n\r\n  const groupConfig = groupMap[modelConfig.group];\r\n  if (!groupConfig) {\r\n    throw new Error(\r\n      `Group \"${modelConfig.group}\" for model \"${modelName}\" not found in configuration.`,\r\n    );\r\n  }\r\n\r\n  const instanceName = groupConfig.instanceName ?? '';\r\n\r\n  if (!instanceName && groupConfig.serverless !== true) {\r\n    throw new Error(\r\n      `Group \"${modelConfig.group}\" is missing an instanceName for non-serverless configuration.`,\r\n    );\r\n  }\r\n\r\n  const baseURL = groupConfig.baseURL ?? '';\r\n  if (groupConfig.serverless === true && !baseURL) {\r\n    throw new Error(\r\n      `Group \"${modelConfig.group}\" is missing the required base URL for serverless configuration.`,\r\n    );\r\n  }\r\n\r\n  if (groupConfig.serverless === true) {\r\n    const result: MappedAzureConfig = {\r\n      azureOptions: {\r\n        azureOpenAIApiVersion: extractEnvVariable(groupConfig.version ?? ''),\r\n        azureOpenAIApiKey: extractEnvVariable(groupConfig.apiKey),\r\n      },\r\n      baseURL: extractEnvVariable(baseURL),\r\n      serverless: true,\r\n    };\r\n\r\n    const apiKeyValue = result.azureOptions.azureOpenAIApiKey;\r\n    if (typeof apiKeyValue === 'string' && envVarRegex.test(apiKeyValue)) {\r\n      throw new Error(`Azure configuration environment variable \"${apiKeyValue}\" was not found.`);\r\n    }\r\n\r\n    if (groupConfig.additionalHeaders) {\r\n      result.headers = groupConfig.additionalHeaders;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  if (!instanceName) {\r\n    throw new Error(\r\n      `Group \"${modelConfig.group}\" is missing an instanceName for non-serverless configuration.`,\r\n    );\r\n  }\r\n\r\n  const modelDetails = groupConfig.models[modelName];\r\n  const { deploymentName = '', version = '' } =\r\n    typeof modelDetails === 'object'\r\n      ? {\r\n        deploymentName: modelDetails.deploymentName ?? groupConfig.deploymentName,\r\n        version: modelDetails.version ?? groupConfig.version,\r\n      }\r\n      : {\r\n        deploymentName: groupConfig.deploymentName,\r\n        version: groupConfig.version,\r\n      };\r\n\r\n  if (!deploymentName || !version) {\r\n    throw new Error(\r\n      `Model \"${modelName}\" in group \"${modelConfig.group}\" is missing a deploymentName (\"${deploymentName}\") or version (\"${version}\").`,\r\n    );\r\n  }\r\n\r\n  const azureOptions: AzureOptions = {\r\n    azureOpenAIApiKey: extractEnvVariable(groupConfig.apiKey),\r\n    azureOpenAIApiInstanceName: extractEnvVariable(instanceName),\r\n    azureOpenAIApiDeploymentName: extractEnvVariable(deploymentName),\r\n    azureOpenAIApiVersion: extractEnvVariable(version),\r\n  };\r\n\r\n  for (const value of Object.values(azureOptions)) {\r\n    if (typeof value === 'string' && envVarRegex.test(value)) {\r\n      throw new Error(`Azure configuration environment variable \"${value}\" was not found.`);\r\n    }\r\n  }\r\n\r\n  const result: MappedAzureConfig = { azureOptions };\r\n\r\n  if (baseURL) {\r\n    result.baseURL = extractEnvVariable(baseURL);\r\n  }\r\n\r\n  if (groupConfig.additionalHeaders) {\r\n    result.headers = groupConfig.additionalHeaders;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function mapGroupToAzureConfig({\r\n  groupName,\r\n  groupMap,\r\n}: {\r\n  groupName: string;\r\n  groupMap: TAzureGroupMap;\r\n}): MappedAzureConfig {\r\n  const groupConfig = groupMap[groupName];\r\n  if (!groupConfig) {\r\n    throw new Error(`Group named \"${groupName}\" not found in configuration.`);\r\n  }\r\n\r\n  const instanceName = groupConfig.instanceName ?? '';\r\n  const serverless = groupConfig.serverless ?? false;\r\n  const baseURL = groupConfig.baseURL ?? '';\r\n\r\n  if (!instanceName && !serverless) {\r\n    throw new Error(\r\n      `Group \"${groupName}\" is missing an instanceName for non-serverless configuration.`,\r\n    );\r\n  }\r\n\r\n  if (serverless && !baseURL) {\r\n    throw new Error(\r\n      `Group \"${groupName}\" is missing the required base URL for serverless configuration.`,\r\n    );\r\n  }\r\n\r\n  const models = Object.keys(groupConfig.models);\r\n  if (models.length === 0) {\r\n    throw new Error(`Group \"${groupName}\" does not have any models configured.`);\r\n  }\r\n\r\n  // Use the first available model in the group\r\n  const firstModelName = models[0];\r\n  const modelDetails = groupConfig.models[firstModelName];\r\n\r\n  const azureOptions: AzureOptions = {\r\n    azureOpenAIApiVersion: extractEnvVariable(groupConfig.version ?? ''),\r\n    azureOpenAIApiKey: extractEnvVariable(groupConfig.apiKey),\r\n    azureOpenAIApiInstanceName: extractEnvVariable(instanceName),\r\n    // DeploymentName and Version set below\r\n  };\r\n\r\n  if (serverless) {\r\n    return {\r\n      azureOptions,\r\n      baseURL: extractEnvVariable(baseURL),\r\n      serverless: true,\r\n      ...(groupConfig.additionalHeaders && { headers: groupConfig.additionalHeaders }),\r\n    };\r\n  }\r\n\r\n  const { deploymentName = '', version = '' } =\r\n    typeof modelDetails === 'object'\r\n      ? {\r\n        deploymentName: modelDetails.deploymentName ?? groupConfig.deploymentName,\r\n        version: modelDetails.version ?? groupConfig.version,\r\n      }\r\n      : {\r\n        deploymentName: groupConfig.deploymentName,\r\n        version: groupConfig.version,\r\n      };\r\n\r\n  if (!deploymentName || !version) {\r\n    throw new Error(\r\n      `Model \"${firstModelName}\" in group \"${groupName}\" or the group itself is missing a deploymentName (\"${deploymentName}\") or version (\"${version}\").`,\r\n    );\r\n  }\r\n\r\n  azureOptions.azureOpenAIApiDeploymentName = extractEnvVariable(deploymentName);\r\n  azureOptions.azureOpenAIApiVersion = extractEnvVariable(version);\r\n\r\n  const result: MappedAzureConfig = { azureOptions };\r\n\r\n  if (baseURL) {\r\n    result.baseURL = extractEnvVariable(baseURL);\r\n  }\r\n\r\n  if (groupConfig.additionalHeaders) {\r\n    result.headers = groupConfig.additionalHeaders;\r\n  }\r\n\r\n  return result;\r\n}\r\n","export enum ArtifactModes {\r\n  DEFAULT = 'default',\r\n  SHADCNUI = 'shadcnui',\r\n  CUSTOM = 'custom',\r\n}\r\n\r\nexport const utils = `\r\nimport { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n`;\r\nexport const accordian = `import * as React from \"react\"\r\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\r\nimport { ChevronDown } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Accordion = AccordionPrimitive.Root\r\n\r\nconst AccordionItem = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <AccordionPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\"border-b\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAccordionItem.displayName = \"AccordionItem\"\r\n\r\nconst AccordionTrigger = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <AccordionPrimitive.Header className=\"flex\">\r\n    <AccordionPrimitive.Trigger\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\r\n    </AccordionPrimitive.Trigger>\r\n  </AccordionPrimitive.Header>\r\n))\r\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\r\n\r\nconst AccordionContent = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <AccordionPrimitive.Content\r\n    ref={ref}\r\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\r\n    {...props}\r\n  >\r\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\r\n  </AccordionPrimitive.Content>\r\n))\r\n\r\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\r\n\r\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\r\n`;\r\nexport const alertDialog = `import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { buttonVariants } from \"./button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-gray-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-gray-800 dark:bg-gray-950\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-gray-500 dark:text-gray-400\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n`;\r\nexport const alert = `import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst alertVariants = cva(\r\n  \"relative w-full rounded-lg border border-gray-200 p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-gray-950 dark:border-gray-800 dark:[&>svg]:text-gray-50\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-white text-gray-950 dark:bg-gray-950 dark:text-gray-50\",\r\n        destructive:\r\n          \"border-red-500/50 text-red-500 dark:border-red-500 [&>svg]:text-red-500 dark:border-red-900/50 dark:text-red-900 dark:dark:border-red-900 dark:[&>svg]:text-red-900\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Alert = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\r\n>(({ className, variant, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    role=\"alert\"\r\n    className={cn(alertVariants({ variant }), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlert.displayName = \"Alert\"\r\n\r\nconst AlertTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h5\r\n    ref={ref}\r\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertTitle.displayName = \"AlertTitle\"\r\n\r\nconst AlertDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDescription.displayName = \"AlertDescription\"\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n\r\n`;\r\nexport const avatar = `import * as React from \"react\"\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Avatar = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatar.displayName = AvatarPrimitive.Root.displayName\r\n\r\nconst AvatarImage = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Image>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Image\r\n    ref={ref}\r\n    className={cn(\"aspect-square h-full w-full\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\r\n\r\nconst AvatarFallback = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Fallback\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n\r\n`;\r\nexport const badge = `import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border border-gray-200 px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 dark:border-gray-800 dark:focus:ring-gray-300\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-gray-900 text-gray-50 hover:bg-gray-900/80 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/80\",\r\n        secondary:\r\n          \"border-transparent bg-gray-100 text-gray-900 hover:bg-gray-100/80 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-800/80\",\r\n        destructive:\r\n          \"border-transparent bg-red-500 text-gray-50 hover:bg-red-500/80 dark:bg-red-900 dark:text-gray-50 dark:hover:bg-red-900/80\",\r\n        outline: \"text-gray-950 dark:text-gray-50\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n\r\n`;\r\nexport const breadcrumb = `import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Breadcrumb = React.forwardRef<\r\n  HTMLElement,\r\n  React.ComponentPropsWithoutRef<\"nav\"> & {\r\n    separator?: React.ReactNode\r\n  }\r\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\r\nBreadcrumb.displayName = \"Breadcrumb\"\r\n\r\nconst BreadcrumbList = React.forwardRef<\r\n  HTMLOListElement,\r\n  React.ComponentPropsWithoutRef<\"ol\">\r\n>(({ className, ...props }, ref) => (\r\n  <ol\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-gray-500 sm:gap-2.5 dark:text-gray-400\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nBreadcrumbList.displayName = \"BreadcrumbList\"\r\n\r\nconst BreadcrumbItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentPropsWithoutRef<\"li\">\r\n>(({ className, ...props }, ref) => (\r\n  <li\r\n    ref={ref}\r\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\r\n    {...props}\r\n  />\r\n))\r\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\r\n\r\nconst BreadcrumbLink = React.forwardRef<\r\n  HTMLAnchorElement,\r\n  React.ComponentPropsWithoutRef<\"a\"> & {\r\n    asChild?: boolean\r\n  }\r\n>(({ asChild, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"a\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      className={cn(\"transition-colors hover:text-gray-950 dark:hover:text-gray-50\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\r\n\r\nconst BreadcrumbPage = React.forwardRef<\r\n  HTMLSpanElement,\r\n  React.ComponentPropsWithoutRef<\"span\">\r\n>(({ className, ...props }, ref) => (\r\n  <span\r\n    ref={ref}\r\n    role=\"link\"\r\n    aria-disabled=\"true\"\r\n    aria-current=\"page\"\r\n    className={cn(\"font-normal text-gray-950 dark:text-gray-50\", className)}\r\n    {...props}\r\n  />\r\n))\r\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\r\n\r\nconst BreadcrumbSeparator = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"li\">) => (\r\n  <li\r\n    role=\"presentation\"\r\n    aria-hidden=\"true\"\r\n    className={cn(\"[&>svg]:size-3.5\", className)}\r\n    {...props}\r\n  >\r\n    {children ?? <ChevronRight />}\r\n  </li>\r\n)\r\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\r\n\r\nconst BreadcrumbEllipsis = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"span\">) => (\r\n  <span\r\n    role=\"presentation\"\r\n    aria-hidden=\"true\"\r\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    <MoreHorizontal className=\"h-4 w-4\" />\r\n    <span className=\"sr-only\">More</span>\r\n  </span>\r\n)\r\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\r\n\r\nexport {\r\n  Breadcrumb,\r\n  BreadcrumbList,\r\n  BreadcrumbItem,\r\n  BreadcrumbLink,\r\n  BreadcrumbPage,\r\n  BreadcrumbSeparator,\r\n  BreadcrumbEllipsis,\r\n}\r\n\r\n`;\r\nexport const button = `import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from '../../lib/utils';\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-gray-900 text-gray-50 hover:bg-gray-900/90 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/90\",\r\n        destructive:\r\n          \"bg-red-500 text-gray-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-gray-50 dark:hover:bg-red-900/90\",\r\n        outline:\r\n          \"border border-gray-200 bg-white hover:bg-gray-100 hover:text-gray-900 dark:border-gray-800 dark:bg-gray-950 dark:hover:bg-gray-800 dark:hover:text-gray-50\",\r\n        secondary:\r\n          \"bg-gray-100 text-gray-900 hover:bg-gray-100/80 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-800/80\",\r\n        ghost: \"hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-gray-50\",\r\n        link: \"text-gray-900 underline-offset-4 hover:underline dark:text-gray-50\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n`;\r\nexport const calendar = `import * as React from \"react\"\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\r\nimport { DayPicker } from \"react-day-picker\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { buttonVariants } from \"./button\"\r\n\r\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  ...props\r\n}: CalendarProps) {\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\"p-3\", className)}\r\n      classNames={{\r\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\r\n        month: \"space-y-4\",\r\n        caption: \"flex justify-center pt-1 relative items-center\",\r\n        caption_label: \"text-sm font-medium\",\r\n        nav: \"space-x-1 flex items-center\",\r\n        nav_button: cn(\r\n          buttonVariants({ variant: \"outline\" }),\r\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\r\n        ),\r\n        nav_button_previous: \"absolute left-1\",\r\n        nav_button_next: \"absolute right-1\",\r\n        table: \"w-full border-collapse space-y-1\",\r\n        head_row: \"flex\",\r\n        head_cell:\r\n          \"text-gray-500 rounded-md w-9 font-normal text-[0.8rem] dark:text-gray-400\",\r\n        row: \"flex w-full mt-2\",\r\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-gray-100/50 [&:has([aria-selected])]:bg-gray-100 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20 dark:[&:has([aria-selected].day-outside)]:bg-gray-800/50 dark:[&:has([aria-selected])]:bg-gray-800\",\r\n        day: cn(\r\n          buttonVariants({ variant: \"ghost\" }),\r\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\r\n        ),\r\n        day_range_end: \"day-range-end\",\r\n        day_selected:\r\n          \"bg-gray-900 text-gray-50 hover:bg-gray-900 hover:text-gray-50 focus:bg-gray-900 focus:text-gray-50 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50 dark:hover:text-gray-900 dark:focus:bg-gray-50 dark:focus:text-gray-900\",\r\n        day_today: \"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-gray-50\",\r\n        day_outside:\r\n          \"day-outside text-gray-500 opacity-50 aria-selected:bg-gray-100/50 aria-selected:text-gray-500 aria-selected:opacity-30 dark:text-gray-400 dark:aria-selected:bg-gray-800/50 dark:aria-selected:text-gray-400\",\r\n        day_disabled: \"text-gray-500 opacity-50 dark:text-gray-400\",\r\n        day_range_middle:\r\n          \"aria-selected:bg-gray-100 aria-selected:text-gray-900 dark:aria-selected:bg-gray-800 dark:aria-selected:text-gray-50\",\r\n        day_hidden: \"invisible\",\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        IconLeft: ({ ...props }) => <ChevronLeft className=\"h-4 w-4\" />,\r\n        IconRight: ({ ...props }) => <ChevronRight className=\"h-4 w-4\" />,\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nCalendar.displayName = \"Calendar\"\r\n\r\nexport { Calendar }\r\n\r\n`;\r\nexport const card = `import * as React from 'react';\r\n\r\nimport { cn } from '../../lib/utils';\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-gray-500 dark:text-gray-400\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n`;\r\nexport const carousel = `import * as React from \"react\"\r\nimport useEmblaCarousel, {\r\n  type UseEmblaCarouselType,\r\n} from \"embla-carousel-react\"\r\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Button } from \"./button\"\r\n\r\ntype CarouselApi = UseEmblaCarouselType[1]\r\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\r\ntype CarouselOptions = UseCarouselParameters[0]\r\ntype CarouselPlugin = UseCarouselParameters[1]\r\n\r\ntype CarouselProps = {\r\n  opts?: CarouselOptions\r\n  plugins?: CarouselPlugin\r\n  orientation?: \"horizontal\" | \"vertical\"\r\n  setApi?: (api: CarouselApi) => void\r\n}\r\n\r\ntype CarouselContextProps = {\r\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\r\n  api: ReturnType<typeof useEmblaCarousel>[1]\r\n  scrollPrev: () => void\r\n  scrollNext: () => void\r\n  canScrollPrev: boolean\r\n  canScrollNext: boolean\r\n} & CarouselProps\r\n\r\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\r\n\r\nfunction useCarousel() {\r\n  const context = React.useContext(CarouselContext)\r\n\r\n  if (!context) {\r\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nconst Carousel = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\r\n>(\r\n  (\r\n    {\r\n      orientation = \"horizontal\",\r\n      opts,\r\n      setApi,\r\n      plugins,\r\n      className,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const [carouselRef, api] = useEmblaCarousel(\r\n      {\r\n        ...opts,\r\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\r\n      },\r\n      plugins\r\n    )\r\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\r\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\r\n\r\n    const onSelect = React.useCallback((api: CarouselApi) => {\r\n      if (!api) {\r\n        return\r\n      }\r\n\r\n      setCanScrollPrev(api.canScrollPrev())\r\n      setCanScrollNext(api.canScrollNext())\r\n    }, [])\r\n\r\n    const scrollPrev = React.useCallback(() => {\r\n      api?.scrollPrev()\r\n    }, [api])\r\n\r\n    const scrollNext = React.useCallback(() => {\r\n      api?.scrollNext()\r\n    }, [api])\r\n\r\n    const handleKeyDown = React.useCallback(\r\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\r\n        if (event.key === \"ArrowLeft\") {\r\n          event.preventDefault()\r\n          scrollPrev()\r\n        } else if (event.key === \"ArrowRight\") {\r\n          event.preventDefault()\r\n          scrollNext()\r\n        }\r\n      },\r\n      [scrollPrev, scrollNext]\r\n    )\r\n\r\n    React.useEffect(() => {\r\n      if (!api || !setApi) {\r\n        return\r\n      }\r\n\r\n      setApi(api)\r\n    }, [api, setApi])\r\n\r\n    React.useEffect(() => {\r\n      if (!api) {\r\n        return\r\n      }\r\n\r\n      onSelect(api)\r\n      api.on(\"reInit\", onSelect)\r\n      api.on(\"select\", onSelect)\r\n\r\n      return () => {\r\n        api?.off(\"select\", onSelect)\r\n      }\r\n    }, [api, onSelect])\r\n\r\n    return (\r\n      <CarouselContext.Provider\r\n        value={{\r\n          carouselRef,\r\n          api: api,\r\n          opts,\r\n          orientation:\r\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\r\n          scrollPrev,\r\n          scrollNext,\r\n          canScrollPrev,\r\n          canScrollNext,\r\n        }}\r\n      >\r\n        <div\r\n          ref={ref}\r\n          onKeyDownCapture={handleKeyDown}\r\n          className={cn(\"relative\", className)}\r\n          role=\"region\"\r\n          aria-roledescription=\"carousel\"\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      </CarouselContext.Provider>\r\n    )\r\n  }\r\n)\r\nCarousel.displayName = \"Carousel\"\r\n\r\nconst CarouselContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { carouselRef, orientation } = useCarousel()\r\n\r\n  return (\r\n    <div ref={carouselRef} className=\"overflow-hidden\">\r\n      <div\r\n        ref={ref}\r\n        className={cn(\r\n          \"flex\",\r\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    </div>\r\n  )\r\n})\r\nCarouselContent.displayName = \"CarouselContent\"\r\n\r\nconst CarouselItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { orientation } = useCarousel()\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      role=\"group\"\r\n      aria-roledescription=\"slide\"\r\n      className={cn(\r\n        \"min-w-0 shrink-0 grow-0 basis-full\",\r\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nCarouselItem.displayName = \"CarouselItem\"\r\n\r\nconst CarouselPrevious = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<typeof Button>\r\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\r\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant={variant}\r\n      size={size}\r\n      className={cn(\r\n        \"absolute  h-8 w-8 rounded-full\",\r\n        orientation === \"horizontal\"\r\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\r\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\r\n        className\r\n      )}\r\n      disabled={!canScrollPrev}\r\n      onClick={scrollPrev}\r\n      {...props}\r\n    >\r\n      <ArrowLeft className=\"h-4 w-4\" />\r\n      <span className=\"sr-only\">Previous slide</span>\r\n    </Button>\r\n  )\r\n})\r\nCarouselPrevious.displayName = \"CarouselPrevious\"\r\n\r\nconst CarouselNext = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<typeof Button>\r\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\r\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant={variant}\r\n      size={size}\r\n      className={cn(\r\n        \"absolute h-8 w-8 rounded-full\",\r\n        orientation === \"horizontal\"\r\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\r\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\r\n        className\r\n      )}\r\n      disabled={!canScrollNext}\r\n      onClick={scrollNext}\r\n      {...props}\r\n    >\r\n      <ArrowRight className=\"h-4 w-4\" />\r\n      <span className=\"sr-only\">Next slide</span>\r\n    </Button>\r\n  )\r\n})\r\nCarouselNext.displayName = \"CarouselNext\"\r\n\r\nexport {\r\n  type CarouselApi,\r\n  Carousel,\r\n  CarouselContent,\r\n  CarouselItem,\r\n  CarouselPrevious,\r\n  CarouselNext,\r\n}\r\n\r\n`;\r\nexport const checkbox = `import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-gray-200 dark:border-gray-900 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gray-900 data-[state=checked]:text-gray-50  dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300 dark:data-[state=checked]:bg-gray-50 dark:data-[state=checked]:text-gray-900\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n\r\n`;\r\nexport const collapsible = `import * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\r\n\r\nconst Collapsible = CollapsiblePrimitive.Root\r\n\r\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\r\n\r\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\r\n\r\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\r\n\r\n`;\r\nexport const dialog = `import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-gray-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-gray-800 dark:bg-gray-950\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-gray-100 data-[state=open]:text-gray-500 dark:ring-offset-gray-950 dark:focus:ring-gray-300 dark:data-[state=open]:bg-gray-800 dark:data-[state=open]:text-gray-400\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-gray-500 dark:text-gray-400\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n\r\n`;\r\nexport const drawer = `import * as React from \"react\"\r\nimport { Drawer as DrawerPrimitive } from \"vaul\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Drawer = ({\r\n  shouldScaleBackground = true,\r\n  ...props\r\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\r\n  <DrawerPrimitive.Root\r\n    shouldScaleBackground={shouldScaleBackground}\r\n    {...props}\r\n  />\r\n)\r\nDrawer.displayName = \"Drawer\"\r\n\r\nconst DrawerTrigger = DrawerPrimitive.Trigger\r\n\r\nconst DrawerPortal = DrawerPrimitive.Portal\r\n\r\nconst DrawerClose = DrawerPrimitive.Close\r\n\r\nconst DrawerOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\r\n\r\nconst DrawerContent = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DrawerPortal>\r\n    <DrawerOverlay />\r\n    <DrawerPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border border-gray-200 bg-white dark:border-gray-800 dark:bg-gray-950\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-gray-100 dark:bg-gray-800\" />\r\n      {children}\r\n    </DrawerPrimitive.Content>\r\n  </DrawerPortal>\r\n))\r\nDrawerContent.displayName = \"DrawerContent\"\r\n\r\nconst DrawerHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\r\n    {...props}\r\n  />\r\n)\r\nDrawerHeader.displayName = \"DrawerHeader\"\r\n\r\nconst DrawerFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\r\n    {...props}\r\n  />\r\n)\r\nDrawerFooter.displayName = \"DrawerFooter\"\r\n\r\nconst DrawerTitle = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\r\n\r\nconst DrawerDescription = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-gray-500 dark:text-gray-400\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\r\n\r\nexport {\r\n  Drawer,\r\n  DrawerPortal,\r\n  DrawerOverlay,\r\n  DrawerTrigger,\r\n  DrawerClose,\r\n  DrawerContent,\r\n  DrawerHeader,\r\n  DrawerFooter,\r\n  DrawerTitle,\r\n  DrawerDescription,\r\n}\r\n\r\n`;\r\nexport const dropdownMenu = `import * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-gray-100 data-[state=open]:bg-gray-100 dark:focus:bg-gray-800 dark:data-[state=open]:bg-gray-800\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Portal>\r\n    <DropdownMenuPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </DropdownMenuPrimitive.Portal>\r\n))\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-gray-100 dark:bg-gray-800\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n}\r\n\r\n`;\r\nexport const hoverCard = `import * as React from \"react\"\r\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst HoverCard = HoverCardPrimitive.Root\r\n\r\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\r\n\r\nconst HoverCardContent = React.forwardRef<\r\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\r\n  <HoverCardPrimitive.Content\r\n    ref={ref}\r\n    align={align}\r\n    sideOffset={sideOffset}\r\n    className={cn(\r\n      \"z-50 w-64 rounded-md border border-gray-200 bg-white p-4 text-gray-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\r\n\r\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\r\n\r\n`;\r\nexport const input = `import * as React from \"react\"\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nexport interface InputProps\r\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-800 dark:bg-gray-950 dark:ring-offset-gray-950 dark:placeholder:text-gray-400 dark:focus-visible:ring-gray-300\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n`;\r\nexport const label = `import * as React from 'react';\r\nimport * as LabelPrimitive from '@radix-ui/react-label';\r\nimport { cva, type VariantProps } from 'class-variance-authority';\r\n\r\nimport { cn } from '../../lib/utils';\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n`;\r\nexport const menuBar = `\r\nimport * as React from \"react\"\r\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst MenubarMenu = MenubarPrimitive.Menu\r\n\r\nconst MenubarGroup = MenubarPrimitive.Group\r\n\r\nconst MenubarPortal = MenubarPrimitive.Portal\r\n\r\nconst MenubarSub = MenubarPrimitive.Sub\r\n\r\nconst MenubarRadioGroup = MenubarPrimitive.RadioGroup\r\n\r\nconst Menubar = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 items-center space-x-1 rounded-md border border-gray-200 bg-white p-1 dark:border-gray-800 dark:bg-gray-950\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubar.displayName = MenubarPrimitive.Root.displayName\r\n\r\nconst MenubarTrigger = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-gray-100 focus:text-gray-900 data-[state=open]:bg-gray-100 data-[state=open]:text-gray-900 dark:focus:bg-gray-800 dark:focus:text-gray-50 dark:data-[state=open]:bg-gray-800 dark:data-[state=open]:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\r\n\r\nconst MenubarSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <MenubarPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[state=open]:bg-gray-100 data-[state=open]:text-gray-900 dark:focus:bg-gray-800 dark:focus:text-gray-50 dark:data-[state=open]:bg-gray-800 dark:data-[state=open]:text-gray-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\r\n  </MenubarPrimitive.SubTrigger>\r\n))\r\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\r\n\r\nconst MenubarSubContent = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-950 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\r\n\r\nconst MenubarContent = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\r\n>(\r\n  (\r\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\r\n    ref\r\n  ) => (\r\n    <MenubarPrimitive.Portal>\r\n      <MenubarPrimitive.Content\r\n        ref={ref}\r\n        align={align}\r\n        alignOffset={alignOffset}\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    </MenubarPrimitive.Portal>\r\n  )\r\n)\r\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\r\n\r\nconst MenubarItem = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <MenubarPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\r\n\r\nconst MenubarCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <MenubarPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <MenubarPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </MenubarPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </MenubarPrimitive.CheckboxItem>\r\n))\r\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\r\n\r\nconst MenubarRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <MenubarPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <MenubarPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </MenubarPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </MenubarPrimitive.RadioItem>\r\n))\r\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\r\n\r\nconst MenubarLabel = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <MenubarPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\r\n\r\nconst MenubarSeparator = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-gray-100 dark:bg-gray-800\", className)}\r\n    {...props}\r\n  />\r\n))\r\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\r\n\r\nconst MenubarShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"ml-auto text-xs tracking-widest text-gray-500 dark:text-gray-400\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nMenubarShortcut.displayname = \"MenubarShortcut\"\r\n\r\nexport {\r\n  Menubar,\r\n  MenubarMenu,\r\n  MenubarTrigger,\r\n  MenubarContent,\r\n  MenubarItem,\r\n  MenubarSeparator,\r\n  MenubarLabel,\r\n  MenubarCheckboxItem,\r\n  MenubarRadioGroup,\r\n  MenubarRadioItem,\r\n  MenubarPortal,\r\n  MenubarSubContent,\r\n  MenubarSubTrigger,\r\n  MenubarGroup,\r\n  MenubarSub,\r\n  MenubarShortcut,\r\n}\r\n\r\n`;\r\nexport const navigationMenu = `import * as React from \"react\"\r\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\r\nimport { cva } from \"class-variance-authority\"\r\nimport { ChevronDown } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst NavigationMenu = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <NavigationMenuViewport />\r\n  </NavigationMenuPrimitive.Root>\r\n))\r\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\r\n\r\nconst NavigationMenuList = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\r\n\r\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\r\n\r\nconst navigationMenuTriggerStyle = cva(\r\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-white px-4 py-2 text-sm font-medium transition-colors hover:bg-gray-100 hover:text-gray-900 focus:bg-gray-100 focus:text-gray-900 focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-gray-100/50 data-[state=open]:bg-gray-100/50 dark:bg-gray-950 dark:hover:bg-gray-800 dark:hover:text-gray-50 dark:focus:bg-gray-800 dark:focus:text-gray-50 dark:data-[active]:bg-gray-800/50 dark:data-[state=open]:bg-gray-800/50\"\r\n)\r\n\r\nconst NavigationMenuTrigger = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\r\n    {...props}\r\n  >\r\n    {children}{\"\"}\r\n    <ChevronDown\r\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\r\n      aria-hidden=\"true\"\r\n    />\r\n  </NavigationMenuPrimitive.Trigger>\r\n))\r\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\r\n\r\nconst NavigationMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\r\n\r\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\r\n\r\nconst NavigationMenuViewport = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\r\n    <NavigationMenuPrimitive.Viewport\r\n      className={cn(\r\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border border-gray-200 bg-white text-gray-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)] dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nNavigationMenuViewport.displayName =\r\n  NavigationMenuPrimitive.Viewport.displayName\r\n\r\nconst NavigationMenuIndicator = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Indicator\r\n    ref={ref}\r\n    className={cn(\r\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-gray-200 shadow-md dark:bg-gray-800\" />\r\n  </NavigationMenuPrimitive.Indicator>\r\n))\r\nNavigationMenuIndicator.displayName =\r\n  NavigationMenuPrimitive.Indicator.displayName\r\n\r\nexport {\r\n  navigationMenuTriggerStyle,\r\n  NavigationMenu,\r\n  NavigationMenuList,\r\n  NavigationMenuItem,\r\n  NavigationMenuContent,\r\n  NavigationMenuTrigger,\r\n  NavigationMenuLink,\r\n  NavigationMenuIndicator,\r\n  NavigationMenuViewport,\r\n}\r\n\r\n`;\r\nexport const pagination = `import * as React from \"react\"\r\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { ButtonProps, buttonVariants } from \"./button\"\r\n\r\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\r\n  <nav\r\n    role=\"navigation\"\r\n    aria-label=\"pagination\"\r\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\r\n    {...props}\r\n  />\r\n)\r\nPagination.displayName = \"Pagination\"\r\n\r\nconst PaginationContent = React.forwardRef<\r\n  HTMLUListElement,\r\n  React.ComponentProps<\"ul\">\r\n>(({ className, ...props }, ref) => (\r\n  <ul\r\n    ref={ref}\r\n    className={cn(\"flex flex-row items-center gap-1\", className)}\r\n    {...props}\r\n  />\r\n))\r\nPaginationContent.displayName = \"PaginationContent\"\r\n\r\nconst PaginationItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentProps<\"li\">\r\n>(({ className, ...props }, ref) => (\r\n  <li ref={ref} className={cn(\"\", className)} {...props} />\r\n))\r\nPaginationItem.displayName = \"PaginationItem\"\r\n\r\ntype PaginationLinkProps = {\r\n  isActive?: boolean\r\n} & Pick<ButtonProps, \"size\"> &\r\n  React.ComponentProps<\"a\">\r\n\r\nconst PaginationLink = ({\r\n  className,\r\n  isActive,\r\n  size = \"icon\",\r\n  ...props\r\n}: PaginationLinkProps) => (\r\n  <a\r\n    aria-current={isActive ? \"page\" : undefined}\r\n    className={cn(\r\n      buttonVariants({\r\n        variant: isActive ? \"outline\" : \"ghost\",\r\n        size,\r\n      }),\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nPaginationLink.displayName = \"PaginationLink\"\r\n\r\nconst PaginationPrevious = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof PaginationLink>) => (\r\n  <PaginationLink\r\n    aria-label=\"Go to previous page\"\r\n    size=\"default\"\r\n    className={cn(\"gap-1 pl-2.5\", className)}\r\n    {...props}\r\n  >\r\n    <ChevronLeft className=\"h-4 w-4\" />\r\n    <span>Previous</span>\r\n  </PaginationLink>\r\n)\r\nPaginationPrevious.displayName = \"PaginationPrevious\"\r\n\r\nconst PaginationNext = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof PaginationLink>) => (\r\n  <PaginationLink\r\n    aria-label=\"Go to next page\"\r\n    size=\"default\"\r\n    className={cn(\"gap-1 pr-2.5\", className)}\r\n    {...props}\r\n  >\r\n    <span>Next</span>\r\n    <ChevronRight className=\"h-4 w-4\" />\r\n  </PaginationLink>\r\n)\r\nPaginationNext.displayName = \"PaginationNext\"\r\n\r\nconst PaginationEllipsis = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"span\">) => (\r\n  <span\r\n    aria-hidden\r\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    <MoreHorizontal className=\"h-4 w-4\" />\r\n    <span className=\"sr-only\">More pages</span>\r\n  </span>\r\n)\r\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\r\n\r\nexport {\r\n  Pagination,\r\n  PaginationContent,\r\n  PaginationEllipsis,\r\n  PaginationItem,\r\n  PaginationLink,\r\n  PaginationNext,\r\n  PaginationPrevious,\r\n}\r\n\r\n`;\r\nexport const popover = `import * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border border-gray-200 bg-white p-4 text-gray-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n))\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent }\r\n\r\n`;\r\nexport const progress = `import * as React from \"react\"\r\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Progress = React.forwardRef<\r\n  React.ElementRef<typeof ProgressPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\r\n>(({ className, value, ...props }, ref) => (\r\n  <ProgressPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative h-4 w-full overflow-hidden rounded-full bg-gray-100 dark:bg-gray-800\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ProgressPrimitive.Indicator\r\n      className=\"h-full w-full flex-1 bg-gray-900 transition-all dark:bg-gray-50\"\r\n      style={{ transform: \\`translateX(-\\${100 - (value || 0)}%)\\` }}\r\n    />\r\n  </ProgressPrimitive.Root>\r\n))\r\nProgress.displayName = ProgressPrimitive.Root.displayName\r\n\r\nexport { Progress }\r\n`;\r\nexport const radioGroup = `import * as React from \"react\"\r\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\r\nimport { Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst RadioGroup = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Root\r\n      className={cn(\"grid gap-2\", className)}\r\n      {...props}\r\n      ref={ref}\r\n    />\r\n  )\r\n})\r\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\r\n\r\nconst RadioGroupItem = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Item\r\n      ref={ref}\r\n      className={cn(\r\n        \"aspect-square h-4 w-4 rounded-full border border-gray-200 dark:border-gray-900 text-gray-900 ring-offset-white focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50  dark:text-gray-50 dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\r\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\r\n      </RadioGroupPrimitive.Indicator>\r\n    </RadioGroupPrimitive.Item>\r\n  )\r\n})\r\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\r\n\r\nexport { RadioGroup, RadioGroupItem }\r\n\r\n`;\r\nexport const select = `import * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 w-full items-center justify-between rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-gray-800 dark:bg-gray-950 dark:ring-offset-gray-950 dark:placeholder:text-gray-400 dark:focus:ring-gray-300\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-gray-100 dark:bg-gray-800\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n\r\n`;\r\nexport const separator = `import * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-gray-200 dark:bg-gray-800\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n\r\n`;\r\nexport const skeleton = `import { cn } from \"../../lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-gray-100 dark:bg-gray-800\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n`;\r\nexport const slider = `import * as React from \"react\"\r\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Slider = React.forwardRef<\r\n  React.ElementRef<typeof SliderPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SliderPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full touch-none select-none items-center\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-gray-100 dark:bg-gray-800\">\r\n      <SliderPrimitive.Range className=\"absolute h-full bg-gray-900 dark:bg-gray-50\" />\r\n    </SliderPrimitive.Track>\r\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-gray-900 bg-white ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:border-gray-50 dark:bg-gray-950 dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300\" />\r\n  </SliderPrimitive.Root>\r\n))\r\nSlider.displayName = SliderPrimitive.Root.displayName\r\n\r\nexport { Slider }\r\n\r\n`;\r\nexport const switchComponent = `import * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gray-900 data-[state=unchecked]:bg-gray-200 dark:focus-visible:ring-gray-300 dark:focus-visible:ring-offset-gray-950 dark:data-[state=checked]:bg-gray-50 dark:data-[state=unchecked]:bg-gray-800\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 dark:bg-gray-950\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n\r\n`;\r\nexport const table = `import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-gray-100/50 font-medium [&>tr]:last:border-b-0 dark:bg-gray-800/50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-gray-100/50 data-[state=selected]:bg-gray-100 dark:hover:bg-gray-800/50 dark:data-[state=selected]:bg-gray-800\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0 dark:text-gray-400\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-gray-500 dark:text-gray-400\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n\r\n`;\r\nexport const tabs = `import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500 dark:bg-gray-800 dark:text-gray-400\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-gray-950 data-[state=active]:shadow-sm dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300 dark:data-[state=active]:bg-gray-950 dark:data-[state=active]:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n\r\n`;\r\nexport const textarea = `import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nexport interface TextareaProps\r\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          \"flex min-h-[80px] w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-800 dark:bg-gray-950 dark:ring-offset-gray-950 dark:placeholder:text-gray-400 dark:focus-visible:ring-gray-300\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n\r\n`;\r\nexport const toast = `import * as React from \"react\"\r\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst ToastProvider = ToastPrimitives.Provider\r\n\r\nconst ToastViewport = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Viewport\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\r\n\r\nconst toastVariants = cva(\r\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border border-gray-200 p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full dark:border-gray-800\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border bg-white text-gray-950 dark:bg-gray-950 dark:text-gray-50\",\r\n        destructive:\r\n          \"destructive group border-red-500 bg-red-500 text-gray-50 dark:border-red-900 dark:bg-red-900 dark:text-gray-50\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Toast = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\r\n    VariantProps<typeof toastVariants>\r\n>(({ className, variant, ...props }, ref) => {\r\n  return (\r\n    <ToastPrimitives.Root\r\n      ref={ref}\r\n      className={cn(toastVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nToast.displayName = ToastPrimitives.Root.displayName\r\n\r\nconst ToastAction = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Action>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Action\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-gray-200 bg-transparent px-3 text-sm font-medium ring-offset-white transition-colors hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-gray-100/40 group-[.destructive]:hover:border-red-500/30 group-[.destructive]:hover:bg-red-500 group-[.destructive]:hover:text-gray-50 group-[.destructive]:focus:ring-red-500 dark:border-gray-800 dark:ring-offset-gray-950 dark:hover:bg-gray-800 dark:focus:ring-gray-300 dark:group-[.destructive]:border-gray-800/40 dark:group-[.destructive]:hover:border-red-900/30 dark:group-[.destructive]:hover:bg-red-900 dark:group-[.destructive]:hover:text-gray-50 dark:group-[.destructive]:focus:ring-red-900\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastAction.displayName = ToastPrimitives.Action.displayName\r\n\r\nconst ToastClose = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Close>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Close\r\n    ref={ref}\r\n    className={cn(\r\n      \"absolute right-2 top-2 rounded-md p-1 text-gray-950/50 opacity-0 transition-opacity hover:text-gray-950 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 dark:text-gray-50/50 dark:hover:text-gray-50\",\r\n      className\r\n    )}\r\n    toast-close=\"\"\r\n    {...props}\r\n  >\r\n    <X className=\"h-4 w-4\" />\r\n  </ToastPrimitives.Close>\r\n))\r\nToastClose.displayName = ToastPrimitives.Close.displayName\r\n\r\nconst ToastTitle = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Title>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Title\r\n    ref={ref}\r\n    className={cn(\"text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastTitle.displayName = ToastPrimitives.Title.displayName\r\n\r\nconst ToastDescription = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Description>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm opacity-90\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastDescription.displayName = ToastPrimitives.Description.displayName\r\n\r\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\r\n\r\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\r\n\r\nexport {\r\n  type ToastProps,\r\n  type ToastActionElement,\r\n  ToastProvider,\r\n  ToastViewport,\r\n  Toast,\r\n  ToastTitle,\r\n  ToastDescription,\r\n  ToastClose,\r\n  ToastAction,\r\n}\r\n\r\n`;\r\nexport const toaster = `import {\r\n  Toast,\r\n  ToastClose,\r\n  ToastDescription,\r\n  ToastProvider,\r\n  ToastTitle,\r\n  ToastViewport,\r\n} from \"./toast\"\r\nimport { useToast } from \"./use-toast\"\r\n\r\nexport function Toaster() {\r\n  const { toasts } = useToast()\r\n\r\n  return (\r\n    <ToastProvider>\r\n      {toasts.map(function ({ id, title, description, action, ...props }) {\r\n        return (\r\n          <Toast key={id} {...props}>\r\n            <div className=\"grid gap-1\">\r\n              {title && <ToastTitle>{title}</ToastTitle>}\r\n              {description && (\r\n                <ToastDescription>{description}</ToastDescription>\r\n              )}\r\n            </div>\r\n            {action}\r\n            <ToastClose />\r\n          </Toast>\r\n        )\r\n      })}\r\n      <ToastViewport />\r\n    </ToastProvider>\r\n  )\r\n}\r\n\r\n`;\r\nexport const toggleGroup = `import * as React from \"react\"\r\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\r\nimport { type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { toggleVariants } from \"./toggle\"\r\n\r\nconst ToggleGroupContext = React.createContext<\r\n  VariantProps<typeof toggleVariants>\r\n>({\r\n  size: \"default\",\r\n  variant: \"default\",\r\n})\r\n\r\nconst ToggleGroup = React.forwardRef<\r\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\r\n    VariantProps<typeof toggleVariants>\r\n>(({ className, variant, size, children, ...props }, ref) => (\r\n  <ToggleGroupPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"flex items-center justify-center gap-1\", className)}\r\n    {...props}\r\n  >\r\n    <ToggleGroupContext.Provider value={{ variant, size }}>\r\n      {children}\r\n    </ToggleGroupContext.Provider>\r\n  </ToggleGroupPrimitive.Root>\r\n))\r\n\r\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\r\n\r\nconst ToggleGroupItem = React.forwardRef<\r\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\r\n    VariantProps<typeof toggleVariants>\r\n>(({ className, children, variant, size, ...props }, ref) => {\r\n  const context = React.useContext(ToggleGroupContext)\r\n\r\n  return (\r\n    <ToggleGroupPrimitive.Item\r\n      ref={ref}\r\n      className={cn(\r\n        toggleVariants({\r\n          variant: context.variant || variant,\r\n          size: context.size || size,\r\n        }),\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </ToggleGroupPrimitive.Item>\r\n  )\r\n})\r\n\r\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\r\n\r\nexport { ToggleGroup, ToggleGroupItem }\r\n\r\n`;\r\nexport const toggle = `import * as React from \"react\"\r\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst toggleVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors hover:bg-gray-100 hover:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-gray-100 data-[state=on]:text-gray-900 dark:ring-offset-gray-950 dark:hover:bg-gray-800 dark:hover:text-gray-400 dark:focus-visible:ring-gray-300 dark:data-[state=on]:bg-gray-800 dark:data-[state=on]:text-gray-50\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-transparent\",\r\n        outline:\r\n          \"border border-gray-200 bg-transparent hover:bg-gray-100 hover:text-gray-900 dark:border-gray-800 dark:hover:bg-gray-800 dark:hover:text-gray-50\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-3\",\r\n        sm: \"h-9 px-2.5\",\r\n        lg: \"h-11 px-5\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Toggle = React.forwardRef<\r\n  React.ElementRef<typeof TogglePrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\r\n    VariantProps<typeof toggleVariants>\r\n>(({ className, variant, size, ...props }, ref) => (\r\n  <TogglePrimitive.Root\r\n    ref={ref}\r\n    className={cn(toggleVariants({ variant, size, className }))}\r\n    {...props}\r\n  />\r\n))\r\n\r\nToggle.displayName = TogglePrimitive.Root.displayName\r\n\r\nexport { Toggle, toggleVariants }\r\n\r\n`;\r\nexport const tooltip = `import * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst TooltipProvider = TooltipPrimitive.Provider\r\n\r\nconst Tooltip = TooltipPrimitive.Root\r\n\r\nconst TooltipTrigger = TooltipPrimitive.Trigger\r\n\r\nconst TooltipContent = React.forwardRef<\r\n  React.ElementRef<typeof TooltipPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <TooltipPrimitive.Content\r\n    ref={ref}\r\n    sideOffset={sideOffset}\r\n    className={cn(\r\n      \"z-50 overflow-hidden rounded-md border border-gray-200 bg-white px-3 py-1.5 text-sm text-gray-950 shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n\r\n`;\r\nexport const useToast = `import * as React from \"react\"\r\n\r\nimport type {\r\n  ToastActionElement,\r\n  ToastProps,\r\n} from \"./toast\"\r\n\r\nconst TOAST_LIMIT = 1\r\nconst TOAST_REMOVE_DELAY = 1000000\r\n\r\ntype ToasterToast = ToastProps & {\r\n  id: string\r\n  title?: React.ReactNode\r\n  description?: React.ReactNode\r\n  action?: ToastActionElement\r\n}\r\n\r\nconst actionTypes = {\r\n  ADD_TOAST: \"ADD_TOAST\",\r\n  UPDATE_TOAST: \"UPDATE_TOAST\",\r\n  DISMISS_TOAST: \"DISMISS_TOAST\",\r\n  REMOVE_TOAST: \"REMOVE_TOAST\",\r\n} as const\r\n\r\nlet count = 0\r\n\r\nfunction genId() {\r\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\r\n  return count.toString()\r\n}\r\n\r\ntype ActionType = typeof actionTypes\r\n\r\ntype Action =\r\n  | {\r\n      type: ActionType[\"ADD_TOAST\"]\r\n      toast: ToasterToast\r\n    }\r\n  | {\r\n      type: ActionType[\"UPDATE_TOAST\"]\r\n      toast: Partial<ToasterToast>\r\n    }\r\n  | {\r\n      type: ActionType[\"DISMISS_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n  | {\r\n      type: ActionType[\"REMOVE_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n\r\ninterface State {\r\n  toasts: ToasterToast[]\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\r\n\r\nconst addToRemoveQueue = (toastId: string) => {\r\n  if (toastTimeouts.has(toastId)) {\r\n    return\r\n  }\r\n\r\n  const timeout = setTimeout(() => {\r\n    toastTimeouts.delete(toastId)\r\n    dispatch({\r\n      type: \"REMOVE_TOAST\",\r\n      toastId: toastId,\r\n    })\r\n  }, TOAST_REMOVE_DELAY)\r\n\r\n  toastTimeouts.set(toastId, timeout)\r\n}\r\n\r\nexport const reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case \"ADD_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\r\n      }\r\n\r\n    case \"UPDATE_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\r\n        ),\r\n      }\r\n\r\n    case \"DISMISS_TOAST\": {\r\n      const { toastId } = action\r\n\r\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\r\n      // but I'll keep it here for simplicity\r\n      if (toastId) {\r\n        addToRemoveQueue(toastId)\r\n      } else {\r\n        state.toasts.forEach((toast) => {\r\n          addToRemoveQueue(toast.id)\r\n        })\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === toastId || toastId === undefined\r\n            ? {\r\n                ...t,\r\n                open: false,\r\n              }\r\n            : t\r\n        ),\r\n      }\r\n    }\r\n    case \"REMOVE_TOAST\":\r\n      if (action.toastId === undefined) {\r\n        return {\r\n          ...state,\r\n          toasts: [],\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n      }\r\n  }\r\n}\r\n\r\nconst listeners: Array<(state: State) => void> = []\r\n\r\nlet memoryState: State = { toasts: [] }\r\n\r\nfunction dispatch(action: Action) {\r\n  memoryState = reducer(memoryState, action)\r\n  listeners.forEach((listener) => {\r\n    listener(memoryState)\r\n  })\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, \"id\">\r\n\r\nfunction toast({ ...props }: Toast) {\r\n  const id = genId()\r\n\r\n  const update = (props: ToasterToast) =>\r\n    dispatch({\r\n      type: \"UPDATE_TOAST\",\r\n      toast: { ...props, id },\r\n    })\r\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\r\n\r\n  dispatch({\r\n    type: \"ADD_TOAST\",\r\n    toast: {\r\n      ...props,\r\n      id,\r\n      open: true,\r\n      onOpenChange: (open) => {\r\n        if (!open) dismiss()\r\n      },\r\n    },\r\n  })\r\n\r\n  return {\r\n    id: id,\r\n    dismiss,\r\n    update,\r\n  }\r\n}\r\n\r\nfunction useToast() {\r\n  const [state, setState] = React.useState<State>(memoryState)\r\n\r\n  React.useEffect(() => {\r\n    listeners.push(setState)\r\n    return () => {\r\n      const index = listeners.indexOf(setState)\r\n      if (index > -1) {\r\n        listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  return {\r\n    ...state,\r\n    toast,\r\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\r\n  }\r\n}\r\n\r\nexport { useToast, toast }\r\n`;\r\n\r\nexport const shadcnComponents = {\r\n  utils: utils,\r\n  accordian: accordian,\r\n  alertDialog: alertDialog,\r\n  alert: alert,\r\n  avatar: avatar,\r\n  badge: badge,\r\n  breadcrumb: breadcrumb,\r\n  button: button,\r\n  calendar: calendar,\r\n  card: card,\r\n  carousel: carousel,\r\n  checkbox: checkbox,\r\n  collapsible: collapsible,\r\n  dialog: dialog,\r\n  drawer: drawer,\r\n  dropdownMenu: dropdownMenu,\r\n  hoverCard: hoverCard,\r\n  input: input,\r\n  label: label,\r\n  menuBar: menuBar,\r\n  navigationMenu: navigationMenu,\r\n  pagination: pagination,\r\n  popover: popover,\r\n  progress: progress,\r\n  radioGroup: radioGroup,\r\n  select: select,\r\n  separator: separator,\r\n  skeleton: skeleton,\r\n  slider: slider,\r\n  switchComponent: switchComponent,\r\n  table: table,\r\n  tabs: tabs,\r\n  textarea: textarea,\r\n  toast: toast,\r\n  toaster: toaster,\r\n  toggleGroup: toggleGroup,\r\n  toggle: toggle,\r\n  tooltip: tooltip,\r\n  useToast: useToast,\r\n};\r\n\r\nexport const essentialShadcnComponents = {\r\n  utils: utils,\r\n  avatar: avatar,\r\n  button: button,\r\n  card: card,\r\n  checkbox: checkbox,\r\n  input: input,\r\n  label: label,\r\n  radioGroup: radioGroup,\r\n  select: select,\r\n  textarea: textarea,\r\n  // badge: badge,\r\n  // dialog: dialog,\r\n  // table: table,\r\n};\r\n","import type { TFile } from './types/files';\r\nimport type { TMessage } from './types';\r\n\r\nexport type ParentMessage = TMessage & { children: TMessage[]; depth: number };\r\nexport function buildTree({\r\n  messages,\r\n  fileMap,\r\n}: {\r\n  messages: (TMessage | undefined)[] | null;\r\n  fileMap?: Record<string, TFile>;\r\n}) {\r\n  if (messages === null) {\r\n    return null;\r\n  }\r\n\r\n  const messageMap: Record<string, ParentMessage> = {};\r\n  const rootMessages: TMessage[] = [];\r\n  const childrenCount: Record<string, number> = {};\r\n\r\n  messages.forEach((message) => {\r\n    if (!message) {\r\n      return;\r\n    }\r\n    const parentId = message.parentMessageId ?? '';\r\n    childrenCount[parentId] = (childrenCount[parentId] || 0) + 1;\r\n\r\n    const extendedMessage: ParentMessage = {\r\n      ...message,\r\n      children: [],\r\n      depth: 0,\r\n      siblingIndex: childrenCount[parentId] - 1,\r\n    };\r\n\r\n    if (message.files && fileMap) {\r\n      extendedMessage.files = message.files.map((file) => fileMap[file.file_id ?? ''] ?? file);\r\n    }\r\n\r\n    messageMap[message.messageId] = extendedMessage;\r\n\r\n    const parentMessage = messageMap[parentId];\r\n    if (parentMessage) {\r\n      parentMessage.children.push(extendedMessage);\r\n      extendedMessage.depth = parentMessage.depth + 1;\r\n    } else {\r\n      rootMessages.push(extendedMessage);\r\n    }\r\n  });\r\n\r\n  return rootMessages;\r\n}\r\n","import { z, ZodArray, ZodError, ZodIssueCode } from 'zod';\r\nimport { tConversationSchema, googleSettings as google, openAISettings as openAI } from './schemas';\r\nimport type { ZodIssue } from 'zod';\r\nimport type { TConversation, TSetOption, TPreset } from './schemas';\r\n\r\nexport type GoogleSettings = Partial<typeof google>;\r\nexport type OpenAISettings = Partial<typeof google>;\r\n\r\nexport type ComponentType =\r\n  | 'input'\r\n  | 'textarea'\r\n  | 'slider'\r\n  | 'checkbox'\r\n  | 'switch'\r\n  | 'dropdown'\r\n  | 'combobox'\r\n  | 'tags';\r\n\r\nexport type OptionType = 'conversation' | 'model' | 'custom';\r\n\r\nexport type Option = Record<string, unknown> & {\r\n  label?: string;\r\n  value: string | number | null;\r\n};\r\n\r\nexport type OptionWithIcon = Option & { icon?: React.ReactNode };\r\n\r\nexport enum ComponentTypes {\r\n  Input = 'input',\r\n  Textarea = 'textarea',\r\n  Slider = 'slider',\r\n  Checkbox = 'checkbox',\r\n  Switch = 'switch',\r\n  Dropdown = 'dropdown',\r\n  Combobox = 'combobox',\r\n  Tags = 'tags',\r\n}\r\n\r\nexport enum SettingTypes {\r\n  Number = 'number',\r\n  Boolean = 'boolean',\r\n  String = 'string',\r\n  Enum = 'enum',\r\n  Array = 'array',\r\n}\r\n\r\nexport enum OptionTypes {\r\n  Conversation = 'conversation',\r\n  Model = 'model',\r\n  Custom = 'custom',\r\n}\r\nexport interface SettingDefinition {\r\n  key: string;\r\n  description?: string;\r\n  type: 'number' | 'boolean' | 'string' | 'enum' | 'array';\r\n  default?: number | boolean | string | string[];\r\n  showLabel?: boolean;\r\n  showDefault?: boolean;\r\n  options?: string[];\r\n  range?: SettingRange;\r\n  enumMappings?: Record<string, number | boolean | string>;\r\n  component: ComponentType;\r\n  optionType?: OptionType;\r\n  columnSpan?: number;\r\n  columns?: number;\r\n  label?: string;\r\n  placeholder?: string;\r\n  labelCode?: boolean;\r\n  placeholderCode?: boolean;\r\n  descriptionCode?: boolean;\r\n  minText?: number;\r\n  maxText?: number;\r\n  minTags?: number; // Specific to tags component\r\n  maxTags?: number; // Specific to tags component\r\n  includeInput?: boolean; // Specific to slider component\r\n  descriptionSide?: 'top' | 'right' | 'bottom' | 'left';\r\n  items?: OptionWithIcon[]; // Specific to combobox component\r\n  searchPlaceholder?: string; // Specific to combobox component\r\n  selectPlaceholder?: string; // Specific to combobox component\r\n  searchPlaceholderCode?: boolean; // Specific to combobox component\r\n  selectPlaceholderCode?: boolean; // Specific to combobox component\r\n}\r\n\r\nexport type DynamicSettingProps = Partial<SettingDefinition> & {\r\n  readonly?: boolean;\r\n  settingKey: string;\r\n  setOption: TSetOption;\r\n  conversation: Partial<TConversation> | Partial<TPreset> | null;\r\n  defaultValue?: number | boolean | string | string[];\r\n  className?: string;\r\n  inputClassName?: string;\r\n};\r\n\r\nconst requiredSettingFields = ['key', 'type', 'component'];\r\n\r\nexport interface SettingRange {\r\n  min: number;\r\n  max: number;\r\n  step?: number;\r\n}\r\n\r\nexport type SettingsConfiguration = SettingDefinition[];\r\n\r\nexport function generateDynamicSchema(settings: SettingsConfiguration) {\r\n  const schemaFields: { [key: string]: z.ZodTypeAny } = {};\r\n\r\n  for (const setting of settings) {\r\n    const {\r\n      key,\r\n      type,\r\n      default: defaultValue,\r\n      range,\r\n      options,\r\n      minText,\r\n      maxText,\r\n      minTags,\r\n      maxTags,\r\n    } = setting;\r\n\r\n    if (type === SettingTypes.Number) {\r\n      let schema = z.number();\r\n      if (range) {\r\n        schema = schema.min(range.min);\r\n        schema = schema.max(range.max);\r\n      }\r\n      if (typeof defaultValue === 'number') {\r\n        schemaFields[key] = schema.default(defaultValue);\r\n      } else {\r\n        schemaFields[key] = schema;\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (type === SettingTypes.Boolean) {\r\n      const schema = z.boolean();\r\n      if (typeof defaultValue === 'boolean') {\r\n        schemaFields[key] = schema.default(defaultValue);\r\n      } else {\r\n        schemaFields[key] = schema;\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (type === SettingTypes.String) {\r\n      let schema = z.string();\r\n      if (minText) {\r\n        schema = schema.min(minText);\r\n      }\r\n      if (maxText) {\r\n        schema = schema.max(maxText);\r\n      }\r\n      if (typeof defaultValue === 'string') {\r\n        schemaFields[key] = schema.default(defaultValue);\r\n      } else {\r\n        schemaFields[key] = schema;\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (type === SettingTypes.Enum) {\r\n      if (!options || options.length === 0) {\r\n        console.warn(`Missing or empty 'options' for enum setting '${key}'.`);\r\n        continue;\r\n      }\r\n\r\n      const schema = z.enum(options as [string, ...string[]]);\r\n      if (typeof defaultValue === 'string') {\r\n        schemaFields[key] = schema.default(defaultValue);\r\n      } else {\r\n        schemaFields[key] = schema;\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (type === SettingTypes.Array) {\r\n      let schema: z.ZodSchema = z.array(z.string().or(z.number()));\r\n      if (minTags && schema instanceof ZodArray) {\r\n        schema = schema.min(minTags);\r\n      }\r\n      if (maxTags && schema instanceof ZodArray) {\r\n        schema = schema.max(maxTags);\r\n      }\r\n\r\n      if (defaultValue && Array.isArray(defaultValue)) {\r\n        schema = schema.default(defaultValue);\r\n      }\r\n\r\n      schemaFields[key] = schema;\r\n      continue;\r\n    }\r\n\r\n    console.warn(`Unsupported setting type: ${type}`);\r\n  }\r\n\r\n  return z.object(schemaFields);\r\n}\r\n\r\nconst ZodTypeToSettingType: Record<string, string | undefined> = {\r\n  ZodString: 'string',\r\n  ZodNumber: 'number',\r\n  ZodBoolean: 'boolean',\r\n};\r\n\r\nconst minColumns = 1;\r\nconst maxColumns = 4;\r\nconst minSliderOptions = 2;\r\nconst minDropdownOptions = 2;\r\nconst minComboboxOptions = 2;\r\n\r\n/**\r\n * Validates the provided setting using the constraints unique to each component type.\r\n * @throws {ZodError} Throws a ZodError if any validation fails.\r\n */\r\nexport function validateSettingDefinitions(settings: SettingsConfiguration): void {\r\n  const errors: ZodIssue[] = [];\r\n  // Validate columns\r\n  const columnsSet = new Set<number>();\r\n  for (const setting of settings) {\r\n    if (setting.columns !== undefined) {\r\n      if (setting.columns < minColumns || setting.columns > maxColumns) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid columns value for setting ${setting.key}. Must be between ${minColumns} and ${maxColumns}.`,\r\n          path: ['columns'],\r\n        });\r\n      } else {\r\n        columnsSet.add(setting.columns);\r\n      }\r\n    }\r\n  }\r\n\r\n  const columns = columnsSet.size === 1 ? columnsSet.values().next().value : 2;\r\n\r\n  for (const setting of settings) {\r\n    for (const field of requiredSettingFields) {\r\n      if (setting[field as keyof SettingDefinition] === undefined) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Missing required field ${field} for setting ${setting.key}.`,\r\n          path: [field],\r\n        });\r\n      }\r\n    }\r\n\r\n    // check accepted types\r\n    const settingTypes = Object.values(SettingTypes);\r\n    if (!settingTypes.includes(setting.type as SettingTypes)) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid type for setting ${setting.key}. Must be one of ${settingTypes.join(\r\n          ', ',\r\n        )}.`,\r\n        path: ['type'],\r\n      });\r\n    }\r\n\r\n    // Predefined constraints based on components\r\n    if (\r\n      (setting.component === ComponentTypes.Tags && setting.type !== SettingTypes.Array) ||\r\n      (setting.component !== ComponentTypes.Tags && setting.type === SettingTypes.Array)\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Tags component for setting ${setting.key} must have type array.`,\r\n        path: ['type'],\r\n      });\r\n    }\r\n\r\n    if (setting.component === ComponentTypes.Tags) {\r\n      if (setting.minTags !== undefined && setting.minTags < 0) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid minTags value for setting ${setting.key}. Must be non-negative.`,\r\n          path: ['minTags'],\r\n        });\r\n      }\r\n      if (setting.maxTags !== undefined && setting.maxTags < 0) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid maxTags value for setting ${setting.key}. Must be non-negative.`,\r\n          path: ['maxTags'],\r\n        });\r\n      }\r\n      if (setting.default && !Array.isArray(setting.default)) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid default value for setting ${setting.key}. Must be an array.`,\r\n          path: ['default'],\r\n        });\r\n      }\r\n      if (setting.default && setting.maxTags && (setting.default as []).length > setting.maxTags) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid default value for setting ${setting.key}. Must have at most ${setting.maxTags} tags.`,\r\n          path: ['default'],\r\n        });\r\n      }\r\n      if (setting.default && setting.minTags && (setting.default as []).length < setting.minTags) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid default value for setting ${setting.key}. Must have at least ${setting.minTags} tags.`,\r\n          path: ['default'],\r\n        });\r\n      }\r\n      if (!setting.default) {\r\n        setting.default = [];\r\n      }\r\n    }\r\n\r\n    if (\r\n      setting.component === ComponentTypes.Input ||\r\n      setting.component === ComponentTypes.Textarea\r\n    ) {\r\n      if (setting.type === SettingTypes.Number && setting.component === ComponentTypes.Textarea) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Textarea component for setting ${setting.key} must have type string.`,\r\n          path: ['type'],\r\n        });\r\n        // continue;\r\n      }\r\n\r\n      if (\r\n        setting.minText !== undefined &&\r\n        setting.maxText !== undefined &&\r\n        setting.minText > setting.maxText\r\n      ) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `For setting ${setting.key}, minText cannot be greater than maxText.`,\r\n          path: [setting.key, 'minText', 'maxText'],\r\n        });\r\n        // continue;\r\n      }\r\n      if (!setting.placeholder) {\r\n        setting.placeholder = '';\r\n      } // Default placeholder\r\n    }\r\n\r\n    if (setting.component === ComponentTypes.Slider) {\r\n      if (setting.type === SettingTypes.Number && !setting.range) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Slider component for setting ${setting.key} must have a range if type is number.`,\r\n          path: ['range'],\r\n        });\r\n        // continue;\r\n      }\r\n      if (\r\n        setting.type === SettingTypes.Enum &&\r\n        (!setting.options || setting.options.length < minSliderOptions)\r\n      ) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Slider component for setting ${setting.key} requires at least ${minSliderOptions} options for enum type.`,\r\n          path: ['options'],\r\n        });\r\n        // continue;\r\n      }\r\n      setting.includeInput =\r\n        setting.type === SettingTypes.Number ? (setting.includeInput ?? true) : false; // Default to true if type is number\r\n    }\r\n\r\n    if (setting.component === ComponentTypes.Slider && setting.type === SettingTypes.Number) {\r\n      if (setting.default === undefined && setting.range) {\r\n        // Set default to the middle of the range if unspecified\r\n        setting.default = Math.round((setting.range.min + setting.range.max) / 2);\r\n      }\r\n    }\r\n\r\n    if (\r\n      setting.component === ComponentTypes.Checkbox ||\r\n      setting.component === ComponentTypes.Switch\r\n    ) {\r\n      if (setting.options && setting.options.length > 2) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Checkbox/Switch component for setting ${setting.key} must have 1-2 options.`,\r\n          path: ['options'],\r\n        });\r\n        // continue;\r\n      }\r\n      if (!setting.default && setting.type === SettingTypes.Boolean) {\r\n        setting.default = false; // Default to false if type is boolean\r\n      }\r\n    }\r\n\r\n    if (setting.component === ComponentTypes.Dropdown) {\r\n      if (!setting.options || setting.options.length < minDropdownOptions) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Dropdown component for setting ${setting.key} requires at least ${minDropdownOptions} options.`,\r\n          path: ['options'],\r\n        });\r\n        // continue;\r\n      }\r\n      if (!setting.default && setting.options && setting.options.length > 0) {\r\n        setting.default = setting.options[0]; // Default to first option if not specified\r\n      }\r\n    }\r\n\r\n    if (setting.component === ComponentTypes.Combobox) {\r\n      if (!setting.options || setting.options.length < minComboboxOptions) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Combobox component for setting ${setting.key} requires at least ${minComboboxOptions} options.`,\r\n          path: ['options'],\r\n        });\r\n      }\r\n      if (!setting.default && setting.options && setting.options.length > 0) {\r\n        setting.default = setting.options[0];\r\n      }\r\n    }\r\n\r\n    // Default columnSpan\r\n    if (!setting.columnSpan) {\r\n      setting.columnSpan = Math.floor((columns ?? 0) / 2);\r\n    }\r\n\r\n    // Default label to key\r\n    if (!setting.label) {\r\n      setting.label = setting.key;\r\n    }\r\n\r\n    // Validate minText and maxText for input/textarea\r\n    if (\r\n      setting.component === ComponentTypes.Input ||\r\n      setting.component === ComponentTypes.Textarea\r\n    ) {\r\n      if (setting.minText !== undefined && setting.minText < 0) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid minText value for setting ${setting.key}. Must be non-negative.`,\r\n          path: ['minText'],\r\n        });\r\n      }\r\n      if (setting.maxText !== undefined && setting.maxText < 0) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid maxText value for setting ${setting.key}. Must be non-negative.`,\r\n          path: ['maxText'],\r\n        });\r\n      }\r\n    }\r\n\r\n    // Validate optionType and conversation schema\r\n    if (setting.optionType !== OptionTypes.Custom) {\r\n      const conversationSchema =\r\n        tConversationSchema.shape[setting.key as keyof Omit<TConversation, 'disableParams'>];\r\n      if (!conversationSchema) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Setting ${setting.key} with optionType \"${setting.optionType}\" must be defined in tConversationSchema.`,\r\n          path: ['optionType'],\r\n        });\r\n      } else {\r\n        const zodType = conversationSchema._def.typeName;\r\n        const settingTypeEquivalent = ZodTypeToSettingType[zodType] || null;\r\n        if (settingTypeEquivalent !== setting.type) {\r\n          errors.push({\r\n            code: ZodIssueCode.custom,\r\n            message: `Setting ${setting.key} with optionType \"${setting.optionType}\" must match the type defined in tConversationSchema.`,\r\n            path: ['optionType'],\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    /* Default value checks */\r\n    if (\r\n      setting.type === SettingTypes.Number &&\r\n      isNaN(setting.default as number) &&\r\n      setting.default != null\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid default value for setting ${setting.key}. Must be a number.`,\r\n        path: ['default'],\r\n      });\r\n    }\r\n\r\n    if (\r\n      setting.type === SettingTypes.Boolean &&\r\n      typeof setting.default !== 'boolean' &&\r\n      setting.default != null\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid default value for setting ${setting.key}. Must be a boolean.`,\r\n        path: ['default'],\r\n      });\r\n    }\r\n\r\n    if (\r\n      (setting.type === SettingTypes.String || setting.type === SettingTypes.Enum) &&\r\n      typeof setting.default !== 'string' &&\r\n      setting.default != null\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid default value for setting ${setting.key}. Must be a string.`,\r\n        path: ['default'],\r\n      });\r\n    }\r\n\r\n    if (\r\n      setting.type === SettingTypes.Enum &&\r\n      setting.options &&\r\n      !setting.options.includes(setting.default as string)\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid default value for setting ${\r\n          setting.key\r\n        }. Must be one of the options: [${setting.options.join(', ')}].`,\r\n        path: ['default'],\r\n      });\r\n    }\r\n\r\n    if (\r\n      setting.type === SettingTypes.Number &&\r\n      setting.range &&\r\n      typeof setting.default === 'number' &&\r\n      (setting.default < setting.range.min || setting.default > setting.range.max)\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid default value for setting ${setting.key}. Must be within the range [${setting.range.min}, ${setting.range.max}].`,\r\n        path: ['default'],\r\n      });\r\n    }\r\n\r\n    // Validate enumMappings\r\n    if (setting.enumMappings && setting.type === SettingTypes.Enum && setting.options) {\r\n      for (const option of setting.options) {\r\n        if (!(option in setting.enumMappings)) {\r\n          errors.push({\r\n            code: ZodIssueCode.custom,\r\n            message: `Missing enumMapping for option \"${option}\" in setting ${setting.key}.`,\r\n            path: ['enumMappings'],\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (errors.length > 0) {\r\n    throw new ZodError(errors);\r\n  }\r\n}\r\n\r\nexport const generateOpenAISchema = (customOpenAI: OpenAISettings) => {\r\n  const defaults = { ...openAI, ...customOpenAI };\r\n  return tConversationSchema\r\n    .pick({\r\n      model: true,\r\n      chatGptLabel: true,\r\n      promptPrefix: true,\r\n      temperature: true,\r\n      top_p: true,\r\n      presence_penalty: true,\r\n      frequency_penalty: true,\r\n      resendFiles: true,\r\n      imageDetail: true,\r\n      maxContextTokens: true,\r\n    })\r\n    .transform((obj) => ({\r\n      ...obj,\r\n      model: obj.model ?? defaults.model.default,\r\n      chatGptLabel: obj.chatGptLabel ?? null,\r\n      promptPrefix: obj.promptPrefix ?? null,\r\n      temperature: obj.temperature ?? defaults.temperature.default,\r\n      top_p: obj.top_p ?? defaults.top_p.default,\r\n      presence_penalty: obj.presence_penalty ?? defaults.presence_penalty.default,\r\n      frequency_penalty: obj.frequency_penalty ?? defaults.frequency_penalty.default,\r\n      resendFiles:\r\n        typeof obj.resendFiles === 'boolean' ? obj.resendFiles : defaults.resendFiles.default,\r\n      imageDetail: obj.imageDetail ?? defaults.imageDetail.default,\r\n      maxContextTokens: obj.maxContextTokens ?? undefined,\r\n    }))\r\n    .catch(() => ({\r\n      model: defaults.model.default,\r\n      chatGptLabel: null,\r\n      promptPrefix: null,\r\n      temperature: defaults.temperature.default,\r\n      top_p: defaults.top_p.default,\r\n      presence_penalty: defaults.presence_penalty.default,\r\n      frequency_penalty: defaults.frequency_penalty.default,\r\n      resendFiles: defaults.resendFiles.default,\r\n      imageDetail: defaults.imageDetail.default,\r\n      maxContextTokens: undefined,\r\n    }));\r\n};\r\n\r\nexport const generateGoogleSchema = (customGoogle: GoogleSettings) => {\r\n  const defaults = { ...google, ...customGoogle };\r\n  return tConversationSchema\r\n    .pick({\r\n      model: true,\r\n      modelLabel: true,\r\n      promptPrefix: true,\r\n      examples: true,\r\n      temperature: true,\r\n      maxOutputTokens: true,\r\n      topP: true,\r\n      topK: true,\r\n      maxContextTokens: true,\r\n    })\r\n    .transform((obj) => {\r\n      return {\r\n        ...obj,\r\n        model: obj.model ?? defaults.model.default,\r\n        modelLabel: obj.modelLabel ?? null,\r\n        promptPrefix: obj.promptPrefix ?? null,\r\n        examples: obj.examples ?? [{ input: { content: '' }, output: { content: '' } }],\r\n        temperature: obj.temperature ?? defaults.temperature.default,\r\n        maxOutputTokens: obj.maxOutputTokens ?? defaults.maxOutputTokens.default,\r\n        topP: obj.topP ?? defaults.topP.default,\r\n        topK: obj.topK ?? defaults.topK.default,\r\n        maxContextTokens: obj.maxContextTokens ?? undefined,\r\n      };\r\n    })\r\n    .catch(() => ({\r\n      model: defaults.model.default,\r\n      modelLabel: null,\r\n      promptPrefix: null,\r\n      examples: [{ input: { content: '' }, output: { content: '' } }],\r\n      temperature: defaults.temperature.default,\r\n      maxOutputTokens: defaults.maxOutputTokens.default,\r\n      topP: defaults.topP.default,\r\n      topK: defaults.topK.default,\r\n      maxContextTokens: undefined,\r\n    }));\r\n};\r\n","import { z } from 'zod';\r\n\r\n/**\r\n * Enum for Permission Types\r\n */\r\nexport enum PermissionTypes {\r\n  /**\r\n   * Type for Prompt Permissions\r\n   */\r\n  PROMPTS = 'PROMPTS',\r\n  /**\r\n   * Type for Bookmark Permissions\r\n   */\r\n  BOOKMARKS = 'BOOKMARKS',\r\n  /**\r\n   * Type for Agent Permissions\r\n   */\r\n  AGENTS = 'AGENTS',\r\n  /**\r\n   * Type for Memory Permissions\r\n   */\r\n  MEMORIES = 'MEMORIES',\r\n  /**\r\n   * Type for Multi-Conversation Permissions\r\n   */\r\n  MULTI_CONVO = 'MULTI_CONVO',\r\n  /**\r\n   * Type for Temporary Chat\r\n   */\r\n  TEMPORARY_CHAT = 'TEMPORARY_CHAT',\r\n  /**\r\n   * Type for using the \"Run Code\" LC Code Interpreter API feature\r\n   */\r\n  RUN_CODE = 'RUN_CODE',\r\n  /**\r\n   * Type for using the \"Web Search\" feature\r\n   */\r\n  WEB_SEARCH = 'WEB_SEARCH',\r\n  /**\r\n   * Type for People Picker Permissions\r\n   */\r\n  PEOPLE_PICKER = 'PEOPLE_PICKER',\r\n  /**\r\n   * Type for Marketplace Permissions\r\n   */\r\n  MARKETPLACE = 'MARKETPLACE',\r\n  /**\r\n   * Type for using the \"File Search\" feature\r\n   */\r\n  FILE_SEARCH = 'FILE_SEARCH',\r\n  /**\r\n   * Type for using the \"File Citations\" feature in agents\r\n   */\r\n  FILE_CITATIONS = 'FILE_CITATIONS',\r\n}\r\n\r\n/**\r\n * Enum for Role-Based Access Control Constants\r\n */\r\nexport enum Permissions {\r\n  SHARED_GLOBAL = 'SHARED_GLOBAL',\r\n  USE = 'USE',\r\n  CREATE = 'CREATE',\r\n  UPDATE = 'UPDATE',\r\n  READ = 'READ',\r\n  READ_AUTHOR = 'READ_AUTHOR',\r\n  SHARE = 'SHARE',\r\n  /** Can disable if desired */\r\n  OPT_OUT = 'OPT_OUT',\r\n  VIEW_USERS = 'VIEW_USERS',\r\n  VIEW_GROUPS = 'VIEW_GROUPS',\r\n  VIEW_ROLES = 'VIEW_ROLES',\r\n}\r\n\r\nexport const promptPermissionsSchema = z.object({\r\n  [Permissions.SHARED_GLOBAL]: z.boolean().default(false),\r\n  [Permissions.USE]: z.boolean().default(true),\r\n  [Permissions.CREATE]: z.boolean().default(true),\r\n  // [Permissions.SHARE]: z.boolean().default(false),\r\n});\r\nexport type TPromptPermissions = z.infer<typeof promptPermissionsSchema>;\r\n\r\nexport const bookmarkPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TBookmarkPermissions = z.infer<typeof bookmarkPermissionsSchema>;\r\n\r\nexport const memoryPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n  [Permissions.CREATE]: z.boolean().default(true),\r\n  [Permissions.UPDATE]: z.boolean().default(true),\r\n  [Permissions.READ]: z.boolean().default(true),\r\n  [Permissions.OPT_OUT]: z.boolean().default(true),\r\n});\r\nexport type TMemoryPermissions = z.infer<typeof memoryPermissionsSchema>;\r\n\r\nexport const agentPermissionsSchema = z.object({\r\n  [Permissions.SHARED_GLOBAL]: z.boolean().default(false),\r\n  [Permissions.USE]: z.boolean().default(true),\r\n  [Permissions.CREATE]: z.boolean().default(true),\r\n  // [Permissions.SHARE]: z.boolean().default(false),\r\n});\r\nexport type TAgentPermissions = z.infer<typeof agentPermissionsSchema>;\r\n\r\nexport const multiConvoPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TMultiConvoPermissions = z.infer<typeof multiConvoPermissionsSchema>;\r\n\r\nexport const temporaryChatPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TTemporaryChatPermissions = z.infer<typeof temporaryChatPermissionsSchema>;\r\n\r\nexport const runCodePermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TRunCodePermissions = z.infer<typeof runCodePermissionsSchema>;\r\n\r\nexport const webSearchPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TWebSearchPermissions = z.infer<typeof webSearchPermissionsSchema>;\r\n\r\nexport const peoplePickerPermissionsSchema = z.object({\r\n  [Permissions.VIEW_USERS]: z.boolean().default(true),\r\n  [Permissions.VIEW_GROUPS]: z.boolean().default(true),\r\n  [Permissions.VIEW_ROLES]: z.boolean().default(true),\r\n});\r\nexport type TPeoplePickerPermissions = z.infer<typeof peoplePickerPermissionsSchema>;\r\n\r\nexport const marketplacePermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(false),\r\n});\r\nexport type TMarketplacePermissions = z.infer<typeof marketplacePermissionsSchema>;\r\n\r\nexport const fileSearchPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TFileSearchPermissions = z.infer<typeof fileSearchPermissionsSchema>;\r\n\r\nexport const fileCitationsPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TFileCitationsPermissions = z.infer<typeof fileCitationsPermissionsSchema>;\r\n\r\n// Define a single permissions schema that holds all permission types.\r\nexport const permissionsSchema = z.object({\r\n  [PermissionTypes.PROMPTS]: promptPermissionsSchema,\r\n  [PermissionTypes.BOOKMARKS]: bookmarkPermissionsSchema,\r\n  [PermissionTypes.MEMORIES]: memoryPermissionsSchema,\r\n  [PermissionTypes.AGENTS]: agentPermissionsSchema,\r\n  [PermissionTypes.MULTI_CONVO]: multiConvoPermissionsSchema,\r\n  [PermissionTypes.TEMPORARY_CHAT]: temporaryChatPermissionsSchema,\r\n  [PermissionTypes.RUN_CODE]: runCodePermissionsSchema,\r\n  [PermissionTypes.WEB_SEARCH]: webSearchPermissionsSchema,\r\n  [PermissionTypes.PEOPLE_PICKER]: peoplePickerPermissionsSchema,\r\n  [PermissionTypes.MARKETPLACE]: marketplacePermissionsSchema,\r\n  [PermissionTypes.FILE_SEARCH]: fileSearchPermissionsSchema,\r\n  [PermissionTypes.FILE_CITATIONS]: fileCitationsPermissionsSchema,\r\n});\r\n","import { z } from 'zod';\r\nimport {\r\n  Permissions,\r\n  PermissionTypes,\r\n  permissionsSchema,\r\n  agentPermissionsSchema,\r\n  promptPermissionsSchema,\r\n  memoryPermissionsSchema,\r\n  runCodePermissionsSchema,\r\n  bookmarkPermissionsSchema,\r\n  webSearchPermissionsSchema,\r\n  fileSearchPermissionsSchema,\r\n  multiConvoPermissionsSchema,\r\n  temporaryChatPermissionsSchema,\r\n  peoplePickerPermissionsSchema,\r\n  fileCitationsPermissionsSchema,\r\n} from './permissions';\r\n\r\n/**\r\n * Enum for System Defined Roles\r\n */\r\nexport enum SystemRoles {\r\n  /**\r\n   * The Admin role\r\n   */\r\n  ADMIN = 'ADMIN',\r\n  /**\r\n   * The default user role\r\n   */\r\n  USER = 'USER',\r\n}\r\n\r\nexport const roleSchema = z.object({\r\n  name: z.string(),\r\n  permissions: permissionsSchema,\r\n});\r\n\r\nexport type TRole = z.infer<typeof roleSchema>;\r\n\r\nconst defaultRolesSchema = z.object({\r\n  [SystemRoles.ADMIN]: roleSchema.extend({\r\n    name: z.literal(SystemRoles.ADMIN),\r\n    permissions: permissionsSchema.extend({\r\n      [PermissionTypes.PROMPTS]: promptPermissionsSchema.extend({\r\n        [Permissions.SHARED_GLOBAL]: z.boolean().default(true),\r\n        [Permissions.USE]: z.boolean().default(true),\r\n        [Permissions.CREATE]: z.boolean().default(true),\r\n        // [Permissions.SHARE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.BOOKMARKS]: bookmarkPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.MEMORIES]: memoryPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n        [Permissions.CREATE]: z.boolean().default(true),\r\n        [Permissions.UPDATE]: z.boolean().default(true),\r\n        [Permissions.READ]: z.boolean().default(true),\r\n        [Permissions.OPT_OUT]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.AGENTS]: agentPermissionsSchema.extend({\r\n        [Permissions.SHARED_GLOBAL]: z.boolean().default(true),\r\n        [Permissions.USE]: z.boolean().default(true),\r\n        [Permissions.CREATE]: z.boolean().default(true),\r\n        // [Permissions.SHARE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.MULTI_CONVO]: multiConvoPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.TEMPORARY_CHAT]: temporaryChatPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.RUN_CODE]: runCodePermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.WEB_SEARCH]: webSearchPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.PEOPLE_PICKER]: peoplePickerPermissionsSchema.extend({\r\n        [Permissions.VIEW_USERS]: z.boolean().default(true),\r\n        [Permissions.VIEW_GROUPS]: z.boolean().default(true),\r\n        [Permissions.VIEW_ROLES]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.MARKETPLACE]: z.object({\r\n        [Permissions.USE]: z.boolean().default(false),\r\n      }),\r\n      [PermissionTypes.FILE_SEARCH]: fileSearchPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.FILE_CITATIONS]: fileCitationsPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n    }),\r\n  }),\r\n  [SystemRoles.USER]: roleSchema.extend({\r\n    name: z.literal(SystemRoles.USER),\r\n    permissions: permissionsSchema,\r\n  }),\r\n});\r\n\r\nexport const roleDefaults = defaultRolesSchema.parse({\r\n  [SystemRoles.ADMIN]: {\r\n    name: SystemRoles.ADMIN,\r\n    permissions: {\r\n      [PermissionTypes.PROMPTS]: {\r\n        [Permissions.SHARED_GLOBAL]: true,\r\n        [Permissions.USE]: true,\r\n        [Permissions.CREATE]: true,\r\n      },\r\n      [PermissionTypes.BOOKMARKS]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.MEMORIES]: {\r\n        [Permissions.USE]: true,\r\n        [Permissions.CREATE]: true,\r\n        [Permissions.UPDATE]: true,\r\n        [Permissions.READ]: true,\r\n        [Permissions.OPT_OUT]: true,\r\n      },\r\n      [PermissionTypes.AGENTS]: {\r\n        [Permissions.SHARED_GLOBAL]: true,\r\n        [Permissions.USE]: true,\r\n        [Permissions.CREATE]: true,\r\n      },\r\n      [PermissionTypes.MULTI_CONVO]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.TEMPORARY_CHAT]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.RUN_CODE]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.WEB_SEARCH]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.PEOPLE_PICKER]: {\r\n        [Permissions.VIEW_USERS]: true,\r\n        [Permissions.VIEW_GROUPS]: true,\r\n        [Permissions.VIEW_ROLES]: true,\r\n      },\r\n      [PermissionTypes.MARKETPLACE]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.FILE_SEARCH]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.FILE_CITATIONS]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n    },\r\n  },\r\n  [SystemRoles.USER]: {\r\n    name: SystemRoles.USER,\r\n    permissions: {\r\n      [PermissionTypes.PROMPTS]: {},\r\n      [PermissionTypes.BOOKMARKS]: {},\r\n      [PermissionTypes.MEMORIES]: {},\r\n      [PermissionTypes.AGENTS]: {},\r\n      [PermissionTypes.MULTI_CONVO]: {},\r\n      [PermissionTypes.TEMPORARY_CHAT]: {},\r\n      [PermissionTypes.RUN_CODE]: {},\r\n      [PermissionTypes.WEB_SEARCH]: {},\r\n      [PermissionTypes.PEOPLE_PICKER]: {\r\n        [Permissions.VIEW_USERS]: false,\r\n        [Permissions.VIEW_GROUPS]: false,\r\n        [Permissions.VIEW_ROLES]: false,\r\n      },\r\n      [PermissionTypes.MARKETPLACE]: {\r\n        [Permissions.USE]: false,\r\n      },\r\n      [PermissionTypes.FILE_SEARCH]: {},\r\n      [PermissionTypes.FILE_CITATIONS]: {},\r\n    },\r\n  },\r\n});\r\n","import type { Logger as WinstonLogger } from 'winston';\r\nimport type { RunnableConfig } from '@langchain/core/runnables';\r\n\r\nexport type SearchRefType = 'search' | 'image' | 'news' | 'video' | 'ref';\r\n\r\nexport enum DATE_RANGE {\r\n  PAST_HOUR = 'h',\r\n  PAST_24_HOURS = 'd',\r\n  PAST_WEEK = 'w',\r\n  PAST_MONTH = 'm',\r\n  PAST_YEAR = 'y',\r\n}\r\n\r\nexport type SearchProvider = 'serper' | 'searxng';\r\nexport type RerankerType = 'infinity' | 'jina' | 'cohere' | 'none';\r\n\r\nexport interface Highlight {\r\n  score: number;\r\n  text: string;\r\n  references?: UsedReferences;\r\n}\r\n\r\nexport type ProcessedSource = {\r\n  content?: string;\r\n  attribution?: string;\r\n  references?: References;\r\n  highlights?: Highlight[];\r\n  processed?: boolean;\r\n};\r\n\r\nexport type ProcessedOrganic = OrganicResult & ProcessedSource;\r\nexport type ProcessedTopStory = TopStoryResult & ProcessedSource;\r\nexport type ValidSource = ProcessedOrganic | ProcessedTopStory;\r\n\r\nexport type ResultReference = {\r\n  link: string;\r\n  type: 'link' | 'image' | 'video' | 'file';\r\n  title?: string;\r\n  attribution?: string;\r\n};\r\nexport interface SearchResultData {\r\n  turn?: number;\r\n  organic?: ProcessedOrganic[];\r\n  topStories?: ProcessedTopStory[];\r\n  images?: ImageResult[];\r\n  videos?: VideoResult[];\r\n  places?: PlaceResult[];\r\n  news?: NewsResult[];\r\n  shopping?: ShoppingResult[];\r\n  knowledgeGraph?: KnowledgeGraphResult;\r\n  answerBox?: AnswerBoxResult;\r\n  peopleAlsoAsk?: PeopleAlsoAskResult[];\r\n  relatedSearches?: Array<{ query: string }>;\r\n  references?: ResultReference[];\r\n  error?: string;\r\n}\r\n\r\nexport interface SearchResult {\r\n  data?: SearchResultData;\r\n  error?: string;\r\n  success: boolean;\r\n}\r\n\r\nexport interface Source {\r\n  link: string;\r\n  html?: string;\r\n  title?: string;\r\n  snippet?: string;\r\n  date?: string;\r\n}\r\n\r\nexport interface SearchConfig {\r\n  searchProvider?: SearchProvider;\r\n  serperApiKey?: string;\r\n  searxngInstanceUrl?: string;\r\n  searxngApiKey?: string;\r\n}\r\n\r\nexport type References = {\r\n  links: MediaReference[];\r\n  images: MediaReference[];\r\n  videos: MediaReference[];\r\n};\r\nexport interface ScrapeResult {\r\n  url: string;\r\n  error?: boolean;\r\n  content: string;\r\n  attribution?: string;\r\n  references?: References;\r\n  highlights?: Highlight[];\r\n}\r\n\r\nexport interface ProcessSourcesConfig {\r\n  topResults?: number;\r\n  strategies?: string[];\r\n  filterContent?: boolean;\r\n  reranker?: unknown;\r\n  logger?: Logger;\r\n}\r\n\r\nexport interface FirecrawlConfig {\r\n  firecrawlApiKey?: string;\r\n  firecrawlApiUrl?: string;\r\n  firecrawlOptions?: {\r\n    formats?: string[];\r\n    includeTags?: string[];\r\n    excludeTags?: string[];\r\n    headers?: Record<string, string>;\r\n    waitFor?: number;\r\n    timeout?: number;\r\n    maxAge?: number;\r\n    mobile?: boolean;\r\n    skipTlsVerification?: boolean;\r\n    blockAds?: boolean;\r\n    removeBase64Images?: boolean;\r\n    parsePDF?: boolean;\r\n    storeInCache?: boolean;\r\n    zeroDataRetention?: boolean;\r\n    location?: {\r\n      country?: string;\r\n      languages?: string[];\r\n    };\r\n    onlyMainContent?: boolean;\r\n    changeTrackingOptions?: {\r\n      modes?: string[];\r\n      schema?: Record<string, unknown>;\r\n      prompt?: string;\r\n      tag?: string | null;\r\n    };\r\n  };\r\n}\r\n\r\nexport interface ScraperContentResult {\r\n  content: string;\r\n}\r\n\r\nexport interface ScraperExtractionResult {\r\n  no_extraction: ScraperContentResult;\r\n}\r\n\r\nexport interface JinaRerankerResult {\r\n  index: number;\r\n  relevance_score: number;\r\n  document?: string | { text: string };\r\n}\r\n\r\nexport interface JinaRerankerResponse {\r\n  model: string;\r\n  usage: {\r\n    total_tokens: number;\r\n  };\r\n  results: JinaRerankerResult[];\r\n}\r\n\r\nexport interface CohereRerankerResult {\r\n  index: number;\r\n  relevance_score: number;\r\n}\r\n\r\nexport interface CohereRerankerResponse {\r\n  results: CohereRerankerResult[];\r\n  id: string;\r\n  meta: {\r\n    api_version: {\r\n      version: string;\r\n      is_experimental: boolean;\r\n    };\r\n    billed_units: {\r\n      search_units: number;\r\n    };\r\n  };\r\n}\r\n\r\nexport type SafeSearchLevel = 0 | 1 | 2;\r\n\r\nexport type Logger = WinstonLogger;\r\nexport interface SearchToolConfig extends SearchConfig, ProcessSourcesConfig, FirecrawlConfig {\r\n  logger?: Logger;\r\n  safeSearch?: SafeSearchLevel;\r\n  jinaApiKey?: string;\r\n  jinaApiUrl?: string;\r\n  cohereApiKey?: string;\r\n  rerankerType?: RerankerType;\r\n  onSearchResults?: (results: SearchResult, runnableConfig?: RunnableConfig) => void;\r\n  onGetHighlights?: (link: string) => void;\r\n}\r\nexport interface MediaReference {\r\n  originalUrl: string;\r\n  title?: string;\r\n  text?: string;\r\n}\r\n\r\nexport type UsedReferences = {\r\n  type: 'link' | 'image' | 'video';\r\n  originalIndex: number;\r\n  reference: MediaReference;\r\n}[];\r\n\r\n/** Firecrawl */\r\n\r\nexport interface FirecrawlScrapeOptions {\r\n  formats?: string[];\r\n  includeTags?: string[];\r\n  excludeTags?: string[];\r\n  headers?: Record<string, string>;\r\n  waitFor?: number;\r\n  timeout?: number;\r\n}\r\n\r\nexport interface ScrapeMetadata {\r\n  // Core source information\r\n  sourceURL?: string;\r\n  url?: string;\r\n  scrapeId?: string;\r\n  statusCode?: number;\r\n  // Basic metadata\r\n  title?: string;\r\n  description?: string;\r\n  language?: string;\r\n  favicon?: string;\r\n  viewport?: string;\r\n  robots?: string;\r\n  'theme-color'?: string;\r\n  // Open Graph metadata\r\n  'og:url'?: string;\r\n  'og:title'?: string;\r\n  'og:description'?: string;\r\n  'og:type'?: string;\r\n  'og:image'?: string;\r\n  'og:image:width'?: string;\r\n  'og:image:height'?: string;\r\n  'og:site_name'?: string;\r\n  ogUrl?: string;\r\n  ogTitle?: string;\r\n  ogDescription?: string;\r\n  ogImage?: string;\r\n  ogSiteName?: string;\r\n  // Article metadata\r\n  'article:author'?: string;\r\n  'article:published_time'?: string;\r\n  'article:modified_time'?: string;\r\n  'article:section'?: string;\r\n  'article:tag'?: string;\r\n  'article:publisher'?: string;\r\n  publishedTime?: string;\r\n  modifiedTime?: string;\r\n  // Twitter metadata\r\n  'twitter:site'?: string | boolean | number | null;\r\n  'twitter:creator'?: string;\r\n  'twitter:card'?: string;\r\n  'twitter:image'?: string;\r\n  'twitter:dnt'?: string;\r\n  'twitter:app:name:iphone'?: string;\r\n  'twitter:app:id:iphone'?: string;\r\n  'twitter:app:url:iphone'?: string;\r\n  'twitter:app:name:ipad'?: string;\r\n  'twitter:app:id:ipad'?: string;\r\n  'twitter:app:url:ipad'?: string;\r\n  'twitter:app:name:googleplay'?: string;\r\n  'twitter:app:id:googleplay'?: string;\r\n  'twitter:app:url:googleplay'?: string;\r\n  // Facebook metadata\r\n  'fb:app_id'?: string;\r\n  // App links\r\n  'al:ios:url'?: string;\r\n  'al:ios:app_name'?: string;\r\n  'al:ios:app_store_id'?: string;\r\n  // Allow for additional properties that might be present\r\n  [key: string]: string | number | boolean | null | undefined;\r\n}\r\n\r\nexport interface FirecrawlScrapeResponse {\r\n  success: boolean;\r\n  data?: {\r\n    markdown?: string;\r\n    html?: string;\r\n    rawHtml?: string;\r\n    screenshot?: string;\r\n    links?: string[];\r\n    metadata?: ScrapeMetadata;\r\n  };\r\n  error?: string;\r\n}\r\n\r\nexport interface FirecrawlScraperConfig {\r\n  apiKey?: string;\r\n  apiUrl?: string;\r\n  formats?: string[];\r\n  timeout?: number;\r\n  logger?: Logger;\r\n}\r\n\r\nexport type GetSourcesParams = {\r\n  query: string;\r\n  date?: DATE_RANGE;\r\n  country?: string;\r\n  numResults?: number;\r\n  safeSearch?: SearchToolConfig['safeSearch'];\r\n  images?: boolean;\r\n  videos?: boolean;\r\n  news?: boolean;\r\n  type?: 'search' | 'images' | 'videos' | 'news';\r\n};\r\n\r\n/** Serper API */\r\nexport interface VideoResult {\r\n  title?: string;\r\n  link?: string;\r\n  snippet?: string;\r\n  imageUrl?: string;\r\n  duration?: string;\r\n  source?: string;\r\n  channel?: string;\r\n  date?: string;\r\n  position?: number;\r\n}\r\n\r\nexport interface PlaceResult {\r\n  position?: number;\r\n  name?: string;\r\n  address?: string;\r\n  latitude?: number;\r\n  longitude?: number;\r\n  rating?: number;\r\n  ratingCount?: number;\r\n  category?: string;\r\n  identifier?: string;\r\n}\r\n\r\nexport interface NewsResult {\r\n  title?: string;\r\n  link?: string;\r\n  snippet?: string;\r\n  date?: string;\r\n  source?: string;\r\n  imageUrl?: string;\r\n  position?: number;\r\n}\r\n\r\nexport interface ShoppingResult {\r\n  title?: string;\r\n  source?: string;\r\n  link?: string;\r\n  price?: string;\r\n  delivery?: string;\r\n  imageUrl?: string;\r\n  rating?: number;\r\n  ratingCount?: number;\r\n  offers?: string;\r\n  productId?: string;\r\n  position?: number;\r\n}\r\n\r\nexport interface ScholarResult {\r\n  title?: string;\r\n  link?: string;\r\n  publicationInfo?: string;\r\n  snippet?: string;\r\n  year?: number;\r\n  citedBy?: number;\r\n}\r\n\r\nexport interface ImageResult {\r\n  title?: string;\r\n  imageUrl?: string;\r\n  imageWidth?: number;\r\n  imageHeight?: number;\r\n  thumbnailUrl?: string;\r\n  thumbnailWidth?: number;\r\n  thumbnailHeight?: number;\r\n  source?: string;\r\n  domain?: string;\r\n  link?: string;\r\n  googleUrl?: string;\r\n  position?: number;\r\n}\r\n\r\nexport interface SerperSearchPayload extends SerperSearchInput {\r\n  /**\r\n   * Search type/vertical\r\n   * Options: \"search\" (web), \"images\", \"news\", \"places\", \"videos\"\r\n   */\r\n  type?: 'search' | 'images' | 'news' | 'places' | 'videos';\r\n\r\n  /**\r\n   * Starting index for search results pagination (used instead of page)\r\n   */\r\n  start?: number;\r\n\r\n  /**\r\n   * Filtering for safe search\r\n   * Options: \"off\", \"moderate\", \"active\"\r\n   */\r\n  safe?: 'off' | 'moderate' | 'active';\r\n}\r\n\r\nexport type SerperSearchParameters = Pick<SerperSearchPayload, 'q' | 'type'> & {\r\n  engine: 'google';\r\n};\r\n\r\nexport interface OrganicResult {\r\n  position?: number;\r\n  title?: string;\r\n  link: string;\r\n  snippet?: string;\r\n  date?: string;\r\n  sitelinks?: Array<{\r\n    title: string;\r\n    link: string;\r\n  }>;\r\n}\r\n\r\nexport interface TopStoryResult {\r\n  title?: string;\r\n  link: string;\r\n  source?: string;\r\n  date?: string;\r\n  imageUrl?: string;\r\n}\r\nexport interface KnowledgeGraphResult {\r\n  title?: string;\r\n  type?: string;\r\n  imageUrl?: string;\r\n  description?: string;\r\n  descriptionSource?: string;\r\n  descriptionLink?: string;\r\n  attributes?: Record<string, string>;\r\n  website?: string;\r\n}\r\n\r\nexport interface AnswerBoxResult {\r\n  title?: string;\r\n  snippet?: string;\r\n  snippetHighlighted?: string[];\r\n  link?: string;\r\n  date?: string;\r\n}\r\n\r\nexport interface PeopleAlsoAskResult {\r\n  question?: string;\r\n  snippet?: string;\r\n  title?: string;\r\n  link?: string;\r\n}\r\n\r\nexport type RelatedSearches = Array<{ query: string }>;\r\n\r\nexport interface SerperSearchInput {\r\n  /**\r\n   * The search query string\r\n   */\r\n  q: string;\r\n\r\n  /**\r\n   * Country code for localized results\r\n   * Examples: \"us\", \"uk\", \"ca\", \"de\", etc.\r\n   */\r\n  gl?: string;\r\n\r\n  /**\r\n   * Interface language\r\n   * Examples: \"en\", \"fr\", \"de\", etc.\r\n   */\r\n  hl?: string;\r\n\r\n  /**\r\n   * Number of results to return (up to 100)\r\n   */\r\n  num?: number;\r\n  /**\r\n   * Specific location for contextual results\r\n   * Example: \"New York, NY\"\r\n   */\r\n  location?: string;\r\n\r\n  /**\r\n   * Search autocorrection setting\r\n   */\r\n  autocorrect?: boolean;\r\n  page?: number;\r\n  /**\r\n   * Date range for search results\r\n   * Options: \"h\" (past hour), \"d\" (past 24 hours), \"w\" (past week),\r\n   * \"m\" (past month), \"y\" (past year)\r\n   * `qdr:${DATE_RANGE}`\r\n   */\r\n  tbs?: string;\r\n}\r\n\r\nexport type SerperResultData = {\r\n  searchParameters: SerperSearchPayload;\r\n  organic?: OrganicResult[];\r\n  topStories?: TopStoryResult[];\r\n  images?: ImageResult[];\r\n  videos?: VideoResult[];\r\n  places?: PlaceResult[];\r\n  news?: NewsResult[];\r\n  shopping?: ShoppingResult[];\r\n  peopleAlsoAsk?: PeopleAlsoAskResult[];\r\n  relatedSearches?: RelatedSearches;\r\n  knowledgeGraph?: KnowledgeGraphResult;\r\n  answerBox?: AnswerBoxResult;\r\n  credits?: number;\r\n};\r\n\r\n/** SearXNG */\r\n\r\nexport interface SearxNGSearchPayload {\r\n  /**\r\n   * The search query string\r\n   * Supports syntax specific to different search engines\r\n   * Example: \"site:github.com SearXNG\"\r\n   */\r\n  q: string;\r\n\r\n  /**\r\n   * Comma-separated list of search categories\r\n   * Example: \"general,images,news\"\r\n   */\r\n  categories?: string;\r\n\r\n  /**\r\n   * Comma-separated list of search engines to use\r\n   * Example: \"google,bing,duckduckgo\"\r\n   */\r\n  engines?: string;\r\n\r\n  /**\r\n   * Code of the language for search results\r\n   * Example: \"en\", \"fr\", \"de\", \"es\"\r\n   */\r\n  language?: string;\r\n\r\n  /**\r\n   * Search page number\r\n   * Default: 1\r\n   */\r\n  pageno?: number;\r\n\r\n  /**\r\n   * Time range filter for search results\r\n   * Options: \"day\", \"month\", \"year\"\r\n   */\r\n  time_range?: 'day' | 'month' | 'year';\r\n\r\n  /**\r\n   * Output format of results\r\n   * Options: \"json\", \"csv\", \"rss\"\r\n   */\r\n  format?: 'json' | 'csv' | 'rss';\r\n\r\n  /**\r\n   * Open search results on new tab\r\n   * Options: `0` (off), `1` (on)\r\n   */\r\n  results_on_new_tab?: 0 | 1;\r\n\r\n  /**\r\n   * Proxy image results through SearxNG\r\n   * Options: true, false\r\n   */\r\n  image_proxy?: boolean;\r\n\r\n  /**\r\n   * Service for autocomplete suggestions\r\n   * Options: \"google\", \"dbpedia\", \"duckduckgo\", \"mwmbl\",\r\n   *          \"startpage\", \"wikipedia\", \"stract\", \"swisscows\", \"qwant\"\r\n   */\r\n  autocomplete?: string;\r\n\r\n  /**\r\n   * Safe search filtering level\r\n   * Options: \"0\" (off), \"1\" (moderate), \"2\" (strict)\r\n   */\r\n  safesearch?: 0 | 1 | 2;\r\n\r\n  /**\r\n   * Theme to use for results page\r\n   * Default: \"simple\" (other themes may be available per instance)\r\n   */\r\n  theme?: string;\r\n\r\n  /**\r\n   * List of enabled plugins\r\n   * Default: \"Hash_plugin,Self_Information,Tracker_URL_remover,Ahmia_blacklist\"\r\n   */\r\n  enabled_plugins?: string;\r\n\r\n  /**\r\n   * List of disabled plugins\r\n   */\r\n  disabled_plugins?: string;\r\n\r\n  /**\r\n   * List of enabled engines\r\n   */\r\n  enabled_engines?: string;\r\n\r\n  /**\r\n   * List of disabled engines\r\n   */\r\n  disabled_engines?: string;\r\n}\r\n\r\nexport interface SearXNGResult {\r\n  title?: string;\r\n  url?: string;\r\n  content?: string;\r\n  publishedDate?: string;\r\n  img_src?: string;\r\n}\r\n\r\nexport type ProcessSourcesFields = {\r\n  result: SearchResult;\r\n  numElements: number;\r\n  query: string;\r\n  news: boolean;\r\n  proMode: boolean;\r\n  onGetHighlights: SearchToolConfig['onGetHighlights'];\r\n};\r\n","import { z } from 'zod';\r\n\r\n/**\r\n * Granular Permission System Types for Agent Sharing\r\n *\r\n * This file contains TypeScript interfaces and Zod schemas for the enhanced\r\n * agent permission system that supports sharing with specific users/groups\r\n * and Entra ID integration.\r\n */\r\n\r\n// ===== ENUMS & CONSTANTS =====\r\n\r\n/**\r\n * Principal types for permission system\r\n */\r\nexport enum PrincipalType {\r\n  USER = 'user',\r\n  GROUP = 'group',\r\n  PUBLIC = 'public',\r\n  ROLE = 'role',\r\n}\r\n\r\n/**\r\n * Principal model types for MongoDB references\r\n */\r\nexport enum PrincipalModel {\r\n  USER = 'User',\r\n  GROUP = 'Group',\r\n  ROLE = 'Role',\r\n}\r\n\r\n/**\r\n * Source of the principal (local LibreChat or external Entra ID)\r\n */\r\nexport type TPrincipalSource = 'local' | 'entra';\r\n\r\n/**\r\n * Access levels for agents\r\n */\r\nexport type TAccessLevel = 'none' | 'viewer' | 'editor' | 'owner';\r\n\r\n/**\r\n * Resource types for permission system\r\n */\r\nexport enum ResourceType {\r\n  AGENT = 'agent',\r\n  PROMPTGROUP = 'promptGroup',\r\n}\r\n\r\n/**\r\n * Permission bit constants for bitwise operations\r\n */\r\nexport enum PermissionBits {\r\n  /** 001 - Can view and use agent */\r\n  VIEW = 1,\r\n  /**  010 - Can modify agent settings */\r\n  EDIT = 2,\r\n  /**  100 - Can delete agent */\r\n  DELETE = 4,\r\n  /**  1000 - Can share agent with others (future) */\r\n  SHARE = 8,\r\n}\r\n\r\n/**\r\n * Standard access role IDs\r\n */\r\nexport enum AccessRoleIds {\r\n  AGENT_VIEWER = 'agent_viewer',\r\n  AGENT_EDITOR = 'agent_editor',\r\n  AGENT_OWNER = 'agent_owner',\r\n  PROMPTGROUP_VIEWER = 'promptGroup_viewer',\r\n  PROMPTGROUP_EDITOR = 'promptGroup_editor',\r\n  PROMPTGROUP_OWNER = 'promptGroup_owner',\r\n}\r\n\r\n// ===== ZOD SCHEMAS =====\r\n\r\n/**\r\n * Principal schema - represents a user, group, role, or public access\r\n */\r\nexport const principalSchema = z.object({\r\n  type: z.nativeEnum(PrincipalType),\r\n  id: z.string().optional(), // undefined for 'public' type, role name for 'role' type\r\n  name: z.string().optional(),\r\n  email: z.string().optional(), // for user and group types\r\n  source: z.enum(['local', 'entra']).optional(),\r\n  avatar: z.string().optional(), // for user and group types\r\n  description: z.string().optional(), // for group and role types\r\n  idOnTheSource: z.string().optional(), // Entra ID for users/groups\r\n  accessRoleId: z.nativeEnum(AccessRoleIds).optional(), // Access role ID for permissions\r\n  memberCount: z.number().optional(), // for group type\r\n});\r\n\r\n/**\r\n * Access role schema - defines named permission sets\r\n */\r\nexport const accessRoleSchema = z.object({\r\n  accessRoleId: z.nativeEnum(AccessRoleIds),\r\n  name: z.string(),\r\n  description: z.string().optional(),\r\n  resourceType: z.nativeEnum(ResourceType).default(ResourceType.AGENT),\r\n  permBits: z.number(),\r\n});\r\n\r\n/**\r\n * Permission entry schema - represents a single ACL entry\r\n */\r\nexport const permissionEntrySchema = z.object({\r\n  id: z.string(),\r\n  principalType: z.nativeEnum(PrincipalType),\r\n  principalId: z.string().optional(), // undefined for 'public'\r\n  principalName: z.string().optional(),\r\n  role: accessRoleSchema,\r\n  grantedBy: z.string(),\r\n  grantedAt: z.string(), // ISO date string\r\n  inheritedFrom: z.string().optional(), // for project-level inheritance\r\n  source: z.enum(['local', 'entra']).optional(),\r\n});\r\n\r\n/**\r\n * Resource permissions response schema\r\n */\r\nexport const resourcePermissionsResponseSchema = z.object({\r\n  resourceType: z.nativeEnum(ResourceType),\r\n  resourceId: z.string(),\r\n  permissions: z.array(permissionEntrySchema),\r\n});\r\n\r\n/**\r\n * Update resource permissions request schema\r\n * This matches the user's requirement for the frontend DTO structure\r\n */\r\nexport const updateResourcePermissionsRequestSchema = z.object({\r\n  updated: principalSchema.array(),\r\n  removed: principalSchema.array(),\r\n  public: z.boolean(),\r\n  publicAccessRoleId: z.string().optional(),\r\n});\r\n\r\n/**\r\n * Update resource permissions response schema\r\n * Returns the updated permissions with accessRoleId included\r\n */\r\nexport const updateResourcePermissionsResponseSchema = z.object({\r\n  message: z.string(),\r\n  results: z.object({\r\n    principals: principalSchema.array(),\r\n    public: z.boolean(),\r\n    publicAccessRoleId: z.string().optional(),\r\n  }),\r\n});\r\n\r\n// ===== TYPESCRIPT TYPES =====\r\n\r\n/**\r\n * Principal - represents a user, group, or public access\r\n */\r\nexport type TPrincipal = z.infer<typeof principalSchema>;\r\n\r\n/**\r\n * Access role - defines named permission sets\r\n */\r\nexport type TAccessRole = z.infer<typeof accessRoleSchema>;\r\n\r\n/**\r\n * Permission entry - represents a single ACL entry\r\n */\r\nexport type TPermissionEntry = z.infer<typeof permissionEntrySchema>;\r\n\r\n/**\r\n * Resource permissions response\r\n */\r\nexport type TResourcePermissionsResponse = z.infer<typeof resourcePermissionsResponseSchema>;\r\n\r\n/**\r\n * Update resource permissions request\r\n * This matches the user's requirement for the frontend DTO structure\r\n */\r\nexport type TUpdateResourcePermissionsRequest = z.infer<\r\n  typeof updateResourcePermissionsRequestSchema\r\n>;\r\n\r\n/**\r\n * Update resource permissions response\r\n * Returns the updated permissions with accessRoleId included\r\n */\r\nexport type TUpdateResourcePermissionsResponse = z.infer<\r\n  typeof updateResourcePermissionsResponseSchema\r\n>;\r\n\r\n/**\r\n * Principal search request parameters\r\n */\r\nexport type TPrincipalSearchParams = {\r\n  q: string; // search query (required)\r\n  limit?: number; // max results (1-50, default 10)\r\n  type?: PrincipalType.USER | PrincipalType.GROUP | PrincipalType.ROLE; // filter by type (optional)\r\n};\r\n\r\n/**\r\n * Principal search result item\r\n */\r\nexport type TPrincipalSearchResult = {\r\n  id?: string | null; // null for Entra ID principals that don't exist locally yet\r\n  type: PrincipalType.USER | PrincipalType.GROUP | PrincipalType.ROLE;\r\n  name: string;\r\n  email?: string; // for users and groups\r\n  username?: string; // for users\r\n  avatar?: string; // for users and groups\r\n  provider?: string; // for users\r\n  source: 'local' | 'entra';\r\n  memberCount?: number; // for groups\r\n  description?: string; // for groups\r\n  idOnTheSource?: string; // Entra ID for users (maps to openidId) and groups (maps to idOnTheSource)\r\n};\r\n\r\n/**\r\n * Principal search response\r\n */\r\nexport type TPrincipalSearchResponse = {\r\n  query: string;\r\n  limit: number;\r\n  type?: PrincipalType.USER | PrincipalType.GROUP | PrincipalType.ROLE;\r\n  results: TPrincipalSearchResult[];\r\n  count: number;\r\n  sources: {\r\n    local: number;\r\n    entra: number;\r\n  };\r\n};\r\n\r\n/**\r\n * Available roles response\r\n */\r\nexport type TAvailableRolesResponse = {\r\n  resourceType: ResourceType;\r\n  roles: TAccessRole[];\r\n};\r\n\r\n/**\r\n * Get resource permissions response schema\r\n * This matches the enhanced aggregation-based endpoint response format\r\n */\r\nexport const getResourcePermissionsResponseSchema = z.object({\r\n  resourceType: z.nativeEnum(ResourceType),\r\n  resourceId: z.nativeEnum(AccessRoleIds),\r\n  principals: z.array(principalSchema),\r\n  public: z.boolean(),\r\n  publicAccessRoleId: z.nativeEnum(AccessRoleIds).optional(),\r\n});\r\n\r\n/**\r\n * Get resource permissions response type\r\n * This matches the enhanced aggregation-based endpoint response format\r\n */\r\nexport type TGetResourcePermissionsResponse = z.infer<typeof getResourcePermissionsResponseSchema>;\r\n\r\n/**\r\n * Effective permissions response schema\r\n * Returns just the permission bitmask for a user on a resource\r\n */\r\nexport const effectivePermissionsResponseSchema = z.object({\r\n  permissionBits: z.number(),\r\n});\r\n\r\n/**\r\n * Effective permissions response type\r\n * Returns just the permission bitmask for a user on a resource\r\n */\r\nexport type TEffectivePermissionsResponse = z.infer<typeof effectivePermissionsResponseSchema>;\r\n\r\n// ===== UTILITY TYPES =====\r\n\r\n/**\r\n * Permission check result\r\n */\r\nexport interface TPermissionCheck {\r\n  canView: boolean;\r\n  canEdit: boolean;\r\n  canDelete: boolean;\r\n  canShare: boolean;\r\n  accessLevel: TAccessLevel;\r\n}\r\n\r\n// ===== HELPER FUNCTIONS =====\r\n\r\n/**\r\n * Convert permission bits to access level\r\n */\r\nexport function permBitsToAccessLevel(permBits: number): TAccessLevel {\r\n  if ((permBits & PermissionBits.DELETE) > 0) return 'owner';\r\n  if ((permBits & PermissionBits.EDIT) > 0) return 'editor';\r\n  if ((permBits & PermissionBits.VIEW) > 0) return 'viewer';\r\n  return 'none';\r\n}\r\n\r\n/**\r\n * Convert access role ID to permission bits\r\n */\r\nexport function accessRoleToPermBits(accessRoleId: string): number {\r\n  switch (accessRoleId) {\r\n    case AccessRoleIds.AGENT_VIEWER:\r\n      return PermissionBits.VIEW;\r\n    case AccessRoleIds.AGENT_EDITOR:\r\n      return PermissionBits.VIEW | PermissionBits.EDIT;\r\n    case AccessRoleIds.AGENT_OWNER:\r\n      return PermissionBits.VIEW | PermissionBits.EDIT | PermissionBits.DELETE;\r\n    default:\r\n      return PermissionBits.VIEW;\r\n  }\r\n}\r\n\r\n/**\r\n * Check if permission bitmask contains other bitmask\r\n * @param permissions - The permission bitmask to check\r\n * @param requiredPermission - The required permission bit(s)\r\n * @returns {boolean} Whether permissions contains requiredPermission\r\n */\r\nexport function hasPermissions(permissions: number, requiredPermission: number): boolean {\r\n  return (permissions & requiredPermission) === requiredPermission;\r\n}\r\n","export enum QueryKeys {\r\n  messages = 'messages',\r\n  sharedMessages = 'sharedMessages',\r\n  sharedLinks = 'sharedLinks',\r\n  allConversations = 'allConversations',\r\n  archivedConversations = 'archivedConversations',\r\n  searchConversations = 'searchConversations',\r\n  conversation = 'conversation',\r\n  searchEnabled = 'searchEnabled',\r\n  user = 'user',\r\n  name = 'name', // user key name\r\n  models = 'models',\r\n  balance = 'balance',\r\n  endpoints = 'endpoints',\r\n  presets = 'presets',\r\n  searchResults = 'searchResults',\r\n  tokenCount = 'tokenCount',\r\n  availablePlugins = 'availablePlugins',\r\n  startupConfig = 'startupConfig',\r\n  assistants = 'assistants',\r\n  assistant = 'assistant',\r\n  agents = 'agents',\r\n  agent = 'agent',\r\n  files = 'files',\r\n  fileConfig = 'fileConfig',\r\n  tools = 'tools',\r\n  toolAuth = 'toolAuth',\r\n  toolCalls = 'toolCalls',\r\n  mcpTools = 'mcpTools',\r\n  mcpConnectionStatus = 'mcpConnectionStatus',\r\n  mcpAuthValues = 'mcpAuthValues',\r\n  agentTools = 'agentTools',\r\n  actions = 'actions',\r\n  assistantDocs = 'assistantDocs',\r\n  agentDocs = 'agentDocs',\r\n  fileDownload = 'fileDownload',\r\n  voices = 'voices',\r\n  customConfigSpeech = 'customConfigSpeech',\r\n  prompts = 'prompts',\r\n  prompt = 'prompt',\r\n  promptGroups = 'promptGroups',\r\n  allPromptGroups = 'allPromptGroups',\r\n  promptGroup = 'promptGroup',\r\n  categories = 'categories',\r\n  randomPrompts = 'randomPrompts',\r\n  agentCategories = 'agentCategories',\r\n  marketplaceAgents = 'marketplaceAgents',\r\n  roles = 'roles',\r\n  conversationTags = 'conversationTags',\r\n  health = 'health',\r\n  userTerms = 'userTerms',\r\n  banner = 'banner',\r\n  /* Memories */\r\n  memories = 'memories',\r\n  principalSearch = 'principalSearch',\r\n  accessRoles = 'accessRoles',\r\n  resourcePermissions = 'resourcePermissions',\r\n  effectivePermissions = 'effectivePermissions',\r\n  graphToken = 'graphToken',\r\n}\r\n\r\n// Dynamic query keys that require parameters\r\nexport const DynamicQueryKeys = {\r\n  agentFiles: (agentId: string) => ['agentFiles', agentId] as const,\r\n} as const;\r\n\r\nexport enum MutationKeys {\r\n  fileUpload = 'fileUpload',\r\n  fileDelete = 'fileDelete',\r\n  updatePreset = 'updatePreset',\r\n  deletePreset = 'deletePreset',\r\n  loginUser = 'loginUser',\r\n  logoutUser = 'logoutUser',\r\n  refreshToken = 'refreshToken',\r\n  avatarUpload = 'avatarUpload',\r\n  speechToText = 'speechToText',\r\n  textToSpeech = 'textToSpeech',\r\n  assistantAvatarUpload = 'assistantAvatarUpload',\r\n  agentAvatarUpload = 'agentAvatarUpload',\r\n  updateAction = 'updateAction',\r\n  updateAgentAction = 'updateAgentAction',\r\n  deleteAction = 'deleteAction',\r\n  deleteAgentAction = 'deleteAgentAction',\r\n  revertAgentVersion = 'revertAgentVersion',\r\n  deleteUser = 'deleteUser',\r\n  updateRole = 'updateRole',\r\n  enableTwoFactor = 'enableTwoFactor',\r\n  verifyTwoFactor = 'verifyTwoFactor',\r\n  updateMemoryPreferences = 'updateMemoryPreferences',\r\n}\r\n","import axios from 'axios';\r\n\r\nexport function setAcceptLanguageHeader(value: string): void {\r\n  axios.defaults.headers.common['Accept-Language'] = value;\r\n}\r\n\r\nexport function setTokenHeader(token: string) {\r\n  axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\r\n}\r\n","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport axios, { AxiosError, AxiosRequestConfig } from 'axios';\r\nimport * as endpoints from './api-endpoints';\r\nimport { setTokenHeader } from './headers-helpers';\r\nimport type * as t from './types';\r\n\r\nasync function _get<T>(url: string, options?: AxiosRequestConfig): Promise<T> {\r\n  const response = await axios.get(url, { ...options });\r\n  return response.data;\r\n}\r\n\r\nasync function _getResponse<T>(url: string, options?: AxiosRequestConfig): Promise<T> {\r\n  return await axios.get(url, { ...options });\r\n}\r\n\r\nasync function _post(url: string, data?: any) {\r\n  const response = await axios.post(url, JSON.stringify(data), {\r\n    headers: { 'Content-Type': 'application/json' },\r\n  });\r\n  return response.data;\r\n}\r\n\r\nasync function _postMultiPart(url: string, formData: FormData, options?: AxiosRequestConfig) {\r\n  const response = await axios.post(url, formData, {\r\n    ...options,\r\n    headers: { 'Content-Type': 'multipart/form-data' },\r\n  });\r\n  return response.data;\r\n}\r\n\r\nasync function _postTTS(url: string, formData: FormData, options?: AxiosRequestConfig) {\r\n  const response = await axios.post(url, formData, {\r\n    ...options,\r\n    headers: { 'Content-Type': 'multipart/form-data' },\r\n    responseType: 'arraybuffer',\r\n  });\r\n  return response.data;\r\n}\r\n\r\nasync function _put(url: string, data?: any) {\r\n  const response = await axios.put(url, JSON.stringify(data), {\r\n    headers: { 'Content-Type': 'application/json' },\r\n  });\r\n  return response.data;\r\n}\r\n\r\nasync function _delete<T>(url: string): Promise<T> {\r\n  const response = await axios.delete(url);\r\n  return response.data;\r\n}\r\n\r\nasync function _deleteWithOptions<T>(url: string, options?: AxiosRequestConfig): Promise<T> {\r\n  const response = await axios.delete(url, { ...options });\r\n  return response.data;\r\n}\r\n\r\nasync function _patch(url: string, data?: any) {\r\n  const response = await axios.patch(url, JSON.stringify(data), {\r\n    headers: { 'Content-Type': 'application/json' },\r\n  });\r\n  return response.data;\r\n}\r\n\r\nlet isRefreshing = false;\r\nlet failedQueue: { resolve: (value?: any) => void; reject: (reason?: any) => void }[] = [];\r\n\r\nconst refreshToken = (retry?: boolean): Promise<t.TRefreshTokenResponse | undefined> =>\r\n  _post(endpoints.refreshToken(retry));\r\n\r\nconst dispatchTokenUpdatedEvent = (token: string) => {\r\n  setTokenHeader(token);\r\n  window.dispatchEvent(new CustomEvent('tokenUpdated', { detail: token }));\r\n};\r\n\r\nconst processQueue = (error: AxiosError | null, token: string | null = null) => {\r\n  failedQueue.forEach((prom) => {\r\n    if (error) {\r\n      prom.reject(error);\r\n    } else {\r\n      prom.resolve(token);\r\n    }\r\n  });\r\n  failedQueue = [];\r\n};\r\n\r\nif (typeof window !== 'undefined') {\r\n  axios.interceptors.response.use(\r\n    (response) => response,\r\n    async (error) => {\r\n      const originalRequest = error.config;\r\n      if (!error.response) {\r\n        return Promise.reject(error);\r\n      }\r\n\r\n      if (originalRequest.url?.includes('/api/auth/2fa') === true) {\r\n        return Promise.reject(error);\r\n      }\r\n      if (originalRequest.url?.includes('/api/auth/logout') === true) {\r\n        return Promise.reject(error);\r\n      }\r\n\r\n      if (error.response.status === 401 && !originalRequest._retry) {\r\n        console.warn('401 error, refreshing token');\r\n        originalRequest._retry = true;\r\n\r\n        if (isRefreshing) {\r\n          try {\r\n            const token = await new Promise((resolve, reject) => {\r\n              failedQueue.push({ resolve, reject });\r\n            });\r\n            originalRequest.headers['Authorization'] = 'Bearer ' + token;\r\n            return await axios(originalRequest);\r\n          } catch (err) {\r\n            return Promise.reject(err);\r\n          }\r\n        }\r\n\r\n        isRefreshing = true;\r\n\r\n        try {\r\n          const response = await refreshToken(\r\n            // Handle edge case where we get a blank screen if the initial 401 error is from a refresh token request\r\n            originalRequest.url?.includes('api/auth/refresh') === true ? true : false,\r\n          );\r\n\r\n          const token = response?.token ?? '';\r\n\r\n          if (token) {\r\n            originalRequest.headers['Authorization'] = 'Bearer ' + token;\r\n            dispatchTokenUpdatedEvent(token);\r\n            processQueue(null, token);\r\n            return await axios(originalRequest);\r\n          } else if (window.location.href.includes('share/')) {\r\n            console.log(\r\n              `Refresh token failed from shared link, attempting request to ${originalRequest.url}`,\r\n            );\r\n          } else {\r\n            window.location.href = '/login';\r\n          }\r\n        } catch (err) {\r\n          processQueue(err as AxiosError, null);\r\n          return Promise.reject(err);\r\n        } finally {\r\n          isRefreshing = false;\r\n        }\r\n      }\r\n\r\n      return Promise.reject(error);\r\n    },\r\n  );\r\n}\r\n\r\nexport default {\r\n  get: _get,\r\n  getResponse: _getResponse,\r\n  post: _post,\r\n  postMultiPart: _postMultiPart,\r\n  postTTS: _postTTS,\r\n  put: _put,\r\n  delete: _delete,\r\n  deleteWithOptions: _deleteWithOptions,\r\n  patch: _patch,\r\n  refreshToken,\r\n  dispatchTokenUpdatedEvent,\r\n};\r\n","import type { AxiosResponse } from 'axios';\r\nimport type * as t from './types';\r\nimport * as endpoints from './api-endpoints';\r\nimport * as a from './types/assistants';\r\nimport * as ag from './types/agents';\r\nimport * as m from './types/mutations';\r\nimport * as q from './types/queries';\r\nimport * as f from './types/files';\r\nimport * as config from './config';\r\nimport request from './request';\r\nimport * as s from './schemas';\r\nimport * as r from './roles';\r\nimport * as permissions from './accessPermissions';\r\n\r\nexport function revokeUserKey(name: string): Promise<unknown> {\r\n  return request.delete(endpoints.revokeUserKey(name));\r\n}\r\n\r\nexport function revokeAllUserKeys(): Promise<unknown> {\r\n  return request.delete(endpoints.revokeAllUserKeys());\r\n}\r\n\r\nexport function deleteUser(): Promise<s.TPreset> {\r\n  return request.delete(endpoints.deleteUser());\r\n}\r\n\r\nexport function getSharedMessages(shareId: string): Promise<t.TSharedMessagesResponse> {\r\n  return request.get(endpoints.shareMessages(shareId));\r\n}\r\n\r\nexport const listSharedLinks = async (\r\n  params: q.SharedLinksListParams,\r\n): Promise<q.SharedLinksResponse> => {\r\n  const { pageSize, isPublic, sortBy, sortDirection, search, cursor } = params;\r\n\r\n  return request.get(\r\n    endpoints.getSharedLinks(pageSize, isPublic, sortBy, sortDirection, search, cursor),\r\n  );\r\n};\r\n\r\nexport function getSharedLink(conversationId: string): Promise<t.TSharedLinkGetResponse> {\r\n  return request.get(endpoints.getSharedLink(conversationId));\r\n}\r\n\r\nexport function createSharedLink(conversationId: string): Promise<t.TSharedLinkResponse> {\r\n  return request.post(endpoints.createSharedLink(conversationId));\r\n}\r\n\r\nexport function updateSharedLink(shareId: string): Promise<t.TSharedLinkResponse> {\r\n  return request.patch(endpoints.updateSharedLink(shareId));\r\n}\r\n\r\nexport function deleteSharedLink(shareId: string): Promise<m.TDeleteSharedLinkResponse> {\r\n  return request.delete(endpoints.shareMessages(shareId));\r\n}\r\n\r\nexport function updateUserKey(payload: t.TUpdateUserKeyRequest) {\r\n  const { value } = payload;\r\n  if (!value) {\r\n    throw new Error('value is required');\r\n  }\r\n\r\n  return request.put(endpoints.keys(), payload);\r\n}\r\n\r\nexport function getPresets(): Promise<s.TPreset[]> {\r\n  return request.get(endpoints.presets());\r\n}\r\n\r\nexport function createPreset(payload: s.TPreset): Promise<s.TPreset> {\r\n  return request.post(endpoints.presets(), payload);\r\n}\r\n\r\nexport function updatePreset(payload: s.TPreset): Promise<s.TPreset> {\r\n  return request.post(endpoints.presets(), payload);\r\n}\r\n\r\nexport function deletePreset(arg: s.TPreset | undefined): Promise<m.PresetDeleteResponse> {\r\n  return request.post(endpoints.deletePreset(), arg);\r\n}\r\n\r\nexport function getSearchEnabled(): Promise<boolean> {\r\n  return request.get(endpoints.searchEnabled());\r\n}\r\n\r\nexport function getUser(): Promise<t.TUser> {\r\n  return request.get(endpoints.user());\r\n}\r\n\r\nexport function getUserBalance(): Promise<t.TBalanceResponse> {\r\n  return request.get(endpoints.balance());\r\n}\r\n\r\nexport const updateTokenCount = (text: string) => {\r\n  return request.post(endpoints.tokenizer(), { arg: text });\r\n};\r\n\r\nexport const login = (payload: t.TLoginUser): Promise<t.TLoginResponse> => {\r\n  return request.post(endpoints.login(), payload);\r\n};\r\n\r\nexport const logout = (): Promise<m.TLogoutResponse> => {\r\n  return request.post(endpoints.logout());\r\n};\r\n\r\nexport const register = (payload: t.TRegisterUser) => {\r\n  return request.post(endpoints.register(), payload);\r\n};\r\n\r\nexport const userKeyQuery = (name: string): Promise<t.TCheckUserKeyResponse> =>\r\n  request.get(endpoints.userKeyQuery(name));\r\n\r\nexport const getLoginGoogle = () => {\r\n  return request.get(endpoints.loginGoogle());\r\n};\r\n\r\nexport const requestPasswordReset = (\r\n  payload: t.TRequestPasswordReset,\r\n): Promise<t.TRequestPasswordResetResponse> => {\r\n  return request.post(endpoints.requestPasswordReset(), payload);\r\n};\r\n\r\nexport const resetPassword = (payload: t.TResetPassword) => {\r\n  return request.post(endpoints.resetPassword(), payload);\r\n};\r\n\r\nexport const verifyEmail = (payload: t.TVerifyEmail): Promise<t.VerifyEmailResponse> => {\r\n  return request.post(endpoints.verifyEmail(), payload);\r\n};\r\n\r\nexport const resendVerificationEmail = (\r\n  payload: t.TResendVerificationEmail,\r\n): Promise<t.VerifyEmailResponse> => {\r\n  return request.post(endpoints.resendVerificationEmail(), payload);\r\n};\r\n\r\nexport const getAvailablePlugins = (): Promise<s.TPlugin[]> => {\r\n  return request.get(endpoints.plugins());\r\n};\r\n\r\nexport const updateUserPlugins = (payload: t.TUpdateUserPlugins) => {\r\n  return request.post(endpoints.userPlugins(), payload);\r\n};\r\n\r\nexport const reinitializeMCPServer = (serverName: string) => {\r\n  return request.post(endpoints.mcpReinitialize(serverName));\r\n};\r\n\r\nexport const getMCPConnectionStatus = (): Promise<q.MCPConnectionStatusResponse> => {\r\n  return request.get(endpoints.mcpConnectionStatus());\r\n};\r\n\r\nexport const getMCPServerConnectionStatus = (\r\n  serverName: string,\r\n): Promise<q.MCPServerConnectionStatusResponse> => {\r\n  return request.get(endpoints.mcpServerConnectionStatus(serverName));\r\n};\r\n\r\nexport const getMCPAuthValues = (serverName: string): Promise<q.MCPAuthValuesResponse> => {\r\n  return request.get(endpoints.mcpAuthValues(serverName));\r\n};\r\n\r\nexport function cancelMCPOAuth(serverName: string): Promise<m.CancelMCPOAuthResponse> {\r\n  return request.post(endpoints.cancelMCPOAuth(serverName), {});\r\n}\r\n\r\n/* Config */\r\n\r\nexport const getStartupConfig = (): Promise<\r\n  config.TStartupConfig & {\r\n    mcpCustomUserVars?: Record<string, { title: string; description: string }>;\r\n  }\r\n> => {\r\n  return request.get(endpoints.config());\r\n};\r\n\r\nexport const getAIEndpoints = (): Promise<t.TEndpointsConfig> => {\r\n  return request.get(endpoints.aiEndpoints());\r\n};\r\n\r\nexport const getModels = async (): Promise<t.TModelsConfig> => {\r\n  return request.get(endpoints.models());\r\n};\r\n\r\n/* Assistants */\r\n\r\nexport const createAssistant = ({\r\n  version,\r\n  ...data\r\n}: a.AssistantCreateParams): Promise<a.Assistant> => {\r\n  return request.post(endpoints.assistants({ version }), data);\r\n};\r\n\r\nexport const getAssistantById = ({\r\n  endpoint,\r\n  assistant_id,\r\n  version,\r\n}: {\r\n  endpoint: s.AssistantsEndpoint;\r\n  assistant_id: string;\r\n  version: number | string | number;\r\n}): Promise<a.Assistant> => {\r\n  return request.get(\r\n    endpoints.assistants({\r\n      path: assistant_id,\r\n      endpoint,\r\n      version,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const updateAssistant = ({\r\n  assistant_id,\r\n  data,\r\n  version,\r\n}: {\r\n  assistant_id: string;\r\n  data: a.AssistantUpdateParams;\r\n  version: number | string;\r\n}): Promise<a.Assistant> => {\r\n  return request.patch(\r\n    endpoints.assistants({\r\n      path: assistant_id,\r\n      version,\r\n    }),\r\n    data,\r\n  );\r\n};\r\n\r\nexport const deleteAssistant = ({\r\n  assistant_id,\r\n  model,\r\n  endpoint,\r\n  version,\r\n}: m.DeleteAssistantBody & { version: number | string }): Promise<void> => {\r\n  return request.delete(\r\n    endpoints.assistants({\r\n      path: assistant_id,\r\n      options: { model, endpoint },\r\n      version,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const listAssistants = (\r\n  params: a.AssistantListParams,\r\n  version: number | string,\r\n): Promise<a.AssistantListResponse> => {\r\n  return request.get(\r\n    endpoints.assistants({\r\n      version,\r\n      options: params,\r\n    }),\r\n  );\r\n};\r\n\r\nexport function getAssistantDocs({\r\n  endpoint,\r\n  version,\r\n}: {\r\n  endpoint: s.AssistantsEndpoint | string;\r\n  version: number | string;\r\n}): Promise<a.AssistantDocument[]> {\r\n  if (!s.isAssistantsEndpoint(endpoint)) {\r\n    return Promise.resolve([]);\r\n  }\r\n  return request.get(\r\n    endpoints.assistants({\r\n      path: 'documents',\r\n      version,\r\n      options: { endpoint },\r\n      endpoint: endpoint as s.AssistantsEndpoint,\r\n    }),\r\n  );\r\n}\r\n\r\n/* Tools */\r\n\r\nexport const getAvailableTools = (\r\n  _endpoint: s.AssistantsEndpoint | s.EModelEndpoint.agents,\r\n  version?: number | string,\r\n): Promise<s.TPlugin[]> => {\r\n  let path = '';\r\n  if (s.isAssistantsEndpoint(_endpoint)) {\r\n    const endpoint = _endpoint as s.AssistantsEndpoint;\r\n    path = endpoints.assistants({\r\n      path: 'tools',\r\n      endpoint: endpoint,\r\n      version: version ?? config.defaultAssistantsVersion[endpoint],\r\n    });\r\n  } else {\r\n    path = endpoints.agents({\r\n      path: 'tools',\r\n    });\r\n  }\r\n\r\n  return request.get(path);\r\n};\r\n\r\n/* MCP Tools - Decoupled from regular tools */\r\n\r\nexport const getMCPTools = (): Promise<q.MCPServersResponse> => {\r\n  return request.get(endpoints.mcp.tools);\r\n};\r\n\r\nexport const getVerifyAgentToolAuth = (\r\n  params: q.VerifyToolAuthParams,\r\n): Promise<q.VerifyToolAuthResponse> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: `tools/${params.toolId}/auth`,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const callTool = <T extends m.ToolId>({\r\n  toolId,\r\n  toolParams,\r\n}: {\r\n  toolId: T;\r\n  toolParams: m.ToolParams<T>;\r\n}): Promise<m.ToolCallResponse> => {\r\n  return request.post(\r\n    endpoints.agents({\r\n      path: `tools/${toolId}/call`,\r\n    }),\r\n    toolParams,\r\n  );\r\n};\r\n\r\nexport const getToolCalls = (params: q.GetToolCallParams): Promise<q.ToolCallResults> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: 'tools/calls',\r\n      options: params,\r\n    }),\r\n  );\r\n};\r\n\r\n/* Files */\r\n\r\nexport const getFiles = (): Promise<f.TFile[]> => {\r\n  return request.get(endpoints.files());\r\n};\r\n\r\nexport const getAgentFiles = (agentId: string): Promise<f.TFile[]> => {\r\n  return request.get(endpoints.agentFiles(agentId));\r\n};\r\n\r\nexport const getFileConfig = (): Promise<f.FileConfig> => {\r\n  return request.get(`${endpoints.files()}/config`);\r\n};\r\n\r\nexport const uploadImage = (\r\n  data: FormData,\r\n  signal?: AbortSignal | null,\r\n): Promise<f.TFileUpload> => {\r\n  const requestConfig = signal ? { signal } : undefined;\r\n  return request.postMultiPart(endpoints.images(), data, requestConfig);\r\n};\r\n\r\nexport const uploadFile = (data: FormData, signal?: AbortSignal | null): Promise<f.TFileUpload> => {\r\n  const requestConfig = signal ? { signal } : undefined;\r\n  return request.postMultiPart(endpoints.files(), data, requestConfig);\r\n};\r\n\r\n/* actions */\r\n\r\nexport const updateAction = (data: m.UpdateActionVariables): Promise<m.UpdateActionResponse> => {\r\n  const { assistant_id, version, ...body } = data;\r\n  return request.post(\r\n    endpoints.assistants({\r\n      path: `actions/${assistant_id}`,\r\n      version,\r\n    }),\r\n    body,\r\n  );\r\n};\r\n\r\nexport function getActions(): Promise<ag.Action[]> {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: 'actions',\r\n    }),\r\n  );\r\n}\r\n\r\nexport const deleteAction = async ({\r\n  assistant_id,\r\n  action_id,\r\n  model,\r\n  version,\r\n  endpoint,\r\n}: m.DeleteActionVariables & { version: number | string }): Promise<void> =>\r\n  request.delete(\r\n    endpoints.assistants({\r\n      path: `actions/${assistant_id}/${action_id}/${model}`,\r\n      version,\r\n      endpoint,\r\n    }),\r\n  );\r\n\r\n/**\r\n * Agents\r\n */\r\n\r\nexport const createAgent = ({ ...data }: a.AgentCreateParams): Promise<a.Agent> => {\r\n  return request.post(endpoints.agents({}), data);\r\n};\r\n\r\nexport const getAgentById = ({ agent_id }: { agent_id: string }): Promise<a.Agent> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: agent_id,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const getExpandedAgentById = ({ agent_id }: { agent_id: string }): Promise<a.Agent> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: `${agent_id}/expanded`,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const updateAgent = ({\r\n  agent_id,\r\n  data,\r\n}: {\r\n  agent_id: string;\r\n  data: a.AgentUpdateParams;\r\n}): Promise<a.Agent> => {\r\n  return request.patch(\r\n    endpoints.agents({\r\n      path: agent_id,\r\n    }),\r\n    data,\r\n  );\r\n};\r\n\r\nexport const duplicateAgent = ({\r\n  agent_id,\r\n}: m.DuplicateAgentBody): Promise<{ agent: a.Agent; actions: ag.Action[] }> => {\r\n  return request.post(\r\n    endpoints.agents({\r\n      path: `${agent_id}/duplicate`,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const deleteAgent = ({ agent_id }: m.DeleteAgentBody): Promise<void> => {\r\n  return request.delete(\r\n    endpoints.agents({\r\n      path: agent_id,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const listAgents = (params: a.AgentListParams): Promise<a.AgentListResponse> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      options: params,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const revertAgentVersion = ({\r\n  agent_id,\r\n  version_index,\r\n}: {\r\n  agent_id: string;\r\n  version_index: number;\r\n}): Promise<a.Agent> => request.post(endpoints.revertAgentVersion(agent_id), { version_index });\r\n\r\n/* Marketplace */\r\n\r\n/**\r\n * Get agent categories with counts for marketplace tabs\r\n */\r\nexport const getAgentCategories = (): Promise<t.TMarketplaceCategory[]> => {\r\n  return request.get(endpoints.agents({ path: 'categories' }));\r\n};\r\n\r\n/**\r\n * Unified marketplace agents endpoint with query string controls\r\n */\r\nexport const getMarketplaceAgents = (params: {\r\n  requiredPermission: number;\r\n  category?: string;\r\n  search?: string;\r\n  limit?: number;\r\n  cursor?: string;\r\n  promoted?: 0 | 1;\r\n}): Promise<a.AgentListResponse> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      // path: 'marketplace',\r\n      options: params,\r\n    }),\r\n  );\r\n};\r\n\r\n/* Tools */\r\n\r\nexport const getAvailableAgentTools = (): Promise<s.TPlugin[]> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: 'tools',\r\n    }),\r\n  );\r\n};\r\n\r\n/* Actions */\r\n\r\nexport const updateAgentAction = (\r\n  data: m.UpdateAgentActionVariables,\r\n): Promise<m.UpdateAgentActionResponse> => {\r\n  const { agent_id, ...body } = data;\r\n  return request.post(\r\n    endpoints.agents({\r\n      path: `actions/${agent_id}`,\r\n    }),\r\n    body,\r\n  );\r\n};\r\n\r\nexport const deleteAgentAction = async ({\r\n  agent_id,\r\n  action_id,\r\n}: m.DeleteAgentActionVariables): Promise<void> =>\r\n  request.delete(\r\n    endpoints.agents({\r\n      path: `actions/${agent_id}/${action_id}`,\r\n    }),\r\n  );\r\n\r\n/**\r\n * Imports a conversations file.\r\n *\r\n * @param data - The FormData containing the file to import.\r\n * @returns A Promise that resolves to the import start response.\r\n */\r\nexport const importConversationsFile = (data: FormData): Promise<t.TImportResponse> => {\r\n  return request.postMultiPart(endpoints.importConversation(), data);\r\n};\r\n\r\nexport const uploadAvatar = (data: FormData): Promise<f.AvatarUploadResponse> => {\r\n  return request.postMultiPart(endpoints.avatar(), data);\r\n};\r\n\r\nexport const uploadAssistantAvatar = (data: m.AssistantAvatarVariables): Promise<a.Assistant> => {\r\n  return request.postMultiPart(\r\n    endpoints.assistants({\r\n      isAvatar: true,\r\n      path: `${data.assistant_id}/avatar`,\r\n      options: { model: data.model, endpoint: data.endpoint },\r\n      version: data.version,\r\n    }),\r\n    data.formData,\r\n  );\r\n};\r\n\r\nexport const uploadAgentAvatar = (data: m.AgentAvatarVariables): Promise<a.Agent> => {\r\n  return request.postMultiPart(\r\n    `${endpoints.images()}/agents/${data.agent_id}/avatar`,\r\n    data.formData,\r\n  );\r\n};\r\n\r\nexport const getFileDownload = async (userId: string, file_id: string): Promise<AxiosResponse> => {\r\n  return request.getResponse(`${endpoints.files()}/download/${userId}/${file_id}`, {\r\n    responseType: 'blob',\r\n    headers: {\r\n      Accept: 'application/octet-stream',\r\n    },\r\n  });\r\n};\r\n\r\nexport const getCodeOutputDownload = async (url: string): Promise<AxiosResponse> => {\r\n  return request.getResponse(url, {\r\n    responseType: 'blob',\r\n    headers: {\r\n      Accept: 'application/octet-stream',\r\n    },\r\n  });\r\n};\r\n\r\nexport const deleteFiles = async (payload: {\r\n  files: f.BatchFile[];\r\n  agent_id?: string;\r\n  assistant_id?: string;\r\n  tool_resource?: a.EToolResources;\r\n}): Promise<f.DeleteFilesResponse> =>\r\n  request.deleteWithOptions(endpoints.files(), {\r\n    data: payload,\r\n  });\r\n\r\n/* Speech */\r\n\r\nexport const speechToText = (data: FormData): Promise<f.SpeechToTextResponse> => {\r\n  return request.postMultiPart(endpoints.speechToText(), data);\r\n};\r\n\r\nexport const textToSpeech = (data: FormData): Promise<ArrayBuffer> => {\r\n  return request.postTTS(endpoints.textToSpeechManual(), data);\r\n};\r\n\r\nexport const getVoices = (): Promise<f.VoiceResponse> => {\r\n  return request.get(endpoints.textToSpeechVoices());\r\n};\r\n\r\nexport const getCustomConfigSpeech = (): Promise<t.TCustomConfigSpeechResponse> => {\r\n  return request.get(endpoints.getCustomConfigSpeech());\r\n};\r\n\r\n/* conversations */\r\n\r\nexport function duplicateConversation(\r\n  payload: t.TDuplicateConvoRequest,\r\n): Promise<t.TDuplicateConvoResponse> {\r\n  return request.post(endpoints.duplicateConversation(), payload);\r\n}\r\n\r\nexport function forkConversation(payload: t.TForkConvoRequest): Promise<t.TForkConvoResponse> {\r\n  return request.post(endpoints.forkConversation(), payload);\r\n}\r\n\r\nexport function deleteConversation(payload: t.TDeleteConversationRequest) {\r\n  return request.deleteWithOptions(endpoints.deleteConversation(), { data: { arg: payload } });\r\n}\r\n\r\nexport function clearAllConversations(): Promise<unknown> {\r\n  return request.delete(endpoints.deleteAllConversation());\r\n}\r\n\r\nexport const listConversations = (\r\n  params?: q.ConversationListParams,\r\n): Promise<q.ConversationListResponse> => {\r\n  return request.get(endpoints.conversations(params ?? {}));\r\n};\r\n\r\nexport function getConversations(cursor: string): Promise<t.TGetConversationsResponse> {\r\n  return request.get(endpoints.conversations({ cursor }));\r\n}\r\n\r\nexport function getConversationById(id: string): Promise<s.TConversation> {\r\n  return request.get(endpoints.conversationById(id));\r\n}\r\n\r\nexport function updateConversation(\r\n  payload: t.TUpdateConversationRequest,\r\n): Promise<t.TUpdateConversationResponse> {\r\n  return request.post(endpoints.updateConversation(), { arg: payload });\r\n}\r\n\r\nexport function archiveConversation(\r\n  payload: t.TArchiveConversationRequest,\r\n): Promise<t.TArchiveConversationResponse> {\r\n  return request.post(endpoints.updateConversation(), { arg: payload });\r\n}\r\n\r\nexport function genTitle(payload: m.TGenTitleRequest): Promise<m.TGenTitleResponse> {\r\n  return request.post(endpoints.genTitle(), payload);\r\n}\r\n\r\nexport const listMessages = (params?: q.MessagesListParams): Promise<q.MessagesListResponse> => {\r\n  return request.get(endpoints.messages(params ?? {}));\r\n};\r\n\r\nexport function updateMessage(payload: t.TUpdateMessageRequest): Promise<unknown> {\r\n  const { conversationId, messageId, text } = payload;\r\n  if (!conversationId) {\r\n    throw new Error('conversationId is required');\r\n  }\r\n\r\n  return request.put(endpoints.messages({ conversationId, messageId }), { text });\r\n}\r\n\r\nexport function updateMessageContent(payload: t.TUpdateMessageContent): Promise<unknown> {\r\n  const { conversationId, messageId, index, text } = payload;\r\n  if (!conversationId) {\r\n    throw new Error('conversationId is required');\r\n  }\r\n\r\n  return request.put(endpoints.messages({ conversationId, messageId }), { text, index });\r\n}\r\n\r\nexport const editArtifact = async ({\r\n  messageId,\r\n  ...params\r\n}: m.TEditArtifactRequest): Promise<m.TEditArtifactResponse> => {\r\n  return request.post(endpoints.messagesArtifacts(messageId), params);\r\n};\r\n\r\nexport function getMessagesByConvoId(conversationId: string): Promise<s.TMessage[]> {\r\n  if (\r\n    conversationId === config.Constants.NEW_CONVO ||\r\n    conversationId === config.Constants.PENDING_CONVO\r\n  ) {\r\n    return Promise.resolve([]);\r\n  }\r\n  return request.get(endpoints.messages({ conversationId }));\r\n}\r\n\r\nexport function getPrompt(id: string): Promise<{ prompt: t.TPrompt }> {\r\n  return request.get(endpoints.getPrompt(id));\r\n}\r\n\r\nexport function getPrompts(filter: t.TPromptsWithFilterRequest): Promise<t.TPrompt[]> {\r\n  return request.get(endpoints.getPromptsWithFilters(filter));\r\n}\r\n\r\nexport function getAllPromptGroups(): Promise<q.AllPromptGroupsResponse> {\r\n  return request.get(endpoints.getAllPromptGroups());\r\n}\r\n\r\nexport function getPromptGroups(\r\n  filter: t.TPromptGroupsWithFilterRequest,\r\n): Promise<t.PromptGroupListResponse> {\r\n  return request.get(endpoints.getPromptGroupsWithFilters(filter));\r\n}\r\n\r\nexport function getPromptGroup(id: string): Promise<t.TPromptGroup> {\r\n  return request.get(endpoints.getPromptGroup(id));\r\n}\r\n\r\nexport function createPrompt(payload: t.TCreatePrompt): Promise<t.TCreatePromptResponse> {\r\n  return request.post(endpoints.postPrompt(), payload);\r\n}\r\n\r\nexport function addPromptToGroup(\r\n  groupId: string,\r\n  payload: t.TCreatePrompt,\r\n): Promise<t.TCreatePromptResponse> {\r\n  return request.post(endpoints.addPromptToGroup(groupId), payload);\r\n}\r\n\r\nexport function updatePromptGroup(\r\n  variables: t.TUpdatePromptGroupVariables,\r\n): Promise<t.TUpdatePromptGroupResponse> {\r\n  return request.patch(endpoints.updatePromptGroup(variables.id), variables.payload);\r\n}\r\n\r\nexport function deletePrompt(payload: t.TDeletePromptVariables): Promise<t.TDeletePromptResponse> {\r\n  return request.delete(endpoints.deletePrompt(payload));\r\n}\r\n\r\nexport function makePromptProduction(id: string): Promise<t.TMakePromptProductionResponse> {\r\n  return request.patch(endpoints.updatePromptTag(id));\r\n}\r\n\r\nexport function updatePromptLabels(\r\n  variables: t.TUpdatePromptLabelsRequest,\r\n): Promise<t.TUpdatePromptLabelsResponse> {\r\n  return request.patch(endpoints.updatePromptLabels(variables.id), variables.payload);\r\n}\r\n\r\nexport function deletePromptGroup(id: string): Promise<t.TDeletePromptGroupResponse> {\r\n  return request.delete(endpoints.deletePromptGroup(id));\r\n}\r\n\r\nexport function getCategories(): Promise<t.TGetCategoriesResponse> {\r\n  return request.get(endpoints.getCategories());\r\n}\r\n\r\nexport function getRandomPrompts(\r\n  variables: t.TGetRandomPromptsRequest,\r\n): Promise<t.TGetRandomPromptsResponse> {\r\n  return request.get(endpoints.getRandomPrompts(variables.limit, variables.skip));\r\n}\r\n\r\n/* Roles */\r\nexport function getRole(roleName: string): Promise<r.TRole> {\r\n  return request.get(endpoints.getRole(roleName));\r\n}\r\n\r\nexport function updatePromptPermissions(\r\n  variables: m.UpdatePromptPermVars,\r\n): Promise<m.UpdatePermResponse> {\r\n  return request.put(endpoints.updatePromptPermissions(variables.roleName), variables.updates);\r\n}\r\n\r\nexport function updateAgentPermissions(\r\n  variables: m.UpdateAgentPermVars,\r\n): Promise<m.UpdatePermResponse> {\r\n  return request.put(endpoints.updateAgentPermissions(variables.roleName), variables.updates);\r\n}\r\n\r\nexport function updateMemoryPermissions(\r\n  variables: m.UpdateMemoryPermVars,\r\n): Promise<m.UpdatePermResponse> {\r\n  return request.put(endpoints.updateMemoryPermissions(variables.roleName), variables.updates);\r\n}\r\n\r\nexport function updatePeoplePickerPermissions(\r\n  variables: m.UpdatePeoplePickerPermVars,\r\n): Promise<m.UpdatePermResponse> {\r\n  return request.put(\r\n    endpoints.updatePeoplePickerPermissions(variables.roleName),\r\n    variables.updates,\r\n  );\r\n}\r\n\r\nexport function updateMarketplacePermissions(\r\n  variables: m.UpdateMarketplacePermVars,\r\n): Promise<m.UpdatePermResponse> {\r\n  return request.put(endpoints.updateMarketplacePermissions(variables.roleName), variables.updates);\r\n}\r\n\r\n/* Tags */\r\nexport function getConversationTags(): Promise<t.TConversationTagsResponse> {\r\n  return request.get(endpoints.conversationTags());\r\n}\r\n\r\nexport function createConversationTag(\r\n  payload: t.TConversationTagRequest,\r\n): Promise<t.TConversationTagResponse> {\r\n  return request.post(endpoints.conversationTags(), payload);\r\n}\r\n\r\nexport function updateConversationTag(\r\n  tag: string,\r\n  payload: t.TConversationTagRequest,\r\n): Promise<t.TConversationTagResponse> {\r\n  return request.put(endpoints.conversationTags(tag), payload);\r\n}\r\nexport function deleteConversationTag(tag: string): Promise<t.TConversationTagResponse> {\r\n  return request.delete(endpoints.conversationTags(tag));\r\n}\r\n\r\nexport function addTagToConversation(\r\n  conversationId: string,\r\n  payload: t.TTagConversationRequest,\r\n): Promise<t.TTagConversationResponse> {\r\n  return request.put(endpoints.addTagToConversation(conversationId), payload);\r\n}\r\nexport function rebuildConversationTags(): Promise<t.TConversationTagsResponse> {\r\n  return request.post(endpoints.conversationTags('rebuild'));\r\n}\r\n\r\nexport function healthCheck(): Promise<string> {\r\n  return request.get(endpoints.health());\r\n}\r\n\r\nexport function getUserTerms(): Promise<t.TUserTermsResponse> {\r\n  return request.get(endpoints.userTerms());\r\n}\r\n\r\nexport function acceptTerms(): Promise<t.TAcceptTermsResponse> {\r\n  return request.post(endpoints.acceptUserTerms());\r\n}\r\n\r\nexport function getBanner(): Promise<t.TBannerResponse> {\r\n  return request.get(endpoints.banner());\r\n}\r\n\r\nexport function updateFeedback(\r\n  conversationId: string,\r\n  messageId: string,\r\n  payload: t.TUpdateFeedbackRequest,\r\n): Promise<t.TUpdateFeedbackResponse> {\r\n  return request.put(endpoints.feedback(conversationId, messageId), payload);\r\n}\r\n\r\n// 2FA\r\nexport function enableTwoFactor(): Promise<t.TEnable2FAResponse> {\r\n  return request.get(endpoints.enableTwoFactor());\r\n}\r\n\r\nexport function verifyTwoFactor(payload: t.TVerify2FARequest): Promise<t.TVerify2FAResponse> {\r\n  return request.post(endpoints.verifyTwoFactor(), payload);\r\n}\r\n\r\nexport function confirmTwoFactor(payload: t.TVerify2FARequest): Promise<t.TVerify2FAResponse> {\r\n  return request.post(endpoints.confirmTwoFactor(), payload);\r\n}\r\n\r\nexport function disableTwoFactor(payload?: t.TDisable2FARequest): Promise<t.TDisable2FAResponse> {\r\n  return request.post(endpoints.disableTwoFactor(), payload);\r\n}\r\n\r\nexport function regenerateBackupCodes(): Promise<t.TRegenerateBackupCodesResponse> {\r\n  return request.post(endpoints.regenerateBackupCodes());\r\n}\r\n\r\nexport function verifyTwoFactorTemp(\r\n  payload: t.TVerify2FATempRequest,\r\n): Promise<t.TVerify2FATempResponse> {\r\n  return request.post(endpoints.verifyTwoFactorTemp(), payload);\r\n}\r\n\r\n/* Memories */\r\nexport const getMemories = (): Promise<q.MemoriesResponse> => {\r\n  return request.get(endpoints.memories());\r\n};\r\n\r\nexport const deleteMemory = (key: string): Promise<void> => {\r\n  return request.delete(endpoints.memory(key));\r\n};\r\n\r\nexport const updateMemory = (\r\n  key: string,\r\n  value: string,\r\n  originalKey?: string,\r\n): Promise<q.TUserMemory> => {\r\n  return request.patch(endpoints.memory(originalKey || key), { key, value });\r\n};\r\n\r\nexport const updateMemoryPreferences = (preferences: {\r\n  memories: boolean;\r\n}): Promise<{ updated: boolean; preferences: { memories: boolean } }> => {\r\n  return request.patch(endpoints.memoryPreferences(), preferences);\r\n};\r\n\r\nexport const createMemory = (data: {\r\n  key: string;\r\n  value: string;\r\n}): Promise<{ created: boolean; memory: q.TUserMemory }> => {\r\n  return request.post(endpoints.memories(), data);\r\n};\r\n\r\nexport function searchPrincipals(\r\n  params: q.PrincipalSearchParams,\r\n): Promise<q.PrincipalSearchResponse> {\r\n  return request.get(endpoints.searchPrincipals(params));\r\n}\r\n\r\nexport function getAccessRoles(\r\n  resourceType: permissions.ResourceType,\r\n): Promise<q.AccessRolesResponse> {\r\n  return request.get(endpoints.getAccessRoles(resourceType));\r\n}\r\n\r\nexport function getResourcePermissions(\r\n  resourceType: permissions.ResourceType,\r\n  resourceId: string,\r\n): Promise<permissions.TGetResourcePermissionsResponse> {\r\n  return request.get(endpoints.getResourcePermissions(resourceType, resourceId));\r\n}\r\n\r\nexport function updateResourcePermissions(\r\n  resourceType: permissions.ResourceType,\r\n  resourceId: string,\r\n  data: permissions.TUpdateResourcePermissionsRequest,\r\n): Promise<permissions.TUpdateResourcePermissionsResponse> {\r\n  return request.put(endpoints.updateResourcePermissions(resourceType, resourceId), data);\r\n}\r\n\r\nexport function getEffectivePermissions(\r\n  resourceType: permissions.ResourceType,\r\n  resourceId: string,\r\n): Promise<permissions.TEffectivePermissionsResponse> {\r\n  return request.get(endpoints.getEffectivePermissions(resourceType, resourceId));\r\n}\r\n\r\n// SharePoint Graph API Token\r\nexport function getGraphApiToken(params: q.GraphTokenParams): Promise<q.GraphTokenResponse> {\r\n  return request.get(endpoints.graphToken(params.scopes));\r\n}\r\n\r\nexport function getDomainServerBaseUrl(): string {\r\n  return `${endpoints.apiBaseUrl()}/api`;\r\n}\r\n","import { z } from 'zod';\r\nimport _axios from 'axios';\r\nimport { URL } from 'url';\r\nimport crypto from 'crypto';\r\nimport { load } from 'js-yaml';\r\nimport type { ActionMetadata, ActionMetadataRuntime } from './types/agents';\r\nimport type { FunctionTool, Schema, Reference } from './types/assistants';\r\nimport { AuthTypeEnum, AuthorizationTypeEnum } from './types/agents';\r\nimport type { OpenAPIV3 } from 'openapi-types';\r\nimport { Tools } from './types/assistants';\r\n\r\nexport type ParametersSchema = {\r\n  type: string;\r\n  properties: Record<string, Reference | Schema>;\r\n  required: string[];\r\n  additionalProperties?: boolean;\r\n};\r\n\r\nexport type OpenAPISchema = OpenAPIV3.SchemaObject &\r\n  ParametersSchema & {\r\n    items?: OpenAPIV3.ReferenceObject | OpenAPIV3.SchemaObject;\r\n  };\r\n\r\nexport type ApiKeyCredentials = {\r\n  api_key: string;\r\n  custom_auth_header?: string;\r\n  authorization_type?: AuthorizationTypeEnum;\r\n};\r\n\r\nexport type OAuthCredentials = {\r\n  tokenUrl: string;\r\n  clientId: string;\r\n  clientSecret: string;\r\n  scope: string;\r\n};\r\n\r\nexport type Credentials = ApiKeyCredentials | OAuthCredentials;\r\n\r\ntype MediaTypeObject =\r\n  | undefined\r\n  | {\r\n      [media: string]: OpenAPIV3.MediaTypeObject | undefined;\r\n    };\r\n\r\ntype RequestBodyObject = Omit<OpenAPIV3.RequestBodyObject, 'content'> & {\r\n  content: MediaTypeObject;\r\n};\r\n\r\nexport function sha1(input: string) {\r\n  return crypto.createHash('sha1').update(input).digest('hex');\r\n}\r\n\r\nexport function createURL(domain: string, path: string) {\r\n  const cleanDomain = domain.replace(/\\/$/, '');\r\n  const cleanPath = path.replace(/^\\//, '');\r\n  const fullURL = `${cleanDomain}/${cleanPath}`;\r\n  return new URL(fullURL).toString();\r\n}\r\n\r\nconst schemaTypeHandlers: Record<string, (schema: OpenAPISchema) => z.ZodTypeAny> = {\r\n  string: (schema) => {\r\n    if (schema.enum) {\r\n      return z.enum(schema.enum as [string, ...string[]]);\r\n    }\r\n\r\n    let stringSchema = z.string();\r\n    if (schema.minLength !== undefined) {\r\n      stringSchema = stringSchema.min(schema.minLength);\r\n    }\r\n    if (schema.maxLength !== undefined) {\r\n      stringSchema = stringSchema.max(schema.maxLength);\r\n    }\r\n    return stringSchema;\r\n  },\r\n  number: (schema) => {\r\n    let numberSchema = z.number();\r\n    if (schema.minimum !== undefined) {\r\n      numberSchema = numberSchema.min(schema.minimum);\r\n    }\r\n    if (schema.maximum !== undefined) {\r\n      numberSchema = numberSchema.max(schema.maximum);\r\n    }\r\n    return numberSchema;\r\n  },\r\n  integer: (schema) => (schemaTypeHandlers.number(schema) as z.ZodNumber).int(),\r\n  boolean: () => z.boolean(),\r\n  array: (schema) => {\r\n    if (schema.items) {\r\n      const zodSchema = openAPISchemaToZod(schema.items as OpenAPISchema);\r\n      if (zodSchema) {\r\n        return z.array(zodSchema);\r\n      }\r\n\r\n      return z.array(z.unknown());\r\n    }\r\n    return z.array(z.unknown());\r\n  },\r\n  object: (schema) => {\r\n    const shape: { [key: string]: z.ZodTypeAny } = {};\r\n    if (schema.properties) {\r\n      Object.entries(schema.properties).forEach(([key, value]) => {\r\n        const zodSchema = openAPISchemaToZod(value as OpenAPISchema);\r\n        shape[key] = zodSchema || z.unknown();\r\n        if (schema.required && schema.required.includes(key)) {\r\n          shape[key] = shape[key].describe(value.description || '');\r\n        } else {\r\n          shape[key] = shape[key].optional().describe(value.description || '');\r\n        }\r\n      });\r\n    }\r\n    return z.object(shape);\r\n  },\r\n};\r\n\r\nfunction openAPISchemaToZod(schema: OpenAPISchema): z.ZodTypeAny | undefined {\r\n  if (schema.type === 'object' && Object.keys(schema.properties || {}).length === 0) {\r\n    return undefined;\r\n  }\r\n\r\n  const handler = schemaTypeHandlers[schema.type as string] || (() => z.unknown());\r\n  return handler(schema);\r\n}\r\n\r\n/**\r\n * Class representing a function signature.\r\n */\r\nexport class FunctionSignature {\r\n  name: string;\r\n  description: string;\r\n  parameters: ParametersSchema;\r\n  strict: boolean;\r\n\r\n  constructor(name: string, description: string, parameters: ParametersSchema, strict?: boolean) {\r\n    this.name = name;\r\n    this.description = description;\r\n    this.parameters = parameters;\r\n    this.strict = strict ?? false;\r\n  }\r\n\r\n  toObjectTool(): FunctionTool {\r\n    const parameters = {\r\n      ...this.parameters,\r\n      additionalProperties: this.strict ? false : undefined,\r\n    };\r\n\r\n    return {\r\n      type: Tools.function,\r\n      function: {\r\n        name: this.name,\r\n        description: this.description,\r\n        parameters,\r\n        ...(this.strict ? { strict: this.strict } : {}),\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nclass RequestConfig {\r\n  constructor(\r\n    readonly domain: string,\r\n    readonly basePath: string,\r\n    readonly method: string,\r\n    readonly operation: string,\r\n    readonly isConsequential: boolean,\r\n    readonly contentType: string,\r\n    readonly parameterLocations?: Record<string, 'query' | 'path' | 'header' | 'body'>,\r\n  ) {}\r\n}\r\n\r\nclass RequestExecutor {\r\n  path: string;\r\n  params?: Record<string, unknown>;\r\n  private operationHash?: string;\r\n  private authHeaders: Record<string, string> = {};\r\n  private authToken?: string;\r\n\r\n  constructor(private config: RequestConfig) {\r\n    this.path = config.basePath;\r\n  }\r\n\r\n  setParams(params: Record<string, unknown>) {\r\n    this.operationHash = sha1(JSON.stringify(params));\r\n    this.params = { ...params } as Record<string, unknown>;\r\n    if (this.config.parameterLocations) {\r\n      //Substituting Path Parameters:\r\n      for (const [key, value] of Object.entries(params)) {\r\n        if (this.config.parameterLocations[key] === 'path') {\r\n          const paramPattern = `{${key}}`;\r\n          if (this.path.includes(paramPattern)) {\r\n            this.path = this.path.replace(paramPattern, encodeURIComponent(String(value)));\r\n            delete this.params[key];\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      // Fallback: if no locations are defined, perform path substitution for all keys.\r\n      for (const [key, value] of Object.entries(params)) {\r\n        const paramPattern = `{${key}}`;\r\n        if (this.path.includes(paramPattern)) {\r\n          this.path = this.path.replace(paramPattern, encodeURIComponent(String(value)));\r\n          delete this.params[key];\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  async setAuth(metadata: ActionMetadataRuntime) {\r\n    if (!metadata.auth) {\r\n      return this;\r\n    }\r\n\r\n    const {\r\n      type,\r\n      /* API Key */\r\n      authorization_type,\r\n      custom_auth_header,\r\n      /* OAuth */\r\n      authorization_url,\r\n      client_url,\r\n      scope,\r\n      token_exchange_method,\r\n    } = metadata.auth;\r\n\r\n    const {\r\n      /* API Key */\r\n      api_key,\r\n      /* OAuth */\r\n      oauth_client_id,\r\n      oauth_client_secret,\r\n      oauth_token_expires_at,\r\n      oauth_access_token = '',\r\n    } = metadata;\r\n\r\n    const isApiKey = api_key != null && api_key.length > 0 && type === AuthTypeEnum.ServiceHttp;\r\n    const isOAuth = !!(\r\n      oauth_client_id != null &&\r\n      oauth_client_id &&\r\n      oauth_client_secret != null &&\r\n      oauth_client_secret &&\r\n      type === AuthTypeEnum.OAuth &&\r\n      authorization_url != null &&\r\n      authorization_url &&\r\n      client_url != null &&\r\n      client_url &&\r\n      scope != null &&\r\n      scope &&\r\n      token_exchange_method\r\n    );\r\n\r\n    if (isApiKey && authorization_type === AuthorizationTypeEnum.Basic) {\r\n      const basicToken = Buffer.from(api_key).toString('base64');\r\n      this.authHeaders['Authorization'] = `Basic ${basicToken}`;\r\n    } else if (isApiKey && authorization_type === AuthorizationTypeEnum.Bearer) {\r\n      this.authHeaders['Authorization'] = `Bearer ${api_key}`;\r\n    } else if (\r\n      isApiKey &&\r\n      authorization_type === AuthorizationTypeEnum.Custom &&\r\n      custom_auth_header != null &&\r\n      custom_auth_header\r\n    ) {\r\n      this.authHeaders[custom_auth_header] = api_key;\r\n    } else if (isOAuth) {\r\n      // TODO: maybe doing it in a different way later on. but we want that the user needs to folllow the oauth flow.\r\n      // If we do not have a valid token, bail or ask user to sign in\r\n      const now = new Date();\r\n\r\n      // 1. Check if token is set\r\n      if (!oauth_access_token) {\r\n        throw new Error('No access token found. Please log in first.');\r\n      }\r\n\r\n      // 2. Check if token is expired\r\n      if (oauth_token_expires_at && now >= new Date(oauth_token_expires_at)) {\r\n        // Optionally check refresh_token logic, or just prompt user to re-login\r\n        throw new Error('Access token is expired. Please re-login.');\r\n      }\r\n\r\n      // If valid, use it\r\n      this.authToken = oauth_access_token;\r\n      this.authHeaders['Authorization'] = `Bearer ${this.authToken}`;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  async execute() {\r\n    const url = createURL(this.config.domain, this.path);\r\n    const headers: Record<string, string> = {\r\n      ...this.authHeaders,\r\n      ...(this.config.contentType ? { 'Content-Type': this.config.contentType } : {}),\r\n    };\r\n    const method = this.config.method.toLowerCase();\r\n    const axios = _axios.create();\r\n\r\n    // Initialize separate containers for query and body parameters.\r\n    const queryParams: Record<string, unknown> = {};\r\n    const bodyParams: Record<string, unknown> = {};\r\n\r\n    if (this.config.parameterLocations && this.params) {\r\n      for (const key of Object.keys(this.params)) {\r\n        // Determine parameter placement; default to \"query\" for GET and \"body\" for others.\r\n        const loc: 'query' | 'path' | 'header' | 'body' =\r\n          this.config.parameterLocations[key] || (method === 'get' ? 'query' : 'body');\r\n\r\n        const val = this.params[key];\r\n        if (loc === 'query') {\r\n          queryParams[key] = val;\r\n        } else if (loc === 'header') {\r\n          headers[key] = String(val);\r\n        } else if (loc === 'body') {\r\n          bodyParams[key] = val;\r\n        }\r\n      }\r\n    } else if (this.params) {\r\n      Object.assign(queryParams, this.params);\r\n      Object.assign(bodyParams, this.params);\r\n    }\r\n\r\n    if (method === 'get') {\r\n      return axios.get(url, { headers, params: queryParams });\r\n    } else if (method === 'post') {\r\n      return axios.post(url, bodyParams, { headers, params: queryParams });\r\n    } else if (method === 'put') {\r\n      return axios.put(url, bodyParams, { headers, params: queryParams });\r\n    } else if (method === 'delete') {\r\n      return axios.delete(url, { headers, data: bodyParams, params: queryParams });\r\n    } else if (method === 'patch') {\r\n      return axios.patch(url, bodyParams, { headers, params: queryParams });\r\n    } else {\r\n      throw new Error(`Unsupported HTTP method: ${method}`);\r\n    }\r\n  }\r\n\r\n  getConfig() {\r\n    return this.config;\r\n  }\r\n}\r\n\r\nexport class ActionRequest {\r\n  private config: RequestConfig;\r\n\r\n  constructor(\r\n    domain: string,\r\n    path: string,\r\n    method: string,\r\n    operation: string,\r\n    isConsequential: boolean,\r\n    contentType: string,\r\n    parameterLocations?: Record<string, 'query' | 'path' | 'header' | 'body'>,\r\n  ) {\r\n    this.config = new RequestConfig(\r\n      domain,\r\n      path,\r\n      method,\r\n      operation,\r\n      isConsequential,\r\n      contentType,\r\n      parameterLocations,\r\n    );\r\n  }\r\n\r\n  // Add getters to maintain backward compatibility\r\n  get domain() {\r\n    return this.config.domain;\r\n  }\r\n  get path() {\r\n    return this.config.basePath;\r\n  }\r\n  get method() {\r\n    return this.config.method;\r\n  }\r\n  get operation() {\r\n    return this.config.operation;\r\n  }\r\n  get isConsequential() {\r\n    return this.config.isConsequential;\r\n  }\r\n  get contentType() {\r\n    return this.config.contentType;\r\n  }\r\n\r\n  createExecutor() {\r\n    return new RequestExecutor(this.config);\r\n  }\r\n\r\n  // Maintain backward compatibility by delegating to a new executor\r\n  setParams(params: Record<string, unknown>) {\r\n    const executor = this.createExecutor();\r\n    executor.setParams(params);\r\n    return executor;\r\n  }\r\n\r\n  async setAuth(metadata: ActionMetadata) {\r\n    const executor = this.createExecutor();\r\n    return executor.setAuth(metadata);\r\n  }\r\n\r\n  async execute() {\r\n    const executor = this.createExecutor();\r\n    return executor.execute();\r\n  }\r\n}\r\n\r\nexport function resolveRef<\r\n  T extends\r\n    | OpenAPIV3.ReferenceObject\r\n    | OpenAPIV3.SchemaObject\r\n    | OpenAPIV3.ParameterObject\r\n    | OpenAPIV3.RequestBodyObject,\r\n>(obj: T, components?: OpenAPIV3.ComponentsObject): Exclude<T, OpenAPIV3.ReferenceObject> {\r\n  if ('$ref' in obj && components) {\r\n    const refPath = obj.$ref.replace(/^#\\/components\\//, '').split('/');\r\n\r\n    let resolved: unknown = components as Record<string, unknown>;\r\n    for (const segment of refPath) {\r\n      if (typeof resolved === 'object' && resolved !== null && segment in resolved) {\r\n        resolved = (resolved as Record<string, unknown>)[segment];\r\n      } else {\r\n        throw new Error(`Could not resolve reference: ${obj.$ref}`);\r\n      }\r\n    }\r\n\r\n    return resolveRef(resolved as typeof obj, components) as Exclude<T, OpenAPIV3.ReferenceObject>;\r\n  }\r\n\r\n  return obj as Exclude<T, OpenAPIV3.ReferenceObject>;\r\n}\r\n\r\nfunction sanitizeOperationId(input: string) {\r\n  return input.replace(/[^a-zA-Z0-9_-]/g, '');\r\n}\r\n\r\n/**\r\n * Converts an OpenAPI spec to function signatures and request builders.\r\n */\r\nexport function openapiToFunction(\r\n  openapiSpec: OpenAPIV3.Document,\r\n  generateZodSchemas = false,\r\n): {\r\n  functionSignatures: FunctionSignature[];\r\n  requestBuilders: Record<string, ActionRequest>;\r\n  zodSchemas?: Record<string, z.ZodTypeAny>;\r\n} {\r\n  const functionSignatures: FunctionSignature[] = [];\r\n  const requestBuilders: Record<string, ActionRequest> = {};\r\n  const zodSchemas: Record<string, z.ZodTypeAny> = {};\r\n  const baseUrl = openapiSpec.servers?.[0]?.url ?? '';\r\n\r\n  // Iterate over each path and method in the OpenAPI spec\r\n  for (const [path, methods] of Object.entries(openapiSpec.paths)) {\r\n    for (const [method, operation] of Object.entries(methods as OpenAPIV3.PathsObject)) {\r\n      const paramLocations: Record<string, 'query' | 'path' | 'header' | 'body'> = {};\r\n      const operationObj = operation as OpenAPIV3.OperationObject & {\r\n        'x-openai-isConsequential'?: boolean;\r\n      } & {\r\n        'x-strict'?: boolean;\r\n      };\r\n\r\n      // Operation ID is used as the function name\r\n      const defaultOperationId = `${method}_${path}`;\r\n      const operationId = operationObj.operationId || sanitizeOperationId(defaultOperationId);\r\n      const description = operationObj.summary || operationObj.description || '';\r\n      const isStrict = operationObj['x-strict'] ?? false;\r\n\r\n      const parametersSchema: OpenAPISchema = {\r\n        type: 'object',\r\n        properties: {},\r\n        required: [],\r\n      };\r\n\r\n      if (operationObj.parameters) {\r\n        for (const param of operationObj.parameters ?? []) {\r\n          const resolvedParam = resolveRef(\r\n            param,\r\n            openapiSpec.components,\r\n          ) as OpenAPIV3.ParameterObject;\r\n\r\n          const paramName = resolvedParam.name;\r\n          if (!paramName || !resolvedParam.schema) {\r\n            continue;\r\n          }\r\n\r\n          const paramSchema = resolveRef(\r\n            resolvedParam.schema,\r\n            openapiSpec.components,\r\n          ) as OpenAPIV3.SchemaObject;\r\n\r\n          parametersSchema.properties[paramName] = paramSchema;\r\n          if (resolvedParam.required) {\r\n            parametersSchema.required.push(paramName);\r\n          }\r\n          // Record the parameter location from the OpenAPI \"in\" field.\r\n          paramLocations[paramName] =\r\n            resolvedParam.in === 'query' ||\r\n            resolvedParam.in === 'path' ||\r\n            resolvedParam.in === 'header' ||\r\n            resolvedParam.in === 'body'\r\n              ? resolvedParam.in\r\n              : 'query';\r\n        }\r\n      }\r\n\r\n      let contentType = '';\r\n      if (operationObj.requestBody) {\r\n        const requestBody = operationObj.requestBody as RequestBodyObject;\r\n        const content = requestBody.content;\r\n        contentType = Object.keys(content ?? {})[0];\r\n        const schema = content?.[contentType]?.schema;\r\n        const resolvedSchema = resolveRef(\r\n          schema as OpenAPIV3.ReferenceObject | OpenAPIV3.SchemaObject,\r\n          openapiSpec.components,\r\n        );\r\n        parametersSchema.properties = {\r\n          ...parametersSchema.properties,\r\n          ...resolvedSchema.properties,\r\n        };\r\n        if (resolvedSchema.required) {\r\n          parametersSchema.required.push(...resolvedSchema.required);\r\n        }\r\n        // Mark requestBody properties as belonging to the \"body\"\r\n        if (resolvedSchema.properties) {\r\n          for (const key in resolvedSchema.properties) {\r\n            paramLocations[key] = 'body';\r\n          }\r\n        }\r\n\r\n        contentType = contentType ?? 'application/json';\r\n      }\r\n\r\n      const functionSignature = new FunctionSignature(\r\n        operationId,\r\n        description,\r\n        parametersSchema,\r\n        isStrict,\r\n      );\r\n      functionSignatures.push(functionSignature);\r\n\r\n      const actionRequest = new ActionRequest(\r\n        baseUrl,\r\n        path,\r\n        method,\r\n        operationId,\r\n        !!(operationObj['x-openai-isConsequential'] ?? false),\r\n        contentType,\r\n        paramLocations,\r\n      );\r\n\r\n      requestBuilders[operationId] = actionRequest;\r\n\r\n      if (generateZodSchemas && Object.keys(parametersSchema.properties).length > 0) {\r\n        const schema = openAPISchemaToZod(parametersSchema);\r\n        if (schema) {\r\n          zodSchemas[operationId] = schema;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return { functionSignatures, requestBuilders, zodSchemas };\r\n}\r\n\r\nexport type ValidationResult = {\r\n  status: boolean;\r\n  message: string;\r\n  spec?: OpenAPIV3.Document;\r\n};\r\n\r\n/**\r\n * Validates and parses an OpenAPI spec.\r\n */\r\nexport function validateAndParseOpenAPISpec(specString: string): ValidationResult {\r\n  try {\r\n    let parsedSpec;\r\n    try {\r\n      parsedSpec = JSON.parse(specString);\r\n    } catch {\r\n      parsedSpec = load(specString);\r\n    }\r\n\r\n    // Check for servers\r\n    if (\r\n      !parsedSpec.servers ||\r\n      !Array.isArray(parsedSpec.servers) ||\r\n      parsedSpec.servers.length === 0\r\n    ) {\r\n      return { status: false, message: 'Could not find a valid URL in `servers`' };\r\n    }\r\n\r\n    if (!parsedSpec.servers[0].url) {\r\n      return { status: false, message: 'Could not find a valid URL in `servers`' };\r\n    }\r\n\r\n    // Check for paths\r\n    const paths = parsedSpec.paths;\r\n    if (!paths || typeof paths !== 'object' || Object.keys(paths).length === 0) {\r\n      return { status: false, message: 'No paths found in the OpenAPI spec.' };\r\n    }\r\n\r\n    const components = parsedSpec.components?.schemas || {};\r\n    const messages = [];\r\n\r\n    for (const [path, methods] of Object.entries(paths)) {\r\n      for (const [httpMethod, operation] of Object.entries(methods as OpenAPIV3.PathItemObject)) {\r\n        // Ensure operation is a valid operation object\r\n        const { responses } = operation as OpenAPIV3.OperationObject | { responses: undefined };\r\n        if (typeof operation === 'object' && responses) {\r\n          for (const [statusCode, response] of Object.entries(responses)) {\r\n            const content = (response as OpenAPIV3.ResponseObject).content as MediaTypeObject;\r\n            if (content && content['application/json'] && content['application/json'].schema) {\r\n              const schema = content['application/json'].schema;\r\n              if ('$ref' in schema && typeof schema.$ref === 'string') {\r\n                const refName = schema.$ref.split('/').pop();\r\n                if (refName && !components[refName]) {\r\n                  messages.push(\r\n                    `In context=('paths', '${path}', '${httpMethod}', '${statusCode}', 'response', 'content', 'application/json', 'schema'), reference to unknown component ${refName}; using empty schema`,\r\n                  );\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      status: true,\r\n      message: messages.join('\\n') || 'OpenAPI spec is valid.',\r\n      spec: parsedSpec,\r\n    };\r\n  } catch (error) {\r\n    console.error(error);\r\n    return { status: false, message: 'Error parsing OpenAPI spec.' };\r\n  }\r\n}\r\n","import type * as t from './types';\r\nimport { EndpointURLs } from './config';\r\nimport * as s from './schemas';\r\n\r\nexport default function createPayload(submission: t.TSubmission) {\r\n  const {\r\n    isEdited,\r\n    userMessage,\r\n    isContinued,\r\n    isTemporary,\r\n    isRegenerate,\r\n    conversation,\r\n    editedContent,\r\n    ephemeralAgent,\r\n    endpointOption,\r\n  } = submission;\r\n  const { conversationId } = s.tConvoUpdateSchema.parse(conversation);\r\n  const { endpoint: _e, endpointType } = endpointOption as {\r\n    endpoint: s.EModelEndpoint;\r\n    endpointType?: s.EModelEndpoint;\r\n  };\r\n\r\n  const endpoint = _e as s.EModelEndpoint;\r\n  let server = `${EndpointURLs[s.EModelEndpoint.agents]}/${endpoint}`;\r\n  if (s.isAssistantsEndpoint(endpoint)) {\r\n    server =\r\n      EndpointURLs[(endpointType ?? endpoint) as 'assistants' | 'azureAssistants'] +\r\n      (isEdited ? '/modify' : '');\r\n  }\r\n\r\n  const payload: t.TPayload = {\r\n    ...userMessage,\r\n    ...endpointOption,\r\n    endpoint,\r\n    isTemporary,\r\n    isRegenerate,\r\n    editedContent,\r\n    conversationId,\r\n    isContinued: !!(isEdited && isContinued),\r\n    ephemeralAgent: s.isAssistantsEndpoint(endpoint) ? undefined : ephemeralAgent,\r\n  };\r\n\r\n  return { server, payload };\r\n}\r\n","import {\r\n  Verbosity,\r\n  ImageDetail,\r\n  EModelEndpoint,\r\n  openAISettings,\r\n  googleSettings,\r\n  ReasoningEffort,\r\n  ReasoningSummary,\r\n  BedrockProviders,\r\n  anthropicSettings,\r\n} from './types';\r\nimport { SettingDefinition, SettingsConfiguration } from './generate';\r\n\r\n// Base definitions\r\nconst baseDefinitions: Record<string, SettingDefinition> = {\r\n  model: {\r\n    key: 'model',\r\n    label: 'com_ui_model',\r\n    labelCode: true,\r\n    type: 'string',\r\n    component: 'dropdown',\r\n    optionType: 'model',\r\n    selectPlaceholder: 'com_ui_select_model',\r\n    searchPlaceholder: 'com_ui_select_search_model',\r\n    searchPlaceholderCode: true,\r\n    selectPlaceholderCode: true,\r\n    columnSpan: 4,\r\n  },\r\n  temperature: {\r\n    key: 'temperature',\r\n    label: 'com_endpoint_temperature',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_temp',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  topP: {\r\n    key: 'topP',\r\n    label: 'com_endpoint_top_p',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_topp',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  stop: {\r\n    key: 'stop',\r\n    label: 'com_endpoint_stop',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_stop',\r\n    descriptionCode: true,\r\n    placeholder: 'com_endpoint_stop_placeholder',\r\n    placeholderCode: true,\r\n    type: 'array',\r\n    default: [],\r\n    component: 'tags',\r\n    optionType: 'conversation',\r\n    minTags: 0,\r\n    maxTags: 4,\r\n  },\r\n  imageDetail: {\r\n    key: 'imageDetail',\r\n    label: 'com_endpoint_plug_image_detail',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_detail',\r\n    descriptionCode: true,\r\n    type: 'enum',\r\n    default: ImageDetail.auto,\r\n    component: 'slider',\r\n    options: [ImageDetail.low, ImageDetail.auto, ImageDetail.high],\r\n    enumMappings: {\r\n      [ImageDetail.low]: 'com_ui_low',\r\n      [ImageDetail.auto]: 'com_ui_auto',\r\n      [ImageDetail.high]: 'com_ui_high',\r\n    },\r\n    optionType: 'conversation',\r\n    columnSpan: 2,\r\n  },\r\n};\r\n\r\nconst createDefinition = (\r\n  base: Partial<SettingDefinition>,\r\n  overrides: Partial<SettingDefinition>,\r\n): SettingDefinition => {\r\n  return { ...base, ...overrides } as SettingDefinition;\r\n};\r\n\r\nexport const librechat = {\r\n  modelLabel: {\r\n    key: 'modelLabel',\r\n    label: 'com_endpoint_custom_name',\r\n    labelCode: true,\r\n    type: 'string',\r\n    default: '',\r\n    component: 'input',\r\n    placeholder: 'com_endpoint_openai_custom_name_placeholder',\r\n    placeholderCode: true,\r\n    optionType: 'conversation',\r\n  } as const,\r\n  maxContextTokens: {\r\n    key: 'maxContextTokens',\r\n    label: 'com_endpoint_context_tokens',\r\n    labelCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    description: 'com_endpoint_context_info',\r\n    descriptionCode: true,\r\n    optionType: 'model',\r\n    columnSpan: 2,\r\n  } as const,\r\n  resendFiles: {\r\n    key: 'resendFiles',\r\n    label: 'com_endpoint_plug_resend_files',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_resend_files',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: true,\r\n    component: 'switch',\r\n    optionType: 'conversation',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  } as const,\r\n  promptPrefix: {\r\n    key: 'promptPrefix',\r\n    label: 'com_endpoint_prompt_prefix',\r\n    labelCode: true,\r\n    type: 'string',\r\n    default: '',\r\n    component: 'textarea',\r\n    placeholder: 'com_endpoint_openai_prompt_prefix_placeholder',\r\n    placeholderCode: true,\r\n    optionType: 'model',\r\n  } as const,\r\n  fileTokenLimit: {\r\n    key: 'fileTokenLimit',\r\n    label: 'com_ui_file_token_limit',\r\n    labelCode: true,\r\n    description: 'com_ui_file_token_limit_desc',\r\n    descriptionCode: true,\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    columnSpan: 2,\r\n  } as const,\r\n};\r\n\r\nconst openAIParams: Record<string, SettingDefinition> = {\r\n  chatGptLabel: {\r\n    ...librechat.modelLabel,\r\n    key: 'chatGptLabel',\r\n  },\r\n  promptPrefix: librechat.promptPrefix,\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: openAISettings.temperature.default,\r\n    range: {\r\n      min: openAISettings.temperature.min,\r\n      max: openAISettings.temperature.max,\r\n      step: openAISettings.temperature.step,\r\n    },\r\n  }),\r\n  top_p: createDefinition(baseDefinitions.topP, {\r\n    key: 'top_p',\r\n    default: openAISettings.top_p.default,\r\n    range: {\r\n      min: openAISettings.top_p.min,\r\n      max: openAISettings.top_p.max,\r\n      step: openAISettings.top_p.step,\r\n    },\r\n  }),\r\n  frequency_penalty: {\r\n    key: 'frequency_penalty',\r\n    label: 'com_endpoint_frequency_penalty',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_freq',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    default: openAISettings.frequency_penalty.default,\r\n    range: {\r\n      min: openAISettings.frequency_penalty.min,\r\n      max: openAISettings.frequency_penalty.max,\r\n      step: openAISettings.frequency_penalty.step,\r\n    },\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  presence_penalty: {\r\n    key: 'presence_penalty',\r\n    label: 'com_endpoint_presence_penalty',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_pres',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    default: openAISettings.presence_penalty.default,\r\n    range: {\r\n      min: openAISettings.presence_penalty.min,\r\n      max: openAISettings.presence_penalty.max,\r\n      step: openAISettings.presence_penalty.step,\r\n    },\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  max_tokens: {\r\n    key: 'max_tokens',\r\n    label: 'com_endpoint_max_output_tokens',\r\n    labelCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    description: 'com_endpoint_openai_max_tokens',\r\n    descriptionCode: true,\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    optionType: 'model',\r\n    columnSpan: 2,\r\n  },\r\n  reasoning_effort: {\r\n    key: 'reasoning_effort',\r\n    label: 'com_endpoint_reasoning_effort',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_reasoning_effort',\r\n    descriptionCode: true,\r\n    type: 'enum',\r\n    default: ReasoningEffort.none,\r\n    component: 'slider',\r\n    options: [\r\n      ReasoningEffort.none,\r\n      ReasoningEffort.minimal,\r\n      ReasoningEffort.low,\r\n      ReasoningEffort.medium,\r\n      ReasoningEffort.high,\r\n    ],\r\n    enumMappings: {\r\n      [ReasoningEffort.none]: 'com_ui_none',\r\n      [ReasoningEffort.minimal]: 'com_ui_minimal',\r\n      [ReasoningEffort.low]: 'com_ui_low',\r\n      [ReasoningEffort.medium]: 'com_ui_medium',\r\n      [ReasoningEffort.high]: 'com_ui_high',\r\n    },\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  useResponsesApi: {\r\n    key: 'useResponsesApi',\r\n    label: 'com_endpoint_use_responses_api',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_use_responses_api',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: false,\r\n    component: 'switch',\r\n    optionType: 'model',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n  web_search: {\r\n    key: 'web_search',\r\n    label: 'com_ui_web_search',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_use_web_search',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: false,\r\n    component: 'switch',\r\n    optionType: 'model',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n  reasoning_summary: {\r\n    key: 'reasoning_summary',\r\n    label: 'com_endpoint_reasoning_summary',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_reasoning_summary',\r\n    descriptionCode: true,\r\n    type: 'enum',\r\n    default: ReasoningSummary.none,\r\n    component: 'slider',\r\n    options: [\r\n      ReasoningSummary.none,\r\n      ReasoningSummary.auto,\r\n      ReasoningSummary.concise,\r\n      ReasoningSummary.detailed,\r\n    ],\r\n    enumMappings: {\r\n      [ReasoningSummary.none]: 'com_ui_none',\r\n      [ReasoningSummary.auto]: 'com_ui_auto',\r\n      [ReasoningSummary.concise]: 'com_ui_concise',\r\n      [ReasoningSummary.detailed]: 'com_ui_detailed',\r\n    },\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  verbosity: {\r\n    key: 'verbosity',\r\n    label: 'com_endpoint_verbosity',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_verbosity',\r\n    descriptionCode: true,\r\n    type: 'enum',\r\n    default: Verbosity.none,\r\n    component: 'slider',\r\n    options: [Verbosity.none, Verbosity.low, Verbosity.medium, Verbosity.high],\r\n    enumMappings: {\r\n      [Verbosity.none]: 'com_ui_none',\r\n      [Verbosity.low]: 'com_ui_low',\r\n      [Verbosity.medium]: 'com_ui_medium',\r\n      [Verbosity.high]: 'com_ui_high',\r\n    },\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  disableStreaming: {\r\n    key: 'disableStreaming',\r\n    label: 'com_endpoint_disable_streaming_label',\r\n    labelCode: true,\r\n    description: 'com_endpoint_disable_streaming',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: false,\r\n    component: 'switch',\r\n    optionType: 'model',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  } as const,\r\n};\r\n\r\nconst anthropic: Record<string, SettingDefinition> = {\r\n  maxOutputTokens: {\r\n    key: 'maxOutputTokens',\r\n    label: 'com_endpoint_max_output_tokens',\r\n    labelCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    description: 'com_endpoint_anthropic_maxoutputtokens',\r\n    descriptionCode: true,\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    range: {\r\n      min: anthropicSettings.maxOutputTokens.min,\r\n      max: anthropicSettings.maxOutputTokens.max,\r\n      step: anthropicSettings.maxOutputTokens.step,\r\n    },\r\n    optionType: 'model',\r\n    columnSpan: 2,\r\n  },\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: anthropicSettings.temperature.default,\r\n    range: {\r\n      min: anthropicSettings.temperature.min,\r\n      max: anthropicSettings.temperature.max,\r\n      step: anthropicSettings.temperature.step,\r\n    },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    default: anthropicSettings.topP.default,\r\n    range: {\r\n      min: anthropicSettings.topP.min,\r\n      max: anthropicSettings.topP.max,\r\n      step: anthropicSettings.topP.step,\r\n    },\r\n  }),\r\n  topK: {\r\n    key: 'topK',\r\n    label: 'com_endpoint_top_k',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_topk',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    default: anthropicSettings.topK.default,\r\n    range: {\r\n      min: anthropicSettings.topK.min,\r\n      max: anthropicSettings.topK.max,\r\n      step: anthropicSettings.topK.step,\r\n    },\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  promptCache: {\r\n    key: 'promptCache',\r\n    label: 'com_endpoint_prompt_cache',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_prompt_cache',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: anthropicSettings.promptCache.default,\r\n    component: 'switch',\r\n    optionType: 'conversation',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n  thinking: {\r\n    key: 'thinking',\r\n    label: 'com_endpoint_thinking',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_thinking',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: anthropicSettings.thinking.default,\r\n    component: 'switch',\r\n    optionType: 'conversation',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n  thinkingBudget: {\r\n    key: 'thinkingBudget',\r\n    label: 'com_endpoint_thinking_budget',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_thinking_budget',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    default: anthropicSettings.thinkingBudget.default,\r\n    range: {\r\n      min: anthropicSettings.thinkingBudget.min,\r\n      max: anthropicSettings.thinkingBudget.max,\r\n      step: anthropicSettings.thinkingBudget.step,\r\n    },\r\n    optionType: 'conversation',\r\n    columnSpan: 2,\r\n  },\r\n  web_search: {\r\n    key: 'web_search',\r\n    label: 'com_ui_web_search',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_use_web_search',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: anthropicSettings.web_search.default,\r\n    component: 'switch',\r\n    optionType: 'conversation',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n};\r\n\r\nconst bedrock: Record<string, SettingDefinition> = {\r\n  system: {\r\n    key: 'system',\r\n    label: 'com_endpoint_prompt_prefix',\r\n    labelCode: true,\r\n    type: 'string',\r\n    default: '',\r\n    component: 'textarea',\r\n    placeholder: 'com_endpoint_openai_prompt_prefix_placeholder',\r\n    placeholderCode: true,\r\n    optionType: 'model',\r\n  },\r\n  region: {\r\n    key: 'region',\r\n    type: 'string',\r\n    label: 'com_ui_region',\r\n    labelCode: true,\r\n    component: 'combobox',\r\n    optionType: 'conversation',\r\n    selectPlaceholder: 'com_ui_select_region',\r\n    searchPlaceholder: 'com_ui_select_search_region',\r\n    searchPlaceholderCode: true,\r\n    selectPlaceholderCode: true,\r\n    columnSpan: 2,\r\n  },\r\n  maxTokens: {\r\n    key: 'maxTokens',\r\n    label: 'com_endpoint_max_output_tokens',\r\n    labelCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    description: 'com_endpoint_anthropic_maxoutputtokens',\r\n    descriptionCode: true,\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    optionType: 'model',\r\n    columnSpan: 2,\r\n  },\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: 1,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n  topK: createDefinition(anthropic.topK, {\r\n    range: { min: 0, max: 500, step: 1 },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    default: 0.999,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n};\r\n\r\nconst mistral: Record<string, SettingDefinition> = {\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: 0.7,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n};\r\n\r\nconst cohere: Record<string, SettingDefinition> = {\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: 0.3,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    default: 0.75,\r\n    range: { min: 0.01, max: 0.99, step: 0.01 },\r\n  }),\r\n};\r\n\r\nconst meta: Record<string, SettingDefinition> = {\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: 0.5,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    default: 0.9,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n};\r\n\r\nconst google: Record<string, SettingDefinition> = {\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: googleSettings.temperature.default,\r\n    range: {\r\n      min: googleSettings.temperature.min,\r\n      max: googleSettings.temperature.max,\r\n      step: googleSettings.temperature.step,\r\n    },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    default: googleSettings.topP.default,\r\n    range: {\r\n      min: googleSettings.topP.min,\r\n      max: googleSettings.topP.max,\r\n      step: googleSettings.topP.step,\r\n    },\r\n  }),\r\n  topK: {\r\n    key: 'topK',\r\n    label: 'com_endpoint_top_k',\r\n    labelCode: true,\r\n    description: 'com_endpoint_google_topk',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    default: googleSettings.topK.default,\r\n    range: {\r\n      min: googleSettings.topK.min,\r\n      max: googleSettings.topK.max,\r\n      step: googleSettings.topK.step,\r\n    },\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  maxOutputTokens: {\r\n    key: 'maxOutputTokens',\r\n    label: 'com_endpoint_max_output_tokens',\r\n    labelCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    description: 'com_endpoint_google_maxoutputtokens',\r\n    descriptionCode: true,\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    default: googleSettings.maxOutputTokens.default,\r\n    range: {\r\n      min: googleSettings.maxOutputTokens.min,\r\n      max: googleSettings.maxOutputTokens.max,\r\n      step: googleSettings.maxOutputTokens.step,\r\n    },\r\n    optionType: 'model',\r\n    columnSpan: 2,\r\n  },\r\n  thinking: {\r\n    key: 'thinking',\r\n    label: 'com_endpoint_thinking',\r\n    labelCode: true,\r\n    description: 'com_endpoint_google_thinking',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: googleSettings.thinking.default,\r\n    component: 'switch',\r\n    optionType: 'conversation',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n  thinkingBudget: {\r\n    key: 'thinkingBudget',\r\n    label: 'com_endpoint_thinking_budget',\r\n    labelCode: true,\r\n    description: 'com_endpoint_google_thinking_budget',\r\n    descriptionCode: true,\r\n    placeholder: 'com_ui_auto',\r\n    placeholderCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    range: {\r\n      min: googleSettings.thinkingBudget.min,\r\n      max: googleSettings.thinkingBudget.max,\r\n      step: googleSettings.thinkingBudget.step,\r\n    },\r\n    optionType: 'conversation',\r\n    columnSpan: 2,\r\n  },\r\n  web_search: {\r\n    key: 'web_search',\r\n    label: 'com_endpoint_use_search_grounding',\r\n    labelCode: true,\r\n    description: 'com_endpoint_google_use_search_grounding',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: false,\r\n    component: 'switch',\r\n    optionType: 'model',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n};\r\n\r\nconst googleConfig: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  google.maxOutputTokens,\r\n  google.temperature,\r\n  google.topP,\r\n  google.topK,\r\n  librechat.resendFiles,\r\n  google.thinking,\r\n  google.thinkingBudget,\r\n  google.web_search,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst googleCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst googleCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  google.maxOutputTokens,\r\n  google.temperature,\r\n  google.topP,\r\n  google.topK,\r\n  librechat.resendFiles,\r\n  google.thinking,\r\n  google.thinkingBudget,\r\n  google.web_search,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst openAI: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  openAIParams.max_tokens,\r\n  openAIParams.temperature,\r\n  openAIParams.top_p,\r\n  openAIParams.frequency_penalty,\r\n  openAIParams.presence_penalty,\r\n  baseDefinitions.stop,\r\n  librechat.resendFiles,\r\n  baseDefinitions.imageDetail,\r\n  openAIParams.web_search,\r\n  openAIParams.reasoning_effort,\r\n  openAIParams.useResponsesApi,\r\n  openAIParams.reasoning_summary,\r\n  openAIParams.verbosity,\r\n  openAIParams.disableStreaming,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst openAICol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst openAICol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  openAIParams.max_tokens,\r\n  openAIParams.temperature,\r\n  openAIParams.top_p,\r\n  openAIParams.frequency_penalty,\r\n  openAIParams.presence_penalty,\r\n  baseDefinitions.stop,\r\n  librechat.resendFiles,\r\n  baseDefinitions.imageDetail,\r\n  openAIParams.reasoning_effort,\r\n  openAIParams.reasoning_summary,\r\n  openAIParams.verbosity,\r\n  openAIParams.useResponsesApi,\r\n  openAIParams.web_search,\r\n  openAIParams.disableStreaming,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst anthropicConfig: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  anthropic.maxOutputTokens,\r\n  anthropic.temperature,\r\n  anthropic.topP,\r\n  anthropic.topK,\r\n  librechat.resendFiles,\r\n  anthropic.promptCache,\r\n  anthropic.thinking,\r\n  anthropic.thinkingBudget,\r\n  anthropic.web_search,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst anthropicCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst anthropicCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  anthropic.maxOutputTokens,\r\n  anthropic.temperature,\r\n  anthropic.topP,\r\n  anthropic.topK,\r\n  librechat.resendFiles,\r\n  anthropic.promptCache,\r\n  anthropic.thinking,\r\n  anthropic.thinkingBudget,\r\n  anthropic.web_search,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockAnthropic: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  bedrock.system,\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  bedrock.temperature,\r\n  bedrock.topP,\r\n  bedrock.topK,\r\n  baseDefinitions.stop,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  anthropic.thinking,\r\n  anthropic.thinkingBudget,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockMistral: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  mistral.temperature,\r\n  mistral.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockCohere: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  cohere.temperature,\r\n  cohere.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockGeneral: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  meta.temperature,\r\n  meta.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockAnthropicCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  bedrock.system,\r\n  baseDefinitions.stop,\r\n];\r\n\r\nconst bedrockAnthropicCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  bedrock.temperature,\r\n  bedrock.topP,\r\n  bedrock.topK,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  anthropic.thinking,\r\n  anthropic.thinkingBudget,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockMistralCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst bedrockMistralCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  mistral.temperature,\r\n  mistral.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockCohereCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst bedrockCohereCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  cohere.temperature,\r\n  cohere.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockGeneralCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst bedrockGeneralCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  meta.temperature,\r\n  meta.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nexport const paramSettings: Record<string, SettingsConfiguration | undefined> = {\r\n  [EModelEndpoint.openAI]: openAI,\r\n  [EModelEndpoint.azureOpenAI]: openAI,\r\n  [EModelEndpoint.custom]: openAI,\r\n  [EModelEndpoint.anthropic]: anthropicConfig,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Anthropic}`]: bedrockAnthropic,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.MistralAI}`]: bedrockMistral,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Cohere}`]: bedrockCohere,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Meta}`]: bedrockGeneral,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.AI21}`]: bedrockGeneral,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Amazon}`]: bedrockGeneral,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.DeepSeek}`]: bedrockGeneral,\r\n  [EModelEndpoint.google]: googleConfig,\r\n};\r\n\r\nconst openAIColumns = {\r\n  col1: openAICol1,\r\n  col2: openAICol2,\r\n};\r\n\r\nconst bedrockGeneralColumns = {\r\n  col1: bedrockGeneralCol1,\r\n  col2: bedrockGeneralCol2,\r\n};\r\n\r\nexport const presetSettings: Record<\r\n  string,\r\n  | {\r\n      col1: SettingsConfiguration;\r\n      col2: SettingsConfiguration;\r\n    }\r\n  | undefined\r\n> = {\r\n  [EModelEndpoint.openAI]: openAIColumns,\r\n  [EModelEndpoint.azureOpenAI]: openAIColumns,\r\n  [EModelEndpoint.custom]: openAIColumns,\r\n  [EModelEndpoint.anthropic]: {\r\n    col1: anthropicCol1,\r\n    col2: anthropicCol2,\r\n  },\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Anthropic}`]: {\r\n    col1: bedrockAnthropicCol1,\r\n    col2: bedrockAnthropicCol2,\r\n  },\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.MistralAI}`]: {\r\n    col1: bedrockMistralCol1,\r\n    col2: bedrockMistralCol2,\r\n  },\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Cohere}`]: {\r\n    col1: bedrockCohereCol1,\r\n    col2: bedrockCohereCol2,\r\n  },\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Meta}`]: bedrockGeneralColumns,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.AI21}`]: bedrockGeneralColumns,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Amazon}`]: bedrockGeneralColumns,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.DeepSeek}`]: bedrockGeneralColumns,\r\n  [EModelEndpoint.google]: {\r\n    col1: googleCol1,\r\n    col2: googleCol2,\r\n  },\r\n};\r\n\r\nexport const agentParamSettings: Record<string, SettingsConfiguration | undefined> = Object.entries(\r\n  presetSettings,\r\n).reduce<Record<string, SettingsConfiguration | undefined>>((acc, [key, value]) => {\r\n  if (value) {\r\n    acc[key] = value.col2;\r\n  }\r\n  return acc;\r\n}, {});\r\n"],"names":["Tools","EToolResources","AnnotationTypes","StepStatus","MessageContentTypes","RunStatus","envVarRegex","extractVariableName","value","match","trim","extractEnvVariable","trimmed","singleMatch","varName","process","env","regex","result","matches","exec","push","fullMatch","index","i","length","_a","envValue","substring","FilePurpose","actionDelimiter","actionDomainSeparator","hostImageIdSuffix","hostImageNamePrefix","AssistantStreamEvents","defaultOrderQuery","order","limit","FEEDBACK_RATINGS","FEEDBACK_REASON_KEYS","FEEDBACK_TAGS","key","label","direction","icon","getTagsForRating","rating","filter","tag","feedbackTagKeySchema","z","enum","feedbackRatingSchema","feedbackSchema","object","text","string","max","optional","toMinimalFeedback","feedback","getTagByKey","find","AuthType","isUUID","uuid","EModelEndpoint","authTypeSchema","nativeEnum","BedrockProviders","paramEndpoints","Set","agents","openAI","bedrock","azureOpenAI","anthropic","custom","google","ImageDetail","ReasoningEffort","ReasoningSummary","Verbosity","getModelKey","endpoint","model","parts","split","provider","part","Object","values","includes","getSettingsKeys","endpointKey","modelKey","concat","isAssistantsEndpoint","_endpoint","toLowerCase","endsWith","assistants","isAgentsEndpoint","isParamEndpoint","endpointType","has","EAgent","imageDetailNumeric","low","auto","high","imageDetailValue","eImageDetailSchema","eReasoningEffortSchema","eReasoningSummarySchema","eVerbositySchema","defaultAssistantFormValues","assistant","id","name","description","instructions","conversation_starters","functions","code_interpreter","image_vision","retrieval","append_current_datetime","defaultAgentFormValues","_b","agent","model_parameters","tools","projectIds","artifacts","isCollaborative","recursion_limit","undefined","execute_code","file_search","web_search","category","support_contact","email","ImageVisionTool","_c","type","function","parameters","properties","required","isImageVisionTool","tool","openAISettings","default","temperature","min","step","top_p","presence_penalty","frequency_penalty","resendFiles","maxContextTokens","max_tokens","imageDetail","googleSettings","maxOutputTokens","topP","topK","thinking","thinkingBudget","LEGACY_ANTHROPIC_MAX_OUTPUT","anthropicSettings","promptCache","reset","modelName","test","set","legacy","agentsSettings","endpointSettings","_d","eModelEndpointSchema","extendedModelEndpointSchema","union","tPluginAuthConfigSchema","authField","tPluginSchema","pluginKey","authConfig","array","authenticated","boolean","chatMenu","isButton","toolkit","tExampleSchema","input","content","output","agentOptionSettings","options","classic","skipCompletion","eAgentOptionsSchema","tAgentOptionsSchema","number","tMessageSchema","messageId","clientId","nullable","conversationId","parentMessageId","responseMessageId","overrideParentMessageId","bg","title","or","literal","sender","generation","isCreatedByUser","error","clientTimestamp","createdAt","Date","toISOString","updatedAt","current","unfinished","searchResult","finish_reason","thread_id","iconURL","coerceNumber","transform","val","parseFloat","DocumentType","lazy","null","record","tConversationSchema","isArchived","user","messages","modelLabel","userLabel","promptPrefix","system","stream","context","examples","tags","file_ids","reasoning_effort","reasoning_summary","verbosity","useResponsesApi","disableStreaming","assistant_id","agent_id","region","maxTokens","additionalModelRequestFields","additional_instructions","presetOverride","unknown","stop","greeting","spec","expiredAt","fileTokenLimit","resendImages","agentOptions","chatGptLabel","tPresetSchema","omit","merge","presetId","defaultPreset","tConvoUpdateSchema","tQueryParamsSchema","pick","tSharedLinkSchema","shareId","isPublic","tConversationTagSchema","_id","count","position","googleBaseSchema","googleSchema","obj","removeNullishValues","catch","googleGenConfigSchema","presencePenalty","frequencyPenalty","stopSequences","thinkingConfig","includeThoughts","strip","gptPluginsBaseSchema","gptPluginsSchema","__assign","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","removeEmptyStrings","newObj","keys","forEach","FileSources","assistantSchema","compactAssistantSchema","agentsBaseSchema","agentsSchema","openAIBaseSchema","openAISchema","compactGoogleSchema","anthropicBaseSchema","anthropicSchema","compactPluginsSchema","tBannerSchema","bannerId","message","displayFrom","displayTo","compactAgentsBaseSchema","compactAgentsSchema","tModelSpecSchema","preset","showIconInMenu","showIconInHeader","authType","specsConfigSchema","enforce","prioritize","list","addedEndpoints","supportsFiles","azureAssistants","excelFileTypes","fullMimeTypesList","__spreadArray","codeInterpreterMimeTypesList","retrievalMimeTypesList","imageExtRegex","excelMimeTypes","textMimeTypes","applicationMimeTypes","imageMimeTypes","audioMimeTypes","defaultOCRMimeTypes","defaultTextMimeTypes","defaultSTTMimeTypes","supportedMimeTypes","codeInterpreterMimeTypes","codeTypeMapping","c","cs","cpp","h","md","php","py","rb","tex","js","sh","ts","tar","zip","yml","yaml","log","tsv","retrievalMimeTypes","megabyte","mbToBytes","mb","defaultSizeLimit","assistantsFileConfig","fileLimit","fileSizeLimit","totalSizeLimit","disabled","fileConfig","endpoints","serverFileSizeLimit","avatarSizeLimit","clientImageResize","enabled","maxWidth","maxHeight","quality","ocr","stt","checkType","fileType","supportedTypes","some","supportedMimeTypesSchema","any","refine","mimeTypes","every","mimeType","RegExp","endpointFileConfigSchema","fileConfigSchema","imageGeneration","percentage","px","convertStringsToRegex","patterns","reduce","acc","pattern","console","mergeFileConfig","dynamic","mergedConfig","dynamicEndpoint","mergedEndpoint","field","FileContext","AuthTypeEnum","AuthorizationTypeEnum","TokenExchangeMethodEnum","checkOpenAIStorage","source","openai","azure","BaseOptionsSchema","startup","iconPath","timeout","initTimeout","serverInstructions","requiresOAuth","oauth","authorization_url","url","token_url","client_id","client_secret","scope","redirect_uri","token_exchange_method","grant_types_supported","token_endpoint_auth_methods_supported","response_types_supported","code_challenge_methods_supported","revocation_endpoint","revocation_endpoint_auth_methods_supported","customUserVars","StdioOptionsSchema","extend","command","args","processedEnv","_i","entries","stderr","WebSocketOptionsSchema","pipe","protocol","URL","SSEOptionsSchema","headers","StreamableHTTPOptionsSchema","MCPOptionsSchema","MCPServersSchema","BASE_URL","browser","baseEl","document","querySelector","getAttribute","slice","SettingsViews","apiBaseUrl","buildQuery","params","query","Array","isArray","map","v","encodeURIComponent","join","String","messagesRoot","rest","__rest","messagesArtifacts","shareRoot","shareMessages","getSharedLinks","pageSize","sortBy","sortDirection","search","cursor","keysEndpoint","conversationsRoot","conversations","updateConversation","presets","prompts","path","version","isAvatar","images","queryParams","URLSearchParams","toString","mcp","files","speech","textToSpeech","getPromptGroup","getPrompt","postPrompt","updatePromptGroup","deletePromptGroup","getRole","roleName","conversationTags","memories","memory","defaultSocialLogins","defaultRetrievalModels","excludedKeys","fileSourceSchema","fileStrategiesSchema","avatar","image","getSchemaDefaults","schema","shape","ZodDefault","_def","defaultValue","fromEntries","Capabilities","AgentCapabilities","modelConfigSchema","deploymentName","azureBaseSchema","apiKey","serverless","instanceName","addParams","dropParams","forcePrompt","baseURL","additionalHeaders","azureGroupSchema","group","models","and","azureGroupConfigsSchema","RateLimitPrefix","defaultAssistantsVersion","baseEndpointSchema","streamRate","titlePrompt","titleModel","titleConvo","titleMethod","titleEndpoint","titlePromptTemplate","bedrockEndpointSchema","availableRegions","assistantEndpointSchema","disableBuilder","pollIntervalMs","timeoutMs","supportedIds","excludedIds","privateAssistants","retrievalModels","capabilities","actions","fetch","userIdQuery","defaultAgentCapabilities","chain","agentsEndpointSchema","recursionLimit","maxRecursionLimit","maxCitations","maxCitationsPerFile","minRelevanceScore","allowedProviders","endpointSchema","safeParse","success","summarize","summaryModel","modelDisplayLabel","customParams","defaultParamsEndpoint","paramDefinitions","strict","customOrder","directEndpoint","titleMessageRole","azureEndpointSchema","groups","plugins","partial","ttsOpenaiSchema","voices","ttsAzureOpenAISchema","apiVersion","ttsElevenLabsSchema","websocketUrl","voice_settings","similarity_boost","stability","style","use_speaker_boost","pronunciation_dictionary_locators","ttsLocalaiSchema","backend","ttsSchema","elevenlabs","localai","sttOpenaiSchema","sttAzureOpenAISchema","sttSchema","speechTab","conversationMode","advancedMode","speechToText","engineSTT","languageSTT","autoTranscribeAudio","decibelValue","autoSendText","engineTTS","voice","languageTTS","automaticPlayback","playbackRate","cacheTTS","EImageOutputType","rateLimitSchema","fileUploads","ipMax","ipWindowInMinutes","userMax","userWindowInMinutes","conversationsImport","tts","OCRStrategy","SearchCategories","SearchProviders","ScraperTypes","RerankerTypes","SafeSearchTypes","termsOfServiceSchema","externalUrl","openNewTab","modalAcceptance","modalTitle","modalContent","mcpServersSchema","placeholder","interfaceSchema","privacyPolicy","termsOfService","customWelcome","mcpServers","endpointsMenu","modelSelect","sidePanel","multiConvo","bookmarks","temporaryChat","temporaryChatRetention","runCode","webSearch","peoplePicker","users","roles","marketplace","use","fileSearch","fileCitations","turnstileOptionsSchema","language","size","turnstileSchema","siteKey","KnownEndpoints","FetchTokenConfig","webSearchSchema","serperApiKey","searxngInstanceUrl","searxngApiKey","firecrawlApiKey","firecrawlApiUrl","jinaApiKey","jinaApiUrl","cohereApiKey","searchProvider","scraperType","rerankerType","scraperTimeout","safeSearch","MODERATE","firecrawlOptions","formats","includeTags","excludeTags","waitFor","maxAge","mobile","skipTlsVerification","blockAds","removeBase64Images","parsePDF","storeInCache","zeroDataRetention","location","country","languages","onlyMainContent","changeTrackingOptions","modes","prompt","ocrSchema","mistralModel","strategy","MISTRAL_OCR","balanceSchema","startBalance","autoRefillEnabled","refillIntervalValue","refillIntervalUnit","refillAmount","transactionsSchema","memorySchema","validKeys","tokenLimit","charLimit","personalize","messageWindowSize","customEndpointsSchema","configSchema","cache","secureImageLinks","imageOutputType","PNG","includedTools","filteredTools","interface","turnstile","fileStrategy","local","fileStrategies","allowedDomains","registration","socialLogins","balance","transactions","rateLimits","modelSpecs","all","gptPlugins","data","getConfigDefaults","VisionModes","defaultEndpoints","chatGPTBrowser","alternateName","ollama","deepseek","xai","vercel","sharedOpenAIModels","bedrockModels","defaultModels","openAIModels","initialModelsConfig","initial","str","EndpointURLs","modularEndpoints","supportsBalanceCheck","visionModels","validateVisionModel","additionalModels","availableModels","visionModel","InfiniteCollections","Time","CacheKeys","ViolationTypes","ErrorTypes","AuthKeys","ImageDetailCost","SettingsTabValues","STTProviders","TTSProviders","Constants","LocalStorageKeys","ForkOptions","CohereConstants","SystemCategories","imageGenTools","ContentTypes","StepTypes","ToolCallTypes","providerEndpointMap","specialVariables","current_date","current_user","iso_datetime","current_datetime","bedrockInputSchema","s.tConversationSchema","_obj","budget_tokens","s.removeNullishValues","bedrockInputParser","catchall","knownKeys","additionalFields","typedData","anthropic_beta","bedrockOutputParser","updatedData","Math","floor","configureThinking","endpointSchemas","getEnabledEndpoints","endpointsEnv","ENDPOINTS","enabledEndpoints","orderEndpointsConfig","endpointsConfig","endpointKeys","defaultCustomIndex","indexOf","accumulatedConfig","currentEndpointKey","isCustom","errorsToString","errors","getFirstDefinedValue","possibleValues","returnValue","possibleValues_1","getNonEmptyValue","possibleValues_2","parseConvo","conversation","Error","convo","parse","secondaryModels","extractGPTVersion","modelStr","gptMatch","suffix","extractOmniVersion","omniMatch","getResponseSender","endpointOption","_mdl","_cgl","_ml","compactEndpointSchemas","parseCompactConvo","parseTextParts","contentParts","skipReasoning","contentParts_1","TEXT","textValue","THINK","think","SEPARATORS","findLastSeparatorIndex","separators","lastIndex","separators_1","separator","lastIndexOf","replaceSpecialVars","currentDate","dayjs","format","dayNumber","day","combinedDate","replace","currentDatetime","isoDatetime","ArtifactModes","deprecatedAzureVariables","conflictingAzureVariables","validateAzureGroups","configs","isValid","modelNames","modelGroupMap","groupMap","groupName","groupDeploymentName","groupVersion","modelDeploymentName","modelVersion","mapModelToAzureConfig","modelConfig","groupConfig","result_1","azureOptions","azureOpenAIApiVersion","azureOpenAIApiKey","apiKeyValue","modelDetails","azureOpenAIApiInstanceName","azureOpenAIApiDeploymentName","mapGroupToAzureConfig","firstModelName","buildTree","fileMap","messageMap","rootMessages","childrenCount","parentId","extendedMessage","children","depth","siblingIndex","file","file_id","parentMessage","ComponentTypes","SettingTypes","OptionTypes","utils","accordian","alertDialog","alert","badge","breadcrumb","button","calendar","card","carousel","checkbox","collapsible","dialog","drawer","dropdownMenu","hoverCard","menuBar","navigationMenu","pagination","popover","progress","radioGroup","select","skeleton","slider","switchComponent","table","tabs","textarea","toast","toaster","toggleGroup","toggle","tooltip","useToast","shadcnComponents","essentialShadcnComponents","requiredSettingFields","generateDynamicSchema","settings","schemaFields","settings_1","setting","range","minText","maxText","minTags","maxTags","Number","Boolean","Enum","warn","ZodArray","ZodTypeToSettingType","ZodString","ZodNumber","ZodBoolean","validateSettingDefinitions","columnsSet","settings_2","columns","code","ZodIssueCode","add","next","settings_3","requiredSettingFields_1","settingTypes","component","Tags","Input","Textarea","Slider","includeInput","round","Checkbox","Switch","Dropdown","Combobox","columnSpan","optionType","Custom","conversationSchema","zodType","typeName","isNaN","enumMappings","option","ZodError","PermissionTypes","Permissions","generateOpenAISchema","customOpenAI","defaults","generateGoogleSchema","customGoogle","SystemRoles","promptPermissionsSchema","SHARED_GLOBAL","USE","CREATE","bookmarkPermissionsSchema","memoryPermissionsSchema","UPDATE","READ","OPT_OUT","agentPermissionsSchema","multiConvoPermissionsSchema","temporaryChatPermissionsSchema","runCodePermissionsSchema","webSearchPermissionsSchema","peoplePickerPermissionsSchema","VIEW_USERS","VIEW_GROUPS","VIEW_ROLES","marketplacePermissionsSchema","fileSearchPermissionsSchema","fileCitationsPermissionsSchema","permissionsSchema","PROMPTS","BOOKMARKS","MEMORIES","AGENTS","MULTI_CONVO","TEMPORARY_CHAT","RUN_CODE","WEB_SEARCH","PEOPLE_PICKER","MARKETPLACE","FILE_SEARCH","FILE_CITATIONS","DATE_RANGE","PrincipalType","PrincipalModel","ResourceType","PermissionBits","AccessRoleIds","roleSchema","permissions","roleDefaults","ADMIN","USER","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_0","_1","_2","_3","_4","_5","_6","QueryKeys","principalSchema","idOnTheSource","accessRoleId","memberCount","accessRoleSchema","resourceType","AGENT","permBits","permissionEntrySchema","principalType","principalId","principalName","role","grantedBy","grantedAt","inheritedFrom","resourcePermissionsResponseSchema","resourceId","updateResourcePermissionsRequestSchema","updated","removed","public","publicAccessRoleId","updateResourcePermissionsResponseSchema","results","principals","getResourcePermissionsResponseSchema","effectivePermissionsResponseSchema","permissionBits","permBitsToAccessLevel","DELETE","EDIT","VIEW","accessRoleToPermBits","AGENT_VIEWER","AGENT_EDITOR","AGENT_OWNER","hasPermissions","requiredPermission","MutationKeys","DynamicQueryKeys","agentFiles","agentId","setAcceptLanguageHeader","axios","common","setTokenHeader","token","_post","post","JSON","stringify","sent","isRefreshing","failedQueue","refreshToken","retry","endpoints.refreshToken","dispatchTokenUpdatedEvent","window","dispatchEvent","CustomEvent","detail","processQueue","prom","reject","resolve","interceptors","response","__awaiter","originalRequest","config","Promise","status","_retry","err_1","href","err_2","request","get","getResponse","postMultiPart","formData","postTTS","responseType","put","delete","deleteWithOptions","patch","groupId","payload","endpoints.addPromptToGroup","endpoints.addTagToConversation","endpoints.updateConversation","arg","toolId","toolParams","endpoints.agents","serverName","endpoints.cancelMCPOAuth","endpoints.assistants","endpoints.conversationTags","endpoints.memories","endpoints.presets","endpoints.postPrompt","endpoints.createSharedLink","action_id","endpoints.files","endpoints.memory","endpoints.deletePrompt","endpoints.deletePromptGroup","endpoints.shareMessages","endpoints.messagesArtifacts","endpoints.getAccessRoles","endpoints.agentFiles","s.isAssistantsEndpoint","config.defaultAssistantsVersion","Accept","endpoints.conversationById","endpoints.conversations","endpoints.apiBaseUrl","endpoints.getEffectivePermissions","userId","scopes","endpoints.mcpAuthValues","endpoints.mcpServerConnectionStatus","endpoints.mcp","config.Constants","NEW_CONVO","PENDING_CONVO","endpoints.messages","endpoints.getPrompt","endpoints.getPromptGroup","cleanedFilter","endpoints.getPromptGroupsWithFilters","endpoints.getPromptsWithFilters","variables","skip","endpoints.getResourcePermissions","endpoints.getRole","endpoints.getSharedLink","endpoints.getSharedLinks","endpoints.mcpReinitialize","version_index","endpoints.revertAgentVersion","endpoints.revokeUserKey","q","types","endpoints.searchPrincipals","body","updates","endpoints.feedback","originalKey","preferences","endpoints.updatePromptGroup","endpoints.updateResourcePermissions","endpoints.updateSharedLink","endpoints.images","signal","requestConfig","endpoints.userKeyQuery","sha1","crypto","createHash","update","digest","createURL","domain","cleanDomain","cleanPath","fullURL","schemaTypeHandlers","stringSchema","minLength","maxLength","numberSchema","minimum","maximum","integer","int","items","zodSchema","openAPISchemaToZod","describe","FunctionSignature","this","prototype","toObjectTool","additionalProperties","RequestConfig","basePath","method","operation","isConsequential","contentType","parameterLocations","RequestExecutor","authHeaders","setParams","operationHash","paramPattern","setAuth","metadata","auth","authorization_type","custom_auth_header","client_url","api_key","oauth_client_id","oauth_client_secret","oauth_token_expires_at","oauth_access_token","isApiKey","ServiceHttp","isOAuth","OAuth","Basic","basicToken","Buffer","from","Bearer","now","authToken","execute","_axios","create","bodyParams","loc","assign","getConfig","ActionRequest","defineProperty","createExecutor","executor","resolveRef","components","resolved","refPath_1","$ref","segment","sanitizeOperationId","openapiToFunction","openapiSpec","generateZodSchemas","functionSignatures","requestBuilders","zodSchemas","baseUrl","servers","paths","methods","paramLocations","operationObj","defaultOperationId","operationId","summary","isStrict","parametersSchema","resolvedParam","paramName","paramSchema","in","requestBody","resolvedSchema","apply","functionSignature","actionRequest","validateAndParseOpenAPISpec","specString","parsedSpec","load","schemas","httpMethod","responses","statusCode","refName","pop","createPayload","submission","isEdited","userMessage","isContinued","isTemporary","isRegenerate","editedContent","ephemeralAgent","s.tConvoUpdateSchema","server","s.EModelEndpoint","baseDefinitions","labelCode","selectPlaceholder","searchPlaceholder","searchPlaceholderCode","selectPlaceholderCode","descriptionCode","placeholderCode","createDefinition","base","overrides","librechat","showDefault","openAIParams","none","minimal","medium","concise","detailed","mistral","cohere","meta","googleConfig","googleCol1","googleCol2","openAICol1","openAICol2","anthropicConfig","anthropicCol1","anthropicCol2","bedrockAnthropic","bedrockMistral","bedrockCohere","bedrockGeneral","bedrockAnthropicCol1","bedrockAnthropicCol2","bedrockMistralCol1","bedrockMistralCol2","bedrockCohereCol1","bedrockCohereCol2","bedrockGeneralCol1","bedrockGeneralCol2","paramSettings","Anthropic","MistralAI","Cohere","Meta","AI21","Amazon","DeepSeek","openAIColumns","col1","col2","bedrockGeneralColumns","presetSettings","agentParamSettings"],"mappings":"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"}