{"version":3,"file":"index.js","sources":["../src/utils.ts","../src/types/assistants.ts","../src/feedback.ts","../src/schemas.ts","../src/types/files.ts","../src/models.ts","../src/file-config.ts","../src/types/agents.ts","../src/mcp.ts","../src/api-endpoints.ts","../src/config.ts","../src/types/runs.ts","../src/bedrock.ts","../src/parsers.ts","../src/azure.ts","../src/artifacts.ts","../src/generate.ts","../src/permissions.ts","../src/roles.ts","../src/types/web.ts","../src/accessPermissions.ts","../src/keys.ts","../src/headers-helpers.ts","../src/request.ts","../src/data-service.ts","../src/actions.ts","../src/parameterSettings.ts","../src/messages.ts","../src/createPayload.ts"],"sourcesContent":["export const envVarRegex = /^\\${(.+)}$/;\r\n\r\n/** Extracts the environment variable name from a template literal string */\r\nexport function extractVariableName(value: string): string | null {\r\n  if (!value) {\r\n    return null;\r\n  }\r\n\r\n  const match = value.trim().match(envVarRegex);\r\n  return match ? match[1] : null;\r\n}\r\n\r\n/** Extracts the value of an environment variable from a string. */\r\nexport function extractEnvVariable(value: string) {\r\n  if (!value) {\r\n    return value;\r\n  }\r\n\r\n  // Trim the input\r\n  const trimmed = value.trim();\r\n\r\n  // Special case: if it's just a single environment variable\r\n  const singleMatch = trimmed.match(envVarRegex);\r\n  if (singleMatch) {\r\n    const varName = singleMatch[1];\r\n    return process.env[varName] || trimmed;\r\n  }\r\n\r\n  // For multiple variables, process them using a regex loop\r\n  const regex = /\\${([^}]+)}/g;\r\n  let result = trimmed;\r\n\r\n  // First collect all matches and their positions\r\n  const matches = [];\r\n  let match;\r\n  while ((match = regex.exec(trimmed)) !== null) {\r\n    matches.push({\r\n      fullMatch: match[0],\r\n      varName: match[1],\r\n      index: match.index,\r\n    });\r\n  }\r\n\r\n  // Process matches in reverse order to avoid position shifts\r\n  for (let i = matches.length - 1; i >= 0; i--) {\r\n    const { fullMatch, varName, index } = matches[i];\r\n    const envValue = process.env[varName] || fullMatch;\r\n\r\n    // Replace at exact position\r\n    result = result.substring(0, index) + envValue + result.substring(index + fullMatch.length);\r\n  }\r\n\r\n  return result;\r\n}\r\n","import type { OpenAPIV3 } from 'openapi-types';\r\nimport type { AssistantsEndpoint, AgentProvider } from 'src/schemas';\r\nimport type { ContentTypes } from './runs';\r\nimport type { Agents } from './agents';\r\nimport type { TFile } from './files';\r\nimport { ArtifactModes } from 'src/artifacts';\r\n\r\nexport type Schema = OpenAPIV3.SchemaObject & { description?: string };\r\nexport type Reference = OpenAPIV3.ReferenceObject & { description?: string };\r\n\r\nexport type Metadata = {\r\n  avatar?: string;\r\n  author?: string;\r\n} & {\r\n  [key: string]: unknown;\r\n};\r\n\r\nexport enum Tools {\r\n  execute_code = 'execute_code',\r\n  code_interpreter = 'code_interpreter',\r\n  file_search = 'file_search',\r\n  web_search = 'web_search',\r\n  retrieval = 'retrieval',\r\n  function = 'function',\r\n  memory = 'memory',\r\n  ui_resources = 'ui_resources',\r\n}\r\n\r\nexport enum EToolResources {\r\n  code_interpreter = 'code_interpreter',\r\n  execute_code = 'execute_code',\r\n  file_search = 'file_search',\r\n  image_edit = 'image_edit',\r\n  context = 'context',\r\n  ocr = 'ocr',\r\n}\r\n\r\nexport type Tool = {\r\n  [type: string]: Tools;\r\n};\r\n\r\nexport type FunctionTool = {\r\n  type: Tools;\r\n  function?: {\r\n    description: string;\r\n    name: string;\r\n    parameters: Record<string, unknown>;\r\n    strict?: boolean;\r\n    additionalProperties?: boolean; // must be false if strict is true https://platform.openai.com/docs/guides/structured-outputs/some-type-specific-keywords-are-not-yet-supported\r\n  };\r\n};\r\n\r\n/**\r\n * A set of resources that are used by the assistant's tools. The resources are\r\n * specific to the type of tool. For example, the `code_interpreter` tool requires\r\n * a list of file IDs, while the `file_search` tool requires a list of vector store\r\n * IDs.\r\n */\r\nexport interface ToolResources {\r\n  code_interpreter?: CodeInterpreterResource;\r\n  file_search?: FileSearchResource;\r\n}\r\nexport interface CodeInterpreterResource {\r\n  /**\r\n   * A list of [file](https://platform.openai.com/docs/api-reference/files) IDs made\r\n   * available to the `code_interpreter`` tool. There can be a maximum of 20 files\r\n   * associated with the tool.\r\n   */\r\n  file_ids?: Array<string>;\r\n}\r\n\r\nexport interface FileSearchResource {\r\n  /**\r\n   * The ID of the\r\n   * [vector store](https://platform.openai.com/docs/api-reference/vector-stores/object)\r\n   * attached to this assistant. There can be a maximum of 1 vector store attached to\r\n   * the assistant.\r\n   */\r\n  vector_store_ids?: Array<string>;\r\n}\r\n\r\n/* Assistant types */\r\n\r\nexport type Assistant = {\r\n  id: string;\r\n  created_at: number;\r\n  description: string | null;\r\n  file_ids?: string[];\r\n  instructions: string | null;\r\n  conversation_starters?: string[];\r\n  metadata: Metadata | null;\r\n  model: string;\r\n  name: string | null;\r\n  object: string;\r\n  tools?: FunctionTool[];\r\n  tool_resources?: ToolResources;\r\n};\r\n\r\nexport type TAssistantsMap = Record<AssistantsEndpoint, Record<string, Assistant>>;\r\n\r\nexport type AssistantCreateParams = {\r\n  model: string;\r\n  description?: string | null;\r\n  file_ids?: string[];\r\n  instructions?: string | null;\r\n  conversation_starters?: string[];\r\n  metadata?: Metadata | null;\r\n  name?: string | null;\r\n  tools?: Array<FunctionTool | string>;\r\n  endpoint: AssistantsEndpoint;\r\n  version: number | string;\r\n  append_current_datetime?: boolean;\r\n};\r\n\r\nexport type AssistantUpdateParams = {\r\n  model?: string;\r\n  description?: string | null;\r\n  file_ids?: string[];\r\n  instructions?: string | null;\r\n  conversation_starters?: string[] | null;\r\n  metadata?: Metadata | null;\r\n  name?: string | null;\r\n  tools?: Array<FunctionTool | string>;\r\n  tool_resources?: ToolResources;\r\n  endpoint: AssistantsEndpoint;\r\n  append_current_datetime?: boolean;\r\n};\r\n\r\nexport type AssistantListParams = {\r\n  limit?: number;\r\n  before?: string | null;\r\n  after?: string | null;\r\n  order?: 'asc' | 'desc';\r\n  endpoint: AssistantsEndpoint;\r\n};\r\n\r\nexport type AssistantListResponse = {\r\n  object: string;\r\n  data: Assistant[];\r\n  first_id: string;\r\n  last_id: string;\r\n  has_more: boolean;\r\n};\r\n\r\nexport type File = {\r\n  file_id: string;\r\n  id?: string;\r\n  temp_file_id?: string;\r\n  bytes: number;\r\n  created_at: number;\r\n  filename: string;\r\n  object: string;\r\n  purpose: 'fine-tune' | 'fine-tune-results' | 'assistants' | 'assistants_output';\r\n};\r\n\r\n/* Agent types */\r\n\r\nexport type AgentParameterValue = number | string | null;\r\n\r\nexport type AgentModelParameters = {\r\n  model?: string;\r\n  temperature: AgentParameterValue;\r\n  maxContextTokens: AgentParameterValue;\r\n  max_context_tokens: AgentParameterValue;\r\n  max_output_tokens: AgentParameterValue;\r\n  top_p: AgentParameterValue;\r\n  frequency_penalty: AgentParameterValue;\r\n  presence_penalty: AgentParameterValue;\r\n};\r\n\r\nexport interface AgentBaseResource {\r\n  /**\r\n   * A list of file IDs made available to the tool.\r\n   */\r\n  file_ids?: Array<string>;\r\n  /**\r\n   * A list of files already fetched.\r\n   */\r\n  files?: Array<TFile>;\r\n}\r\n\r\nexport interface AgentToolResources {\r\n  [EToolResources.image_edit]?: AgentBaseResource;\r\n  [EToolResources.execute_code]?: ExecuteCodeResource;\r\n  [EToolResources.file_search]?: AgentFileResource;\r\n  [EToolResources.context]?: AgentBaseResource;\r\n  /** @deprecated Use context instead */\r\n  [EToolResources.ocr]?: AgentBaseResource;\r\n}\r\n/**\r\n * A resource for the execute_code tool.\r\n * Contains file IDs made available to the tool (max 20 files) and already fetched files.\r\n */\r\nexport type ExecuteCodeResource = AgentBaseResource;\r\n\r\nexport interface AgentFileResource extends AgentBaseResource {\r\n  /**\r\n   * The ID of the vector store attached to this agent. There\r\n   * can be a maximum of 1 vector store attached to the agent.\r\n   */\r\n  vector_store_ids?: Array<string>;\r\n}\r\nexport type SupportContact = {\r\n  name?: string;\r\n  email?: string;\r\n};\r\n\r\nexport type Agent = {\r\n  _id?: string;\r\n  id: string;\r\n  name: string | null;\r\n  author?: string | null;\r\n  /** The original custom endpoint name, lowercased */\r\n  endpoint?: string | null;\r\n  authorName?: string | null;\r\n  description: string | null;\r\n  created_at: number;\r\n  avatar: AgentAvatar | null;\r\n  instructions: string | null;\r\n  additional_instructions?: string | null;\r\n  tools?: string[];\r\n  projectIds?: string[];\r\n  tool_kwargs?: Record<string, unknown>;\r\n  metadata?: Record<string, unknown>;\r\n  provider: AgentProvider;\r\n  model: string | null;\r\n  model_parameters: AgentModelParameters;\r\n  conversation_starters?: string[];\r\n  /** @deprecated Use ACL permissions instead */\r\n  isCollaborative?: boolean;\r\n  tool_resources?: AgentToolResources;\r\n  agent_ids?: string[];\r\n  end_after_tools?: boolean;\r\n  hide_sequential_outputs?: boolean;\r\n  artifacts?: ArtifactModes;\r\n  recursion_limit?: number;\r\n  isPublic?: boolean;\r\n  version?: number;\r\n  category?: string;\r\n  support_contact?: SupportContact;\r\n};\r\n\r\nexport type TAgentsMap = Record<string, Agent | undefined>;\r\n\r\nexport type AgentCreateParams = {\r\n  name?: string | null;\r\n  description?: string | null;\r\n  avatar?: AgentAvatar | null;\r\n  file_ids?: string[];\r\n  instructions?: string | null;\r\n  tools?: Array<FunctionTool | string>;\r\n  provider: AgentProvider;\r\n  model: string | null;\r\n  model_parameters: AgentModelParameters;\r\n} & Pick<\r\n  Agent,\r\n  | 'agent_ids'\r\n  | 'end_after_tools'\r\n  | 'hide_sequential_outputs'\r\n  | 'artifacts'\r\n  | 'recursion_limit'\r\n  | 'category'\r\n  | 'support_contact'\r\n>;\r\n\r\nexport type AgentUpdateParams = {\r\n  name?: string | null;\r\n  description?: string | null;\r\n  avatar?: AgentAvatar | null;\r\n  file_ids?: string[];\r\n  instructions?: string | null;\r\n  tools?: Array<FunctionTool | string>;\r\n  tool_resources?: ToolResources;\r\n  provider?: AgentProvider;\r\n  model?: string | null;\r\n  model_parameters?: AgentModelParameters;\r\n  projectIds?: string[];\r\n  removeProjectIds?: string[];\r\n  isCollaborative?: boolean;\r\n} & Pick<\r\n  Agent,\r\n  | 'agent_ids'\r\n  | 'end_after_tools'\r\n  | 'hide_sequential_outputs'\r\n  | 'artifacts'\r\n  | 'recursion_limit'\r\n  | 'category'\r\n  | 'support_contact'\r\n>;\r\n\r\nexport type AgentListParams = {\r\n  limit?: number;\r\n  requiredPermission: number;\r\n  category?: string;\r\n  search?: string;\r\n  cursor?: string;\r\n  promoted?: 0 | 1;\r\n};\r\n\r\nexport type AgentListResponse = {\r\n  object: string;\r\n  data: Agent[];\r\n  first_id: string;\r\n  last_id: string;\r\n  has_more: boolean;\r\n  after?: string;\r\n};\r\n\r\nexport type AgentFile = {\r\n  file_id: string;\r\n  id?: string;\r\n  temp_file_id?: string;\r\n  bytes: number;\r\n  created_at: number;\r\n  filename: string;\r\n  object: string;\r\n  purpose: 'fine-tune' | 'fine-tune-results' | 'agents' | 'agents_output';\r\n};\r\n\r\n/**\r\n * Details of the Code Interpreter tool call the run step was involved in.\r\n * Includes the tool call ID, the code interpreter definition, and the type of tool call.\r\n */\r\nexport type CodeToolCall = {\r\n  id: string; // The ID of the tool call.\r\n  code_interpreter: {\r\n    input: string; // The input to the Code Interpreter tool call.\r\n    outputs: Array<Record<string, unknown>>; // The outputs from the Code Interpreter tool call.\r\n  };\r\n  type: 'code_interpreter'; // The type of tool call, always 'code_interpreter'.\r\n};\r\n\r\n/**\r\n * Details of a Function tool call the run step was involved in.\r\n * Includes the tool call ID, the function definition, and the type of tool call.\r\n */\r\nexport type FunctionToolCall = {\r\n  id: string; // The ID of the tool call object.\r\n  function: {\r\n    arguments: string; // The arguments passed to the function.\r\n    name: string; // The name of the function.\r\n    output: string | null; // The output of the function, null if not submitted.\r\n  };\r\n  type: 'function'; // The type of tool call, always 'function'.\r\n};\r\n\r\n/**\r\n * Details of a Retrieval tool call the run step was involved in.\r\n * Includes the tool call ID and the type of tool call.\r\n */\r\nexport type RetrievalToolCall = {\r\n  id: string; // The ID of the tool call object.\r\n  retrieval: unknown; // An empty object for now.\r\n  type: 'retrieval'; // The type of tool call, always 'retrieval'.\r\n};\r\n\r\n/**\r\n * Details of a Retrieval tool call the run step was involved in.\r\n * Includes the tool call ID and the type of tool call.\r\n */\r\nexport type FileSearchToolCall = {\r\n  id: string; // The ID of the tool call object.\r\n  file_search: unknown; // An empty object for now.\r\n  type: 'file_search'; // The type of tool call, always 'retrieval'.\r\n};\r\n\r\n/**\r\n * Details of the tool calls involved in a run step.\r\n * Can be associated with one of three types of tools: `code_interpreter`, `retrieval`, or `function`.\r\n */\r\nexport type ToolCallsStepDetails = {\r\n  tool_calls: Array<CodeToolCall | RetrievalToolCall | FileSearchToolCall | FunctionToolCall>; // An array of tool calls the run step was involved in.\r\n  type: 'tool_calls'; // Always 'tool_calls'.\r\n};\r\n\r\nexport type ImageFile = TFile & {\r\n  /**\r\n   * The [File](https://platform.openai.com/docs/api-reference/files) ID of the image\r\n   * in the message content.\r\n   */\r\n  file_id: string;\r\n  filename: string;\r\n  filepath: string;\r\n  height: number;\r\n  width: number;\r\n  /**\r\n   * Prompt used to generate the image if applicable.\r\n   */\r\n  prompt?: string;\r\n  /**\r\n   * Additional metadata used to generate or about the image/tool_call.\r\n   */\r\n  metadata?: Record<string, unknown>;\r\n};\r\n\r\n// FileCitation.ts\r\nexport type FileCitation = {\r\n  end_index: number;\r\n  file_citation: FileCitationDetails;\r\n  start_index: number;\r\n  text: string;\r\n  type: 'file_citation';\r\n};\r\n\r\nexport type FileCitationDetails = {\r\n  file_id: string;\r\n  quote: string;\r\n};\r\n\r\nexport type FilePath = {\r\n  end_index: number;\r\n  file_path: FilePathDetails;\r\n  start_index: number;\r\n  text: string;\r\n  type: 'file_path';\r\n};\r\n\r\nexport type FilePathDetails = {\r\n  file_id: string;\r\n};\r\n\r\nexport type Text = {\r\n  annotations?: Array<FileCitation | FilePath>;\r\n  value: string;\r\n};\r\n\r\nexport enum AnnotationTypes {\r\n  FILE_CITATION = 'file_citation',\r\n  FILE_PATH = 'file_path',\r\n}\r\n\r\nexport enum StepStatus {\r\n  IN_PROGRESS = 'in_progress',\r\n  CANCELLED = 'cancelled',\r\n  FAILED = 'failed',\r\n  COMPLETED = 'completed',\r\n  EXPIRED = 'expired',\r\n}\r\n\r\nexport enum MessageContentTypes {\r\n  TEXT = 'text',\r\n  IMAGE_FILE = 'image_file',\r\n}\r\n\r\n//enum for RunStatus\r\n// The status of the run: queued, in_progress, requires_action, cancelling, cancelled, failed, completed, or expired.\r\nexport enum RunStatus {\r\n  QUEUED = 'queued',\r\n  IN_PROGRESS = 'in_progress',\r\n  REQUIRES_ACTION = 'requires_action',\r\n  CANCELLING = 'cancelling',\r\n  CANCELLED = 'cancelled',\r\n  FAILED = 'failed',\r\n  COMPLETED = 'completed',\r\n  EXPIRED = 'expired',\r\n}\r\n\r\nexport type PartMetadata = {\r\n  progress?: number;\r\n  asset_pointer?: string;\r\n  status?: string;\r\n  action?: boolean;\r\n  auth?: string;\r\n  expires_at?: number;\r\n};\r\n\r\nexport type ContentPart = (\r\n  | CodeToolCall\r\n  | RetrievalToolCall\r\n  | FileSearchToolCall\r\n  | FunctionToolCall\r\n  | Agents.AgentToolCall\r\n  | ImageFile\r\n  | Text\r\n) &\r\n  PartMetadata;\r\n\r\nexport type TMessageContentParts =\r\n  | { type: ContentTypes.ERROR; text?: string | (Text & PartMetadata); error?: string }\r\n  | { type: ContentTypes.THINK; think: string | (Text & PartMetadata) }\r\n  | { type: ContentTypes.TEXT; text: string | (Text & PartMetadata); tool_call_ids?: string[] }\r\n  | {\r\n      type: ContentTypes.TOOL_CALL;\r\n      tool_call: (\r\n        | CodeToolCall\r\n        | RetrievalToolCall\r\n        | FileSearchToolCall\r\n        | FunctionToolCall\r\n        | Agents.AgentToolCall\r\n      ) &\r\n        PartMetadata;\r\n    }\r\n  | { type: ContentTypes.IMAGE_FILE; image_file: ImageFile & PartMetadata }\r\n  | Agents.AgentUpdate\r\n  | Agents.MessageContentImageUrl;\r\n\r\nexport type StreamContentData = TMessageContentParts & {\r\n  /** The index of the current content part */\r\n  index: number;\r\n  /** The current text content was already served but edited to replace elements therein */\r\n  edited?: boolean;\r\n};\r\n\r\nexport type TContentData = StreamContentData & {\r\n  messageId: string;\r\n  conversationId: string;\r\n  userMessageId: string;\r\n  thread_id: string;\r\n  stream?: boolean;\r\n};\r\n\r\nexport const actionDelimiter = '_action_';\r\nexport const actionDomainSeparator = '---';\r\nexport const hostImageIdSuffix = '_host_copy';\r\nexport const hostImageNamePrefix = 'host_copy_';\r\n\r\nexport type AssistantAvatar = {\r\n  filepath: string;\r\n  source: string;\r\n};\r\n\r\nexport type AssistantDocument = {\r\n  user: string;\r\n  assistant_id: string;\r\n  conversation_starters?: string[];\r\n  avatar?: AssistantAvatar;\r\n  access_level?: number;\r\n  file_ids?: string[];\r\n  actions?: string[];\r\n  createdAt?: Date;\r\n  updatedAt?: Date;\r\n  append_current_datetime?: boolean;\r\n};\r\n\r\n/* Agent types */\r\n\r\nexport type AgentAvatar = {\r\n  filepath: string;\r\n  source: string;\r\n};\r\n\r\nexport enum FilePurpose {\r\n  Vision = 'vision',\r\n  FineTune = 'fine-tune',\r\n  FineTuneResults = 'fine-tune-results',\r\n  Assistants = 'assistants',\r\n  AssistantsOutput = 'assistants_output',\r\n}\r\n\r\nexport const defaultOrderQuery: {\r\n  order: 'desc';\r\n  limit: 100;\r\n} = {\r\n  order: 'desc',\r\n  limit: 100,\r\n};\r\n\r\nexport enum AssistantStreamEvents {\r\n  ThreadCreated = 'thread.created',\r\n  ThreadRunCreated = 'thread.run.created',\r\n  ThreadRunQueued = 'thread.run.queued',\r\n  ThreadRunInProgress = 'thread.run.in_progress',\r\n  ThreadRunRequiresAction = 'thread.run.requires_action',\r\n  ThreadRunCompleted = 'thread.run.completed',\r\n  ThreadRunFailed = 'thread.run.failed',\r\n  ThreadRunCancelling = 'thread.run.cancelling',\r\n  ThreadRunCancelled = 'thread.run.cancelled',\r\n  ThreadRunExpired = 'thread.run.expired',\r\n  ThreadRunStepCreated = 'thread.run.step.created',\r\n  ThreadRunStepInProgress = 'thread.run.step.in_progress',\r\n  ThreadRunStepCompleted = 'thread.run.step.completed',\r\n  ThreadRunStepFailed = 'thread.run.step.failed',\r\n  ThreadRunStepCancelled = 'thread.run.step.cancelled',\r\n  ThreadRunStepExpired = 'thread.run.step.expired',\r\n  ThreadRunStepDelta = 'thread.run.step.delta',\r\n  ThreadMessageCreated = 'thread.message.created',\r\n  ThreadMessageInProgress = 'thread.message.in_progress',\r\n  ThreadMessageCompleted = 'thread.message.completed',\r\n  ThreadMessageIncomplete = 'thread.message.incomplete',\r\n  ThreadMessageDelta = 'thread.message.delta',\r\n  ErrorEvent = 'error',\r\n}\r\n","import { z } from 'zod';\r\n\r\nexport type TFeedbackRating = 'thumbsUp' | 'thumbsDown';\r\nexport const FEEDBACK_RATINGS = ['thumbsUp', 'thumbsDown'] as const;\r\n\r\nexport const FEEDBACK_REASON_KEYS = [\r\n  // Down\r\n  'not_matched',\r\n  'inaccurate',\r\n  'bad_style',\r\n  'missing_image',\r\n  'unjustified_refusal',\r\n  'not_helpful',\r\n  'other',\r\n  // Up\r\n  'accurate_reliable',\r\n  'creative_solution',\r\n  'clear_well_written',\r\n  'attention_to_detail',\r\n] as const;\r\n\r\nexport type TFeedbackTagKey = (typeof FEEDBACK_REASON_KEYS)[number];\r\n\r\nexport interface TFeedbackTag {\r\n  key: TFeedbackTagKey;\r\n  label: string;\r\n  direction: TFeedbackRating;\r\n  icon: string;\r\n}\r\n\r\n// --- Tag Registry ---\r\nexport const FEEDBACK_TAGS: TFeedbackTag[] = [\r\n  // Thumbs Down\r\n  {\r\n    key: 'not_matched',\r\n    label: 'com_ui_feedback_tag_not_matched',\r\n    direction: 'thumbsDown',\r\n    icon: 'AlertCircle',\r\n  },\r\n  {\r\n    key: 'inaccurate',\r\n    label: 'com_ui_feedback_tag_inaccurate',\r\n    direction: 'thumbsDown',\r\n    icon: 'AlertCircle',\r\n  },\r\n  {\r\n    key: 'bad_style',\r\n    label: 'com_ui_feedback_tag_bad_style',\r\n    direction: 'thumbsDown',\r\n    icon: 'PenTool',\r\n  },\r\n  {\r\n    key: 'missing_image',\r\n    label: 'com_ui_feedback_tag_missing_image',\r\n    direction: 'thumbsDown',\r\n    icon: 'ImageOff',\r\n  },\r\n  {\r\n    key: 'unjustified_refusal',\r\n    label: 'com_ui_feedback_tag_unjustified_refusal',\r\n    direction: 'thumbsDown',\r\n    icon: 'Ban',\r\n  },\r\n  {\r\n    key: 'not_helpful',\r\n    label: 'com_ui_feedback_tag_not_helpful',\r\n    direction: 'thumbsDown',\r\n    icon: 'ThumbsDown',\r\n  },\r\n  {\r\n    key: 'other',\r\n    label: 'com_ui_feedback_tag_other',\r\n    direction: 'thumbsDown',\r\n    icon: 'HelpCircle',\r\n  },\r\n  // Thumbs Up\r\n  {\r\n    key: 'accurate_reliable',\r\n    label: 'com_ui_feedback_tag_accurate_reliable',\r\n    direction: 'thumbsUp',\r\n    icon: 'CheckCircle',\r\n  },\r\n  {\r\n    key: 'creative_solution',\r\n    label: 'com_ui_feedback_tag_creative_solution',\r\n    direction: 'thumbsUp',\r\n    icon: 'Lightbulb',\r\n  },\r\n  {\r\n    key: 'clear_well_written',\r\n    label: 'com_ui_feedback_tag_clear_well_written',\r\n    direction: 'thumbsUp',\r\n    icon: 'PenTool',\r\n  },\r\n  {\r\n    key: 'attention_to_detail',\r\n    label: 'com_ui_feedback_tag_attention_to_detail',\r\n    direction: 'thumbsUp',\r\n    icon: 'Search',\r\n  },\r\n];\r\n\r\nexport function getTagsForRating(rating: TFeedbackRating): TFeedbackTag[] {\r\n  return FEEDBACK_TAGS.filter((tag) => tag.direction === rating);\r\n}\r\n\r\nexport const feedbackTagKeySchema = z.enum(FEEDBACK_REASON_KEYS);\r\nexport const feedbackRatingSchema = z.enum(FEEDBACK_RATINGS);\r\n\r\nexport const feedbackSchema = z.object({\r\n  rating: feedbackRatingSchema,\r\n  tag: feedbackTagKeySchema,\r\n  text: z.string().max(1024).optional(),\r\n});\r\n\r\nexport type TMinimalFeedback = z.infer<typeof feedbackSchema>;\r\n\r\nexport type TFeedback = {\r\n  rating: TFeedbackRating;\r\n  tag: TFeedbackTag | undefined;\r\n  text?: string;\r\n};\r\n\r\nexport function toMinimalFeedback(feedback: TFeedback | undefined): TMinimalFeedback | undefined {\r\n  if (!feedback?.rating || !feedback?.tag || !feedback.tag.key) {\r\n    return undefined;\r\n  }\r\n\r\n  return {\r\n    rating: feedback.rating,\r\n    tag: feedback.tag.key,\r\n    text: feedback.text,\r\n  };\r\n}\r\n\r\nexport function getTagByKey(key: TFeedbackTagKey | undefined): TFeedbackTag | undefined {\r\n  if (!key) {\r\n    return undefined;\r\n  }\r\n  return FEEDBACK_TAGS.find((tag) => tag.key === key);\r\n}\r\n","import { z } from 'zod';\r\nimport { Tools } from './types/assistants';\r\nimport type { TMessageContentParts, FunctionTool, FunctionToolCall } from './types/assistants';\r\nimport { TFeedback, feedbackSchema } from './feedback';\r\nimport type { SearchResultData } from './types/web';\r\nimport type { TFile } from './types/files';\r\n\r\nexport const isUUID = z.string().uuid();\r\n\r\nexport enum AuthType {\r\n  OVERRIDE_AUTH = 'override_auth',\r\n  USER_PROVIDED = 'user_provided',\r\n  SYSTEM_DEFINED = 'system_defined',\r\n}\r\n\r\nexport const authTypeSchema = z.nativeEnum(AuthType);\r\n\r\nexport enum EModelEndpoint {\r\n  azureOpenAI = 'azureOpenAI',\r\n  openAI = 'openAI',\r\n  google = 'google',\r\n  anthropic = 'anthropic',\r\n  assistants = 'assistants',\r\n  azureAssistants = 'azureAssistants',\r\n  agents = 'agents',\r\n  custom = 'custom',\r\n  bedrock = 'bedrock',\r\n  /** @deprecated */\r\n  chatGPTBrowser = 'chatGPTBrowser',\r\n  /** @deprecated */\r\n  gptPlugins = 'gptPlugins',\r\n}\r\n\r\nexport const paramEndpoints = new Set<EModelEndpoint | string>([\r\n  EModelEndpoint.agents,\r\n  EModelEndpoint.openAI,\r\n  EModelEndpoint.bedrock,\r\n  EModelEndpoint.azureOpenAI,\r\n  EModelEndpoint.anthropic,\r\n  EModelEndpoint.custom,\r\n  EModelEndpoint.google,\r\n]);\r\n\r\nexport enum BedrockProviders {\r\n  AI21 = 'ai21',\r\n  Amazon = 'amazon',\r\n  Anthropic = 'anthropic',\r\n  Cohere = 'cohere',\r\n  Meta = 'meta',\r\n  MistralAI = 'mistral',\r\n  StabilityAI = 'stability',\r\n  DeepSeek = 'deepseek',\r\n}\r\n\r\nexport const getModelKey = (endpoint: EModelEndpoint | string, model: string) => {\r\n  if (endpoint === EModelEndpoint.bedrock) {\r\n    const parts = model.split('.');\r\n    const provider = [parts[0], parts[1]].find((part) =>\r\n      Object.values(BedrockProviders).includes(part as BedrockProviders),\r\n    );\r\n    return (provider ?? parts[0]) as BedrockProviders;\r\n  }\r\n  return model;\r\n};\r\n\r\nexport const getSettingsKeys = (endpoint: EModelEndpoint | string, model: string) => {\r\n  const endpointKey = endpoint;\r\n  const modelKey = getModelKey(endpointKey, model);\r\n  const combinedKey = `${endpointKey}-${modelKey}`;\r\n  return [combinedKey, endpointKey];\r\n};\r\n\r\nexport type AssistantsEndpoint = EModelEndpoint.assistants | EModelEndpoint.azureAssistants;\r\n\r\nexport const isAssistantsEndpoint = (_endpoint?: AssistantsEndpoint | null | string): boolean => {\r\n  const endpoint = _endpoint ?? '';\r\n  if (!endpoint) {\r\n    return false;\r\n  }\r\n  return endpoint.toLowerCase().endsWith(EModelEndpoint.assistants);\r\n};\r\n\r\nexport type AgentProvider = Exclude<keyof typeof EModelEndpoint, EModelEndpoint.agents> | string;\r\n\r\nexport const isAgentsEndpoint = (_endpoint?: EModelEndpoint.agents | null | string): boolean => {\r\n  const endpoint = _endpoint ?? '';\r\n  if (!endpoint) {\r\n    return false;\r\n  }\r\n  return endpoint === EModelEndpoint.agents;\r\n};\r\n\r\nexport const isParamEndpoint = (\r\n  endpoint: EModelEndpoint | string,\r\n  endpointType?: EModelEndpoint | string,\r\n): boolean => {\r\n  if (paramEndpoints.has(endpoint)) {\r\n    return true;\r\n  }\r\n\r\n  if (endpointType != null) {\r\n    return paramEndpoints.has(endpointType);\r\n  }\r\n\r\n  return false;\r\n};\r\n\r\nexport enum ImageDetail {\r\n  low = 'low',\r\n  auto = 'auto',\r\n  high = 'high',\r\n}\r\n\r\nexport enum ReasoningEffort {\r\n  none = '',\r\n  minimal = 'minimal',\r\n  low = 'low',\r\n  medium = 'medium',\r\n  high = 'high',\r\n}\r\n\r\nexport enum ReasoningSummary {\r\n  none = '',\r\n  auto = 'auto',\r\n  concise = 'concise',\r\n  detailed = 'detailed',\r\n}\r\n\r\nexport enum Verbosity {\r\n  none = '',\r\n  low = 'low',\r\n  medium = 'medium',\r\n  high = 'high',\r\n}\r\n\r\nexport const imageDetailNumeric = {\r\n  [ImageDetail.low]: 0,\r\n  [ImageDetail.auto]: 1,\r\n  [ImageDetail.high]: 2,\r\n};\r\n\r\nexport const imageDetailValue = {\r\n  0: ImageDetail.low,\r\n  1: ImageDetail.auto,\r\n  2: ImageDetail.high,\r\n};\r\n\r\nexport const eImageDetailSchema = z.nativeEnum(ImageDetail);\r\nexport const eReasoningEffortSchema = z.nativeEnum(ReasoningEffort);\r\nexport const eReasoningSummarySchema = z.nativeEnum(ReasoningSummary);\r\nexport const eVerbositySchema = z.nativeEnum(Verbosity);\r\n\r\nexport const defaultAssistantFormValues = {\r\n  assistant: '',\r\n  id: '',\r\n  name: '',\r\n  description: '',\r\n  instructions: '',\r\n  conversation_starters: [],\r\n  model: '',\r\n  functions: [],\r\n  code_interpreter: false,\r\n  image_vision: false,\r\n  retrieval: false,\r\n  append_current_datetime: false,\r\n};\r\n\r\nexport const defaultAgentFormValues = {\r\n  agent: {},\r\n  id: '',\r\n  name: '',\r\n  description: '',\r\n  instructions: '',\r\n  model: '',\r\n  model_parameters: {},\r\n  tools: [],\r\n  provider: {},\r\n  projectIds: [],\r\n  artifacts: '',\r\n  /** @deprecated Use ACL permissions instead */\r\n  isCollaborative: false,\r\n  recursion_limit: undefined,\r\n  [Tools.execute_code]: false,\r\n  [Tools.file_search]: false,\r\n  [Tools.web_search]: false,\r\n  category: 'general',\r\n  support_contact: {\r\n    name: '',\r\n    email: '',\r\n  },\r\n};\r\n\r\nexport const ImageVisionTool: FunctionTool = {\r\n  type: Tools.function,\r\n  [Tools.function]: {\r\n    name: 'image_vision',\r\n    description: 'Get detailed text descriptions for all current image attachments.',\r\n    parameters: {\r\n      type: 'object',\r\n      properties: {},\r\n      required: [],\r\n    },\r\n  },\r\n};\r\n\r\nexport const isImageVisionTool = (tool: FunctionTool | FunctionToolCall) =>\r\n  tool.type === 'function' && tool.function?.name === ImageVisionTool.function?.name;\r\n\r\nexport const openAISettings = {\r\n  model: {\r\n    default: 'gpt-4o-mini' as const,\r\n  },\r\n  temperature: {\r\n    min: 0 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  top_p: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  presence_penalty: {\r\n    min: -2 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 0 as const,\r\n  },\r\n  frequency_penalty: {\r\n    min: -2 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 0 as const,\r\n  },\r\n  resendFiles: {\r\n    default: true as const,\r\n  },\r\n  maxContextTokens: {\r\n    default: undefined,\r\n  },\r\n  max_tokens: {\r\n    default: undefined,\r\n  },\r\n  imageDetail: {\r\n    default: ImageDetail.auto as const,\r\n    min: 0 as const,\r\n    max: 2 as const,\r\n    step: 1 as const,\r\n  },\r\n};\r\n\r\nexport const googleSettings = {\r\n  model: {\r\n    default: 'gemini-1.5-flash-latest' as const,\r\n  },\r\n  maxOutputTokens: {\r\n    min: 1 as const,\r\n    max: 64000 as const,\r\n    step: 1 as const,\r\n    default: 8192 as const,\r\n  },\r\n  temperature: {\r\n    min: 0 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  topP: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 0.95 as const,\r\n  },\r\n  topK: {\r\n    min: 1 as const,\r\n    max: 40 as const,\r\n    step: 1 as const,\r\n    default: 40 as const,\r\n  },\r\n  thinking: {\r\n    default: true as const,\r\n  },\r\n  thinkingBudget: {\r\n    min: -1 as const,\r\n    max: 32768 as const,\r\n    step: 1 as const,\r\n    /** `-1` = Dynamic Thinking, meaning the model will adjust\r\n     * the budget based on the complexity of the request.\r\n     */\r\n    default: -1 as const,\r\n  },\r\n};\r\n\r\nconst ANTHROPIC_MAX_OUTPUT = 128000 as const;\r\nconst DEFAULT_MAX_OUTPUT = 8192 as const;\r\nconst LEGACY_ANTHROPIC_MAX_OUTPUT = 4096 as const;\r\nexport const anthropicSettings = {\r\n  model: {\r\n    default: 'claude-3-5-sonnet-latest' as const,\r\n  },\r\n  temperature: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  promptCache: {\r\n    default: true as const,\r\n  },\r\n  thinking: {\r\n    default: true as const,\r\n  },\r\n  thinkingBudget: {\r\n    min: 1024 as const,\r\n    step: 100 as const,\r\n    max: 200000 as const,\r\n    default: 2000 as const,\r\n  },\r\n  maxOutputTokens: {\r\n    min: 1 as const,\r\n    max: ANTHROPIC_MAX_OUTPUT,\r\n    step: 1 as const,\r\n    default: DEFAULT_MAX_OUTPUT,\r\n    reset: (modelName: string) => {\r\n      if (/claude-3[-.]5-sonnet/.test(modelName) || /claude-3[-.]7/.test(modelName)) {\r\n        return DEFAULT_MAX_OUTPUT;\r\n      }\r\n\r\n      return 4096;\r\n    },\r\n    set: (value: number, modelName: string) => {\r\n      if (\r\n        !(/claude-3[-.]5-sonnet/.test(modelName) || /claude-3[-.]7/.test(modelName)) &&\r\n        value > LEGACY_ANTHROPIC_MAX_OUTPUT\r\n      ) {\r\n        return LEGACY_ANTHROPIC_MAX_OUTPUT;\r\n      }\r\n\r\n      return value;\r\n    },\r\n  },\r\n  topP: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 0.7 as const,\r\n  },\r\n  topK: {\r\n    min: 1 as const,\r\n    max: 40 as const,\r\n    step: 1 as const,\r\n    default: 5 as const,\r\n  },\r\n  resendFiles: {\r\n    default: true as const,\r\n  },\r\n  maxContextTokens: {\r\n    default: undefined,\r\n  },\r\n  legacy: {\r\n    maxOutputTokens: {\r\n      min: 1 as const,\r\n      max: LEGACY_ANTHROPIC_MAX_OUTPUT,\r\n      step: 1 as const,\r\n      default: LEGACY_ANTHROPIC_MAX_OUTPUT,\r\n    },\r\n  },\r\n  web_search: {\r\n    default: false as const,\r\n  },\r\n};\r\n\r\nexport const agentsSettings = {\r\n  model: {\r\n    default: 'gpt-3.5-turbo-test' as const,\r\n  },\r\n  temperature: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  top_p: {\r\n    min: 0 as const,\r\n    max: 1 as const,\r\n    step: 0.01 as const,\r\n    default: 1 as const,\r\n  },\r\n  presence_penalty: {\r\n    min: -2 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 0 as const,\r\n  },\r\n  frequency_penalty: {\r\n    min: -2 as const,\r\n    max: 2 as const,\r\n    step: 0.01 as const,\r\n    default: 0 as const,\r\n  },\r\n  resendFiles: {\r\n    default: true as const,\r\n  },\r\n  maxContextTokens: {\r\n    default: undefined,\r\n  },\r\n  max_tokens: {\r\n    default: undefined,\r\n  },\r\n  imageDetail: {\r\n    default: ImageDetail.auto as const,\r\n  },\r\n};\r\n\r\nexport const endpointSettings = {\r\n  [EModelEndpoint.openAI]: openAISettings,\r\n  [EModelEndpoint.google]: googleSettings,\r\n  [EModelEndpoint.anthropic]: anthropicSettings,\r\n  [EModelEndpoint.agents]: agentsSettings,\r\n  [EModelEndpoint.bedrock]: agentsSettings,\r\n};\r\n\r\nconst google = endpointSettings[EModelEndpoint.google];\r\n\r\nexport const eModelEndpointSchema = z.nativeEnum(EModelEndpoint);\r\n\r\nexport const extendedModelEndpointSchema = z.union([eModelEndpointSchema, z.string()]);\r\n\r\nexport const tPluginAuthConfigSchema = z.object({\r\n  authField: z.string(),\r\n  label: z.string(),\r\n  description: z.string(),\r\n});\r\n\r\nexport type TPluginAuthConfig = z.infer<typeof tPluginAuthConfigSchema>;\r\n\r\nexport const tPluginSchema = z.object({\r\n  name: z.string(),\r\n  pluginKey: z.string(),\r\n  description: z.string().optional(),\r\n  icon: z.string().optional(),\r\n  authConfig: z.array(tPluginAuthConfigSchema).optional(),\r\n  authenticated: z.boolean().optional(),\r\n  chatMenu: z.boolean().optional(),\r\n  isButton: z.boolean().optional(),\r\n  toolkit: z.boolean().optional(),\r\n});\r\n\r\nexport type TPlugin = z.infer<typeof tPluginSchema>;\r\n\r\nexport type TInput = {\r\n  inputStr: string;\r\n};\r\n\r\nexport type TResPlugin = {\r\n  plugin: string;\r\n  input: string;\r\n  thought: string;\r\n  loading?: boolean;\r\n  outputs?: string;\r\n  latest?: string;\r\n  inputs?: TInput[];\r\n};\r\n\r\nexport const tExampleSchema = z.object({\r\n  input: z.object({\r\n    content: z.string(),\r\n  }),\r\n  output: z.object({\r\n    content: z.string(),\r\n  }),\r\n});\r\n\r\nexport type TExample = z.infer<typeof tExampleSchema>;\r\n\r\nexport enum EAgent {\r\n  functions = 'functions',\r\n  classic = 'classic',\r\n}\r\n\r\nexport const agentOptionSettings = {\r\n  model: {\r\n    default: 'gpt-4o-mini',\r\n  },\r\n  temperature: {\r\n    min: 0,\r\n    max: 1,\r\n    step: 0.01,\r\n    default: 0,\r\n  },\r\n  agent: {\r\n    default: EAgent.functions,\r\n    options: [EAgent.functions, EAgent.classic],\r\n  },\r\n  skipCompletion: {\r\n    default: true,\r\n  },\r\n};\r\n\r\nexport const eAgentOptionsSchema = z.nativeEnum(EAgent);\r\n\r\nexport const tAgentOptionsSchema = z.object({\r\n  agent: z.string().default(EAgent.functions),\r\n  skipCompletion: z.boolean().default(agentOptionSettings.skipCompletion.default),\r\n  model: z.string(),\r\n  temperature: z.number().default(agentOptionSettings.temperature.default),\r\n});\r\n\r\nexport const tMessageSchema = z.object({\r\n  messageId: z.string(),\r\n  endpoint: z.string().optional(),\r\n  clientId: z.string().nullable().optional(),\r\n  conversationId: z.string().nullable(),\r\n  parentMessageId: z.string().nullable(),\r\n  responseMessageId: z.string().nullable().optional(),\r\n  overrideParentMessageId: z.string().nullable().optional(),\r\n  bg: z.string().nullable().optional(),\r\n  model: z.string().nullable().optional(),\r\n  title: z.string().nullable().or(z.literal('New Chat')).default('New Chat'),\r\n  sender: z.string().optional(),\r\n  text: z.string(),\r\n  /** @deprecated */\r\n  generation: z.string().nullable().optional(),\r\n  isCreatedByUser: z.boolean(),\r\n  error: z.boolean().optional(),\r\n  clientTimestamp: z.string().optional(),\r\n  createdAt: z\r\n    .string()\r\n    .optional()\r\n    .default(() => new Date().toISOString()),\r\n  updatedAt: z\r\n    .string()\r\n    .optional()\r\n    .default(() => new Date().toISOString()),\r\n  current: z.boolean().optional(),\r\n  unfinished: z.boolean().optional(),\r\n  searchResult: z.boolean().optional(),\r\n  finish_reason: z.string().optional(),\r\n  /* assistant */\r\n  thread_id: z.string().optional(),\r\n  /* frontend components */\r\n  iconURL: z.string().nullable().optional(),\r\n  feedback: feedbackSchema.optional(),\r\n});\r\n\r\nexport type MemoryArtifact = {\r\n  key: string;\r\n  value?: string;\r\n  tokenCount?: number;\r\n  type: 'update' | 'delete' | 'error';\r\n};\r\n\r\nexport type UIResource = {\r\n  type?: string;\r\n  data?: unknown;\r\n  uri?: string;\r\n  mimeType?: string;\r\n  text?: string;\r\n  [key: string]: unknown;\r\n};\r\n\r\nexport type TAttachmentMetadata = {\r\n  type?: Tools;\r\n  messageId: string;\r\n  toolCallId: string;\r\n  [Tools.memory]?: MemoryArtifact;\r\n  [Tools.ui_resources]?: UIResource[];\r\n  [Tools.web_search]?: SearchResultData;\r\n  [Tools.file_search]?: SearchResultData;\r\n};\r\n\r\nexport type TAttachment =\r\n  | (TFile & TAttachmentMetadata)\r\n  | (Pick<TFile, 'filename' | 'filepath' | 'conversationId'> & {\r\n      expiresAt: number;\r\n    } & TAttachmentMetadata)\r\n  | (Partial<Pick<TFile, 'filename' | 'filepath'>> &\r\n      Pick<TFile, 'conversationId'> &\r\n      TAttachmentMetadata);\r\n\r\nexport type TMessage = z.input<typeof tMessageSchema> & {\r\n  children?: TMessage[];\r\n  plugin?: TResPlugin | null;\r\n  plugins?: TResPlugin[];\r\n  content?: TMessageContentParts[];\r\n  files?: Partial<TFile>[];\r\n  depth?: number;\r\n  siblingIndex?: number;\r\n  attachments?: TAttachment[];\r\n  clientTimestamp?: string;\r\n  feedback?: TFeedback;\r\n};\r\n\r\nexport const coerceNumber = z.union([z.number(), z.string()]).transform((val) => {\r\n  if (typeof val === 'string') {\r\n    return val.trim() === '' ? undefined : parseFloat(val);\r\n  }\r\n  return val;\r\n});\r\n\r\ntype DocumentTypeValue =\r\n  | null\r\n  | boolean\r\n  | number\r\n  | string\r\n  | DocumentTypeValue[]\r\n  | { [key: string]: DocumentTypeValue };\r\n\r\nconst DocumentType: z.ZodType<DocumentTypeValue> = z.lazy(() =>\r\n  z.union([\r\n    z.null(),\r\n    z.boolean(),\r\n    z.number(),\r\n    z.string(),\r\n    z.array(z.lazy(() => DocumentType)),\r\n    z.record(z.lazy(() => DocumentType)),\r\n  ]),\r\n);\r\n\r\nexport const tConversationSchema = z.object({\r\n  conversationId: z.string().nullable(),\r\n  endpoint: eModelEndpointSchema.nullable(),\r\n  endpointType: eModelEndpointSchema.nullable().optional(),\r\n  isArchived: z.boolean().optional(),\r\n  title: z.string().nullable().or(z.literal('New Chat')).default('New Chat'),\r\n  user: z.string().optional(),\r\n  messages: z.array(z.string()).optional(),\r\n  tools: z.union([z.array(tPluginSchema), z.array(z.string())]).optional(),\r\n  modelLabel: z.string().nullable().optional(),\r\n  userLabel: z.string().optional(),\r\n  model: z.string().nullable().optional(),\r\n  promptPrefix: z.string().nullable().optional(),\r\n  temperature: z.number().nullable().optional(),\r\n  topP: z.number().optional(),\r\n  topK: z.number().optional(),\r\n  top_p: z.number().optional(),\r\n  frequency_penalty: z.number().optional(),\r\n  presence_penalty: z.number().optional(),\r\n  parentMessageId: z.string().optional(),\r\n  maxOutputTokens: coerceNumber.nullable().optional(),\r\n  maxContextTokens: coerceNumber.optional(),\r\n  max_tokens: coerceNumber.optional(),\r\n  /* Anthropic */\r\n  promptCache: z.boolean().optional(),\r\n  system: z.string().optional(),\r\n  thinking: z.boolean().optional(),\r\n  thinkingBudget: coerceNumber.optional(),\r\n  stream: z.boolean().optional(),\r\n  /* artifacts */\r\n  artifacts: z.string().optional(),\r\n  /* google */\r\n  context: z.string().nullable().optional(),\r\n  examples: z.array(tExampleSchema).optional(),\r\n  /* DB */\r\n  tags: z.array(z.string()).optional(),\r\n  createdAt: z.string(),\r\n  updatedAt: z.string(),\r\n  /* Files */\r\n  resendFiles: z.boolean().optional(),\r\n  file_ids: z.array(z.string()).optional(),\r\n  /* vision */\r\n  imageDetail: eImageDetailSchema.optional(),\r\n  /* OpenAI: Reasoning models only */\r\n  reasoning_effort: eReasoningEffortSchema.optional().nullable(),\r\n  reasoning_summary: eReasoningSummarySchema.optional().nullable(),\r\n  /* OpenAI: Verbosity control */\r\n  verbosity: eVerbositySchema.optional().nullable(),\r\n  /* OpenAI: use Responses API */\r\n  useResponsesApi: z.boolean().optional(),\r\n  /* OpenAI Responses API / Anthropic API / Google API */\r\n  web_search: z.boolean().optional(),\r\n  /* disable streaming */\r\n  disableStreaming: z.boolean().optional(),\r\n  /* assistant */\r\n  assistant_id: z.string().optional(),\r\n  /* agents */\r\n  agent_id: z.string().optional(),\r\n  /* AWS Bedrock */\r\n  region: z.string().optional(),\r\n  maxTokens: coerceNumber.optional(),\r\n  additionalModelRequestFields: DocumentType.optional(),\r\n  /* assistants */\r\n  instructions: z.string().optional(),\r\n  additional_instructions: z.string().optional(),\r\n  append_current_datetime: z.boolean().optional(),\r\n  /** Used to overwrite active conversation settings when saving a Preset */\r\n  presetOverride: z.record(z.unknown()).optional(),\r\n  stop: z.array(z.string()).optional(),\r\n  /* frontend components */\r\n  greeting: z.string().optional(),\r\n  spec: z.string().nullable().optional(),\r\n  iconURL: z.string().nullable().optional(),\r\n  /* temporary chat */\r\n  expiredAt: z.string().nullable().optional(),\r\n  /* file token limits */\r\n  fileTokenLimit: coerceNumber.optional(),\r\n  /** @deprecated */\r\n  resendImages: z.boolean().optional(),\r\n  /** @deprecated */\r\n  agentOptions: tAgentOptionsSchema.nullable().optional(),\r\n  /** @deprecated Prefer `modelLabel` over `chatGptLabel` */\r\n  chatGptLabel: z.string().nullable().optional(),\r\n});\r\n\r\nexport const tPresetSchema = tConversationSchema\r\n  .omit({\r\n    conversationId: true,\r\n    createdAt: true,\r\n    updatedAt: true,\r\n    title: true,\r\n  })\r\n  .merge(\r\n    z.object({\r\n      conversationId: z.string().nullable().optional(),\r\n      presetId: z.string().nullable().optional(),\r\n      title: z.string().nullable().optional(),\r\n      defaultPreset: z.boolean().optional(),\r\n      order: z.number().optional(),\r\n      endpoint: extendedModelEndpointSchema.nullable(),\r\n    }),\r\n  );\r\n\r\nexport const tConvoUpdateSchema = tConversationSchema.merge(\r\n  z.object({\r\n    endpoint: extendedModelEndpointSchema.nullable(),\r\n    createdAt: z.string().optional(),\r\n    updatedAt: z.string().optional(),\r\n  }),\r\n);\r\n\r\nexport const tQueryParamsSchema = tConversationSchema\r\n  .pick({\r\n    // librechat settings\r\n    /** The model spec to be used */\r\n    spec: true,\r\n    /** The AI context window, overrides the system-defined window as determined by `model` value */\r\n    maxContextTokens: true,\r\n    /**\r\n     * Whether or not to re-submit files from previous messages on subsequent messages\r\n     * */\r\n    resendFiles: true,\r\n    /**\r\n     * @endpoints openAI, custom, azureOpenAI\r\n     *\r\n     * System parameter that only affects the above endpoints.\r\n     * Image detail for re-sizing according to OpenAI spec, defaults to `auto`\r\n     * */\r\n    imageDetail: true,\r\n    /**\r\n     * AKA Custom Instructions, dynamically added to chat history as a system message;\r\n     * for `bedrock` endpoint, this is used as the `system` model param if the provider uses it;\r\n     * for `assistants` endpoint, this is used as the `additional_instructions` model param:\r\n     * https://platform.openai.com/docs/api-reference/runs/createRun#runs-createrun-additional_instructions\r\n     * ; otherwise, a message with `system` role is added to the chat history\r\n     */\r\n    promptPrefix: true,\r\n    // Model parameters\r\n    /** @endpoints openAI, custom, azureOpenAI, google, anthropic, assistants, azureAssistants, bedrock */\r\n    model: true,\r\n    /** @endpoints openAI, custom, azureOpenAI, google, anthropic, bedrock */\r\n    temperature: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    presence_penalty: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    frequency_penalty: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    stop: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    top_p: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    max_tokens: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    reasoning_effort: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    reasoning_summary: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    verbosity: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    useResponsesApi: true,\r\n    /** @endpoints openAI, anthropic, google */\r\n    web_search: true,\r\n    /** @endpoints openAI, custom, azureOpenAI */\r\n    disableStreaming: true,\r\n    /** @endpoints google, anthropic, bedrock */\r\n    topP: true,\r\n    /** @endpoints google, anthropic */\r\n    topK: true,\r\n    /** @endpoints google, anthropic */\r\n    maxOutputTokens: true,\r\n    /** @endpoints anthropic */\r\n    promptCache: true,\r\n    thinking: true,\r\n    thinkingBudget: true,\r\n    /** @endpoints bedrock */\r\n    region: true,\r\n    /** @endpoints bedrock */\r\n    maxTokens: true,\r\n    /** @endpoints agents */\r\n    agent_id: true,\r\n    /** @endpoints assistants, azureAssistants */\r\n    assistant_id: true,\r\n    /** @endpoints assistants, azureAssistants */\r\n    append_current_datetime: true,\r\n    /**\r\n     * @endpoints assistants, azureAssistants\r\n     *\r\n     * Overrides existing assistant instructions, only used for the current run:\r\n     * https://platform.openai.com/docs/api-reference/runs/createRun#runs-createrun-instructions\r\n     * */\r\n    instructions: true,\r\n    /** @endpoints openAI, google, anthropic */\r\n    fileTokenLimit: true,\r\n  })\r\n  .merge(\r\n    z.object({\r\n      /** @endpoints openAI, custom, azureOpenAI, google, anthropic, assistants, azureAssistants, bedrock, agents */\r\n      endpoint: extendedModelEndpointSchema.nullable(),\r\n    }),\r\n  );\r\n\r\nexport type TPreset = z.infer<typeof tPresetSchema>;\r\n\r\nexport type TSetOption = (\r\n  param: number | string,\r\n) => (newValue: number | string | boolean | string[] | Partial<TPreset>) => void;\r\n\r\nexport type TConversation = z.infer<typeof tConversationSchema> & {\r\n  presetOverride?: Partial<TPreset>;\r\n  disableParams?: boolean;\r\n};\r\n\r\nexport const tSharedLinkSchema = z.object({\r\n  conversationId: z.string(),\r\n  shareId: z.string(),\r\n  messages: z.array(z.string()),\r\n  isPublic: z.boolean(),\r\n  title: z.string(),\r\n  createdAt: z.string(),\r\n  updatedAt: z.string(),\r\n});\r\n\r\nexport type TSharedLink = z.infer<typeof tSharedLinkSchema>;\r\n\r\nexport const tConversationTagSchema = z.object({\r\n  _id: z.string(),\r\n  user: z.string(),\r\n  tag: z.string(),\r\n  description: z.string().optional(),\r\n  createdAt: z.string(),\r\n  updatedAt: z.string(),\r\n  count: z.number(),\r\n  position: z.number(),\r\n});\r\nexport type TConversationTag = z.infer<typeof tConversationTagSchema>;\r\n\r\nexport const googleBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  modelLabel: true,\r\n  promptPrefix: true,\r\n  examples: true,\r\n  temperature: true,\r\n  maxOutputTokens: true,\r\n  artifacts: true,\r\n  topP: true,\r\n  topK: true,\r\n  thinking: true,\r\n  thinkingBudget: true,\r\n  web_search: true,\r\n  fileTokenLimit: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n  maxContextTokens: true,\r\n});\r\n\r\nexport const googleSchema = googleBaseSchema\r\n  .transform((obj: Partial<TConversation>) => removeNullishValues(obj))\r\n  .catch(() => ({}));\r\n\r\n/**\r\n   * TODO: Map the following fields:\r\n  - presence_penalty -> presencePenalty\r\n  - frequency_penalty -> frequencyPenalty\r\n  - stop -> stopSequences\r\n   */\r\nexport const googleGenConfigSchema = z\r\n  .object({\r\n    maxOutputTokens: coerceNumber.optional(),\r\n    temperature: coerceNumber.optional(),\r\n    topP: coerceNumber.optional(),\r\n    topK: coerceNumber.optional(),\r\n    presencePenalty: coerceNumber.optional(),\r\n    frequencyPenalty: coerceNumber.optional(),\r\n    stopSequences: z.array(z.string()).optional(),\r\n    thinkingConfig: z\r\n      .object({\r\n        includeThoughts: z.boolean().optional(),\r\n        thinkingBudget: coerceNumber.optional(),\r\n      })\r\n      .optional(),\r\n    web_search: z.boolean().optional(),\r\n  })\r\n  .strip()\r\n  .optional();\r\n\r\nconst gptPluginsBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  modelLabel: true,\r\n  chatGptLabel: true,\r\n  promptPrefix: true,\r\n  temperature: true,\r\n  artifacts: true,\r\n  top_p: true,\r\n  presence_penalty: true,\r\n  frequency_penalty: true,\r\n  tools: true,\r\n  agentOptions: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n  maxContextTokens: true,\r\n});\r\n\r\nexport const gptPluginsSchema = gptPluginsBaseSchema\r\n  .transform((obj) => {\r\n    const result = {\r\n      ...obj,\r\n      model: obj.model ?? 'gpt-3.5-turbo',\r\n      chatGptLabel: obj.chatGptLabel ?? obj.modelLabel ?? null,\r\n      promptPrefix: obj.promptPrefix ?? null,\r\n      temperature: obj.temperature ?? 0.8,\r\n      top_p: obj.top_p ?? 1,\r\n      presence_penalty: obj.presence_penalty ?? 0,\r\n      frequency_penalty: obj.frequency_penalty ?? 0,\r\n      tools: obj.tools ?? [],\r\n      agentOptions: obj.agentOptions ?? {\r\n        agent: EAgent.functions,\r\n        skipCompletion: true,\r\n        model: 'gpt-3.5-turbo',\r\n        temperature: 0,\r\n      },\r\n      iconURL: obj.iconURL ?? undefined,\r\n      greeting: obj.greeting ?? undefined,\r\n      spec: obj.spec ?? undefined,\r\n      maxContextTokens: obj.maxContextTokens ?? undefined,\r\n    };\r\n\r\n    if (obj.modelLabel != null && obj.modelLabel !== '') {\r\n      result.modelLabel = null;\r\n    }\r\n\r\n    return result;\r\n  })\r\n  .catch(() => ({\r\n    model: 'gpt-3.5-turbo',\r\n    chatGptLabel: null,\r\n    promptPrefix: null,\r\n    temperature: 0.8,\r\n    top_p: 1,\r\n    presence_penalty: 0,\r\n    frequency_penalty: 0,\r\n    tools: [],\r\n    agentOptions: {\r\n      agent: EAgent.functions,\r\n      skipCompletion: true,\r\n      model: 'gpt-3.5-turbo',\r\n      temperature: 0,\r\n    },\r\n    iconURL: undefined,\r\n    greeting: undefined,\r\n    spec: undefined,\r\n    maxContextTokens: undefined,\r\n  }));\r\n\r\nexport function removeNullishValues<T extends Record<string, unknown>>(\r\n  obj: T,\r\n  removeEmptyStrings?: boolean,\r\n): Partial<T> {\r\n  const newObj: Partial<T> = { ...obj };\r\n\r\n  (Object.keys(newObj) as Array<keyof T>).forEach((key) => {\r\n    const value = newObj[key];\r\n    if (value === undefined || value === null) {\r\n      delete newObj[key];\r\n    }\r\n    if (removeEmptyStrings && typeof value === 'string' && value === '') {\r\n      delete newObj[key];\r\n    }\r\n  });\r\n\r\n  return newObj;\r\n}\r\n\r\nconst assistantBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  assistant_id: true,\r\n  instructions: true,\r\n  artifacts: true,\r\n  promptPrefix: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n  append_current_datetime: true,\r\n});\r\n\r\nexport const assistantSchema = assistantBaseSchema\r\n  .transform((obj) => ({\r\n    ...obj,\r\n    model: obj.model ?? openAISettings.model.default,\r\n    assistant_id: obj.assistant_id ?? undefined,\r\n    instructions: obj.instructions ?? undefined,\r\n    promptPrefix: obj.promptPrefix ?? null,\r\n    iconURL: obj.iconURL ?? undefined,\r\n    greeting: obj.greeting ?? undefined,\r\n    spec: obj.spec ?? undefined,\r\n    append_current_datetime: obj.append_current_datetime ?? false,\r\n  }))\r\n  .catch(() => ({\r\n    model: openAISettings.model.default,\r\n    assistant_id: undefined,\r\n    instructions: undefined,\r\n    promptPrefix: null,\r\n    iconURL: undefined,\r\n    greeting: undefined,\r\n    spec: undefined,\r\n    append_current_datetime: false,\r\n  }));\r\n\r\nconst compactAssistantBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  assistant_id: true,\r\n  instructions: true,\r\n  promptPrefix: true,\r\n  artifacts: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n});\r\n\r\nexport const compactAssistantSchema = compactAssistantBaseSchema\r\n  .transform((obj) => removeNullishValues(obj))\r\n  .catch(() => ({}));\r\n\r\nexport const agentsBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  modelLabel: true,\r\n  temperature: true,\r\n  top_p: true,\r\n  presence_penalty: true,\r\n  frequency_penalty: true,\r\n  resendFiles: true,\r\n  imageDetail: true,\r\n  agent_id: true,\r\n  instructions: true,\r\n  promptPrefix: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  maxContextTokens: true,\r\n});\r\n\r\nexport const agentsSchema = agentsBaseSchema\r\n  .transform((obj) => ({\r\n    ...obj,\r\n    model: obj.model ?? agentsSettings.model.default,\r\n    modelLabel: obj.modelLabel ?? null,\r\n    temperature: obj.temperature ?? 1,\r\n    top_p: obj.top_p ?? 1,\r\n    presence_penalty: obj.presence_penalty ?? 0,\r\n    frequency_penalty: obj.frequency_penalty ?? 0,\r\n    resendFiles:\r\n      typeof obj.resendFiles === 'boolean' ? obj.resendFiles : agentsSettings.resendFiles.default,\r\n    imageDetail: obj.imageDetail ?? ImageDetail.auto,\r\n    agent_id: obj.agent_id ?? undefined,\r\n    instructions: obj.instructions ?? undefined,\r\n    promptPrefix: obj.promptPrefix ?? null,\r\n    iconURL: obj.iconURL ?? undefined,\r\n    greeting: obj.greeting ?? undefined,\r\n    maxContextTokens: obj.maxContextTokens ?? undefined,\r\n  }))\r\n  .catch(() => ({\r\n    model: agentsSettings.model.default,\r\n    modelLabel: null,\r\n    temperature: 1,\r\n    top_p: 1,\r\n    presence_penalty: 0,\r\n    frequency_penalty: 0,\r\n    resendFiles: agentsSettings.resendFiles.default,\r\n    imageDetail: ImageDetail.auto,\r\n    agent_id: undefined,\r\n    instructions: undefined,\r\n    promptPrefix: null,\r\n    iconURL: undefined,\r\n    greeting: undefined,\r\n    maxContextTokens: undefined,\r\n  }));\r\n\r\nexport const openAIBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  modelLabel: true,\r\n  chatGptLabel: true,\r\n  promptPrefix: true,\r\n  temperature: true,\r\n  top_p: true,\r\n  presence_penalty: true,\r\n  frequency_penalty: true,\r\n  resendFiles: true,\r\n  artifacts: true,\r\n  imageDetail: true,\r\n  stop: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n  maxContextTokens: true,\r\n  max_tokens: true,\r\n  reasoning_effort: true,\r\n  reasoning_summary: true,\r\n  verbosity: true,\r\n  useResponsesApi: true,\r\n  web_search: true,\r\n  disableStreaming: true,\r\n  fileTokenLimit: true,\r\n});\r\n\r\nexport const openAISchema = openAIBaseSchema\r\n  .transform((obj: Partial<TConversation>) => removeNullishValues(obj, true))\r\n  .catch(() => ({}));\r\n\r\nexport const compactGoogleSchema = googleBaseSchema\r\n  .transform((obj) => {\r\n    const newObj: Partial<TConversation> = { ...obj };\r\n    if (newObj.temperature === google.temperature.default) {\r\n      delete newObj.temperature;\r\n    }\r\n    if (newObj.maxOutputTokens === google.maxOutputTokens.default) {\r\n      delete newObj.maxOutputTokens;\r\n    }\r\n    if (newObj.topP === google.topP.default) {\r\n      delete newObj.topP;\r\n    }\r\n    if (newObj.topK === google.topK.default) {\r\n      delete newObj.topK;\r\n    }\r\n\r\n    return removeNullishValues(newObj);\r\n  })\r\n  .catch(() => ({}));\r\n\r\nexport const anthropicBaseSchema = tConversationSchema.pick({\r\n  model: true,\r\n  modelLabel: true,\r\n  promptPrefix: true,\r\n  temperature: true,\r\n  maxOutputTokens: true,\r\n  topP: true,\r\n  topK: true,\r\n  resendFiles: true,\r\n  promptCache: true,\r\n  thinking: true,\r\n  thinkingBudget: true,\r\n  artifacts: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  spec: true,\r\n  maxContextTokens: true,\r\n  web_search: true,\r\n  fileTokenLimit: true,\r\n  stop: true,\r\n  stream: true,\r\n});\r\n\r\nexport const anthropicSchema = anthropicBaseSchema\r\n  .transform((obj) => removeNullishValues(obj))\r\n  .catch(() => ({}));\r\n\r\nexport const compactPluginsSchema = gptPluginsBaseSchema\r\n  .transform((obj) => {\r\n    const newObj: Partial<TConversation> = { ...obj };\r\n    if (newObj.modelLabel === null) {\r\n      delete newObj.modelLabel;\r\n    }\r\n    if (newObj.chatGptLabel === null) {\r\n      delete newObj.chatGptLabel;\r\n    }\r\n    if (newObj.promptPrefix === null) {\r\n      delete newObj.promptPrefix;\r\n    }\r\n    if (newObj.temperature === 0.8) {\r\n      delete newObj.temperature;\r\n    }\r\n    if (newObj.top_p === 1) {\r\n      delete newObj.top_p;\r\n    }\r\n    if (newObj.presence_penalty === 0) {\r\n      delete newObj.presence_penalty;\r\n    }\r\n    if (newObj.frequency_penalty === 0) {\r\n      delete newObj.frequency_penalty;\r\n    }\r\n    if (newObj.tools?.length === 0) {\r\n      delete newObj.tools;\r\n    }\r\n\r\n    if (\r\n      newObj.agentOptions &&\r\n      newObj.agentOptions.agent === EAgent.functions &&\r\n      newObj.agentOptions.skipCompletion === true &&\r\n      newObj.agentOptions.model === 'gpt-3.5-turbo' &&\r\n      newObj.agentOptions.temperature === 0\r\n    ) {\r\n      delete newObj.agentOptions;\r\n    }\r\n\r\n    return removeNullishValues(newObj);\r\n  })\r\n  .catch(() => ({}));\r\n\r\nexport const tBannerSchema = z.object({\r\n  bannerId: z.string(),\r\n  message: z.string(),\r\n  displayFrom: z.string(),\r\n  displayTo: z.string(),\r\n  createdAt: z.string(),\r\n  updatedAt: z.string(),\r\n  isPublic: z.boolean(),\r\n});\r\nexport type TBanner = z.infer<typeof tBannerSchema>;\r\n\r\nexport const compactAgentsBaseSchema = tConversationSchema.pick({\r\n  spec: true,\r\n  // model: true,\r\n  iconURL: true,\r\n  greeting: true,\r\n  agent_id: true,\r\n  instructions: true,\r\n  additional_instructions: true,\r\n});\r\n\r\nexport const compactAgentsSchema = compactAgentsBaseSchema\r\n  .transform((obj) => removeNullishValues(obj))\r\n  .catch(() => ({}));\r\n","import { EToolResources } from './assistants';\r\n\r\nexport enum FileSources {\r\n  local = 'local',\r\n  firebase = 'firebase',\r\n  azure = 'azure',\r\n  azure_blob = 'azure_blob',\r\n  openai = 'openai',\r\n  s3 = 's3',\r\n  vectordb = 'vectordb',\r\n  execute_code = 'execute_code',\r\n  mistral_ocr = 'mistral_ocr',\r\n  azure_mistral_ocr = 'azure_mistral_ocr',\r\n  vertexai_mistral_ocr = 'vertexai_mistral_ocr',\r\n  text = 'text',\r\n}\r\n\r\nexport const checkOpenAIStorage = (source: string) =>\r\n  source === FileSources.openai || source === FileSources.azure;\r\n\r\nexport enum FileContext {\r\n  avatar = 'avatar',\r\n  unknown = 'unknown',\r\n  agents = 'agents',\r\n  assistants = 'assistants',\r\n  execute_code = 'execute_code',\r\n  image_generation = 'image_generation',\r\n  assistants_output = 'assistants_output',\r\n  message_attachment = 'message_attachment',\r\n  filename = 'filename',\r\n  updatedAt = 'updatedAt',\r\n  source = 'source',\r\n  filterSource = 'filterSource',\r\n  context = 'context',\r\n  bytes = 'bytes',\r\n}\r\n\r\nexport type EndpointFileConfig = {\r\n  disabled?: boolean;\r\n  fileLimit?: number;\r\n  fileSizeLimit?: number;\r\n  totalSizeLimit?: number;\r\n  supportedMimeTypes?: RegExp[];\r\n};\r\n\r\nexport type FileConfig = {\r\n  endpoints: {\r\n    [key: string]: EndpointFileConfig;\r\n  };\r\n  fileTokenLimit?: number;\r\n  serverFileSizeLimit?: number;\r\n  avatarSizeLimit?: number;\r\n  clientImageResize?: {\r\n    enabled?: boolean;\r\n    maxWidth?: number;\r\n    maxHeight?: number;\r\n    quality?: number;\r\n  };\r\n  ocr?: {\r\n    supportedMimeTypes?: RegExp[];\r\n  };\r\n  text?: {\r\n    supportedMimeTypes?: RegExp[];\r\n  };\r\n  stt?: {\r\n    supportedMimeTypes?: RegExp[];\r\n  };\r\n  checkType?: (fileType: string, supportedTypes: RegExp[]) => boolean;\r\n};\r\n\r\nexport type FileConfigInput = {\r\n  endpoints?: {\r\n    [key: string]: EndpointFileConfig;\r\n  };\r\n  serverFileSizeLimit?: number;\r\n  avatarSizeLimit?: number;\r\n  clientImageResize?: {\r\n    enabled?: boolean;\r\n    maxWidth?: number;\r\n    maxHeight?: number;\r\n    quality?: number;\r\n  };\r\n  ocr?: {\r\n    supportedMimeTypes?: string[];\r\n  };\r\n  text?: {\r\n    supportedMimeTypes?: string[];\r\n  };\r\n  stt?: {\r\n    supportedMimeTypes?: string[];\r\n  };\r\n  checkType?: (fileType: string, supportedTypes: RegExp[]) => boolean;\r\n};\r\n\r\nexport type TFile = {\r\n  _id?: string;\r\n  __v?: number;\r\n  user: string;\r\n  conversationId?: string;\r\n  message?: string;\r\n  file_id: string;\r\n  temp_file_id?: string;\r\n  bytes: number;\r\n  embedded: boolean;\r\n  filename: string;\r\n  filepath: string;\r\n  object: 'file';\r\n  type: string;\r\n  usage: number;\r\n  context?: FileContext;\r\n  source?: FileSources;\r\n  filterSource?: FileSources;\r\n  width?: number;\r\n  height?: number;\r\n  expiresAt?: string | Date;\r\n  preview?: string;\r\n  metadata?: { fileIdentifier?: string };\r\n  createdAt?: string | Date;\r\n  updatedAt?: string | Date;\r\n};\r\n\r\nexport type TFileUpload = TFile & {\r\n  temp_file_id: string;\r\n};\r\n\r\nexport type AvatarUploadResponse = {\r\n  url: string;\r\n};\r\n\r\nexport type SpeechToTextResponse = {\r\n  text: string;\r\n};\r\n\r\nexport type VoiceResponse = string[];\r\n\r\nexport type UploadMutationOptions = {\r\n  onSuccess?: (data: TFileUpload, variables: FormData, context?: unknown) => void;\r\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\r\n};\r\n\r\nexport type UploadAvatarOptions = {\r\n  onSuccess?: (data: AvatarUploadResponse, variables: FormData, context?: unknown) => void;\r\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\r\n};\r\n\r\nexport type SpeechToTextOptions = {\r\n  onSuccess?: (data: SpeechToTextResponse, variables: FormData, context?: unknown) => void;\r\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\r\n};\r\n\r\nexport type TextToSpeechOptions = {\r\n  onSuccess?: (data: ArrayBuffer, variables: FormData, context?: unknown) => void;\r\n  onMutate?: (variables: FormData) => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: FormData, context?: unknown) => void;\r\n};\r\n\r\nexport type VoiceOptions = {\r\n  onSuccess?: (data: VoiceResponse, variables: unknown, context?: unknown) => void;\r\n  onMutate?: () => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: unknown, context?: unknown) => void;\r\n};\r\n\r\nexport type DeleteFilesResponse = {\r\n  message: string;\r\n  result: Record<string, unknown>;\r\n};\r\n\r\nexport type BatchFile = {\r\n  file_id: string;\r\n  filepath: string;\r\n  embedded: boolean;\r\n  source: FileSources;\r\n  temp_file_id?: string;\r\n};\r\n\r\nexport type DeleteFilesBody = {\r\n  files: BatchFile[];\r\n  agent_id?: string;\r\n  assistant_id?: string;\r\n  tool_resource?: EToolResources;\r\n};\r\n\r\nexport type DeleteMutationOptions = {\r\n  onSuccess?: (data: DeleteFilesResponse, variables: DeleteFilesBody, context?: unknown) => void;\r\n  onMutate?: (variables: DeleteFilesBody) => void | Promise<unknown>;\r\n  onError?: (error: unknown, variables: DeleteFilesBody, context?: unknown) => void;\r\n};\r\n","import { z } from 'zod';\r\nimport type { TPreset } from './schemas';\r\nimport {\r\n  EModelEndpoint,\r\n  tPresetSchema,\r\n  eModelEndpointSchema,\r\n  AuthType,\r\n  authTypeSchema,\r\n} from './schemas';\r\n\r\nexport type TModelSpec = {\r\n  name: string;\r\n  label: string;\r\n  preset: TPreset;\r\n  order?: number;\r\n  default?: boolean;\r\n  description?: string;\r\n  showIconInMenu?: boolean;\r\n  showIconInHeader?: boolean;\r\n  iconURL?: string | EModelEndpoint; // Allow using project-included icons\r\n  authType?: AuthType;\r\n};\r\n\r\nexport const tModelSpecSchema = z.object({\r\n  name: z.string(),\r\n  label: z.string(),\r\n  preset: tPresetSchema,\r\n  order: z.number().optional(),\r\n  default: z.boolean().optional(),\r\n  description: z.string().optional(),\r\n  showIconInMenu: z.boolean().optional(),\r\n  showIconInHeader: z.boolean().optional(),\r\n  iconURL: z.union([z.string(), eModelEndpointSchema]).optional(),\r\n  authType: authTypeSchema.optional(),\r\n});\r\n\r\nexport const specsConfigSchema = z.object({\r\n  enforce: z.boolean().default(false),\r\n  prioritize: z.boolean().default(true),\r\n  list: z.array(tModelSpecSchema).min(1),\r\n  addedEndpoints: z.array(z.union([z.string(), eModelEndpointSchema])).optional(),\r\n});\r\n\r\nexport type TSpecsConfig = z.infer<typeof specsConfigSchema>;\r\n","import { z } from 'zod';\r\nimport { EModelEndpoint } from './schemas';\r\nimport type { EndpointFileConfig, FileConfig } from './types/files';\r\n\r\nexport const supportsFiles = {\r\n  [EModelEndpoint.openAI]: true,\r\n  [EModelEndpoint.google]: true,\r\n  [EModelEndpoint.assistants]: true,\r\n  [EModelEndpoint.azureAssistants]: true,\r\n  [EModelEndpoint.agents]: true,\r\n  [EModelEndpoint.azureOpenAI]: true,\r\n  [EModelEndpoint.anthropic]: true,\r\n  [EModelEndpoint.custom]: true,\r\n  [EModelEndpoint.bedrock]: true,\r\n};\r\n\r\nexport const excelFileTypes = [\r\n  'application/vnd.ms-excel',\r\n  'application/msexcel',\r\n  'application/x-msexcel',\r\n  'application/x-ms-excel',\r\n  'application/x-excel',\r\n  'application/x-dos_ms_excel',\r\n  'application/xls',\r\n  'application/x-xls',\r\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n];\r\n\r\nexport const fullMimeTypesList = [\r\n  'text/x-c',\r\n  'text/x-c++',\r\n  'application/csv',\r\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n  'text/html',\r\n  'text/x-java',\r\n  'application/json',\r\n  'text/markdown',\r\n  'application/pdf',\r\n  'text/x-php',\r\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n  'text/x-python',\r\n  'text/x-script.python',\r\n  'text/x-ruby',\r\n  'text/x-tex',\r\n  'text/plain',\r\n  'text/css',\r\n  'text/vtt',\r\n  'image/jpeg',\r\n  'text/javascript',\r\n  'image/gif',\r\n  'image/png',\r\n  'image/heic',\r\n  'image/heif',\r\n  'application/x-tar',\r\n  'application/typescript',\r\n  'application/xml',\r\n  'application/zip',\r\n  'image/svg',\r\n  'image/svg+xml',\r\n  ...excelFileTypes,\r\n];\r\n\r\nexport const codeInterpreterMimeTypesList = [\r\n  'text/x-c',\r\n  'text/x-c++',\r\n  'application/csv',\r\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n  'text/html',\r\n  'text/x-java',\r\n  'application/json',\r\n  'text/markdown',\r\n  'application/pdf',\r\n  'text/x-php',\r\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n  'text/x-python',\r\n  'text/x-script.python',\r\n  'text/x-ruby',\r\n  'text/x-tex',\r\n  'text/plain',\r\n  'text/css',\r\n  'image/jpeg',\r\n  'text/javascript',\r\n  'image/gif',\r\n  'image/png',\r\n  'image/heic',\r\n  'image/heif',\r\n  'application/x-tar',\r\n  'application/typescript',\r\n  'application/xml',\r\n  'application/zip',\r\n  ...excelFileTypes,\r\n];\r\n\r\nexport const retrievalMimeTypesList = [\r\n  'text/x-c',\r\n  'text/x-c++',\r\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\r\n  'text/html',\r\n  'text/x-java',\r\n  'application/json',\r\n  'text/markdown',\r\n  'application/pdf',\r\n  'text/x-php',\r\n  'application/vnd.openxmlformats-officedocument.presentationml.presentation',\r\n  'text/x-python',\r\n  'text/x-script.python',\r\n  'text/x-ruby',\r\n  'text/x-tex',\r\n  'text/plain',\r\n];\r\n\r\nexport const imageExtRegex = /\\.(jpg|jpeg|png|gif|webp|heic|heif)$/i;\r\n\r\nexport const excelMimeTypes =\r\n  /^application\\/(vnd\\.ms-excel|msexcel|x-msexcel|x-ms-excel|x-excel|x-dos_ms_excel|xls|x-xls|vnd\\.openxmlformats-officedocument\\.spreadsheetml\\.sheet)$/;\r\n\r\nexport const textMimeTypes =\r\n  /^(text\\/(x-c|x-csharp|tab-separated-values|x-c\\+\\+|x-h|x-java|html|markdown|x-php|x-python|x-script\\.python|x-ruby|x-tex|plain|css|vtt|javascript|csv))$/;\r\n\r\nexport const applicationMimeTypes =\r\n  /^(application\\/(epub\\+zip|csv|json|pdf|x-tar|typescript|vnd\\.openxmlformats-officedocument\\.(wordprocessingml\\.document|presentationml\\.presentation|spreadsheetml\\.sheet)|xml|zip))$/;\r\n\r\nexport const imageMimeTypes = /^image\\/(jpeg|gif|png|webp|heic|heif)$/;\r\n\r\nexport const audioMimeTypes =\r\n  /^audio\\/(mp3|mpeg|mpeg3|wav|wave|x-wav|ogg|vorbis|mp4|x-m4a|flac|x-flac|webm)$/;\r\n\r\nexport const defaultOCRMimeTypes = [\r\n  imageMimeTypes,\r\n  /^application\\/pdf$/,\r\n  /^application\\/vnd\\.openxmlformats-officedocument\\.(wordprocessingml\\.document|presentationml\\.presentation|spreadsheetml\\.sheet)$/,\r\n  /^application\\/vnd\\.ms-(word|powerpoint|excel)$/,\r\n  /^application\\/epub\\+zip$/,\r\n];\r\n\r\nexport const defaultTextMimeTypes = [/^[\\w.-]+\\/[\\w.-]+$/];\r\n\r\nexport const defaultSTTMimeTypes = [audioMimeTypes];\r\n\r\nexport const supportedMimeTypes = [\r\n  textMimeTypes,\r\n  excelMimeTypes,\r\n  applicationMimeTypes,\r\n  imageMimeTypes,\r\n  audioMimeTypes,\r\n  /** Supported by LC Code Interpreter PAI */\r\n  /^image\\/(svg|svg\\+xml)$/,\r\n];\r\n\r\nexport const codeInterpreterMimeTypes = [\r\n  textMimeTypes,\r\n  excelMimeTypes,\r\n  applicationMimeTypes,\r\n  imageMimeTypes,\r\n];\r\n\r\nexport const codeTypeMapping: { [key: string]: string } = {\r\n  c: 'text/x-c',\r\n  cs: 'text/x-csharp',\r\n  cpp: 'text/x-c++',\r\n  h: 'text/x-h',\r\n  md: 'text/markdown',\r\n  php: 'text/x-php',\r\n  py: 'text/x-python',\r\n  rb: 'text/x-ruby',\r\n  tex: 'text/x-tex',\r\n  js: 'text/javascript',\r\n  sh: 'application/x-sh',\r\n  ts: 'application/typescript',\r\n  tar: 'application/x-tar',\r\n  zip: 'application/zip',\r\n  yml: 'application/x-yaml',\r\n  yaml: 'application/x-yaml',\r\n  log: 'text/plain',\r\n  tsv: 'text/tab-separated-values',\r\n};\r\n\r\nexport const retrievalMimeTypes = [\r\n  /^(text\\/(x-c|x-c\\+\\+|x-h|html|x-java|markdown|x-php|x-python|x-script\\.python|x-ruby|x-tex|plain|vtt|xml))$/,\r\n  /^(application\\/(json|pdf|vnd\\.openxmlformats-officedocument\\.(wordprocessingml\\.document|presentationml\\.presentation)))$/,\r\n];\r\n\r\nexport const megabyte = 1024 * 1024;\r\n/** Helper function to get megabytes value */\r\nexport const mbToBytes = (mb: number): number => mb * megabyte;\r\n\r\nconst defaultSizeLimit = mbToBytes(512);\r\nconst defaultTokenLimit = 100000;\r\nconst assistantsFileConfig = {\r\n  fileLimit: 10,\r\n  fileSizeLimit: defaultSizeLimit,\r\n  totalSizeLimit: defaultSizeLimit,\r\n  supportedMimeTypes,\r\n  disabled: false,\r\n};\r\n\r\nexport const fileConfig = {\r\n  endpoints: {\r\n    [EModelEndpoint.assistants]: assistantsFileConfig,\r\n    [EModelEndpoint.azureAssistants]: assistantsFileConfig,\r\n    [EModelEndpoint.agents]: assistantsFileConfig,\r\n    default: {\r\n      fileLimit: 10,\r\n      fileSizeLimit: defaultSizeLimit,\r\n      totalSizeLimit: defaultSizeLimit,\r\n      supportedMimeTypes,\r\n      disabled: false,\r\n    },\r\n  },\r\n  serverFileSizeLimit: defaultSizeLimit,\r\n  avatarSizeLimit: mbToBytes(2),\r\n  fileTokenLimit: defaultTokenLimit,\r\n  clientImageResize: {\r\n    enabled: false,\r\n    maxWidth: 1900,\r\n    maxHeight: 1900,\r\n    quality: 0.92,\r\n  },\r\n  ocr: {\r\n    supportedMimeTypes: defaultOCRMimeTypes,\r\n  },\r\n  text: {\r\n    supportedMimeTypes: defaultTextMimeTypes,\r\n  },\r\n  stt: {\r\n    supportedMimeTypes: defaultSTTMimeTypes,\r\n  },\r\n  checkType: function (fileType: string, supportedTypes: RegExp[] = supportedMimeTypes) {\r\n    return supportedTypes.some((regex) => regex.test(fileType));\r\n  },\r\n};\r\n\r\nconst supportedMimeTypesSchema = z\r\n  .array(z.any())\r\n  .optional()\r\n  .refine(\r\n    (mimeTypes) => {\r\n      if (!mimeTypes) {\r\n        return true;\r\n      }\r\n      return mimeTypes.every(\r\n        (mimeType) => mimeType instanceof RegExp || typeof mimeType === 'string',\r\n      );\r\n    },\r\n    {\r\n      message: 'Each mimeType must be a string or a RegExp object.',\r\n    },\r\n  );\r\n\r\nexport const endpointFileConfigSchema = z.object({\r\n  disabled: z.boolean().optional(),\r\n  fileLimit: z.number().min(0).optional(),\r\n  fileSizeLimit: z.number().min(0).optional(),\r\n  totalSizeLimit: z.number().min(0).optional(),\r\n  supportedMimeTypes: supportedMimeTypesSchema.optional(),\r\n});\r\n\r\nexport const fileConfigSchema = z.object({\r\n  endpoints: z.record(endpointFileConfigSchema).optional(),\r\n  serverFileSizeLimit: z.number().min(0).optional(),\r\n  avatarSizeLimit: z.number().min(0).optional(),\r\n  fileTokenLimit: z.number().min(0).optional(),\r\n  imageGeneration: z\r\n    .object({\r\n      percentage: z.number().min(0).max(100).optional(),\r\n      px: z.number().min(0).optional(),\r\n    })\r\n    .optional(),\r\n  clientImageResize: z\r\n    .object({\r\n      enabled: z.boolean().optional(),\r\n      maxWidth: z.number().min(0).optional(),\r\n      maxHeight: z.number().min(0).optional(),\r\n      quality: z.number().min(0).max(1).optional(),\r\n    })\r\n    .optional(),\r\n  ocr: z\r\n    .object({\r\n      supportedMimeTypes: supportedMimeTypesSchema.optional(),\r\n    })\r\n    .optional(),\r\n  text: z\r\n    .object({\r\n      supportedMimeTypes: supportedMimeTypesSchema.optional(),\r\n    })\r\n    .optional(),\r\n});\r\n\r\n/** Helper function to safely convert string patterns to RegExp objects */\r\nexport const convertStringsToRegex = (patterns: string[]): RegExp[] =>\r\n  patterns.reduce((acc: RegExp[], pattern) => {\r\n    try {\r\n      const regex = new RegExp(pattern);\r\n      acc.push(regex);\r\n    } catch (error) {\r\n      console.error(`Invalid regex pattern \"${pattern}\" skipped.`, error);\r\n    }\r\n    return acc;\r\n  }, []);\r\n\r\nexport function mergeFileConfig(dynamic: z.infer<typeof fileConfigSchema> | undefined): FileConfig {\r\n  const mergedConfig: FileConfig = {\r\n    ...fileConfig,\r\n    ocr: {\r\n      ...fileConfig.ocr,\r\n      supportedMimeTypes: fileConfig.ocr?.supportedMimeTypes || [],\r\n    },\r\n    text: {\r\n      ...fileConfig.text,\r\n      supportedMimeTypes: fileConfig.text?.supportedMimeTypes || [],\r\n    },\r\n    stt: {\r\n      ...fileConfig.stt,\r\n      supportedMimeTypes: fileConfig.stt?.supportedMimeTypes || [],\r\n    },\r\n  };\r\n  if (!dynamic) {\r\n    return mergedConfig;\r\n  }\r\n\r\n  if (dynamic.serverFileSizeLimit !== undefined) {\r\n    mergedConfig.serverFileSizeLimit = mbToBytes(dynamic.serverFileSizeLimit);\r\n  }\r\n\r\n  if (dynamic.avatarSizeLimit !== undefined) {\r\n    mergedConfig.avatarSizeLimit = mbToBytes(dynamic.avatarSizeLimit);\r\n  }\r\n\r\n  if (dynamic.fileTokenLimit !== undefined) {\r\n    mergedConfig.fileTokenLimit = dynamic.fileTokenLimit;\r\n  }\r\n\r\n  // Merge clientImageResize configuration\r\n  if (dynamic.clientImageResize !== undefined) {\r\n    mergedConfig.clientImageResize = {\r\n      ...mergedConfig.clientImageResize,\r\n      ...dynamic.clientImageResize,\r\n    };\r\n  }\r\n\r\n  if (dynamic.ocr !== undefined) {\r\n    mergedConfig.ocr = {\r\n      ...mergedConfig.ocr,\r\n      ...dynamic.ocr,\r\n    };\r\n    if (dynamic.ocr.supportedMimeTypes) {\r\n      mergedConfig.ocr.supportedMimeTypes = convertStringsToRegex(dynamic.ocr.supportedMimeTypes);\r\n    }\r\n  }\r\n\r\n  if (dynamic.text !== undefined) {\r\n    mergedConfig.text = {\r\n      ...mergedConfig.text,\r\n      ...dynamic.text,\r\n    };\r\n    if (dynamic.text.supportedMimeTypes) {\r\n      mergedConfig.text.supportedMimeTypes = convertStringsToRegex(dynamic.text.supportedMimeTypes);\r\n    }\r\n  }\r\n\r\n  if (!dynamic.endpoints) {\r\n    return mergedConfig;\r\n  }\r\n\r\n  for (const key in dynamic.endpoints) {\r\n    const dynamicEndpoint = (dynamic.endpoints as Record<string, EndpointFileConfig>)[key];\r\n\r\n    if (!mergedConfig.endpoints[key]) {\r\n      mergedConfig.endpoints[key] = {};\r\n    }\r\n\r\n    const mergedEndpoint = mergedConfig.endpoints[key];\r\n\r\n    if (dynamicEndpoint.disabled === true) {\r\n      mergedEndpoint.disabled = true;\r\n      mergedEndpoint.fileLimit = 0;\r\n      mergedEndpoint.fileSizeLimit = 0;\r\n      mergedEndpoint.totalSizeLimit = 0;\r\n      mergedEndpoint.supportedMimeTypes = [];\r\n      continue;\r\n    }\r\n\r\n    if (dynamicEndpoint.fileSizeLimit !== undefined) {\r\n      mergedEndpoint.fileSizeLimit = mbToBytes(dynamicEndpoint.fileSizeLimit);\r\n    }\r\n\r\n    if (dynamicEndpoint.totalSizeLimit !== undefined) {\r\n      mergedEndpoint.totalSizeLimit = mbToBytes(dynamicEndpoint.totalSizeLimit);\r\n    }\r\n\r\n    const configKeys = ['fileLimit'] as const;\r\n    configKeys.forEach((field) => {\r\n      if (dynamicEndpoint[field] !== undefined) {\r\n        mergedEndpoint[field] = dynamicEndpoint[field];\r\n      }\r\n    });\r\n\r\n    if (dynamicEndpoint.supportedMimeTypes) {\r\n      mergedEndpoint.supportedMimeTypes = convertStringsToRegex(\r\n        dynamicEndpoint.supportedMimeTypes as unknown as string[],\r\n      );\r\n    }\r\n  }\r\n\r\n  return mergedConfig;\r\n}\r\n","/* eslint-disable @typescript-eslint/no-namespace */\r\nimport { StepTypes, ContentTypes, ToolCallTypes } from './runs';\r\nimport type { TAttachment, TPlugin } from 'src/schemas';\r\nimport type { FunctionToolCall } from './assistants';\r\n\r\nexport namespace Agents {\r\n  export type MessageType = 'human' | 'ai' | 'generic' | 'system' | 'function' | 'tool' | 'remove';\r\n\r\n  export type ImageDetail = 'auto' | 'low' | 'high';\r\n\r\n  export type ReasoningContentText = {\r\n    type: ContentTypes.THINK;\r\n    think: string;\r\n  };\r\n\r\n  export type MessageContentText = {\r\n    type: ContentTypes.TEXT;\r\n    text: string;\r\n    tool_call_ids?: string[];\r\n  };\r\n\r\n  export type AgentUpdate = {\r\n    type: ContentTypes.AGENT_UPDATE;\r\n    agent_update: {\r\n      index: number;\r\n      runId: string;\r\n      agentId: string;\r\n    };\r\n  };\r\n\r\n  export type MessageContentImageUrl = {\r\n    type: ContentTypes.IMAGE_URL;\r\n    image_url: string | { url: string; detail?: ImageDetail };\r\n  };\r\n\r\n  export type MessageContentComplex =\r\n    | ReasoningContentText\r\n    | AgentUpdate\r\n    | MessageContentText\r\n    | MessageContentImageUrl\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    | (Record<string, any> & { type?: ContentTypes | string })\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    | (Record<string, any> & { type?: never });\r\n\r\n  export type MessageContent = string | MessageContentComplex[];\r\n\r\n  /**\r\n   * A call to a tool.\r\n   */\r\n  export type ToolCall = {\r\n    /** Type (\"tool_call\") according to Assistants Tool Call Structure */\r\n    type: ToolCallTypes.TOOL_CALL;\r\n    /** The name of the tool to be called */\r\n    name: string;\r\n\r\n    /** The arguments to the tool call */\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    args?: string | Record<string, any>;\r\n\r\n    /** If provided, an identifier associated with the tool call */\r\n    id?: string;\r\n    /** If provided, the output of the tool call */\r\n    output?: string;\r\n    /** Auth URL */\r\n    auth?: string;\r\n    /** Expiration time */\r\n    expires_at?: number;\r\n  };\r\n\r\n  export type ToolEndEvent = {\r\n    /** The Step Id of the Tool Call */\r\n    id: string;\r\n    /** The Completed Tool Call */\r\n    tool_call?: ToolCall;\r\n    /** The content index of the tool call */\r\n    index: number;\r\n  };\r\n\r\n  export type ToolCallContent = {\r\n    type: ContentTypes.TOOL_CALL;\r\n    tool_call?: ToolCall;\r\n  };\r\n\r\n  /**\r\n   * A chunk of a tool call (e.g., as part of a stream).\r\n   * When merging ToolCallChunks (e.g., via AIMessageChunk.__add__),\r\n   * all string attributes are concatenated. Chunks are only merged if their\r\n   * values of `index` are equal and not None.\r\n   *\r\n   * @example\r\n   * ```ts\r\n   * const leftChunks = [\r\n   *   {\r\n   *     name: \"foo\",\r\n   *     args: '{\"a\":',\r\n   *     index: 0\r\n   *   }\r\n   * ];\r\n   *\r\n   * const leftAIMessageChunk = new AIMessageChunk({\r\n   *   content: \"\",\r\n   *   tool_call_chunks: leftChunks\r\n   * });\r\n   *\r\n   * const rightChunks = [\r\n   *   {\r\n   *     name: undefined,\r\n   *     args: '1}',\r\n   *     index: 0\r\n   *   }\r\n   * ];\r\n   *\r\n   * const rightAIMessageChunk = new AIMessageChunk({\r\n   *   content: \"\",\r\n   *   tool_call_chunks: rightChunks\r\n   * });\r\n   *\r\n   * const result = leftAIMessageChunk.concat(rightAIMessageChunk);\r\n   * // result.tool_call_chunks is equal to:\r\n   * // [\r\n   * //   {\r\n   * //     name: \"foo\",\r\n   * //     args: '{\"a\":1}'\r\n   * //     index: 0\r\n   * //   }\r\n   * // ]\r\n   * ```\r\n   *\r\n   * @property {string} [name] - If provided, a substring of the name of the tool to be called\r\n   * @property {string} [args] - If provided, a JSON substring of the arguments to the tool call\r\n   * @property {string} [id] - If provided, a substring of an identifier for the tool call\r\n   * @property {number} [index] - If provided, the index of the tool call in a sequence\r\n   */\r\n  export type ToolCallChunk = {\r\n    name?: string;\r\n\r\n    args?: string;\r\n\r\n    id?: string;\r\n\r\n    index?: number;\r\n\r\n    type?: 'tool_call_chunk';\r\n  };\r\n\r\n  /** Event names are of the format: on_[runnable_type]_(start|stream|end).\r\n\r\n  Runnable types are one of:\r\n\r\n  llm - used by non chat models\r\n  chat_model - used by chat models\r\n  prompt -- e.g., ChatPromptTemplate\r\n  tool -- LangChain tools\r\n  chain - most Runnables are of this type\r\n  Further, the events are categorized as one of:\r\n\r\n  start - when the runnable starts\r\n  stream - when the runnable is streaming\r\n  end - when the runnable ends\r\n  start, stream and end are associated with slightly different data payload.\r\n\r\n  Please see the documentation for EventData for more details. */\r\n  export type EventName = string;\r\n  export type RunStep = {\r\n    type: StepTypes;\r\n    id: string; // #new\r\n    runId?: string; // #new\r\n    index: number; // #new\r\n    stepIndex?: number; // #new\r\n    stepDetails: StepDetails;\r\n    usage: null | object;\r\n  };\r\n  /**\r\n   * Represents a run step delta i.e. any changed fields on a run step during\r\n   * streaming.\r\n   */\r\n  export interface RunStepDeltaEvent {\r\n    /**\r\n     * The identifier of the run step, which can be referenced in API endpoints.\r\n     */\r\n    id: string;\r\n    /**\r\n     * The delta containing the fields that have changed on the run step.\r\n     */\r\n    delta: ToolCallDelta;\r\n  }\r\n  export type StepDetails = MessageCreationDetails | ToolCallsDetails;\r\n  export type MessageCreationDetails = {\r\n    type: StepTypes.MESSAGE_CREATION;\r\n    message_creation: {\r\n      message_id: string;\r\n    };\r\n  };\r\n  export type ToolCallsDetails = {\r\n    type: StepTypes.TOOL_CALLS;\r\n    tool_calls: AgentToolCall[];\r\n  };\r\n  export type ToolCallDelta = {\r\n    type: StepTypes.TOOL_CALLS | string;\r\n    tool_calls?: ToolCallChunk[];\r\n    auth?: string;\r\n    expires_at?: number;\r\n  };\r\n  export type AgentToolCall = FunctionToolCall | ToolCall;\r\n  export interface ExtendedMessageContent {\r\n    type?: string;\r\n    text?: string;\r\n    input?: string;\r\n    index?: number;\r\n    id?: string;\r\n    name?: string;\r\n  }\r\n  /**\r\n   * Represents a message delta i.e. any changed fields on a message during\r\n   * streaming.\r\n   */\r\n  export interface MessageDeltaEvent {\r\n    /**\r\n     * The identifier of the message, which can be referenced in API endpoints.\r\n     */\r\n    id: string;\r\n    /**\r\n     * The delta containing the fields that have changed on the Message.\r\n     */\r\n    delta: MessageDelta;\r\n  }\r\n  /**\r\n   * The delta containing the fields that have changed on the Message.\r\n   */\r\n  export interface MessageDelta {\r\n    /**\r\n     * The content of the message in array of text and/or images.\r\n     */\r\n    content?: Agents.MessageContentComplex[];\r\n  }\r\n\r\n  /**\r\n   * Represents a reasoning delta i.e. any changed fields on a message during\r\n   * streaming.\r\n   */\r\n  export interface ReasoningDeltaEvent {\r\n    /**\r\n     * The identifier of the message, which can be referenced in API endpoints.\r\n     */\r\n    id: string;\r\n\r\n    /**\r\n     * The delta containing the fields that have changed.\r\n     */\r\n    delta: ReasoningDelta;\r\n  }\r\n\r\n  /**\r\n   * The reasoning delta containing the fields that have changed on the Message.\r\n   */\r\n  export interface ReasoningDelta {\r\n    /**\r\n     * The content of the message in array of text and/or images.\r\n     */\r\n    content?: MessageContentComplex[];\r\n  }\r\n\r\n  export type ReasoningDeltaUpdate = { type: ContentTypes.THINK; think: string };\r\n  export type ContentType =\r\n    | ContentTypes.THINK\r\n    | ContentTypes.TEXT\r\n    | ContentTypes.IMAGE_URL\r\n    | string;\r\n}\r\n\r\nexport type ToolCallResult = {\r\n  user: string;\r\n  toolId: string;\r\n  result?: unknown;\r\n  messageId: string;\r\n  partIndex?: number;\r\n  blockIndex?: number;\r\n  conversationId: string;\r\n  attachments?: TAttachment[];\r\n};\r\n\r\nexport enum AuthTypeEnum {\r\n  ServiceHttp = 'service_http',\r\n  OAuth = 'oauth',\r\n  None = 'none',\r\n}\r\n\r\nexport enum AuthorizationTypeEnum {\r\n  Bearer = 'bearer',\r\n  Basic = 'basic',\r\n  Custom = 'custom',\r\n}\r\n\r\nexport enum TokenExchangeMethodEnum {\r\n  DefaultPost = 'default_post',\r\n  BasicAuthHeader = 'basic_auth_header',\r\n}\r\n\r\nexport type Action = {\r\n  action_id: string;\r\n  type?: string;\r\n  settings?: Record<string, unknown>;\r\n  metadata: ActionMetadata;\r\n  version: number | string;\r\n} & ({ assistant_id: string; agent_id?: never } | { assistant_id?: never; agent_id: string });\r\n\r\nexport type ActionMetadata = {\r\n  api_key?: string;\r\n  auth?: ActionAuth;\r\n  domain?: string;\r\n  privacy_policy_url?: string;\r\n  raw_spec?: string;\r\n  oauth_client_id?: string;\r\n  oauth_client_secret?: string;\r\n};\r\n\r\nexport type ActionAuth = {\r\n  authorization_type?: AuthorizationTypeEnum;\r\n  custom_auth_header?: string;\r\n  type?: AuthTypeEnum;\r\n  authorization_content_type?: string;\r\n  authorization_url?: string;\r\n  client_url?: string;\r\n  scope?: string;\r\n  token_exchange_method?: TokenExchangeMethodEnum;\r\n};\r\n\r\nexport type ActionMetadataRuntime = ActionMetadata & {\r\n  oauth_access_token?: string;\r\n  oauth_refresh_token?: string;\r\n  oauth_token_expires_at?: Date;\r\n};\r\n\r\nexport type MCP = {\r\n  mcp_id: string;\r\n  metadata: MCPMetadata;\r\n} & ({ assistant_id: string; agent_id?: never } | { assistant_id?: never; agent_id?: string });\r\n\r\nexport type MCPMetadata = Omit<ActionMetadata, 'auth'> & {\r\n  name?: string;\r\n  description?: string;\r\n  url?: string;\r\n  tools?: string[];\r\n  auth?: MCPAuth;\r\n  icon?: string;\r\n  trust?: boolean;\r\n};\r\n\r\nexport type MCPAuth = ActionAuth;\r\n\r\nexport type AgentToolType = {\r\n  tool_id: string;\r\n  metadata: ToolMetadata;\r\n} & ({ assistant_id: string; agent_id?: never } | { assistant_id?: never; agent_id?: string });\r\n\r\nexport type ToolMetadata = TPlugin;\r\n","import { z } from 'zod';\r\nimport { TokenExchangeMethodEnum } from './types/agents';\r\nimport { extractEnvVariable } from './utils';\r\n\r\nconst BaseOptionsSchema = z.object({\r\n  /**\r\n   * Controls whether the MCP server is initialized during application startup.\r\n   * - true (default): Server is initialized during app startup and included in app-level connections\r\n   * - false: Skips initialization at startup and excludes from app-level connections - useful for servers\r\n   *   requiring manual authentication (e.g., GitHub PAT tokens) that need to be configured through the UI after startup\r\n   */\r\n  startup: z.boolean().optional(),\r\n  iconPath: z.string().optional(),\r\n  timeout: z.number().optional(),\r\n  initTimeout: z.number().optional(),\r\n  /** Controls visibility in chat dropdown menu (MCPSelect) */\r\n  chatMenu: z.boolean().optional(),\r\n  /**\r\n   * Controls server instruction behavior:\r\n   * - undefined/not set: No instructions included (default)\r\n   * - true: Use server-provided instructions\r\n   * - string: Use custom instructions (overrides server-provided)\r\n   */\r\n  serverInstructions: z.union([z.boolean(), z.string()]).optional(),\r\n  /**\r\n   * Whether this server requires OAuth authentication\r\n   * If not specified, will be auto-detected during construction\r\n   */\r\n  requiresOAuth: z.boolean().optional(),\r\n  /**\r\n   * OAuth configuration for SSE and Streamable HTTP transports\r\n   * - Optional: OAuth can be auto-discovered on 401 responses\r\n   * - Pre-configured values will skip discovery steps\r\n   */\r\n  oauth: z\r\n    .object({\r\n      /** OAuth authorization endpoint (optional - can be auto-discovered) */\r\n      authorization_url: z.string().url().optional(),\r\n      /** OAuth token endpoint (optional - can be auto-discovered) */\r\n      token_url: z.string().url().optional(),\r\n      /** OAuth client ID (optional - can use dynamic registration) */\r\n      client_id: z.string().optional(),\r\n      /** OAuth client secret (optional - can use dynamic registration) */\r\n      client_secret: z.string().optional(),\r\n      /** OAuth scopes to request */\r\n      scope: z.string().optional(),\r\n      /** OAuth redirect URI (defaults to /api/mcp/{serverName}/oauth/callback) */\r\n      redirect_uri: z.string().url().optional(),\r\n      /** Token exchange method */\r\n      token_exchange_method: z.nativeEnum(TokenExchangeMethodEnum).optional(),\r\n      /** Supported grant types (defaults to ['authorization_code', 'refresh_token']) */\r\n      grant_types_supported: z.array(z.string()).optional(),\r\n      /** Supported token endpoint authentication methods (defaults to ['client_secret_basic', 'client_secret_post']) */\r\n      token_endpoint_auth_methods_supported: z.array(z.string()).optional(),\r\n      /** Supported response types (defaults to ['code']) */\r\n      response_types_supported: z.array(z.string()).optional(),\r\n      /** Supported code challenge methods (defaults to ['S256', 'plain']) */\r\n      code_challenge_methods_supported: z.array(z.string()).optional(),\r\n      /** OAuth revocation endpoint (optional - can be auto-discovered) */\r\n      revocation_endpoint: z.string().url().optional(),\r\n      /** OAuth revocation endpoint authentication methods supported (optional - can be auto-discovered) */\r\n      revocation_endpoint_auth_methods_supported: z.array(z.string()).optional(),\r\n    })\r\n    .optional(),\r\n  customUserVars: z\r\n    .record(\r\n      z.string(),\r\n      z.object({\r\n        title: z.string(),\r\n        description: z.string(),\r\n      }),\r\n    )\r\n    .optional(),\r\n});\r\n\r\nexport const StdioOptionsSchema = BaseOptionsSchema.extend({\r\n  type: z.literal('stdio').optional(),\r\n  /**\r\n   * The executable to run to start the server.\r\n   */\r\n  command: z.string(),\r\n  /**\r\n   * Command line arguments to pass to the executable.\r\n   */\r\n  args: z.array(z.string()),\r\n  /**\r\n   * The environment to use when spawning the process.\r\n   *\r\n   * If not specified, the result of getDefaultEnvironment() will be used.\r\n   * Environment variables can be referenced using ${VAR_NAME} syntax.\r\n   */\r\n  env: z\r\n    .record(z.string(), z.string())\r\n    .optional()\r\n    .transform((env) => {\r\n      if (!env) {\r\n        return env;\r\n      }\r\n\r\n      const processedEnv: Record<string, string> = {};\r\n      for (const [key, value] of Object.entries(env)) {\r\n        processedEnv[key] = extractEnvVariable(value);\r\n      }\r\n      return processedEnv;\r\n    }),\r\n  /**\r\n   * How to handle stderr of the child process. This matches the semantics of Node's `child_process.spawn`.\r\n   *\r\n   * @type {import('node:child_process').IOType | import('node:stream').Stream | number}\r\n   *\r\n   * The default is \"inherit\", meaning messages to stderr will be printed to the parent process's stderr.\r\n   */\r\n  stderr: z.any().optional(),\r\n});\r\n\r\nexport const WebSocketOptionsSchema = BaseOptionsSchema.extend({\r\n  type: z.literal('websocket').optional(),\r\n  url: z\r\n    .string()\r\n    .transform((val: string) => extractEnvVariable(val))\r\n    .pipe(z.string().url())\r\n    .refine(\r\n      (val: string) => {\r\n        const protocol = new URL(val).protocol;\r\n        return protocol === 'ws:' || protocol === 'wss:';\r\n      },\r\n      {\r\n        message: 'WebSocket URL must start with ws:// or wss://',\r\n      },\r\n    ),\r\n});\r\n\r\nexport const SSEOptionsSchema = BaseOptionsSchema.extend({\r\n  type: z.literal('sse').optional(),\r\n  headers: z.record(z.string(), z.string()).optional(),\r\n  url: z\r\n    .string()\r\n    .transform((val: string) => extractEnvVariable(val))\r\n    .pipe(z.string().url())\r\n    .refine(\r\n      (val: string) => {\r\n        const protocol = new URL(val).protocol;\r\n        return protocol !== 'ws:' && protocol !== 'wss:';\r\n      },\r\n      {\r\n        message: 'SSE URL must not start with ws:// or wss://',\r\n      },\r\n    ),\r\n});\r\n\r\nexport const StreamableHTTPOptionsSchema = BaseOptionsSchema.extend({\r\n  type: z.union([z.literal('streamable-http'), z.literal('http')]),\r\n  headers: z.record(z.string(), z.string()).optional(),\r\n  url: z\r\n    .string()\r\n    .transform((val: string) => extractEnvVariable(val))\r\n    .pipe(z.string().url())\r\n    .refine(\r\n      (val: string) => {\r\n        const protocol = new URL(val).protocol;\r\n        return protocol !== 'ws:' && protocol !== 'wss:';\r\n      },\r\n      {\r\n        message: 'Streamable HTTP URL must not start with ws:// or wss://',\r\n      },\r\n    ),\r\n});\r\n\r\nexport const MCPOptionsSchema = z.union([\r\n  StdioOptionsSchema,\r\n  WebSocketOptionsSchema,\r\n  SSEOptionsSchema,\r\n  StreamableHTTPOptionsSchema,\r\n]);\r\n\r\nexport const MCPServersSchema = z.record(z.string(), MCPOptionsSchema);\r\n\r\nexport type MCPOptions = z.infer<typeof MCPOptionsSchema>;\r\n","import type { AssistantsEndpoint } from './schemas';\r\nimport * as q from './types/queries';\r\nimport { ResourceType } from './accessPermissions';\r\n\r\nlet BASE_URL = '';\r\nif (\r\n  typeof process === 'undefined' ||\r\n  (process as typeof process & { browser?: boolean }).browser === true\r\n) {\r\n  // process is only available in node context, or process.browser is true in client-side code\r\n  // This is to ensure that the BASE_URL is set correctly based on the <base>\r\n  // element in the HTML document, if it exists.\r\n  const baseEl = document.querySelector('base');\r\n  BASE_URL = baseEl?.getAttribute('href') || '/';\r\n}\r\n\r\nif (BASE_URL && BASE_URL.endsWith('/')) {\r\n  BASE_URL = BASE_URL.slice(0, -1);\r\n}\r\n\r\nexport const apiBaseUrl = () => BASE_URL;\r\n\r\n// Testing this buildQuery function\r\nconst buildQuery = (params: Record<string, unknown>): string => {\r\n  const query = Object.entries(params)\r\n    .filter(([, value]) => {\r\n      if (Array.isArray(value)) {\r\n        return value.length > 0;\r\n      }\r\n      return value !== undefined && value !== null && value !== '';\r\n    })\r\n    .map(([key, value]) => {\r\n      if (Array.isArray(value)) {\r\n        return value.map((v) => `${key}=${encodeURIComponent(v)}`).join('&');\r\n      }\r\n      return `${key}=${encodeURIComponent(String(value))}`;\r\n    })\r\n    .join('&');\r\n  return query ? `?${query}` : '';\r\n};\r\n\r\nexport const health = () => `${BASE_URL}/health`;\r\nexport const user = () => `${BASE_URL}/api/user`;\r\n\r\nexport const balance = () => `${BASE_URL}/api/balance`;\r\n\r\nexport const userPlugins = () => `${BASE_URL}/api/user/plugins`;\r\n\r\nexport const deleteUser = () => `${BASE_URL}/api/user/delete`;\r\n\r\nconst messagesRoot = `${BASE_URL}/api/messages`;\r\n\r\nexport const messages = (params: q.MessagesListParams) => {\r\n  const { conversationId, messageId, ...rest } = params;\r\n\r\n  if (conversationId && messageId) {\r\n    return `${messagesRoot}/${conversationId}/${messageId}`;\r\n  }\r\n\r\n  if (conversationId) {\r\n    return `${messagesRoot}/${conversationId}`;\r\n  }\r\n\r\n  return `${messagesRoot}${buildQuery(rest)}`;\r\n};\r\n\r\nexport const messagesArtifacts = (messageId: string) => `${messagesRoot}/artifacts/${messageId}`;\r\n\r\nconst shareRoot = `${BASE_URL}/api/share`;\r\nexport const shareMessages = (shareId: string) => `${shareRoot}/${shareId}`;\r\nexport const getSharedLink = (conversationId: string) => `${shareRoot}/link/${conversationId}`;\r\nexport const getSharedLinks = (\r\n  pageSize: number,\r\n  isPublic: boolean,\r\n  sortBy: 'title' | 'createdAt',\r\n  sortDirection: 'asc' | 'desc',\r\n  search?: string,\r\n  cursor?: string,\r\n) =>\r\n  `${shareRoot}?pageSize=${pageSize}&isPublic=${isPublic}&sortBy=${sortBy}&sortDirection=${sortDirection}${\r\n    search ? `&search=${search}` : ''\r\n  }${cursor ? `&cursor=${cursor}` : ''}`;\r\nexport const createSharedLink = (conversationId: string) => `${shareRoot}/${conversationId}`;\r\nexport const updateSharedLink = (shareId: string) => `${shareRoot}/${shareId}`;\r\n\r\nconst keysEndpoint = `${BASE_URL}/api/keys`;\r\n\r\nexport const keys = () => keysEndpoint;\r\n\r\nexport const userKeyQuery = (name: string) => `${keysEndpoint}?name=${name}`;\r\n\r\nexport const revokeUserKey = (name: string) => `${keysEndpoint}/${name}`;\r\n\r\nexport const revokeAllUserKeys = () => `${keysEndpoint}?all=true`;\r\n\r\nexport const conversationsRoot = `${BASE_URL}/api/convos`;\r\n\r\nexport const conversations = (params: q.ConversationListParams) => {\r\n  return `${conversationsRoot}${buildQuery(params)}`;\r\n};\r\n\r\nexport const conversationById = (id: string) => `${conversationsRoot}/${id}`;\r\n\r\nexport const genTitle = () => `${conversationsRoot}/gen_title`;\r\n\r\nexport const updateConversation = () => `${conversationsRoot}/update`;\r\n\r\nexport const deleteConversation = () => `${conversationsRoot}`;\r\n\r\nexport const deleteAllConversation = () => `${conversationsRoot}/all`;\r\n\r\nexport const importConversation = () => `${conversationsRoot}/import`;\r\n\r\nexport const forkConversation = () => `${conversationsRoot}/fork`;\r\n\r\nexport const duplicateConversation = () => `${conversationsRoot}/duplicate`;\r\n\r\nexport const search = (q: string, cursor?: string | null) =>\r\n  `${BASE_URL}/api/search?q=${q}${cursor ? `&cursor=${cursor}` : ''}`;\r\n\r\nexport const searchEnabled = () => `${BASE_URL}/api/search/enable`;\r\n\r\nexport const presets = () => `${BASE_URL}/api/presets`;\r\n\r\nexport const deletePreset = () => `${BASE_URL}/api/presets/delete`;\r\n\r\nexport const aiEndpoints = () => `${BASE_URL}/api/endpoints`;\r\n\r\nexport const models = () => `${BASE_URL}/api/models`;\r\n\r\nexport const tokenizer = () => `${BASE_URL}/api/tokenizer`;\r\n\r\nexport const login = () => `${BASE_URL}/api/auth/login`;\r\n\r\nexport const logout = () => `${BASE_URL}/api/auth/logout`;\r\n\r\nexport const register = () => `${BASE_URL}/api/auth/register`;\r\n\r\nexport const loginFacebook = () => `${BASE_URL}/api/auth/facebook`;\r\n\r\nexport const loginGoogle = () => `${BASE_URL}/api/auth/google`;\r\n\r\nexport const refreshToken = (retry?: boolean) =>\r\n  `${BASE_URL}/api/auth/refresh${retry === true ? '?retry=true' : ''}`;\r\n\r\nexport const requestPasswordReset = () => `${BASE_URL}/api/auth/requestPasswordReset`;\r\n\r\nexport const resetPassword = () => `${BASE_URL}/api/auth/resetPassword`;\r\n\r\nexport const verifyEmail = () => `${BASE_URL}/api/user/verify`;\r\n\r\nexport const resendVerificationEmail = () => `${BASE_URL}/api/user/verify/resend`;\r\n\r\nexport const plugins = () => `${BASE_URL}/api/plugins`;\r\n\r\nexport const mcpReinitialize = (serverName: string) =>\r\n  `${BASE_URL}/api/mcp/${serverName}/reinitialize`;\r\nexport const mcpConnectionStatus = () => `${BASE_URL}/api/mcp/connection/status`;\r\nexport const mcpServerConnectionStatus = (serverName: string) =>\r\n  `${BASE_URL}/api/mcp/connection/status/${serverName}`;\r\nexport const mcpAuthValues = (serverName: string) => {\r\n  return `${BASE_URL}/api/mcp/${serverName}/auth-values`;\r\n};\r\n\r\nexport const cancelMCPOAuth = (serverName: string) => {\r\n  return `${BASE_URL}/api/mcp/oauth/cancel/${serverName}`;\r\n};\r\n\r\nexport const config = () => `${BASE_URL}/api/config`;\r\n\r\nexport const prompts = () => `${BASE_URL}/api/prompts`;\r\n\r\nexport const addPromptToGroup = (groupId: string) =>\r\n  `${BASE_URL}/api/prompts/groups/${groupId}/prompts`;\r\n\r\nexport const assistants = ({\r\n  path = '',\r\n  options,\r\n  version,\r\n  endpoint,\r\n  isAvatar,\r\n}: {\r\n  path?: string;\r\n  options?: object;\r\n  endpoint?: AssistantsEndpoint;\r\n  version: number | string;\r\n  isAvatar?: boolean;\r\n}) => {\r\n  let url = isAvatar === true ? `${images()}/assistants` : `${BASE_URL}/api/assistants/v${version}`;\r\n\r\n  if (path && path !== '') {\r\n    url += `/${path}`;\r\n  }\r\n\r\n  if (endpoint) {\r\n    options = {\r\n      ...(options ?? {}),\r\n      endpoint,\r\n    };\r\n  }\r\n\r\n  if (options && Object.keys(options).length > 0) {\r\n    const queryParams = new URLSearchParams(options as Record<string, string>).toString();\r\n    url += `?${queryParams}`;\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nexport const agents = ({ path = '', options }: { path?: string; options?: object }) => {\r\n  let url = `${BASE_URL}/api/agents`;\r\n\r\n  if (path && path !== '') {\r\n    url += `/${path}`;\r\n  }\r\n\r\n  if (options && Object.keys(options).length > 0) {\r\n    const queryParams = new URLSearchParams(options as Record<string, string>).toString();\r\n    url += `?${queryParams}`;\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nexport const mcp = {\r\n  tools: `${BASE_URL}/api/mcp/tools`,\r\n};\r\n\r\nexport const revertAgentVersion = (agent_id: string) => `${agents({ path: `${agent_id}/revert` })}`;\r\n\r\nexport const files = () => `${BASE_URL}/api/files`;\r\nexport const fileUpload = () => `${BASE_URL}/api/files`;\r\nexport const fileDelete = () => `${BASE_URL}/api/files`;\r\nexport const fileDownload = (userId: string, fileId: string) =>\r\n  `${BASE_URL}/api/files/download/${userId}/${fileId}`;\r\nexport const fileConfig = () => `${BASE_URL}/api/files/config`;\r\nexport const agentFiles = (agentId: string) => `${BASE_URL}/api/files/agent/${agentId}`;\r\n\r\nexport const images = () => `${files()}/images`;\r\n\r\nexport const avatar = () => `${images()}/avatar`;\r\n\r\nexport const speech = () => `${files()}/speech`;\r\n\r\nexport const speechToText = () => `${speech()}/stt`;\r\n\r\nexport const textToSpeech = () => `${speech()}/tts`;\r\n\r\nexport const textToSpeechManual = () => `${textToSpeech()}/manual`;\r\n\r\nexport const textToSpeechVoices = () => `${textToSpeech()}/voices`;\r\n\r\nexport const getCustomConfigSpeech = () => `${speech()}/config/get`;\r\n\r\nexport const getPromptGroup = (_id: string) => `${prompts()}/groups/${_id}`;\r\n\r\nexport const getPromptGroupsWithFilters = (filter: object) => {\r\n  let url = `${prompts()}/groups`;\r\n  // Filter out undefined/null values\r\n  const cleanedFilter = Object.entries(filter).reduce(\r\n    (acc, [key, value]) => {\r\n      if (value !== undefined && value !== null && value !== '') {\r\n        acc[key] = value;\r\n      }\r\n      return acc;\r\n    },\r\n    {} as Record<string, string>,\r\n  );\r\n\r\n  if (Object.keys(cleanedFilter).length > 0) {\r\n    const queryParams = new URLSearchParams(cleanedFilter).toString();\r\n    url += `?${queryParams}`;\r\n  }\r\n  return url;\r\n};\r\n\r\nexport const getPromptsWithFilters = (filter: object) => {\r\n  let url = prompts();\r\n  if (Object.keys(filter).length > 0) {\r\n    const queryParams = new URLSearchParams(filter as Record<string, string>).toString();\r\n    url += `?${queryParams}`;\r\n  }\r\n  return url;\r\n};\r\n\r\nexport const getPrompt = (_id: string) => `${prompts()}/${_id}`;\r\n\r\nexport const getRandomPrompts = (limit: number, skip: number) =>\r\n  `${prompts()}/random?limit=${limit}&skip=${skip}`;\r\n\r\nexport const postPrompt = prompts;\r\n\r\nexport const updatePromptGroup = getPromptGroup;\r\n\r\nexport const updatePromptLabels = (_id: string) => `${getPrompt(_id)}/labels`;\r\n\r\nexport const updatePromptTag = (_id: string) => `${getPrompt(_id)}/tags/production`;\r\n\r\nexport const deletePromptGroup = getPromptGroup;\r\n\r\nexport const deletePrompt = ({ _id, groupId }: { _id: string; groupId: string }) => {\r\n  return `${prompts()}/${_id}?groupId=${groupId}`;\r\n};\r\n\r\nexport const getCategories = () => `${BASE_URL}/api/categories`;\r\n\r\nexport const getAllPromptGroups = () => `${prompts()}/all`;\r\n\r\n/* Roles */\r\nexport const roles = () => `${BASE_URL}/api/roles`;\r\nexport const getRole = (roleName: string) => `${roles()}/${roleName.toLowerCase()}`;\r\nexport const updatePromptPermissions = (roleName: string) => `${getRole(roleName)}/prompts`;\r\nexport const updateMemoryPermissions = (roleName: string) => `${getRole(roleName)}/memories`;\r\nexport const updateAgentPermissions = (roleName: string) => `${getRole(roleName)}/agents`;\r\nexport const updatePeoplePickerPermissions = (roleName: string) =>\r\n  `${getRole(roleName)}/people-picker`;\r\n\r\nexport const updateMarketplacePermissions = (roleName: string) =>\r\n  `${getRole(roleName)}/marketplace`;\r\n\r\n/* Conversation Tags */\r\nexport const conversationTags = (tag?: string) =>\r\n  `${BASE_URL}/api/tags${tag != null && tag ? `/${encodeURIComponent(tag)}` : ''}`;\r\n\r\nexport const conversationTagsList = (pageNumber: string, sort?: string, order?: string) =>\r\n  `${conversationTags()}/list?pageNumber=${pageNumber}${sort ? `&sort=${sort}` : ''}${\r\n    order ? `&order=${order}` : ''\r\n  }`;\r\n\r\nexport const addTagToConversation = (conversationId: string) =>\r\n  `${conversationTags()}/convo/${conversationId}`;\r\n\r\nexport const userTerms = () => `${BASE_URL}/api/user/terms`;\r\nexport const acceptUserTerms = () => `${BASE_URL}/api/user/terms/accept`;\r\nexport const banner = () => `${BASE_URL}/api/banner`;\r\n\r\n// Message Feedback\r\nexport const feedback = (conversationId: string, messageId: string) =>\r\n  `${BASE_URL}/api/messages/${conversationId}/${messageId}/feedback`;\r\n\r\n// Two-Factor Endpoints\r\nexport const enableTwoFactor = () => `${BASE_URL}/api/auth/2fa/enable`;\r\nexport const verifyTwoFactor = () => `${BASE_URL}/api/auth/2fa/verify`;\r\nexport const confirmTwoFactor = () => `${BASE_URL}/api/auth/2fa/confirm`;\r\nexport const disableTwoFactor = () => `${BASE_URL}/api/auth/2fa/disable`;\r\nexport const regenerateBackupCodes = () => `${BASE_URL}/api/auth/2fa/backup/regenerate`;\r\nexport const verifyTwoFactorTemp = () => `${BASE_URL}/api/auth/2fa/verify-temp`;\r\n\r\n/* Memories */\r\nexport const memories = () => `${BASE_URL}/api/memories`;\r\nexport const memory = (key: string) => `${memories()}/${encodeURIComponent(key)}`;\r\nexport const memoryPreferences = () => `${memories()}/preferences`;\r\n\r\nexport const searchPrincipals = (params: q.PrincipalSearchParams) => {\r\n  const { q: query, limit, types } = params;\r\n  let url = `${BASE_URL}/api/permissions/search-principals?q=${encodeURIComponent(query)}`;\r\n\r\n  if (limit !== undefined) {\r\n    url += `&limit=${limit}`;\r\n  }\r\n\r\n  if (types && types.length > 0) {\r\n    url += `&types=${types.join(',')}`;\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nexport const getAccessRoles = (resourceType: ResourceType) =>\r\n  `${BASE_URL}/api/permissions/${resourceType}/roles`;\r\n\r\nexport const getResourcePermissions = (resourceType: ResourceType, resourceId: string) =>\r\n  `${BASE_URL}/api/permissions/${resourceType}/${resourceId}`;\r\n\r\nexport const updateResourcePermissions = (resourceType: ResourceType, resourceId: string) =>\r\n  `${BASE_URL}/api/permissions/${resourceType}/${resourceId}`;\r\n\r\nexport const getEffectivePermissions = (resourceType: ResourceType, resourceId: string) =>\r\n  `${BASE_URL}/api/permissions/${resourceType}/${resourceId}/effective`;\r\n\r\n// SharePoint Graph API Token\r\nexport const graphToken = (scopes: string) =>\r\n  `${BASE_URL}/api/auth/graph-token?scopes=${encodeURIComponent(scopes)}`;\r\n","import { z } from 'zod';\r\nimport type { ZodError } from 'zod';\r\nimport type { TModelsConfig } from './types';\r\nimport { EModelEndpoint, eModelEndpointSchema } from './schemas';\r\nimport { specsConfigSchema, TSpecsConfig } from './models';\r\nimport { fileConfigSchema } from './file-config';\r\nimport { FileSources } from './types/files';\r\nimport { MCPServersSchema } from './mcp';\r\nimport { apiBaseUrl } from './api-endpoints';\r\n\r\nexport const defaultSocialLogins = ['google', 'facebook', 'openid', 'github', 'discord', 'saml'];\r\n\r\nexport const defaultRetrievalModels = [\r\n  'gpt-4o',\r\n  'o1-preview-2024-09-12',\r\n  'o1-preview',\r\n  'o1-mini-2024-09-12',\r\n  'o1-mini',\r\n  'o3-mini',\r\n  'chatgpt-4o-latest',\r\n  'gpt-4o-2024-05-13',\r\n  'gpt-4o-2024-08-06',\r\n  'gpt-4o-mini',\r\n  'gpt-4o-mini-2024-07-18',\r\n  'gpt-4-turbo-preview',\r\n  'gpt-3.5-turbo-0125',\r\n  'gpt-4-0125-preview',\r\n  'gpt-4-1106-preview',\r\n  'gpt-3.5-turbo-1106',\r\n  'gpt-3.5-turbo-0125',\r\n  'gpt-4-turbo',\r\n  'gpt-4-0125',\r\n  'gpt-4-1106',\r\n];\r\n\r\nexport const excludedKeys = new Set([\r\n  'conversationId',\r\n  'title',\r\n  'iconURL',\r\n  'greeting',\r\n  'endpoint',\r\n  'endpointType',\r\n  'createdAt',\r\n  'updatedAt',\r\n  'expiredAt',\r\n  'messages',\r\n  'isArchived',\r\n  'tags',\r\n  'user',\r\n  '__v',\r\n  '_id',\r\n  'tools',\r\n  'model',\r\n  'files',\r\n  'spec',\r\n  'disableParams',\r\n]);\r\n\r\nexport enum SettingsViews {\r\n  default = 'default',\r\n  advanced = 'advanced',\r\n}\r\n\r\nexport const fileSourceSchema = z.nativeEnum(FileSources);\r\n\r\nexport const fileStrategiesSchema = z\r\n  .object({\r\n    default: fileSourceSchema.optional(),\r\n    avatar: fileSourceSchema.optional(),\r\n    image: fileSourceSchema.optional(),\r\n    document: fileSourceSchema.optional(),\r\n  })\r\n  .optional();\r\n\r\n// Helper type to extract the shape of the Zod object schema\r\ntype SchemaShape<T> = T extends z.ZodObject<infer U> ? U : never;\r\n\r\n// Helper type to determine the default value or undefined based on whether the field has a default\r\ntype DefaultValue<T> =\r\n  T extends z.ZodDefault<z.ZodTypeAny> ? ReturnType<T['_def']['defaultValue']> : undefined;\r\n\r\n// Extract default values or undefined from the schema shape\r\ntype ExtractDefaults<T> = {\r\n  [P in keyof T]: DefaultValue<T[P]>;\r\n};\r\n\r\nexport type SchemaDefaults<T> = ExtractDefaults<SchemaShape<T>>;\r\n\r\nexport type TConfigDefaults = SchemaDefaults<typeof configSchema>;\r\n\r\nexport function getSchemaDefaults<Schema extends z.AnyZodObject>(\r\n  schema: Schema,\r\n): ExtractDefaults<SchemaShape<Schema>> {\r\n  const shape = schema.shape;\r\n  const entries = Object.entries(shape).map(([key, value]) => {\r\n    if (value instanceof z.ZodDefault) {\r\n      // Extract default value if it exists\r\n      return [key, value._def.defaultValue()];\r\n    }\r\n    return [key, undefined];\r\n  });\r\n\r\n  // Create the object with the right types\r\n  return Object.fromEntries(entries) as ExtractDefaults<SchemaShape<Schema>>;\r\n}\r\n\r\nexport const modelConfigSchema = z\r\n  .object({\r\n    deploymentName: z.string().optional(),\r\n    version: z.string().optional(),\r\n    assistants: z.boolean().optional(),\r\n  })\r\n  .or(z.boolean());\r\n\r\nexport type TAzureModelConfig = z.infer<typeof modelConfigSchema>;\r\n\r\nexport const azureBaseSchema = z.object({\r\n  apiKey: z.string(),\r\n  serverless: z.boolean().optional(),\r\n  instanceName: z.string().optional(),\r\n  deploymentName: z.string().optional(),\r\n  assistants: z.boolean().optional(),\r\n  addParams: z.record(z.any()).optional(),\r\n  dropParams: z.array(z.string()).optional(),\r\n  forcePrompt: z.boolean().optional(),\r\n  version: z.string().optional(),\r\n  baseURL: z.string().optional(),\r\n  additionalHeaders: z.record(z.any()).optional(),\r\n});\r\n\r\nexport type TAzureBaseSchema = z.infer<typeof azureBaseSchema>;\r\n\r\nexport const azureGroupSchema = z\r\n  .object({\r\n    group: z.string(),\r\n    models: z.record(z.string(), modelConfigSchema),\r\n  })\r\n  .required()\r\n  .and(azureBaseSchema);\r\n\r\nexport const azureGroupConfigsSchema = z.array(azureGroupSchema).min(1);\r\nexport type TAzureGroup = z.infer<typeof azureGroupSchema>;\r\nexport type TAzureGroups = z.infer<typeof azureGroupConfigsSchema>;\r\nexport type TAzureModelMapSchema = {\r\n  // deploymentName?: string;\r\n  // version?: string;\r\n  group: string;\r\n};\r\n\r\nexport type TAzureModelGroupMap = Record<string, TAzureModelMapSchema | undefined>;\r\nexport type TAzureGroupMap = Record<\r\n  string,\r\n  (TAzureBaseSchema & { models: Record<string, TAzureModelConfig | undefined> }) | undefined\r\n>;\r\n\r\nexport type TValidatedAzureConfig = {\r\n  modelNames: string[];\r\n  modelGroupMap: TAzureModelGroupMap;\r\n  groupMap: TAzureGroupMap;\r\n};\r\n\r\nexport type TAzureConfigValidationResult = TValidatedAzureConfig & {\r\n  isValid: boolean;\r\n  errors: (ZodError | string)[];\r\n};\r\n\r\nexport enum Capabilities {\r\n  code_interpreter = 'code_interpreter',\r\n  image_vision = 'image_vision',\r\n  retrieval = 'retrieval',\r\n  actions = 'actions',\r\n  tools = 'tools',\r\n}\r\n\r\nexport enum AgentCapabilities {\r\n  hide_sequential_outputs = 'hide_sequential_outputs',\r\n  end_after_tools = 'end_after_tools',\r\n  execute_code = 'execute_code',\r\n  file_search = 'file_search',\r\n  web_search = 'web_search',\r\n  artifacts = 'artifacts',\r\n  actions = 'actions',\r\n  context = 'context',\r\n  tools = 'tools',\r\n  chain = 'chain',\r\n  ocr = 'ocr',\r\n}\r\n\r\nexport const defaultAssistantsVersion = {\r\n  [EModelEndpoint.assistants]: 2,\r\n  [EModelEndpoint.azureAssistants]: 1,\r\n};\r\n\r\nexport const baseEndpointSchema = z.object({\r\n  streamRate: z.number().optional(),\r\n  baseURL: z.string().optional(),\r\n  titlePrompt: z.string().optional(),\r\n  titleModel: z.string().optional(),\r\n  titleConvo: z.boolean().optional(),\r\n  titleMethod: z\r\n    .union([z.literal('completion'), z.literal('functions'), z.literal('structured')])\r\n    .optional(),\r\n  titleEndpoint: z.string().optional(),\r\n  titlePromptTemplate: z.string().optional(),\r\n});\r\n\r\nexport type TBaseEndpoint = z.infer<typeof baseEndpointSchema>;\r\n\r\nexport const bedrockEndpointSchema = baseEndpointSchema.merge(\r\n  z.object({\r\n    availableRegions: z.array(z.string()).optional(),\r\n  }),\r\n);\r\n\r\nexport const assistantEndpointSchema = baseEndpointSchema.merge(\r\n  z.object({\r\n    /* assistants specific */\r\n    disableBuilder: z.boolean().optional(),\r\n    pollIntervalMs: z.number().optional(),\r\n    timeoutMs: z.number().optional(),\r\n    version: z.union([z.string(), z.number()]).default(2),\r\n    supportedIds: z.array(z.string()).min(1).optional(),\r\n    excludedIds: z.array(z.string()).min(1).optional(),\r\n    privateAssistants: z.boolean().optional(),\r\n    retrievalModels: z.array(z.string()).min(1).optional().default(defaultRetrievalModels),\r\n    capabilities: z\r\n      .array(z.nativeEnum(Capabilities))\r\n      .optional()\r\n      .default([\r\n        Capabilities.code_interpreter,\r\n        Capabilities.image_vision,\r\n        Capabilities.retrieval,\r\n        Capabilities.actions,\r\n        Capabilities.tools,\r\n      ]),\r\n    /* general */\r\n    apiKey: z.string().optional(),\r\n    models: z\r\n      .object({\r\n        default: z.array(z.string()).min(1),\r\n        fetch: z.boolean().optional(),\r\n        userIdQuery: z.boolean().optional(),\r\n      })\r\n      .optional(),\r\n    headers: z.record(z.any()).optional(),\r\n  }),\r\n);\r\n\r\nexport type TAssistantEndpoint = z.infer<typeof assistantEndpointSchema>;\r\n\r\nexport const defaultAgentCapabilities = [\r\n  AgentCapabilities.execute_code,\r\n  AgentCapabilities.file_search,\r\n  AgentCapabilities.web_search,\r\n  AgentCapabilities.artifacts,\r\n  AgentCapabilities.actions,\r\n  AgentCapabilities.context,\r\n  AgentCapabilities.tools,\r\n  AgentCapabilities.chain,\r\n  AgentCapabilities.ocr,\r\n];\r\n\r\nexport const agentsEndpointSchema = baseEndpointSchema\r\n  .merge(\r\n    z.object({\r\n      /* agents specific */\r\n      recursionLimit: z.number().optional(),\r\n      disableBuilder: z.boolean().optional().default(false),\r\n      maxRecursionLimit: z.number().optional(),\r\n      maxCitations: z.number().min(1).max(50).optional().default(30),\r\n      maxCitationsPerFile: z.number().min(1).max(10).optional().default(7),\r\n      minRelevanceScore: z.number().min(0.0).max(1.0).optional().default(0.45),\r\n      allowedProviders: z.array(z.union([z.string(), eModelEndpointSchema])).optional(),\r\n      capabilities: z\r\n        .array(z.nativeEnum(AgentCapabilities))\r\n        .optional()\r\n        .default(defaultAgentCapabilities),\r\n    }),\r\n  )\r\n  .default({\r\n    disableBuilder: false,\r\n    capabilities: defaultAgentCapabilities,\r\n    maxCitations: 30,\r\n    maxCitationsPerFile: 7,\r\n    minRelevanceScore: 0.45,\r\n  });\r\n\r\nexport type TAgentsEndpoint = z.infer<typeof agentsEndpointSchema>;\r\n\r\nexport const endpointSchema = baseEndpointSchema.merge(\r\n  z.object({\r\n    name: z.string().refine((value) => !eModelEndpointSchema.safeParse(value).success, {\r\n      message: `Value cannot be one of the default endpoint (EModelEndpoint) values: ${Object.values(\r\n        EModelEndpoint,\r\n      ).join(', ')}`,\r\n    }),\r\n    apiKey: z.string(),\r\n    baseURL: z.string(),\r\n    models: z.object({\r\n      default: z.array(z.string()).min(1),\r\n      fetch: z.boolean().optional(),\r\n      userIdQuery: z.boolean().optional(),\r\n    }),\r\n    summarize: z.boolean().optional(),\r\n    summaryModel: z.string().optional(),\r\n    iconURL: z.string().optional(),\r\n    forcePrompt: z.boolean().optional(),\r\n    modelDisplayLabel: z.string().optional(),\r\n    headers: z.record(z.any()).optional(),\r\n    addParams: z.record(z.any()).optional(),\r\n    dropParams: z.array(z.string()).optional(),\r\n    customParams: z\r\n      .object({\r\n        defaultParamsEndpoint: z.string().default('custom'),\r\n        paramDefinitions: z.array(z.record(z.any())).optional(),\r\n      })\r\n      .strict(),\r\n    customOrder: z.number().optional(),\r\n    directEndpoint: z.boolean().optional(),\r\n    titleMessageRole: z.string().optional(),\r\n  }),\r\n);\r\n\r\nexport type TEndpoint = z.infer<typeof endpointSchema>;\r\n\r\nexport const azureEndpointSchema = z\r\n  .object({\r\n    groups: azureGroupConfigsSchema,\r\n    plugins: z.boolean().optional(),\r\n    assistants: z.boolean().optional(),\r\n  })\r\n  .and(\r\n    endpointSchema\r\n      .pick({\r\n        streamRate: true,\r\n        titleConvo: true,\r\n        titleMethod: true,\r\n        titleModel: true,\r\n        titlePrompt: true,\r\n        titlePromptTemplate: true,\r\n        summarize: true,\r\n        summaryModel: true,\r\n        customOrder: true,\r\n      })\r\n      .partial(),\r\n  );\r\n\r\nexport type TAzureConfig = Omit<z.infer<typeof azureEndpointSchema>, 'groups'> &\r\n  TAzureConfigValidationResult;\r\n\r\nconst ttsOpenaiSchema = z.object({\r\n  url: z.string().optional(),\r\n  apiKey: z.string(),\r\n  model: z.string(),\r\n  voices: z.array(z.string()),\r\n});\r\n\r\nconst ttsAzureOpenAISchema = z.object({\r\n  instanceName: z.string(),\r\n  apiKey: z.string(),\r\n  deploymentName: z.string(),\r\n  apiVersion: z.string(),\r\n  model: z.string(),\r\n  voices: z.array(z.string()),\r\n});\r\n\r\nconst ttsElevenLabsSchema = z.object({\r\n  url: z.string().optional(),\r\n  websocketUrl: z.string().optional(),\r\n  apiKey: z.string(),\r\n  model: z.string(),\r\n  voices: z.array(z.string()),\r\n  voice_settings: z\r\n    .object({\r\n      similarity_boost: z.number().optional(),\r\n      stability: z.number().optional(),\r\n      style: z.number().optional(),\r\n      use_speaker_boost: z.boolean().optional(),\r\n    })\r\n    .optional(),\r\n  pronunciation_dictionary_locators: z.array(z.string()).optional(),\r\n});\r\n\r\nconst ttsLocalaiSchema = z.object({\r\n  url: z.string(),\r\n  apiKey: z.string().optional(),\r\n  voices: z.array(z.string()),\r\n  backend: z.string(),\r\n});\r\n\r\nconst ttsSchema = z.object({\r\n  openai: ttsOpenaiSchema.optional(),\r\n  azureOpenAI: ttsAzureOpenAISchema.optional(),\r\n  elevenlabs: ttsElevenLabsSchema.optional(),\r\n  localai: ttsLocalaiSchema.optional(),\r\n});\r\n\r\nconst sttOpenaiSchema = z.object({\r\n  url: z.string().optional(),\r\n  apiKey: z.string(),\r\n  model: z.string(),\r\n});\r\n\r\nconst sttAzureOpenAISchema = z.object({\r\n  instanceName: z.string(),\r\n  apiKey: z.string(),\r\n  deploymentName: z.string(),\r\n  apiVersion: z.string(),\r\n});\r\n\r\nconst sttSchema = z.object({\r\n  openai: sttOpenaiSchema.optional(),\r\n  azureOpenAI: sttAzureOpenAISchema.optional(),\r\n});\r\n\r\nconst speechTab = z\r\n  .object({\r\n    conversationMode: z.boolean().optional(),\r\n    advancedMode: z.boolean().optional(),\r\n    speechToText: z\r\n      .boolean()\r\n      .optional()\r\n      .or(\r\n        z.object({\r\n          engineSTT: z.string().optional(),\r\n          languageSTT: z.string().optional(),\r\n          autoTranscribeAudio: z.boolean().optional(),\r\n          decibelValue: z.number().optional(),\r\n          autoSendText: z.number().optional(),\r\n        }),\r\n      )\r\n      .optional(),\r\n    textToSpeech: z\r\n      .boolean()\r\n      .optional()\r\n      .or(\r\n        z.object({\r\n          engineTTS: z.string().optional(),\r\n          voice: z.string().optional(),\r\n          languageTTS: z.string().optional(),\r\n          automaticPlayback: z.boolean().optional(),\r\n          playbackRate: z.number().optional(),\r\n          cacheTTS: z.boolean().optional(),\r\n        }),\r\n      )\r\n      .optional(),\r\n  })\r\n  .optional();\r\n\r\nexport enum RateLimitPrefix {\r\n  FILE_UPLOAD = 'FILE_UPLOAD',\r\n  IMPORT = 'IMPORT',\r\n  TTS = 'TTS',\r\n  STT = 'STT',\r\n}\r\n\r\nexport const rateLimitSchema = z.object({\r\n  fileUploads: z\r\n    .object({\r\n      ipMax: z.number().optional(),\r\n      ipWindowInMinutes: z.number().optional(),\r\n      userMax: z.number().optional(),\r\n      userWindowInMinutes: z.number().optional(),\r\n    })\r\n    .optional(),\r\n  conversationsImport: z\r\n    .object({\r\n      ipMax: z.number().optional(),\r\n      ipWindowInMinutes: z.number().optional(),\r\n      userMax: z.number().optional(),\r\n      userWindowInMinutes: z.number().optional(),\r\n    })\r\n    .optional(),\r\n  tts: z\r\n    .object({\r\n      ipMax: z.number().optional(),\r\n      ipWindowInMinutes: z.number().optional(),\r\n      userMax: z.number().optional(),\r\n      userWindowInMinutes: z.number().optional(),\r\n    })\r\n    .optional(),\r\n  stt: z\r\n    .object({\r\n      ipMax: z.number().optional(),\r\n      ipWindowInMinutes: z.number().optional(),\r\n      userMax: z.number().optional(),\r\n      userWindowInMinutes: z.number().optional(),\r\n    })\r\n    .optional(),\r\n});\r\n\r\nexport enum EImageOutputType {\r\n  PNG = 'png',\r\n  WEBP = 'webp',\r\n  JPEG = 'jpeg',\r\n}\r\n\r\nconst termsOfServiceSchema = z.object({\r\n  externalUrl: z.string().optional(),\r\n  openNewTab: z.boolean().optional(),\r\n  modalAcceptance: z.boolean().optional(),\r\n  modalTitle: z.string().optional(),\r\n  modalContent: z.string().or(z.array(z.string())).optional(),\r\n});\r\n\r\nexport type TTermsOfService = z.infer<typeof termsOfServiceSchema>;\r\n\r\nconst mcpServersSchema = z.object({\r\n  placeholder: z.string().optional(),\r\n});\r\n\r\nexport type TMcpServersConfig = z.infer<typeof mcpServersSchema>;\r\n\r\nexport const interfaceSchema = z\r\n  .object({\r\n    privacyPolicy: z\r\n      .object({\r\n        externalUrl: z.string().optional(),\r\n        openNewTab: z.boolean().optional(),\r\n      })\r\n      .optional(),\r\n    termsOfService: termsOfServiceSchema.optional(),\r\n    customWelcome: z.string().optional(),\r\n    mcpServers: mcpServersSchema.optional(),\r\n    endpointsMenu: z.boolean().optional(),\r\n    modelSelect: z.boolean().optional(),\r\n    parameters: z.boolean().optional(),\r\n    sidePanel: z.boolean().optional(),\r\n    multiConvo: z.boolean().optional(),\r\n    bookmarks: z.boolean().optional(),\r\n    memories: z.boolean().optional(),\r\n    presets: z.boolean().optional(),\r\n    prompts: z.boolean().optional(),\r\n    agents: z.boolean().optional(),\r\n    temporaryChat: z.boolean().optional(),\r\n    temporaryChatRetention: z.number().min(1).max(8760).optional(),\r\n    runCode: z.boolean().optional(),\r\n    webSearch: z.boolean().optional(),\r\n    peoplePicker: z\r\n      .object({\r\n        users: z.boolean().optional(),\r\n        groups: z.boolean().optional(),\r\n        roles: z.boolean().optional(),\r\n      })\r\n      .optional(),\r\n    marketplace: z\r\n      .object({\r\n        use: z.boolean().optional(),\r\n      })\r\n      .optional(),\r\n    fileSearch: z.boolean().optional(),\r\n    fileCitations: z.boolean().optional(),\r\n  })\r\n  .default({\r\n    endpointsMenu: true,\r\n    modelSelect: true,\r\n    parameters: true,\r\n    sidePanel: true,\r\n    presets: true,\r\n    multiConvo: true,\r\n    bookmarks: true,\r\n    memories: true,\r\n    prompts: true,\r\n    agents: true,\r\n    temporaryChat: true,\r\n    runCode: true,\r\n    webSearch: true,\r\n    peoplePicker: {\r\n      users: true,\r\n      groups: true,\r\n      roles: true,\r\n    },\r\n    marketplace: {\r\n      use: false,\r\n    },\r\n    fileSearch: true,\r\n    fileCitations: true,\r\n  });\r\n\r\nexport type TInterfaceConfig = z.infer<typeof interfaceSchema>;\r\nexport type TBalanceConfig = z.infer<typeof balanceSchema>;\r\nexport type TTransactionsConfig = z.infer<typeof transactionsSchema>;\r\n\r\nexport const turnstileOptionsSchema = z\r\n  .object({\r\n    language: z.string().default('auto'),\r\n    size: z.enum(['normal', 'compact', 'flexible', 'invisible']).default('normal'),\r\n  })\r\n  .default({\r\n    language: 'auto',\r\n    size: 'normal',\r\n  });\r\n\r\nexport const turnstileSchema = z.object({\r\n  siteKey: z.string(),\r\n  options: turnstileOptionsSchema.optional(),\r\n});\r\n\r\nexport type TTurnstileConfig = z.infer<typeof turnstileSchema>;\r\n\r\nexport type TStartupConfig = {\r\n  appTitle: string;\r\n  socialLogins?: string[];\r\n  interface?: TInterfaceConfig;\r\n  turnstile?: TTurnstileConfig;\r\n  balance?: TBalanceConfig;\r\n  transactions?: TTransactionsConfig;\r\n  discordLoginEnabled: boolean;\r\n  facebookLoginEnabled: boolean;\r\n  githubLoginEnabled: boolean;\r\n  googleLoginEnabled: boolean;\r\n  openidLoginEnabled: boolean;\r\n  appleLoginEnabled: boolean;\r\n  samlLoginEnabled: boolean;\r\n  openidLabel: string;\r\n  openidImageUrl: string;\r\n  openidAutoRedirect: boolean;\r\n  samlLabel: string;\r\n  samlImageUrl: string;\r\n  /** LDAP Auth Configuration */\r\n  ldap?: {\r\n    /** LDAP enabled */\r\n    enabled: boolean;\r\n    /** Whether LDAP uses username vs. email */\r\n    username?: boolean;\r\n  };\r\n  serverDomain: string;\r\n  emailLoginEnabled: boolean;\r\n  registrationEnabled: boolean;\r\n  socialLoginEnabled: boolean;\r\n  passwordResetEnabled: boolean;\r\n  emailEnabled: boolean;\r\n  showBirthdayIcon: boolean;\r\n  helpAndFaqURL: string;\r\n  customFooter?: string;\r\n  modelSpecs?: TSpecsConfig;\r\n  sharedLinksEnabled: boolean;\r\n  publicSharedLinksEnabled: boolean;\r\n  analyticsGtmId?: string;\r\n  instanceProjectId: string;\r\n  bundlerURL?: string;\r\n  staticBundlerURL?: string;\r\n  sharePointFilePickerEnabled?: boolean;\r\n  sharePointBaseUrl?: string;\r\n  sharePointPickerGraphScope?: string;\r\n  sharePointPickerSharePointScope?: string;\r\n  openidReuseTokens?: boolean;\r\n  minPasswordLength?: number;\r\n  webSearch?: {\r\n    searchProvider?: SearchProviders;\r\n    scraperType?: ScraperTypes;\r\n    rerankerType?: RerankerTypes;\r\n  };\r\n  mcpServers?: Record<\r\n    string,\r\n    {\r\n      customUserVars: Record<\r\n        string,\r\n        {\r\n          title: string;\r\n          description: string;\r\n        }\r\n      >;\r\n      chatMenu?: boolean;\r\n      isOAuth?: boolean;\r\n      startup?: boolean;\r\n    }\r\n  >;\r\n  mcpPlaceholder?: string;\r\n};\r\n\r\nexport enum OCRStrategy {\r\n  MISTRAL_OCR = 'mistral_ocr',\r\n  CUSTOM_OCR = 'custom_ocr',\r\n  AZURE_MISTRAL_OCR = 'azure_mistral_ocr',\r\n  VERTEXAI_MISTRAL_OCR = 'vertexai_mistral_ocr',\r\n}\r\n\r\nexport enum SearchCategories {\r\n  PROVIDERS = 'providers',\r\n  SCRAPERS = 'scrapers',\r\n  RERANKERS = 'rerankers',\r\n}\r\n\r\nexport enum SearchProviders {\r\n  SERPER = 'serper',\r\n  SEARXNG = 'searxng',\r\n}\r\n\r\nexport enum ScraperTypes {\r\n  FIRECRAWL = 'firecrawl',\r\n  SERPER = 'serper',\r\n}\r\n\r\nexport enum RerankerTypes {\r\n  JINA = 'jina',\r\n  COHERE = 'cohere',\r\n}\r\n\r\nexport enum SafeSearchTypes {\r\n  OFF = 0,\r\n  MODERATE = 1,\r\n  STRICT = 2,\r\n}\r\n\r\nexport const webSearchSchema = z.object({\r\n  serperApiKey: z.string().optional().default('${SERPER_API_KEY}'),\r\n  searxngInstanceUrl: z.string().optional().default('${SEARXNG_INSTANCE_URL}'),\r\n  searxngApiKey: z.string().optional().default('${SEARXNG_API_KEY}'),\r\n  firecrawlApiKey: z.string().optional().default('${FIRECRAWL_API_KEY}'),\r\n  firecrawlApiUrl: z.string().optional().default('${FIRECRAWL_API_URL}'),\r\n  jinaApiKey: z.string().optional().default('${JINA_API_KEY}'),\r\n  jinaApiUrl: z.string().optional().default('${JINA_API_URL}'),\r\n  cohereApiKey: z.string().optional().default('${COHERE_API_KEY}'),\r\n  searchProvider: z.nativeEnum(SearchProviders).optional(),\r\n  scraperType: z.nativeEnum(ScraperTypes).optional(),\r\n  rerankerType: z.nativeEnum(RerankerTypes).optional(),\r\n  scraperTimeout: z.number().optional(),\r\n  safeSearch: z.nativeEnum(SafeSearchTypes).default(SafeSearchTypes.MODERATE),\r\n  firecrawlOptions: z\r\n    .object({\r\n      formats: z.array(z.string()).optional(),\r\n      includeTags: z.array(z.string()).optional(),\r\n      excludeTags: z.array(z.string()).optional(),\r\n      headers: z.record(z.string()).optional(),\r\n      waitFor: z.number().optional(),\r\n      timeout: z.number().optional(),\r\n      maxAge: z.number().optional(),\r\n      mobile: z.boolean().optional(),\r\n      skipTlsVerification: z.boolean().optional(),\r\n      blockAds: z.boolean().optional(),\r\n      removeBase64Images: z.boolean().optional(),\r\n      parsePDF: z.boolean().optional(),\r\n      storeInCache: z.boolean().optional(),\r\n      zeroDataRetention: z.boolean().optional(),\r\n      location: z\r\n        .object({\r\n          country: z.string().optional(),\r\n          languages: z.array(z.string()).optional(),\r\n        })\r\n        .optional(),\r\n      onlyMainContent: z.boolean().optional(),\r\n      changeTrackingOptions: z\r\n        .object({\r\n          modes: z.array(z.string()).optional(),\r\n          schema: z.record(z.unknown()).optional(),\r\n          prompt: z.string().optional(),\r\n          tag: z.string().nullable().optional(),\r\n        })\r\n        .optional(),\r\n    })\r\n    .optional(),\r\n});\r\n\r\nexport type TWebSearchConfig = z.infer<typeof webSearchSchema>;\r\n\r\nexport const ocrSchema = z.object({\r\n  mistralModel: z.string().optional(),\r\n  apiKey: z.string().optional().default('${OCR_API_KEY}'),\r\n  baseURL: z.string().optional().default('${OCR_BASEURL}'),\r\n  strategy: z.nativeEnum(OCRStrategy).default(OCRStrategy.MISTRAL_OCR),\r\n});\r\n\r\nexport const balanceSchema = z.object({\r\n  enabled: z.boolean().optional().default(false),\r\n  startBalance: z.number().optional().default(20000),\r\n  autoRefillEnabled: z.boolean().optional().default(false),\r\n  refillIntervalValue: z.number().optional().default(30),\r\n  refillIntervalUnit: z\r\n    .enum(['seconds', 'minutes', 'hours', 'days', 'weeks', 'months'])\r\n    .optional()\r\n    .default('days'),\r\n  refillAmount: z.number().optional().default(10000),\r\n});\r\n\r\nexport const transactionsSchema = z.object({\r\n  enabled: z.boolean().optional().default(true),\r\n});\r\n\r\nexport const memorySchema = z.object({\r\n  disabled: z.boolean().optional(),\r\n  validKeys: z.array(z.string()).optional(),\r\n  tokenLimit: z.number().optional(),\r\n  charLimit: z.number().optional().default(10000),\r\n  personalize: z.boolean().default(true),\r\n  messageWindowSize: z.number().optional().default(5),\r\n  agent: z\r\n    .union([\r\n      z.object({\r\n        id: z.string(),\r\n      }),\r\n      z.object({\r\n        provider: z.string(),\r\n        model: z.string(),\r\n        instructions: z.string().optional(),\r\n        model_parameters: z.record(z.any()).optional(),\r\n      }),\r\n    ])\r\n    .optional(),\r\n});\r\n\r\nexport type TMemoryConfig = z.infer<typeof memorySchema>;\r\n\r\nconst customEndpointsSchema = z.array(endpointSchema.partial()).optional();\r\n\r\nexport const configSchema = z.object({\r\n  version: z.string(),\r\n  cache: z.boolean().default(true),\r\n  ocr: ocrSchema.optional(),\r\n  webSearch: webSearchSchema.optional(),\r\n  memory: memorySchema.optional(),\r\n  secureImageLinks: z.boolean().optional(),\r\n  imageOutputType: z.nativeEnum(EImageOutputType).default(EImageOutputType.PNG),\r\n  includedTools: z.array(z.string()).optional(),\r\n  filteredTools: z.array(z.string()).optional(),\r\n  mcpServers: MCPServersSchema.optional(),\r\n  interface: interfaceSchema,\r\n  turnstile: turnstileSchema.optional(),\r\n  fileStrategy: fileSourceSchema.default(FileSources.local),\r\n  fileStrategies: fileStrategiesSchema,\r\n  actions: z\r\n    .object({\r\n      allowedDomains: z.array(z.string()).optional(),\r\n    })\r\n    .optional(),\r\n  registration: z\r\n    .object({\r\n      socialLogins: z.array(z.string()).optional(),\r\n      allowedDomains: z.array(z.string()).optional(),\r\n    })\r\n    .default({ socialLogins: defaultSocialLogins }),\r\n  balance: balanceSchema.optional(),\r\n  transactions: transactionsSchema.optional(),\r\n  speech: z\r\n    .object({\r\n      tts: ttsSchema.optional(),\r\n      stt: sttSchema.optional(),\r\n      speechTab: speechTab.optional(),\r\n    })\r\n    .optional(),\r\n  rateLimits: rateLimitSchema.optional(),\r\n  fileConfig: fileConfigSchema.optional(),\r\n  modelSpecs: specsConfigSchema.optional(),\r\n  endpoints: z\r\n    .object({\r\n      all: baseEndpointSchema.optional(),\r\n      [EModelEndpoint.openAI]: baseEndpointSchema.optional(),\r\n      [EModelEndpoint.google]: baseEndpointSchema.optional(),\r\n      [EModelEndpoint.anthropic]: baseEndpointSchema.optional(),\r\n      [EModelEndpoint.gptPlugins]: baseEndpointSchema.optional(),\r\n      [EModelEndpoint.azureOpenAI]: azureEndpointSchema.optional(),\r\n      [EModelEndpoint.azureAssistants]: assistantEndpointSchema.optional(),\r\n      [EModelEndpoint.assistants]: assistantEndpointSchema.optional(),\r\n      [EModelEndpoint.agents]: agentsEndpointSchema.optional(),\r\n      [EModelEndpoint.custom]: customEndpointsSchema.optional(),\r\n      [EModelEndpoint.bedrock]: baseEndpointSchema.optional(),\r\n    })\r\n    .strict()\r\n    .refine((data) => Object.keys(data).length > 0, {\r\n      message: 'At least one `endpoints` field must be provided.',\r\n    })\r\n    .optional(),\r\n});\r\n\r\nexport const getConfigDefaults = () => getSchemaDefaults(configSchema);\r\n\r\nexport type TCustomConfig = z.infer<typeof configSchema>;\r\nexport type TCustomEndpoints = z.infer<typeof customEndpointsSchema>;\r\n\r\nexport type TProviderSchema =\r\n  | z.infer<typeof ttsOpenaiSchema>\r\n  | z.infer<typeof ttsElevenLabsSchema>\r\n  | z.infer<typeof ttsLocalaiSchema>\r\n  | undefined;\r\n\r\nexport enum KnownEndpoints {\r\n  anyscale = 'anyscale',\r\n  apipie = 'apipie',\r\n  cohere = 'cohere',\r\n  fireworks = 'fireworks',\r\n  deepseek = 'deepseek',\r\n  groq = 'groq',\r\n  huggingface = 'huggingface',\r\n  mistral = 'mistral',\r\n  mlx = 'mlx',\r\n  ollama = 'ollama',\r\n  openrouter = 'openrouter',\r\n  perplexity = 'perplexity',\r\n  shuttleai = 'shuttleai',\r\n  'together.ai' = 'together.ai',\r\n  unify = 'unify',\r\n  vercel = 'vercel',\r\n  xai = 'xai',\r\n}\r\n\r\nexport enum FetchTokenConfig {\r\n  openrouter = KnownEndpoints.openrouter,\r\n}\r\n\r\nexport const defaultEndpoints: EModelEndpoint[] = [\r\n  EModelEndpoint.openAI,\r\n  EModelEndpoint.assistants,\r\n  EModelEndpoint.azureAssistants,\r\n  EModelEndpoint.azureOpenAI,\r\n  EModelEndpoint.agents,\r\n  EModelEndpoint.chatGPTBrowser,\r\n  EModelEndpoint.gptPlugins,\r\n  EModelEndpoint.google,\r\n  EModelEndpoint.anthropic,\r\n  EModelEndpoint.custom,\r\n  EModelEndpoint.bedrock,\r\n];\r\n\r\nexport const alternateName = {\r\n  [EModelEndpoint.openAI]: 'OpenAI',\r\n  [EModelEndpoint.assistants]: 'Assistants',\r\n  [EModelEndpoint.agents]: 'My Agents',\r\n  [EModelEndpoint.azureAssistants]: 'Azure Assistants',\r\n  [EModelEndpoint.azureOpenAI]: 'Azure OpenAI',\r\n  [EModelEndpoint.chatGPTBrowser]: 'ChatGPT',\r\n  [EModelEndpoint.gptPlugins]: 'Plugins',\r\n  [EModelEndpoint.google]: 'Google',\r\n  [EModelEndpoint.anthropic]: 'Anthropic',\r\n  [EModelEndpoint.custom]: 'Custom',\r\n  [EModelEndpoint.bedrock]: 'AWS Bedrock',\r\n  [KnownEndpoints.ollama]: 'Ollama',\r\n  [KnownEndpoints.deepseek]: 'DeepSeek',\r\n  [KnownEndpoints.xai]: 'xAI',\r\n  [KnownEndpoints.vercel]: 'Vercel',\r\n};\r\n\r\nconst sharedOpenAIModels = [\r\n  'gpt-4o-mini',\r\n  'gpt-4o',\r\n  'gpt-4.5-preview',\r\n  'gpt-4.5-preview-2025-02-27',\r\n  'gpt-3.5-turbo',\r\n  'gpt-3.5-turbo-0125',\r\n  'gpt-4-turbo',\r\n  'gpt-4-turbo-2024-04-09',\r\n  'gpt-4-0125-preview',\r\n  'gpt-4-turbo-preview',\r\n  'gpt-4-1106-preview',\r\n  'gpt-3.5-turbo-1106',\r\n  'gpt-3.5-turbo-16k-0613',\r\n  'gpt-3.5-turbo-16k',\r\n  'gpt-4',\r\n  'gpt-4-0314',\r\n  'gpt-4-32k-0314',\r\n  'gpt-4-0613',\r\n  'gpt-3.5-turbo-0613',\r\n];\r\n\r\nconst sharedAnthropicModels = [\r\n  'claude-sonnet-4-5',\r\n  'claude-sonnet-4-5-20250929',\r\n  'claude-opus-4-1',\r\n  'claude-opus-4-1-20250805',\r\n  'claude-sonnet-4-20250514',\r\n  'claude-sonnet-4-0',\r\n  'claude-opus-4-20250514',\r\n  'claude-opus-4-0',\r\n  'claude-3-7-sonnet-latest',\r\n  'claude-3-7-sonnet-20250219',\r\n  'claude-3-5-haiku-20241022',\r\n  'claude-3-5-sonnet-20241022',\r\n  'claude-3-5-sonnet-20240620',\r\n  'claude-3-5-sonnet-latest',\r\n  'claude-3-opus-20240229',\r\n  'claude-3-sonnet-20240229',\r\n  'claude-3-haiku-20240307',\r\n  'claude-2.1',\r\n  'claude-2',\r\n  'claude-1.2',\r\n  'claude-1',\r\n  'claude-1-100k',\r\n  'claude-instant-1',\r\n  'claude-instant-1-100k',\r\n];\r\n\r\nexport const bedrockModels = [\r\n  'anthropic.claude-3-5-sonnet-20241022-v2:0',\r\n  'anthropic.claude-3-5-sonnet-20240620-v1:0',\r\n  'anthropic.claude-3-5-haiku-20241022-v1:0',\r\n  'anthropic.claude-3-haiku-20240307-v1:0',\r\n  'anthropic.claude-3-opus-20240229-v1:0',\r\n  'anthropic.claude-3-sonnet-20240229-v1:0',\r\n  'anthropic.claude-v2',\r\n  'anthropic.claude-v2:1',\r\n  'anthropic.claude-instant-v1',\r\n  // 'cohere.command-text-v14', // no conversation history\r\n  // 'cohere.command-light-text-v14', // no conversation history\r\n  'cohere.command-r-v1:0',\r\n  'cohere.command-r-plus-v1:0',\r\n  'meta.llama2-13b-chat-v1',\r\n  'meta.llama2-70b-chat-v1',\r\n  'meta.llama3-8b-instruct-v1:0',\r\n  'meta.llama3-70b-instruct-v1:0',\r\n  'meta.llama3-1-8b-instruct-v1:0',\r\n  'meta.llama3-1-70b-instruct-v1:0',\r\n  'meta.llama3-1-405b-instruct-v1:0',\r\n  'mistral.mistral-7b-instruct-v0:2',\r\n  'mistral.mixtral-8x7b-instruct-v0:1',\r\n  'mistral.mistral-large-2402-v1:0',\r\n  'mistral.mistral-large-2407-v1:0',\r\n  'mistral.mistral-small-2402-v1:0',\r\n  'ai21.jamba-instruct-v1:0',\r\n  // 'ai21.j2-mid-v1', // no streaming\r\n  // 'ai21.j2-ultra-v1', no conversation history\r\n  'amazon.titan-text-lite-v1',\r\n  'amazon.titan-text-express-v1',\r\n  'amazon.titan-text-premier-v1:0',\r\n];\r\n\r\nexport const defaultModels = {\r\n  [EModelEndpoint.azureAssistants]: sharedOpenAIModels,\r\n  [EModelEndpoint.assistants]: [...sharedOpenAIModels, 'chatgpt-4o-latest'],\r\n  [EModelEndpoint.agents]: sharedOpenAIModels, // TODO: Add agent models (agentsModels)\r\n  [EModelEndpoint.google]: [\r\n    // Gemini 2.5 Models\r\n    'gemini-2.5-pro',\r\n    'gemini-2.5-flash',\r\n    'gemini-2.5-flash-lite',\r\n    // Gemini 2.0 Models\r\n    'gemini-2.0-flash-001',\r\n    'gemini-2.0-flash-lite',\r\n  ],\r\n  [EModelEndpoint.anthropic]: sharedAnthropicModels,\r\n  [EModelEndpoint.openAI]: [\r\n    ...sharedOpenAIModels,\r\n    'chatgpt-4o-latest',\r\n    'gpt-4-vision-preview',\r\n    'gpt-3.5-turbo-instruct-0914',\r\n    'gpt-3.5-turbo-instruct',\r\n  ],\r\n  [EModelEndpoint.bedrock]: bedrockModels,\r\n};\r\n\r\nconst fitlerAssistantModels = (str: string) => {\r\n  return /gpt-4|gpt-3\\\\.5/i.test(str) && !/vision|instruct/i.test(str);\r\n};\r\n\r\nconst openAIModels = defaultModels[EModelEndpoint.openAI];\r\n\r\nexport const initialModelsConfig: TModelsConfig = {\r\n  initial: [],\r\n  [EModelEndpoint.openAI]: openAIModels,\r\n  [EModelEndpoint.assistants]: openAIModels.filter(fitlerAssistantModels),\r\n  [EModelEndpoint.agents]: openAIModels, // TODO: Add agent models (agentsModels)\r\n  [EModelEndpoint.gptPlugins]: openAIModels,\r\n  [EModelEndpoint.azureOpenAI]: openAIModels,\r\n  [EModelEndpoint.chatGPTBrowser]: ['text-davinci-002-render-sha'],\r\n  [EModelEndpoint.google]: defaultModels[EModelEndpoint.google],\r\n  [EModelEndpoint.anthropic]: defaultModels[EModelEndpoint.anthropic],\r\n  [EModelEndpoint.bedrock]: defaultModels[EModelEndpoint.bedrock],\r\n};\r\n\r\nexport const EndpointURLs = {\r\n  [EModelEndpoint.assistants]: `${apiBaseUrl()}/api/assistants/v2/chat`,\r\n  [EModelEndpoint.azureAssistants]: `${apiBaseUrl()}/api/assistants/v1/chat`,\r\n  [EModelEndpoint.agents]: `${apiBaseUrl()}/api/${EModelEndpoint.agents}/chat`,\r\n} as const;\r\n\r\nexport const modularEndpoints = new Set<EModelEndpoint | string>([\r\n  EModelEndpoint.gptPlugins,\r\n  EModelEndpoint.anthropic,\r\n  EModelEndpoint.google,\r\n  EModelEndpoint.openAI,\r\n  EModelEndpoint.azureOpenAI,\r\n  EModelEndpoint.custom,\r\n  EModelEndpoint.agents,\r\n  EModelEndpoint.bedrock,\r\n]);\r\n\r\nexport const supportsBalanceCheck = {\r\n  [EModelEndpoint.custom]: true,\r\n  [EModelEndpoint.openAI]: true,\r\n  [EModelEndpoint.anthropic]: true,\r\n  [EModelEndpoint.gptPlugins]: true,\r\n  [EModelEndpoint.assistants]: true,\r\n  [EModelEndpoint.agents]: true,\r\n  [EModelEndpoint.azureAssistants]: true,\r\n  [EModelEndpoint.azureOpenAI]: true,\r\n  [EModelEndpoint.bedrock]: true,\r\n};\r\n\r\nexport const visionModels = [\r\n  'qwen-vl',\r\n  'grok-vision',\r\n  'grok-2-vision',\r\n  'grok-3',\r\n  'gpt-4o-mini',\r\n  'gpt-4o',\r\n  'gpt-4-turbo',\r\n  'gpt-4-vision',\r\n  'o4-mini',\r\n  'o3',\r\n  'o1',\r\n  'gpt-4.1',\r\n  'gpt-4.5',\r\n  'llava',\r\n  'llava-13b',\r\n  'gemini-pro-vision',\r\n  'claude-3',\r\n  'gemma',\r\n  'gemini-exp',\r\n  'gemini-1.5',\r\n  'gemini-2',\r\n  'gemini-2.5',\r\n  'gemini-3',\r\n  'moondream',\r\n  'llama3.2-vision',\r\n  'llama-3.2-11b-vision',\r\n  'llama-3-2-11b-vision',\r\n  'llama-3.2-90b-vision',\r\n  'llama-3-2-90b-vision',\r\n  'llama-4',\r\n  'claude-opus-4',\r\n  'claude-sonnet-4',\r\n  'claude-haiku-4',\r\n];\r\nexport enum VisionModes {\r\n  generative = 'generative',\r\n  agents = 'agents',\r\n}\r\n\r\nexport function validateVisionModel({\r\n  model,\r\n  additionalModels = [],\r\n  availableModels,\r\n}: {\r\n  model: string;\r\n  additionalModels?: string[];\r\n  availableModels?: string[];\r\n}) {\r\n  if (!model) {\r\n    return false;\r\n  }\r\n\r\n  if (model.includes('gpt-4-turbo-preview') || model.includes('o1-mini')) {\r\n    return false;\r\n  }\r\n\r\n  if (availableModels && !availableModels.includes(model)) {\r\n    return false;\r\n  }\r\n\r\n  return visionModels.concat(additionalModels).some((visionModel) => model.includes(visionModel));\r\n}\r\n\r\nexport const imageGenTools = new Set(['dalle', 'dall-e', 'stable-diffusion', 'flux']);\r\n\r\n/**\r\n * Enum for collections using infinite queries\r\n */\r\nexport enum InfiniteCollections {\r\n  /**\r\n   * Collection for Prompt Groups\r\n   */\r\n  PROMPT_GROUPS = 'promptGroups',\r\n  /**\r\n   * Collection for Shared Links\r\n   */\r\n  SHARED_LINKS = 'sharedLinks',\r\n}\r\n\r\n/**\r\n * Enum for time intervals\r\n */\r\nexport enum Time {\r\n  ONE_DAY = 86400000,\r\n  ONE_HOUR = 3600000,\r\n  THIRTY_MINUTES = 1800000,\r\n  TEN_MINUTES = 600000,\r\n  FIVE_MINUTES = 300000,\r\n  THREE_MINUTES = 180000,\r\n  TWO_MINUTES = 120000,\r\n  ONE_MINUTE = 60000,\r\n  THIRTY_SECONDS = 30000,\r\n}\r\n\r\n/**\r\n * Enum for cache keys.\r\n */\r\nexport enum CacheKeys {\r\n  /**\r\n   * Key for the config store namespace.\r\n   */\r\n  CONFIG_STORE = 'CONFIG_STORE',\r\n  /**\r\n   * Key for the roles cache.\r\n   */\r\n  ROLES = 'ROLES',\r\n  /**\r\n   * Key for the plugins cache.\r\n   */\r\n  PLUGINS = 'PLUGINS',\r\n  /**\r\n   * Key for the title generation cache.\r\n   */\r\n  GEN_TITLE = 'GEN_TITLE',\r\n  /**\r\n   * Key for the tools cache.\r\n   */\r\n  TOOLS = 'TOOLS',\r\n  /**\r\n   * Key for the model config cache.\r\n   */\r\n  MODELS_CONFIG = 'MODELS_CONFIG',\r\n  /**\r\n   * Key for the model queries cache.\r\n   */\r\n  MODEL_QUERIES = 'MODEL_QUERIES',\r\n  /**\r\n   * Key for the default startup config cache.\r\n   */\r\n  STARTUP_CONFIG = 'STARTUP_CONFIG',\r\n  /**\r\n   * Key for the default endpoint config cache.\r\n   */\r\n  ENDPOINT_CONFIG = 'ENDPOINT_CONFIG',\r\n  /**\r\n   * Key for accessing the model token config cache.\r\n   */\r\n  TOKEN_CONFIG = 'TOKEN_CONFIG',\r\n  /**\r\n   * Key for the app config namespace.\r\n   */\r\n  APP_CONFIG = 'APP_CONFIG',\r\n  /**\r\n   * Key for accessing Abort Keys\r\n   */\r\n  ABORT_KEYS = 'ABORT_KEYS',\r\n  /**\r\n   * Key for the bans cache.\r\n   */\r\n  BANS = 'BANS',\r\n  /**\r\n   * Key for the encoded domains cache.\r\n   * Used by Azure OpenAI Assistants.\r\n   */\r\n  ENCODED_DOMAINS = 'ENCODED_DOMAINS',\r\n  /**\r\n   * Key for the cached audio run Ids.\r\n   */\r\n  AUDIO_RUNS = 'AUDIO_RUNS',\r\n  /**\r\n   * Key for in-progress messages.\r\n   */\r\n  MESSAGES = 'MESSAGES',\r\n  /**\r\n   * Key for in-progress flow states.\r\n   */\r\n  FLOWS = 'FLOWS',\r\n  /**\r\n   * Key for pending chat requests (concurrency check)\r\n   */\r\n  PENDING_REQ = 'PENDING_REQ',\r\n  /**\r\n   * Key for s3 check intervals per user\r\n   */\r\n  S3_EXPIRY_INTERVAL = 'S3_EXPIRY_INTERVAL',\r\n  /**\r\n   * key for open id exchanged tokens\r\n   */\r\n  OPENID_EXCHANGED_TOKENS = 'OPENID_EXCHANGED_TOKENS',\r\n  /**\r\n   * Key for OpenID session.\r\n   */\r\n  OPENID_SESSION = 'OPENID_SESSION',\r\n  /**\r\n   * Key for SAML session.\r\n   */\r\n  SAML_SESSION = 'SAML_SESSION',\r\n}\r\n\r\n/**\r\n * Enum for violation types, used to identify, log, and cache violations.\r\n */\r\nexport enum ViolationTypes {\r\n  /**\r\n   * File Upload Violations (exceeding limit).\r\n   */\r\n  FILE_UPLOAD_LIMIT = 'file_upload_limit',\r\n  /**\r\n   * Illegal Model Request (not available).\r\n   */\r\n  ILLEGAL_MODEL_REQUEST = 'illegal_model_request',\r\n  /**\r\n   * Token Limit Violation.\r\n   */\r\n  TOKEN_BALANCE = 'token_balance',\r\n  /**\r\n   * An issued ban.\r\n   */\r\n  BAN = 'ban',\r\n  /**\r\n   * TTS Request Limit Violation.\r\n   */\r\n  TTS_LIMIT = 'tts_limit',\r\n  /**\r\n   * STT Request Limit Violation.\r\n   */\r\n  STT_LIMIT = 'stt_limit',\r\n  /**\r\n   * Reset Password Limit Violation.\r\n   */\r\n  RESET_PASSWORD_LIMIT = 'reset_password_limit',\r\n  /**\r\n   * Verify Email Limit Violation.\r\n   */\r\n  VERIFY_EMAIL_LIMIT = 'verify_email_limit',\r\n  /**\r\n   * Verify Conversation Access violation.\r\n   */\r\n  CONVO_ACCESS = 'convo_access',\r\n  /**\r\n   * Tool Call Limit Violation.\r\n   */\r\n  TOOL_CALL_LIMIT = 'tool_call_limit',\r\n  /**\r\n   * General violation (catch-all).\r\n   */\r\n  GENERAL = 'general',\r\n  /**\r\n   * Login attempt violations.\r\n   */\r\n  LOGINS = 'logins',\r\n  /**\r\n   * Concurrent request violations.\r\n   */\r\n  CONCURRENT = 'concurrent',\r\n  /**\r\n   * Non-browser access violations.\r\n   */\r\n  NON_BROWSER = 'non_browser',\r\n  /**\r\n   * Message limit violations.\r\n   */\r\n  MESSAGE_LIMIT = 'message_limit',\r\n  /**\r\n   * Registration violations.\r\n   */\r\n  REGISTRATIONS = 'registrations',\r\n}\r\n\r\n/**\r\n * Enum for error message types that are not \"violations\" as above, used to identify client-facing errors.\r\n */\r\nexport enum ErrorTypes {\r\n  /**\r\n   * No User-provided Key.\r\n   */\r\n  NO_USER_KEY = 'no_user_key',\r\n  /**\r\n   * Expired User-provided Key.\r\n   */\r\n  EXPIRED_USER_KEY = 'expired_user_key',\r\n  /**\r\n   * Invalid User-provided Key.\r\n   */\r\n  INVALID_USER_KEY = 'invalid_user_key',\r\n  /**\r\n   * No Base URL Provided.\r\n   */\r\n  NO_BASE_URL = 'no_base_url',\r\n  /**\r\n   * Moderation error\r\n   */\r\n  MODERATION = 'moderation',\r\n  /**\r\n   * Prompt exceeds max length\r\n   */\r\n  INPUT_LENGTH = 'INPUT_LENGTH',\r\n  /**\r\n   * Invalid request error, API rejected request\r\n   */\r\n  INVALID_REQUEST = 'invalid_request_error',\r\n  /**\r\n   * Invalid action request error, likely not on list of allowed domains\r\n   */\r\n  INVALID_ACTION = 'invalid_action_error',\r\n  /**\r\n   * Invalid request error, API rejected request\r\n   */\r\n  NO_SYSTEM_MESSAGES = 'no_system_messages',\r\n  /**\r\n   * Google provider returned an error\r\n   */\r\n  GOOGLE_ERROR = 'google_error',\r\n  /**\r\n   * Google provider does not allow custom tools with built-in tools\r\n   */\r\n  GOOGLE_TOOL_CONFLICT = 'google_tool_conflict',\r\n  /**\r\n   * Invalid Agent Provider (excluded by Admin)\r\n   */\r\n  INVALID_AGENT_PROVIDER = 'invalid_agent_provider',\r\n  /**\r\n   * Missing model selection\r\n   */\r\n  MISSING_MODEL = 'missing_model',\r\n  /**\r\n   * Models configuration not loaded\r\n   */\r\n  MODELS_NOT_LOADED = 'models_not_loaded',\r\n  /**\r\n   * Endpoint models not loaded\r\n   */\r\n  ENDPOINT_MODELS_NOT_LOADED = 'endpoint_models_not_loaded',\r\n  /**\r\n   * Generic Authentication failure\r\n   */\r\n  AUTH_FAILED = 'auth_failed',\r\n}\r\n\r\n/**\r\n * Enum for authentication keys.\r\n */\r\nexport enum AuthKeys {\r\n  /**\r\n   * Key for the Service Account to use Vertex AI.\r\n   */\r\n  GOOGLE_SERVICE_KEY = 'GOOGLE_SERVICE_KEY',\r\n  /**\r\n   * API key to use Google Generative AI.\r\n   *\r\n   * Note: this is not for Environment Variables, but to access encrypted object values.\r\n   */\r\n  GOOGLE_API_KEY = 'GOOGLE_API_KEY',\r\n}\r\n\r\n/**\r\n * Enum for Image Detail Cost.\r\n *\r\n * **Low Res Fixed Cost:** `85`\r\n *\r\n * **High Res Calculation:**\r\n *\r\n * Number of `512px` Tiles * `170` + `85` (Additional Cost)\r\n */\r\nexport enum ImageDetailCost {\r\n  /**\r\n   * Low resolution is a fixed value.\r\n   */\r\n  LOW = 85,\r\n  /**\r\n   * High resolution Cost Per Tile\r\n   */\r\n  HIGH = 170,\r\n  /**\r\n   * Additional Cost added to High Resolution Total Cost\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/no-duplicate-enum-values\r\n  ADDITIONAL = 85,\r\n}\r\n\r\n/**\r\n * Tab values for Settings Dialog\r\n */\r\nexport enum SettingsTabValues {\r\n  /**\r\n   * Tab for General Settings\r\n   */\r\n  GENERAL = 'general',\r\n  /**\r\n   * Tab for Chat Settings\r\n   */\r\n  CHAT = 'chat',\r\n  /**\r\n   * Tab for Speech Settings\r\n   */\r\n  SPEECH = 'speech',\r\n  /**\r\n   * Tab for Beta Features\r\n   */\r\n  BETA = 'beta',\r\n  /**\r\n   * Tab for Data Controls\r\n   */\r\n  DATA = 'data',\r\n  /**\r\n   * Tab for Balance Settings\r\n   */\r\n  BALANCE = 'balance',\r\n  /**\r\n   * Tab for Account Settings\r\n   */\r\n  ACCOUNT = 'account',\r\n  /**\r\n   * Chat input commands\r\n   */\r\n  COMMANDS = 'commands',\r\n  /**\r\n   * Tab for Personalization Settings\r\n   */\r\n  PERSONALIZATION = 'personalization',\r\n}\r\n\r\nexport enum STTProviders {\r\n  /**\r\n   * Provider for OpenAI STT\r\n   */\r\n  OPENAI = 'openai',\r\n  /**\r\n   * Provider for Microsoft Azure STT\r\n   */\r\n  AZURE_OPENAI = 'azureOpenAI',\r\n}\r\n\r\nexport enum TTSProviders {\r\n  /**\r\n   * Provider for OpenAI TTS\r\n   */\r\n  OPENAI = 'openai',\r\n  /**\r\n   * Provider for Microsoft Azure OpenAI TTS\r\n   */\r\n  AZURE_OPENAI = 'azureOpenAI',\r\n  /**\r\n   * Provider for ElevenLabs TTS\r\n   */\r\n  ELEVENLABS = 'elevenlabs',\r\n  /**\r\n   * Provider for LocalAI TTS\r\n   */\r\n  LOCALAI = 'localai',\r\n}\r\n\r\n/** Enum for app-wide constants */\r\nexport enum Constants {\r\n  /** Key for the app's version. */\r\n  VERSION = 'v0.8.0-rc4',\r\n  /** Key for the Custom Config's version (librechat.yaml). */\r\n  CONFIG_VERSION = '1.2.9',\r\n  /** Standard value for the first message's `parentMessageId` value, to indicate no parent exists. */\r\n  NO_PARENT = '00000000-0000-0000-0000-000000000000',\r\n  /** Standard value to use whatever the submission prelim. `responseMessageId` is */\r\n  USE_PRELIM_RESPONSE_MESSAGE_ID = 'USE_PRELIM_RESPONSE_MESSAGE_ID',\r\n  /** Standard value for the initial conversationId before a request is sent */\r\n  NEW_CONVO = 'new',\r\n  /** Standard value for the temporary conversationId after a request is sent and before the server responds */\r\n  PENDING_CONVO = 'PENDING',\r\n  /** Standard value for the conversationId used for search queries */\r\n  SEARCH = 'search',\r\n  /** Fixed, encoded domain length for Azure OpenAI Assistants Function name parsing. */\r\n  ENCODED_DOMAIN_LENGTH = 10,\r\n  /** Identifier for using current_model in multi-model requests. */\r\n  CURRENT_MODEL = 'current_model',\r\n  /** Common divider for text values */\r\n  COMMON_DIVIDER = '__',\r\n  /** Max length for commands */\r\n  COMMANDS_MAX_LENGTH = 56,\r\n  /** Default Stream Rate (ms) */\r\n  DEFAULT_STREAM_RATE = 1,\r\n  /** Saved Tag */\r\n  SAVED_TAG = 'Saved',\r\n  /** Max number of Conversation starters for Agents/Assistants */\r\n  MAX_CONVO_STARTERS = 4,\r\n  /** Global/instance Project Name */\r\n  GLOBAL_PROJECT_NAME = 'instance',\r\n  /** Delimiter for MCP tools */\r\n  mcp_delimiter = '_mcp_',\r\n  /** Prefix for MCP plugins */\r\n  mcp_prefix = 'mcp_',\r\n  /** Unique value to indicate all MCP servers. For backend use only. */\r\n  mcp_all = 'sys__all__sys',\r\n  /**\r\n   * Unique value to indicate the MCP tool was added to an agent.\r\n   * This helps inform the UI if the mcp server was previously added.\r\n   * */\r\n  mcp_server = 'sys__server__sys',\r\n  /** Placeholder Agent ID for Ephemeral Agents */\r\n  EPHEMERAL_AGENT_ID = 'ephemeral',\r\n}\r\n\r\nexport enum LocalStorageKeys {\r\n  /** Key for the admin defined App Title */\r\n  APP_TITLE = 'appTitle',\r\n  /** Key for the last conversation setup. */\r\n  LAST_CONVO_SETUP = 'lastConversationSetup',\r\n  /** Key for the last selected model. */\r\n  LAST_MODEL = 'lastSelectedModel',\r\n  /** Key for the last selected tools. */\r\n  LAST_TOOLS = 'lastSelectedTools',\r\n  /** Key for the last selected spec by name*/\r\n  LAST_SPEC = 'lastSelectedSpec',\r\n  /** Key for temporary files to delete */\r\n  FILES_TO_DELETE = 'filesToDelete',\r\n  /** Prefix key for the last selected assistant ID by index */\r\n  ASST_ID_PREFIX = 'assistant_id__',\r\n  /** Prefix key for the last selected agent ID by index */\r\n  AGENT_ID_PREFIX = 'agent_id__',\r\n  /** Key for the last selected fork setting */\r\n  FORK_SETTING = 'forkSetting',\r\n  /** Key for remembering the last selected option, instead of manually selecting */\r\n  REMEMBER_FORK_OPTION = 'rememberDefaultFork',\r\n  /** Key for remembering the split at target fork option modifier */\r\n  FORK_SPLIT_AT_TARGET = 'splitAtTarget',\r\n  /** Key for saving text drafts */\r\n  TEXT_DRAFT = 'textDraft_',\r\n  /** Key for saving file drafts */\r\n  FILES_DRAFT = 'filesDraft_',\r\n  /** Key for last Selected Prompt Category */\r\n  LAST_PROMPT_CATEGORY = 'lastPromptCategory',\r\n  /** Key for rendering User Messages as Markdown */\r\n  ENABLE_USER_MSG_MARKDOWN = 'enableUserMsgMarkdown',\r\n  /** Key for displaying analysis tool code input */\r\n  SHOW_ANALYSIS_CODE = 'showAnalysisCode',\r\n  /** Last selected MCP values per conversation ID */\r\n  LAST_MCP_ = 'LAST_MCP_',\r\n  /** Last checked toggle for Code Interpreter API per conversation ID */\r\n  LAST_CODE_TOGGLE_ = 'LAST_CODE_TOGGLE_',\r\n  /** Last checked toggle for Web Search per conversation ID */\r\n  LAST_WEB_SEARCH_TOGGLE_ = 'LAST_WEB_SEARCH_TOGGLE_',\r\n  /** Last checked toggle for File Search per conversation ID */\r\n  LAST_FILE_SEARCH_TOGGLE_ = 'LAST_FILE_SEARCH_TOGGLE_',\r\n  /** Last checked toggle for Artifacts per conversation ID */\r\n  LAST_ARTIFACTS_TOGGLE_ = 'LAST_ARTIFACTS_TOGGLE_',\r\n  /** Key for the last selected agent provider */\r\n  LAST_AGENT_PROVIDER = 'lastAgentProvider',\r\n  /** Key for the last selected agent model */\r\n  LAST_AGENT_MODEL = 'lastAgentModel',\r\n  /** Pin state for MCP tools per conversation ID */\r\n  PIN_MCP_ = 'PIN_MCP_',\r\n  /** Pin state for Web Search per conversation ID */\r\n  PIN_WEB_SEARCH_ = 'PIN_WEB_SEARCH_',\r\n  /** Pin state for Code Interpreter per conversation ID */\r\n  PIN_CODE_INTERPRETER_ = 'PIN_CODE_INTERPRETER_',\r\n}\r\n\r\nexport enum ForkOptions {\r\n  /** Key for direct path option */\r\n  DIRECT_PATH = 'directPath',\r\n  /** Key for including branches */\r\n  INCLUDE_BRANCHES = 'includeBranches',\r\n  /** Key for target level fork (default) */\r\n  TARGET_LEVEL = 'targetLevel',\r\n  /** Default option */\r\n  DEFAULT = 'default',\r\n}\r\n\r\n/**\r\n * Enum for Cohere related constants\r\n */\r\nexport enum CohereConstants {\r\n  /**\r\n   * Cohere API Endpoint, for special handling\r\n   */\r\n  API_URL = 'https://api.cohere.ai/v1',\r\n  /**\r\n   * Role for \"USER\" messages\r\n   */\r\n  ROLE_USER = 'USER',\r\n  /**\r\n   * Role for \"SYSTEM\" messages\r\n   */\r\n  ROLE_SYSTEM = 'SYSTEM',\r\n  /**\r\n   * Role for \"CHATBOT\" messages\r\n   */\r\n  ROLE_CHATBOT = 'CHATBOT',\r\n  /**\r\n   * Title message as required by Cohere\r\n   */\r\n  TITLE_MESSAGE = 'TITLE:',\r\n}\r\n\r\nexport enum SystemCategories {\r\n  ALL = 'sys__all__sys',\r\n  MY_PROMPTS = 'sys__my__prompts__sys',\r\n  NO_CATEGORY = 'sys__no__category__sys',\r\n  SHARED_PROMPTS = 'sys__shared__prompts__sys',\r\n}\r\n\r\nexport const providerEndpointMap = {\r\n  [EModelEndpoint.openAI]: EModelEndpoint.openAI,\r\n  [EModelEndpoint.bedrock]: EModelEndpoint.bedrock,\r\n  [EModelEndpoint.anthropic]: EModelEndpoint.anthropic,\r\n  [EModelEndpoint.azureOpenAI]: EModelEndpoint.azureOpenAI,\r\n};\r\n\r\nexport const specialVariables = {\r\n  current_date: true,\r\n  current_user: true,\r\n  iso_datetime: true,\r\n  current_datetime: true,\r\n};\r\n\r\nexport type TSpecialVarLabel = `com_ui_special_var_${keyof typeof specialVariables}`;\r\n","export enum ContentTypes {\r\n  TEXT = 'text',\r\n  THINK = 'think',\r\n  TEXT_DELTA = 'text_delta',\r\n  TOOL_CALL = 'tool_call',\r\n  IMAGE_FILE = 'image_file',\r\n  IMAGE_URL = 'image_url',\r\n  AGENT_UPDATE = 'agent_update',\r\n  ERROR = 'error',\r\n}\r\n\r\nexport enum StepTypes {\r\n  TOOL_CALLS = 'tool_calls',\r\n  MESSAGE_CREATION = 'message_creation',\r\n}\r\n\r\nexport enum ToolCallTypes {\r\n  FUNCTION = 'function',\r\n  RETRIEVAL = 'retrieval',\r\n  FILE_SEARCH = 'file_search',\r\n  CODE_INTERPRETER = 'code_interpreter',\r\n  /* Agents Tool Call */\r\n  TOOL_CALL = 'tool_call',\r\n}\r\n","import { z } from 'zod';\r\nimport * as s from './schemas';\r\n\r\ntype ThinkingConfig = {\r\n  type: 'enabled';\r\n  budget_tokens: number;\r\n};\r\ntype AnthropicReasoning = {\r\n  thinking?: ThinkingConfig | boolean;\r\n  thinkingBudget?: number;\r\n};\r\n\r\ntype AnthropicInput = BedrockConverseInput & {\r\n  additionalModelRequestFields: BedrockConverseInput['additionalModelRequestFields'] &\r\n    AnthropicReasoning;\r\n};\r\n\r\nexport const bedrockInputSchema = s.tConversationSchema\r\n  .pick({\r\n    /* LibreChat params; optionType: 'conversation' */\r\n    modelLabel: true,\r\n    promptPrefix: true,\r\n    resendFiles: true,\r\n    iconURL: true,\r\n    greeting: true,\r\n    spec: true,\r\n    maxOutputTokens: true,\r\n    maxContextTokens: true,\r\n    artifacts: true,\r\n    /* Bedrock params; optionType: 'model' */\r\n    region: true,\r\n    system: true,\r\n    model: true,\r\n    maxTokens: true,\r\n    temperature: true,\r\n    topP: true,\r\n    stop: true,\r\n    thinking: true,\r\n    thinkingBudget: true,\r\n    /* Catch-all fields */\r\n    topK: true,\r\n    additionalModelRequestFields: true,\r\n  })\r\n  .transform((obj) => {\r\n    if ((obj as AnthropicInput).additionalModelRequestFields?.thinking != null) {\r\n      const _obj = obj as AnthropicInput;\r\n      obj.thinking = !!_obj.additionalModelRequestFields.thinking;\r\n      obj.thinkingBudget =\r\n        typeof _obj.additionalModelRequestFields.thinking === 'object'\r\n          ? (_obj.additionalModelRequestFields.thinking as ThinkingConfig)?.budget_tokens\r\n          : undefined;\r\n      delete obj.additionalModelRequestFields;\r\n    }\r\n    return s.removeNullishValues(obj);\r\n  })\r\n  .catch(() => ({}));\r\n\r\nexport type BedrockConverseInput = z.infer<typeof bedrockInputSchema>;\r\n\r\nexport const bedrockInputParser = s.tConversationSchema\r\n  .pick({\r\n    /* LibreChat params; optionType: 'conversation' */\r\n    modelLabel: true,\r\n    promptPrefix: true,\r\n    resendFiles: true,\r\n    iconURL: true,\r\n    greeting: true,\r\n    spec: true,\r\n    artifacts: true,\r\n    maxOutputTokens: true,\r\n    maxContextTokens: true,\r\n    /* Bedrock params; optionType: 'model' */\r\n    region: true,\r\n    model: true,\r\n    maxTokens: true,\r\n    temperature: true,\r\n    topP: true,\r\n    stop: true,\r\n    thinking: true,\r\n    thinkingBudget: true,\r\n    /* Catch-all fields */\r\n    topK: true,\r\n    additionalModelRequestFields: true,\r\n  })\r\n  .catchall(z.any())\r\n  .transform((data) => {\r\n    const knownKeys = [\r\n      'modelLabel',\r\n      'promptPrefix',\r\n      'resendFiles',\r\n      'iconURL',\r\n      'greeting',\r\n      'spec',\r\n      'maxOutputTokens',\r\n      'artifacts',\r\n      'additionalModelRequestFields',\r\n      'region',\r\n      'model',\r\n      'maxTokens',\r\n      'temperature',\r\n      'topP',\r\n      'stop',\r\n    ];\r\n\r\n    const additionalFields: Record<string, unknown> = {};\r\n    const typedData = data as Record<string, unknown>;\r\n\r\n    Object.entries(typedData).forEach(([key, value]) => {\r\n      if (!knownKeys.includes(key)) {\r\n        if (key === 'topK') {\r\n          additionalFields['top_k'] = value;\r\n        } else {\r\n          additionalFields[key] = value;\r\n        }\r\n        delete typedData[key];\r\n      }\r\n    });\r\n\r\n    /** Default thinking and thinkingBudget for 'anthropic.claude-3-7-sonnet' models, if not defined */\r\n    if (\r\n      typeof typedData.model === 'string' &&\r\n      (typedData.model.includes('anthropic.claude-3-7-sonnet') ||\r\n        /anthropic\\.claude-(?:[4-9](?:\\.\\d+)?(?:-\\d+)?-(?:sonnet|opus|haiku)|(?:sonnet|opus|haiku)-[4-9])/.test(\r\n          typedData.model,\r\n        ))\r\n    ) {\r\n      if (additionalFields.thinking === undefined) {\r\n        additionalFields.thinking = true;\r\n      } else if (additionalFields.thinking === false) {\r\n        delete additionalFields.thinking;\r\n        delete additionalFields.thinkingBudget;\r\n      }\r\n\r\n      if (additionalFields.thinking === true && additionalFields.thinkingBudget === undefined) {\r\n        additionalFields.thinkingBudget = 2000;\r\n      }\r\n      additionalFields.anthropic_beta = ['output-128k-2025-02-19'];\r\n    } else if (additionalFields.thinking != null || additionalFields.thinkingBudget != null) {\r\n      delete additionalFields.thinking;\r\n      delete additionalFields.thinkingBudget;\r\n    }\r\n\r\n    if (Object.keys(additionalFields).length > 0) {\r\n      typedData.additionalModelRequestFields = {\r\n        ...((typedData.additionalModelRequestFields as Record<string, unknown> | undefined) || {}),\r\n        ...additionalFields,\r\n      };\r\n    }\r\n\r\n    if (typedData.maxOutputTokens !== undefined) {\r\n      typedData.maxTokens = typedData.maxOutputTokens;\r\n    } else if (typedData.maxTokens !== undefined) {\r\n      typedData.maxOutputTokens = typedData.maxTokens;\r\n    }\r\n\r\n    return s.removeNullishValues(typedData) as BedrockConverseInput;\r\n  })\r\n  .catch(() => ({}));\r\n\r\n/**\r\n * Configures the \"thinking\" parameter based on given input and thinking options.\r\n *\r\n * @param data - The parsed Bedrock request options object\r\n * @returns The object with thinking configured appropriately\r\n */\r\nfunction configureThinking(data: AnthropicInput): AnthropicInput {\r\n  const updatedData = { ...data };\r\n  if (updatedData.additionalModelRequestFields?.thinking === true) {\r\n    updatedData.maxTokens = updatedData.maxTokens ?? updatedData.maxOutputTokens ?? 8192;\r\n    delete updatedData.maxOutputTokens;\r\n    const thinkingConfig: AnthropicReasoning['thinking'] = {\r\n      type: 'enabled',\r\n      budget_tokens: updatedData.additionalModelRequestFields.thinkingBudget ?? 2000,\r\n    };\r\n\r\n    if (thinkingConfig.budget_tokens > updatedData.maxTokens) {\r\n      thinkingConfig.budget_tokens = Math.floor(updatedData.maxTokens * 0.9);\r\n    }\r\n    updatedData.additionalModelRequestFields.thinking = thinkingConfig;\r\n    delete updatedData.additionalModelRequestFields.thinkingBudget;\r\n  }\r\n  return updatedData;\r\n}\r\n\r\nexport const bedrockOutputParser = (data: Record<string, unknown>) => {\r\n  const knownKeys = [...Object.keys(s.tConversationSchema.shape), 'topK', 'top_k'];\r\n  let result: Record<string, unknown> = {};\r\n\r\n  // Extract known fields from the root level\r\n  Object.entries(data).forEach(([key, value]) => {\r\n    if (knownKeys.includes(key)) {\r\n      result[key] = value;\r\n    }\r\n  });\r\n\r\n  // Extract known fields from additionalModelRequestFields\r\n  if (\r\n    typeof data.additionalModelRequestFields === 'object' &&\r\n    data.additionalModelRequestFields !== null\r\n  ) {\r\n    Object.entries(data.additionalModelRequestFields as Record<string, unknown>).forEach(\r\n      ([key, value]) => {\r\n        if (knownKeys.includes(key)) {\r\n          if (key === 'top_k') {\r\n            result['topK'] = value;\r\n          } else if (key === 'thinking' || key === 'thinkingBudget') {\r\n            return;\r\n          } else {\r\n            result[key] = value;\r\n          }\r\n        }\r\n      },\r\n    );\r\n  }\r\n\r\n  // Handle maxTokens and maxOutputTokens\r\n  if (result.maxTokens !== undefined && result.maxOutputTokens === undefined) {\r\n    result.maxOutputTokens = result.maxTokens;\r\n  } else if (result.maxOutputTokens !== undefined && result.maxTokens === undefined) {\r\n    result.maxTokens = result.maxOutputTokens;\r\n  }\r\n\r\n  result = configureThinking(result as AnthropicInput);\r\n  // Remove additionalModelRequestFields from the result if it doesn't thinking config\r\n  if ((result as AnthropicInput).additionalModelRequestFields?.thinking == null) {\r\n    delete result.additionalModelRequestFields;\r\n  }\r\n\r\n  return result;\r\n};\r\n","import dayjs from 'dayjs';\r\nimport type { ZodIssue } from 'zod';\r\nimport type * as a from './types/assistants';\r\nimport type * as s from './schemas';\r\nimport type * as t from './types';\r\nimport { ContentTypes } from './types/runs';\r\nimport {\r\n  openAISchema,\r\n  googleSchema,\r\n  EModelEndpoint,\r\n  anthropicSchema,\r\n  assistantSchema,\r\n  gptPluginsSchema,\r\n  // agentsSchema,\r\n  compactAgentsSchema,\r\n  compactGoogleSchema,\r\n  compactPluginsSchema,\r\n  compactAssistantSchema,\r\n} from './schemas';\r\nimport { bedrockInputSchema } from './bedrock';\r\nimport { alternateName } from './config';\r\n\r\ntype EndpointSchema =\r\n  | typeof openAISchema\r\n  | typeof googleSchema\r\n  | typeof anthropicSchema\r\n  | typeof gptPluginsSchema\r\n  | typeof assistantSchema\r\n  | typeof compactAgentsSchema\r\n  | typeof bedrockInputSchema;\r\n\r\nexport type EndpointSchemaKey = Exclude<EModelEndpoint, EModelEndpoint.chatGPTBrowser>;\r\n\r\nconst endpointSchemas: Record<EndpointSchemaKey, EndpointSchema> = {\r\n  [EModelEndpoint.openAI]: openAISchema,\r\n  [EModelEndpoint.azureOpenAI]: openAISchema,\r\n  [EModelEndpoint.custom]: openAISchema,\r\n  [EModelEndpoint.google]: googleSchema,\r\n  [EModelEndpoint.anthropic]: anthropicSchema,\r\n  [EModelEndpoint.gptPlugins]: gptPluginsSchema,\r\n  [EModelEndpoint.assistants]: assistantSchema,\r\n  [EModelEndpoint.azureAssistants]: assistantSchema,\r\n  [EModelEndpoint.agents]: compactAgentsSchema,\r\n  [EModelEndpoint.bedrock]: bedrockInputSchema,\r\n};\r\n\r\n// const schemaCreators: Record<EModelEndpoint, (customSchema: DefaultSchemaValues) => EndpointSchema> = {\r\n//   [EModelEndpoint.google]: createGoogleSchema,\r\n// };\r\n\r\n/** Get the enabled endpoints from the `ENDPOINTS` environment variable */\r\nexport function getEnabledEndpoints() {\r\n  const defaultEndpoints: string[] = [\r\n    EModelEndpoint.openAI,\r\n    EModelEndpoint.agents,\r\n    EModelEndpoint.assistants,\r\n    EModelEndpoint.azureAssistants,\r\n    EModelEndpoint.azureOpenAI,\r\n    EModelEndpoint.google,\r\n    EModelEndpoint.chatGPTBrowser,\r\n    EModelEndpoint.gptPlugins,\r\n    EModelEndpoint.anthropic,\r\n    EModelEndpoint.bedrock,\r\n  ];\r\n\r\n  const endpointsEnv = process.env.ENDPOINTS ?? '';\r\n  let enabledEndpoints = defaultEndpoints;\r\n  if (endpointsEnv) {\r\n    enabledEndpoints = endpointsEnv\r\n      .split(',')\r\n      .filter((endpoint) => endpoint.trim())\r\n      .map((endpoint) => endpoint.trim());\r\n  }\r\n  return enabledEndpoints;\r\n}\r\n\r\n/** Orders an existing EndpointsConfig object based on enabled endpoint/custom ordering */\r\nexport function orderEndpointsConfig(endpointsConfig: t.TEndpointsConfig) {\r\n  if (!endpointsConfig) {\r\n    return {};\r\n  }\r\n  const enabledEndpoints = getEnabledEndpoints();\r\n  const endpointKeys = Object.keys(endpointsConfig);\r\n  const defaultCustomIndex = enabledEndpoints.indexOf(EModelEndpoint.custom);\r\n  return endpointKeys.reduce(\r\n    (accumulatedConfig: Record<string, t.TConfig | null | undefined>, currentEndpointKey) => {\r\n      const isCustom = !(currentEndpointKey in EModelEndpoint);\r\n      const isEnabled = enabledEndpoints.includes(currentEndpointKey);\r\n      if (!isEnabled && !isCustom) {\r\n        return accumulatedConfig;\r\n      }\r\n\r\n      const index = enabledEndpoints.indexOf(currentEndpointKey);\r\n\r\n      if (isCustom) {\r\n        accumulatedConfig[currentEndpointKey] = {\r\n          order: defaultCustomIndex >= 0 ? defaultCustomIndex : 9999,\r\n          ...(endpointsConfig[currentEndpointKey] as Omit<t.TConfig, 'order'> & { order?: number }),\r\n        };\r\n      } else if (endpointsConfig[currentEndpointKey]) {\r\n        accumulatedConfig[currentEndpointKey] = {\r\n          ...endpointsConfig[currentEndpointKey],\r\n          order: index,\r\n        };\r\n      }\r\n      return accumulatedConfig;\r\n    },\r\n    {},\r\n  );\r\n}\r\n\r\n/** Converts an array of Zod issues into a string. */\r\nexport function errorsToString(errors: ZodIssue[]) {\r\n  return errors\r\n    .map((error) => {\r\n      const field = error.path.join('.');\r\n      const message = error.message;\r\n\r\n      return `${field}: ${message}`;\r\n    })\r\n    .join(' ');\r\n}\r\n\r\nexport function getFirstDefinedValue(possibleValues: string[]) {\r\n  let returnValue;\r\n  for (const value of possibleValues) {\r\n    if (value) {\r\n      returnValue = value;\r\n      break;\r\n    }\r\n  }\r\n  return returnValue;\r\n}\r\n\r\nexport function getNonEmptyValue(possibleValues: string[]) {\r\n  for (const value of possibleValues) {\r\n    if (value && value.trim() !== '') {\r\n      return value;\r\n    }\r\n  }\r\n  return undefined;\r\n}\r\n\r\nexport type TPossibleValues = {\r\n  models: string[];\r\n  secondaryModels?: string[];\r\n};\r\n\r\nexport const parseConvo = ({\r\n  endpoint,\r\n  endpointType,\r\n  conversation,\r\n  possibleValues,\r\n}: {\r\n  endpoint: EndpointSchemaKey;\r\n  endpointType?: EndpointSchemaKey | null;\r\n  conversation: Partial<s.TConversation | s.TPreset> | null;\r\n  possibleValues?: TPossibleValues;\r\n  // TODO: POC for default schema\r\n  // defaultSchema?: Partial<EndpointSchema>,\r\n}) => {\r\n  let schema = endpointSchemas[endpoint] as EndpointSchema | undefined;\r\n\r\n  if (!schema && !endpointType) {\r\n    throw new Error(`Unknown endpoint: ${endpoint}`);\r\n  } else if (!schema && endpointType) {\r\n    schema = endpointSchemas[endpointType];\r\n  }\r\n\r\n  // if (defaultSchema && schemaCreators[endpoint]) {\r\n  //   schema = schemaCreators[endpoint](defaultSchema);\r\n  // }\r\n\r\n  const convo = schema?.parse(conversation) as s.TConversation | undefined;\r\n  const { models, secondaryModels } = possibleValues ?? {};\r\n\r\n  if (models && convo) {\r\n    convo.model = getFirstDefinedValue(models) ?? convo.model;\r\n  }\r\n\r\n  if (secondaryModels && convo?.agentOptions) {\r\n    convo.agentOptions.model = getFirstDefinedValue(secondaryModels) ?? convo.agentOptions.model;\r\n  }\r\n\r\n  return convo;\r\n};\r\n\r\n/** Match GPT followed by digit, optional decimal, and optional suffix\r\n *\r\n * Examples: gpt-4, gpt-4o, gpt-4.5, gpt-5a, etc. */\r\nconst extractGPTVersion = (modelStr: string): string => {\r\n  const gptMatch = modelStr.match(/gpt-(\\d+(?:\\.\\d+)?)([a-z])?/i);\r\n  if (gptMatch) {\r\n    const version = gptMatch[1];\r\n    const suffix = gptMatch[2] || '';\r\n    return `GPT-${version}${suffix}`;\r\n  }\r\n  return '';\r\n};\r\n\r\n/** Match omni models (o1, o3, etc.), \"o\" followed by a digit, possibly with decimal */\r\nconst extractOmniVersion = (modelStr: string): string => {\r\n  const omniMatch = modelStr.match(/\\bo(\\d+(?:\\.\\d+)?)\\b/i);\r\n  if (omniMatch) {\r\n    const version = omniMatch[1];\r\n    return `o${version}`;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport const getResponseSender = (endpointOption: t.TEndpointOption): string => {\r\n  const {\r\n    model: _m,\r\n    endpoint: _e,\r\n    endpointType,\r\n    modelDisplayLabel: _mdl,\r\n    chatGptLabel: _cgl,\r\n    modelLabel: _ml,\r\n  } = endpointOption;\r\n\r\n  const endpoint = _e as EModelEndpoint;\r\n\r\n  const model = _m ?? '';\r\n  const modelDisplayLabel = _mdl ?? '';\r\n  const chatGptLabel = _cgl ?? '';\r\n  const modelLabel = _ml ?? '';\r\n  if (\r\n    [\r\n      EModelEndpoint.openAI,\r\n      EModelEndpoint.bedrock,\r\n      EModelEndpoint.gptPlugins,\r\n      EModelEndpoint.azureOpenAI,\r\n      EModelEndpoint.chatGPTBrowser,\r\n    ].includes(endpoint)\r\n  ) {\r\n    if (chatGptLabel) {\r\n      return chatGptLabel;\r\n    } else if (modelLabel) {\r\n      return modelLabel;\r\n    } else if (model && extractOmniVersion(model)) {\r\n      return extractOmniVersion(model);\r\n    } else if (model && (model.includes('mistral') || model.includes('codestral'))) {\r\n      return 'Mistral';\r\n    } else if (model && model.includes('deepseek')) {\r\n      return 'Deepseek';\r\n    } else if (model && model.includes('gpt-')) {\r\n      const gptVersion = extractGPTVersion(model);\r\n      return gptVersion || 'GPT';\r\n    }\r\n    return (alternateName[endpoint] as string | undefined) ?? 'ChatGPT';\r\n  }\r\n\r\n  if (endpoint === EModelEndpoint.anthropic) {\r\n    return modelLabel || 'Claude';\r\n  }\r\n\r\n  if (endpoint === EModelEndpoint.bedrock) {\r\n    return modelLabel || alternateName[endpoint];\r\n  }\r\n\r\n  if (endpoint === EModelEndpoint.google) {\r\n    if (modelLabel) {\r\n      return modelLabel;\r\n    } else if (model?.toLowerCase().includes('gemma') === true) {\r\n      return 'Gemma';\r\n    }\r\n\r\n    return 'Gemini';\r\n  }\r\n\r\n  if (endpoint === EModelEndpoint.custom || endpointType === EModelEndpoint.custom) {\r\n    if (modelLabel) {\r\n      return modelLabel;\r\n    } else if (chatGptLabel) {\r\n      return chatGptLabel;\r\n    } else if (model && extractOmniVersion(model)) {\r\n      return extractOmniVersion(model);\r\n    } else if (model && (model.includes('mistral') || model.includes('codestral'))) {\r\n      return 'Mistral';\r\n    } else if (model && model.includes('deepseek')) {\r\n      return 'Deepseek';\r\n    } else if (model && model.includes('gpt-')) {\r\n      const gptVersion = extractGPTVersion(model);\r\n      return gptVersion || 'GPT';\r\n    } else if (modelDisplayLabel) {\r\n      return modelDisplayLabel;\r\n    }\r\n\r\n    return 'AI';\r\n  }\r\n\r\n  return '';\r\n};\r\n\r\ntype CompactEndpointSchema =\r\n  | typeof openAISchema\r\n  | typeof compactAssistantSchema\r\n  | typeof compactAgentsSchema\r\n  | typeof compactGoogleSchema\r\n  | typeof anthropicSchema\r\n  | typeof bedrockInputSchema\r\n  | typeof compactPluginsSchema;\r\n\r\nconst compactEndpointSchemas: Record<EndpointSchemaKey, CompactEndpointSchema> = {\r\n  [EModelEndpoint.openAI]: openAISchema,\r\n  [EModelEndpoint.azureOpenAI]: openAISchema,\r\n  [EModelEndpoint.custom]: openAISchema,\r\n  [EModelEndpoint.assistants]: compactAssistantSchema,\r\n  [EModelEndpoint.azureAssistants]: compactAssistantSchema,\r\n  [EModelEndpoint.agents]: compactAgentsSchema,\r\n  [EModelEndpoint.google]: compactGoogleSchema,\r\n  [EModelEndpoint.bedrock]: bedrockInputSchema,\r\n  [EModelEndpoint.anthropic]: anthropicSchema,\r\n  [EModelEndpoint.gptPlugins]: compactPluginsSchema,\r\n};\r\n\r\nexport const parseCompactConvo = ({\r\n  endpoint,\r\n  endpointType,\r\n  conversation,\r\n  possibleValues,\r\n}: {\r\n  endpoint?: EndpointSchemaKey;\r\n  endpointType?: EndpointSchemaKey | null;\r\n  conversation: Partial<s.TConversation | s.TPreset>;\r\n  possibleValues?: TPossibleValues;\r\n  // TODO: POC for default schema\r\n  // defaultSchema?: Partial<EndpointSchema>,\r\n}) => {\r\n  if (!endpoint) {\r\n    throw new Error(`undefined endpoint: ${endpoint}`);\r\n  }\r\n\r\n  let schema = compactEndpointSchemas[endpoint] as CompactEndpointSchema | undefined;\r\n\r\n  if (!schema && !endpointType) {\r\n    throw new Error(`Unknown endpoint: ${endpoint}`);\r\n  } else if (!schema && endpointType) {\r\n    schema = compactEndpointSchemas[endpointType];\r\n  }\r\n\r\n  if (!schema) {\r\n    throw new Error(`Unknown endpointType: ${endpointType}`);\r\n  }\r\n\r\n  const convo = schema.parse(conversation) as s.TConversation | null;\r\n  // const { models, secondaryModels } = possibleValues ?? {};\r\n  const { models } = possibleValues ?? {};\r\n\r\n  if (models && convo) {\r\n    convo.model = getFirstDefinedValue(models) ?? convo.model;\r\n  }\r\n\r\n  // if (secondaryModels && convo.agentOptions) {\r\n  //   convo.agentOptionmodel = getFirstDefinedValue(secondaryModels) ?? convo.agentOptionmodel;\r\n  // }\r\n\r\n  return convo;\r\n};\r\n\r\nexport function parseTextParts(\r\n  contentParts: a.TMessageContentParts[],\r\n  skipReasoning: boolean = false,\r\n): string {\r\n  let result = '';\r\n\r\n  for (const part of contentParts) {\r\n    if (!part.type) {\r\n      continue;\r\n    }\r\n    if (part.type === ContentTypes.TEXT) {\r\n      const textValue = typeof part.text === 'string' ? part.text : part.text.value;\r\n\r\n      if (\r\n        result.length > 0 &&\r\n        textValue.length > 0 &&\r\n        result[result.length - 1] !== ' ' &&\r\n        textValue[0] !== ' '\r\n      ) {\r\n        result += ' ';\r\n      }\r\n      result += textValue;\r\n    } else if (part.type === ContentTypes.THINK && !skipReasoning) {\r\n      const textValue = typeof part.think === 'string' ? part.think : '';\r\n      if (\r\n        result.length > 0 &&\r\n        textValue.length > 0 &&\r\n        result[result.length - 1] !== ' ' &&\r\n        textValue[0] !== ' '\r\n      ) {\r\n        result += ' ';\r\n      }\r\n      result += textValue;\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport const SEPARATORS = ['.', '?', '!', '', '', '', ';', '', '', '\\n', '```'];\r\n\r\nexport function findLastSeparatorIndex(text: string, separators = SEPARATORS): number {\r\n  let lastIndex = -1;\r\n  for (const separator of separators) {\r\n    const index = text.lastIndexOf(separator);\r\n    if (index > lastIndex) {\r\n      lastIndex = index;\r\n    }\r\n  }\r\n  return lastIndex;\r\n}\r\n\r\nexport function replaceSpecialVars({ text, user }: { text: string; user?: t.TUser | null }) {\r\n  let result = text;\r\n  if (!result) {\r\n    return result;\r\n  }\r\n\r\n  // e.g., \"2024-04-29 (1)\" (1=Monday)\r\n  const currentDate = dayjs().format('YYYY-MM-DD');\r\n  const dayNumber = dayjs().day();\r\n  const combinedDate = `${currentDate} (${dayNumber})`;\r\n  result = result.replace(/{{current_date}}/gi, combinedDate);\r\n\r\n  const currentDatetime = dayjs().format('YYYY-MM-DD HH:mm:ss');\r\n  result = result.replace(/{{current_datetime}}/gi, `${currentDatetime} (${dayNumber})`);\r\n\r\n  const isoDatetime = dayjs().toISOString();\r\n  result = result.replace(/{{iso_datetime}}/gi, isoDatetime);\r\n\r\n  if (user && user.name) {\r\n    result = result.replace(/{{current_user}}/gi, user.name);\r\n  }\r\n\r\n  return result;\r\n}\r\n","import type { ZodError } from 'zod';\r\nimport type {\r\n  TAzureGroups,\r\n  TAzureGroupMap,\r\n  TAzureModelGroupMap,\r\n  TValidatedAzureConfig,\r\n  TAzureConfigValidationResult,\r\n} from '../src/config';\r\nimport { extractEnvVariable, envVarRegex } from '../src/utils';\r\nimport { azureGroupConfigsSchema } from '../src/config';\r\nimport { errorsToString } from '../src/parsers';\r\n\r\nexport const deprecatedAzureVariables = [\r\n  /* \"related to\" precedes description text */\r\n  { key: 'AZURE_OPENAI_DEFAULT_MODEL', description: 'setting a default model' },\r\n  { key: 'AZURE_OPENAI_MODELS', description: 'setting models' },\r\n  {\r\n    key: 'AZURE_USE_MODEL_AS_DEPLOYMENT_NAME',\r\n    description: 'using model names as deployment names',\r\n  },\r\n  { key: 'AZURE_API_KEY', description: 'setting a single Azure API key' },\r\n  { key: 'AZURE_OPENAI_API_INSTANCE_NAME', description: 'setting a single Azure instance name' },\r\n  {\r\n    key: 'AZURE_OPENAI_API_DEPLOYMENT_NAME',\r\n    description: 'setting a single Azure deployment name',\r\n  },\r\n  { key: 'AZURE_OPENAI_API_VERSION', description: 'setting a single Azure API version' },\r\n  {\r\n    key: 'AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME',\r\n    description: 'setting a single Azure completions deployment name',\r\n  },\r\n  {\r\n    key: 'AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME',\r\n    description: 'setting a single Azure embeddings deployment name',\r\n  },\r\n  {\r\n    key: 'PLUGINS_USE_AZURE',\r\n    description: 'using Azure for Plugins',\r\n  },\r\n];\r\n\r\nexport const conflictingAzureVariables = [\r\n  {\r\n    key: 'INSTANCE_NAME',\r\n  },\r\n  {\r\n    key: 'DEPLOYMENT_NAME',\r\n  },\r\n];\r\n\r\nexport function validateAzureGroups(configs: TAzureGroups): TAzureConfigValidationResult {\r\n  let isValid = true;\r\n  const modelNames: string[] = [];\r\n  const modelGroupMap: TAzureModelGroupMap = {};\r\n  const groupMap: TAzureGroupMap = {};\r\n  const errors: (ZodError | string)[] = [];\r\n\r\n  const result = azureGroupConfigsSchema.safeParse(configs);\r\n  if (!result.success) {\r\n    isValid = false;\r\n    errors.push(errorsToString(result.error.errors));\r\n  } else {\r\n    for (const group of result.data) {\r\n      const {\r\n        group: groupName,\r\n        apiKey,\r\n        instanceName = '',\r\n        deploymentName = '',\r\n        version = '',\r\n        baseURL = '',\r\n        additionalHeaders,\r\n        models,\r\n        serverless = false,\r\n        ...rest\r\n      } = group;\r\n\r\n      if (groupMap[groupName]) {\r\n        errors.push(`Duplicate group name detected: \"${groupName}\". Group names must be unique.`);\r\n        return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n      }\r\n\r\n      if (serverless && !baseURL) {\r\n        errors.push(`Group \"${groupName}\" is serverless but missing mandatory \"baseURL.\"`);\r\n        return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n      }\r\n\r\n      if (!instanceName && !serverless) {\r\n        errors.push(\r\n          `Group \"${groupName}\" is missing an \"instanceName\" for non-serverless configuration.`,\r\n        );\r\n        return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n      }\r\n\r\n      groupMap[groupName] = {\r\n        apiKey,\r\n        instanceName,\r\n        deploymentName,\r\n        version,\r\n        baseURL,\r\n        additionalHeaders,\r\n        models,\r\n        serverless,\r\n        ...rest,\r\n      };\r\n\r\n      for (const modelName in group.models) {\r\n        modelNames.push(modelName);\r\n        const model = group.models[modelName];\r\n\r\n        if (modelGroupMap[modelName]) {\r\n          errors.push(\r\n            `Duplicate model name detected: \"${modelName}\". Model names must be unique across groups.`,\r\n          );\r\n          return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n        }\r\n\r\n        if (serverless) {\r\n          modelGroupMap[modelName] = {\r\n            group: groupName,\r\n          };\r\n          continue;\r\n        }\r\n\r\n        const groupDeploymentName = group.deploymentName ?? '';\r\n        const groupVersion = group.version ?? '';\r\n        if (typeof model === 'boolean') {\r\n          // For boolean models, check if group-level deploymentName and version are present.\r\n          if (!groupDeploymentName || !groupVersion) {\r\n            errors.push(\r\n              `Model \"${modelName}\" in group \"${groupName}\" is missing a deploymentName or version.`,\r\n            );\r\n            return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n          }\r\n\r\n          modelGroupMap[modelName] = {\r\n            group: groupName,\r\n          };\r\n        } else {\r\n          const modelDeploymentName = model.deploymentName ?? '';\r\n          const modelVersion = model.version ?? '';\r\n          // For object models, check if deploymentName and version are required but missing.\r\n          if ((!modelDeploymentName && !groupDeploymentName) || (!modelVersion && !groupVersion)) {\r\n            errors.push(\r\n              `Model \"${modelName}\" in group \"${groupName}\" is missing a required deploymentName or version.`,\r\n            );\r\n            return { isValid: false, modelNames, modelGroupMap, groupMap, errors };\r\n          }\r\n\r\n          modelGroupMap[modelName] = {\r\n            group: groupName,\r\n            // deploymentName: modelDeploymentName || groupDeploymentName,\r\n            // version: modelVersion || groupVersion,\r\n          };\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return { isValid, modelNames, modelGroupMap, groupMap, errors };\r\n}\r\n\r\ntype AzureOptions = {\r\n  azureOpenAIApiKey: string;\r\n  azureOpenAIApiInstanceName?: string;\r\n  azureOpenAIApiDeploymentName?: string;\r\n  azureOpenAIApiVersion?: string;\r\n};\r\n\r\ntype MappedAzureConfig = {\r\n  azureOptions: AzureOptions;\r\n  baseURL?: string;\r\n  headers?: Record<string, string>;\r\n  serverless?: boolean;\r\n};\r\n\r\nexport function mapModelToAzureConfig({\r\n  modelName,\r\n  modelGroupMap,\r\n  groupMap,\r\n}: Omit<TValidatedAzureConfig, 'modelNames'> & {\r\n  modelName: string;\r\n}): MappedAzureConfig {\r\n  const modelConfig = modelGroupMap[modelName];\r\n  if (!modelConfig) {\r\n    throw new Error(`Model named \"${modelName}\" not found in configuration.`);\r\n  }\r\n\r\n  const groupConfig = groupMap[modelConfig.group];\r\n  if (!groupConfig) {\r\n    throw new Error(\r\n      `Group \"${modelConfig.group}\" for model \"${modelName}\" not found in configuration.`,\r\n    );\r\n  }\r\n\r\n  const instanceName = groupConfig.instanceName ?? '';\r\n\r\n  if (!instanceName && groupConfig.serverless !== true) {\r\n    throw new Error(\r\n      `Group \"${modelConfig.group}\" is missing an instanceName for non-serverless configuration.`,\r\n    );\r\n  }\r\n\r\n  const baseURL = groupConfig.baseURL ?? '';\r\n  if (groupConfig.serverless === true && !baseURL) {\r\n    throw new Error(\r\n      `Group \"${modelConfig.group}\" is missing the required base URL for serverless configuration.`,\r\n    );\r\n  }\r\n\r\n  if (groupConfig.serverless === true) {\r\n    const result: MappedAzureConfig = {\r\n      azureOptions: {\r\n        azureOpenAIApiVersion: extractEnvVariable(groupConfig.version ?? ''),\r\n        azureOpenAIApiKey: extractEnvVariable(groupConfig.apiKey),\r\n      },\r\n      baseURL: extractEnvVariable(baseURL),\r\n      serverless: true,\r\n    };\r\n\r\n    const apiKeyValue = result.azureOptions.azureOpenAIApiKey;\r\n    if (typeof apiKeyValue === 'string' && envVarRegex.test(apiKeyValue)) {\r\n      throw new Error(`Azure configuration environment variable \"${apiKeyValue}\" was not found.`);\r\n    }\r\n\r\n    if (groupConfig.additionalHeaders) {\r\n      result.headers = groupConfig.additionalHeaders;\r\n    }\r\n\r\n    return result;\r\n  }\r\n\r\n  if (!instanceName) {\r\n    throw new Error(\r\n      `Group \"${modelConfig.group}\" is missing an instanceName for non-serverless configuration.`,\r\n    );\r\n  }\r\n\r\n  const modelDetails = groupConfig.models[modelName];\r\n  const { deploymentName = '', version = '' } =\r\n    typeof modelDetails === 'object'\r\n      ? {\r\n        deploymentName: modelDetails.deploymentName ?? groupConfig.deploymentName,\r\n        version: modelDetails.version ?? groupConfig.version,\r\n      }\r\n      : {\r\n        deploymentName: groupConfig.deploymentName,\r\n        version: groupConfig.version,\r\n      };\r\n\r\n  if (!deploymentName || !version) {\r\n    throw new Error(\r\n      `Model \"${modelName}\" in group \"${modelConfig.group}\" is missing a deploymentName (\"${deploymentName}\") or version (\"${version}\").`,\r\n    );\r\n  }\r\n\r\n  const azureOptions: AzureOptions = {\r\n    azureOpenAIApiKey: extractEnvVariable(groupConfig.apiKey),\r\n    azureOpenAIApiInstanceName: extractEnvVariable(instanceName),\r\n    azureOpenAIApiDeploymentName: extractEnvVariable(deploymentName),\r\n    azureOpenAIApiVersion: extractEnvVariable(version),\r\n  };\r\n\r\n  for (const value of Object.values(azureOptions)) {\r\n    if (typeof value === 'string' && envVarRegex.test(value)) {\r\n      throw new Error(`Azure configuration environment variable \"${value}\" was not found.`);\r\n    }\r\n  }\r\n\r\n  const result: MappedAzureConfig = { azureOptions };\r\n\r\n  if (baseURL) {\r\n    result.baseURL = extractEnvVariable(baseURL);\r\n  }\r\n\r\n  if (groupConfig.additionalHeaders) {\r\n    result.headers = groupConfig.additionalHeaders;\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function mapGroupToAzureConfig({\r\n  groupName,\r\n  groupMap,\r\n}: {\r\n  groupName: string;\r\n  groupMap: TAzureGroupMap;\r\n}): MappedAzureConfig {\r\n  const groupConfig = groupMap[groupName];\r\n  if (!groupConfig) {\r\n    throw new Error(`Group named \"${groupName}\" not found in configuration.`);\r\n  }\r\n\r\n  const instanceName = groupConfig.instanceName ?? '';\r\n  const serverless = groupConfig.serverless ?? false;\r\n  const baseURL = groupConfig.baseURL ?? '';\r\n\r\n  if (!instanceName && !serverless) {\r\n    throw new Error(\r\n      `Group \"${groupName}\" is missing an instanceName for non-serverless configuration.`,\r\n    );\r\n  }\r\n\r\n  if (serverless && !baseURL) {\r\n    throw new Error(\r\n      `Group \"${groupName}\" is missing the required base URL for serverless configuration.`,\r\n    );\r\n  }\r\n\r\n  const models = Object.keys(groupConfig.models);\r\n  if (models.length === 0) {\r\n    throw new Error(`Group \"${groupName}\" does not have any models configured.`);\r\n  }\r\n\r\n  // Use the first available model in the group\r\n  const firstModelName = models[0];\r\n  const modelDetails = groupConfig.models[firstModelName];\r\n\r\n  const azureOptions: AzureOptions = {\r\n    azureOpenAIApiVersion: extractEnvVariable(groupConfig.version ?? ''),\r\n    azureOpenAIApiKey: extractEnvVariable(groupConfig.apiKey),\r\n    azureOpenAIApiInstanceName: extractEnvVariable(instanceName),\r\n    // DeploymentName and Version set below\r\n  };\r\n\r\n  if (serverless) {\r\n    return {\r\n      azureOptions,\r\n      baseURL: extractEnvVariable(baseURL),\r\n      serverless: true,\r\n      ...(groupConfig.additionalHeaders && { headers: groupConfig.additionalHeaders }),\r\n    };\r\n  }\r\n\r\n  const { deploymentName = '', version = '' } =\r\n    typeof modelDetails === 'object'\r\n      ? {\r\n        deploymentName: modelDetails.deploymentName ?? groupConfig.deploymentName,\r\n        version: modelDetails.version ?? groupConfig.version,\r\n      }\r\n      : {\r\n        deploymentName: groupConfig.deploymentName,\r\n        version: groupConfig.version,\r\n      };\r\n\r\n  if (!deploymentName || !version) {\r\n    throw new Error(\r\n      `Model \"${firstModelName}\" in group \"${groupName}\" or the group itself is missing a deploymentName (\"${deploymentName}\") or version (\"${version}\").`,\r\n    );\r\n  }\r\n\r\n  azureOptions.azureOpenAIApiDeploymentName = extractEnvVariable(deploymentName);\r\n  azureOptions.azureOpenAIApiVersion = extractEnvVariable(version);\r\n\r\n  const result: MappedAzureConfig = { azureOptions };\r\n\r\n  if (baseURL) {\r\n    result.baseURL = extractEnvVariable(baseURL);\r\n  }\r\n\r\n  if (groupConfig.additionalHeaders) {\r\n    result.headers = groupConfig.additionalHeaders;\r\n  }\r\n\r\n  return result;\r\n}\r\n","export enum ArtifactModes {\r\n  DEFAULT = 'default',\r\n  SHADCNUI = 'shadcnui',\r\n  CUSTOM = 'custom',\r\n}\r\n\r\nexport const utils = `\r\nimport { type ClassValue, clsx } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n`;\r\nexport const accordian = `import * as React from \"react\"\r\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\r\nimport { ChevronDown } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Accordion = AccordionPrimitive.Root\r\n\r\nconst AccordionItem = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\r\n>(({ className, ...props }, ref) => (\r\n  <AccordionPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\"border-b\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAccordionItem.displayName = \"AccordionItem\"\r\n\r\nconst AccordionTrigger = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <AccordionPrimitive.Header className=\"flex\">\r\n    <AccordionPrimitive.Trigger\r\n      ref={ref}\r\n      className={cn(\r\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\r\n    </AccordionPrimitive.Trigger>\r\n  </AccordionPrimitive.Header>\r\n))\r\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\r\n\r\nconst AccordionContent = React.forwardRef<\r\n  React.ElementRef<typeof AccordionPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <AccordionPrimitive.Content\r\n    ref={ref}\r\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\r\n    {...props}\r\n  >\r\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\r\n  </AccordionPrimitive.Content>\r\n))\r\n\r\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\r\n\r\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\r\n`;\r\nexport const alertDialog = `import * as React from \"react\"\r\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { buttonVariants } from \"./button\"\r\n\r\nconst AlertDialog = AlertDialogPrimitive.Root\r\n\r\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\r\n\r\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\r\n\r\nconst AlertDialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Overlay\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  />\r\n))\r\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\r\n\r\nconst AlertDialogContent = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPortal>\r\n    <AlertDialogOverlay />\r\n    <AlertDialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-gray-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-gray-800 dark:bg-gray-950\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </AlertDialogPortal>\r\n))\r\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\r\n\r\nconst AlertDialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-2 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\r\n\r\nconst AlertDialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\r\n\r\nconst AlertDialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\"text-lg font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\r\n\r\nconst AlertDialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-gray-500 dark:text-gray-400\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogDescription.displayName =\r\n  AlertDialogPrimitive.Description.displayName\r\n\r\nconst AlertDialogAction = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Action\r\n    ref={ref}\r\n    className={cn(buttonVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\r\n\r\nconst AlertDialogCancel = React.forwardRef<\r\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\r\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\r\n>(({ className, ...props }, ref) => (\r\n  <AlertDialogPrimitive.Cancel\r\n    ref={ref}\r\n    className={cn(\r\n      buttonVariants({ variant: \"outline\" }),\r\n      \"mt-2 sm:mt-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\r\n\r\nexport {\r\n  AlertDialog,\r\n  AlertDialogPortal,\r\n  AlertDialogOverlay,\r\n  AlertDialogTrigger,\r\n  AlertDialogContent,\r\n  AlertDialogHeader,\r\n  AlertDialogFooter,\r\n  AlertDialogTitle,\r\n  AlertDialogDescription,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n}\r\n`;\r\nexport const alert = `import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst alertVariants = cva(\r\n  \"relative w-full rounded-lg border border-gray-200 p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-gray-950 dark:border-gray-800 dark:[&>svg]:text-gray-50\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-white text-gray-950 dark:bg-gray-950 dark:text-gray-50\",\r\n        destructive:\r\n          \"border-red-500/50 text-red-500 dark:border-red-500 [&>svg]:text-red-500 dark:border-red-900/50 dark:text-red-900 dark:dark:border-red-900 dark:[&>svg]:text-red-900\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Alert = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\r\n>(({ className, variant, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    role=\"alert\"\r\n    className={cn(alertVariants({ variant }), className)}\r\n    {...props}\r\n  />\r\n))\r\nAlert.displayName = \"Alert\"\r\n\r\nconst AlertTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h5\r\n    ref={ref}\r\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertTitle.displayName = \"AlertTitle\"\r\n\r\nconst AlertDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAlertDescription.displayName = \"AlertDescription\"\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n\r\n`;\r\nexport const avatar = `import * as React from \"react\"\r\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Avatar = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatar.displayName = AvatarPrimitive.Root.displayName\r\n\r\nconst AvatarImage = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Image>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Image\r\n    ref={ref}\r\n    className={cn(\"aspect-square h-full w-full\", className)}\r\n    {...props}\r\n  />\r\n))\r\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\r\n\r\nconst AvatarFallback = React.forwardRef<\r\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\r\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\r\n>(({ className, ...props }, ref) => (\r\n  <AvatarPrimitive.Fallback\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-full w-full items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\r\n\r\nexport { Avatar, AvatarImage, AvatarFallback }\r\n\r\n`;\r\nexport const badge = `import * as React from \"react\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst badgeVariants = cva(\r\n  \"inline-flex items-center rounded-full border border-gray-200 px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 dark:border-gray-800 dark:focus:ring-gray-300\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default:\r\n          \"border-transparent bg-gray-900 text-gray-50 hover:bg-gray-900/80 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/80\",\r\n        secondary:\r\n          \"border-transparent bg-gray-100 text-gray-900 hover:bg-gray-100/80 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-800/80\",\r\n        destructive:\r\n          \"border-transparent bg-red-500 text-gray-50 hover:bg-red-500/80 dark:bg-red-900 dark:text-gray-50 dark:hover:bg-red-900/80\",\r\n        outline: \"text-gray-950 dark:text-gray-50\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface BadgeProps\r\n  extends React.HTMLAttributes<HTMLDivElement>,\r\n    VariantProps<typeof badgeVariants> {}\r\n\r\nfunction Badge({ className, variant, ...props }: BadgeProps) {\r\n  return (\r\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\r\n  )\r\n}\r\n\r\nexport { Badge, badgeVariants }\r\n\r\n`;\r\nexport const breadcrumb = `import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Breadcrumb = React.forwardRef<\r\n  HTMLElement,\r\n  React.ComponentPropsWithoutRef<\"nav\"> & {\r\n    separator?: React.ReactNode\r\n  }\r\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\r\nBreadcrumb.displayName = \"Breadcrumb\"\r\n\r\nconst BreadcrumbList = React.forwardRef<\r\n  HTMLOListElement,\r\n  React.ComponentPropsWithoutRef<\"ol\">\r\n>(({ className, ...props }, ref) => (\r\n  <ol\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-gray-500 sm:gap-2.5 dark:text-gray-400\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nBreadcrumbList.displayName = \"BreadcrumbList\"\r\n\r\nconst BreadcrumbItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentPropsWithoutRef<\"li\">\r\n>(({ className, ...props }, ref) => (\r\n  <li\r\n    ref={ref}\r\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\r\n    {...props}\r\n  />\r\n))\r\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\r\n\r\nconst BreadcrumbLink = React.forwardRef<\r\n  HTMLAnchorElement,\r\n  React.ComponentPropsWithoutRef<\"a\"> & {\r\n    asChild?: boolean\r\n  }\r\n>(({ asChild, className, ...props }, ref) => {\r\n  const Comp = asChild ? Slot : \"a\"\r\n\r\n  return (\r\n    <Comp\r\n      ref={ref}\r\n      className={cn(\"transition-colors hover:text-gray-950 dark:hover:text-gray-50\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\r\n\r\nconst BreadcrumbPage = React.forwardRef<\r\n  HTMLSpanElement,\r\n  React.ComponentPropsWithoutRef<\"span\">\r\n>(({ className, ...props }, ref) => (\r\n  <span\r\n    ref={ref}\r\n    role=\"link\"\r\n    aria-disabled=\"true\"\r\n    aria-current=\"page\"\r\n    className={cn(\"font-normal text-gray-950 dark:text-gray-50\", className)}\r\n    {...props}\r\n  />\r\n))\r\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\r\n\r\nconst BreadcrumbSeparator = ({\r\n  children,\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"li\">) => (\r\n  <li\r\n    role=\"presentation\"\r\n    aria-hidden=\"true\"\r\n    className={cn(\"[&>svg]:size-3.5\", className)}\r\n    {...props}\r\n  >\r\n    {children ?? <ChevronRight />}\r\n  </li>\r\n)\r\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\r\n\r\nconst BreadcrumbEllipsis = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"span\">) => (\r\n  <span\r\n    role=\"presentation\"\r\n    aria-hidden=\"true\"\r\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    <MoreHorizontal className=\"h-4 w-4\" />\r\n    <span className=\"sr-only\">More</span>\r\n  </span>\r\n)\r\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\r\n\r\nexport {\r\n  Breadcrumb,\r\n  BreadcrumbList,\r\n  BreadcrumbItem,\r\n  BreadcrumbLink,\r\n  BreadcrumbPage,\r\n  BreadcrumbSeparator,\r\n  BreadcrumbEllipsis,\r\n}\r\n\r\n`;\r\nexport const button = `import * as React from \"react\"\r\nimport { Slot } from \"@radix-ui/react-slot\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from '../../lib/utils';\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-gray-900 text-gray-50 hover:bg-gray-900/90 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50/90\",\r\n        destructive:\r\n          \"bg-red-500 text-gray-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-gray-50 dark:hover:bg-red-900/90\",\r\n        outline:\r\n          \"border border-gray-200 bg-white hover:bg-gray-100 hover:text-gray-900 dark:border-gray-800 dark:bg-gray-950 dark:hover:bg-gray-800 dark:hover:text-gray-50\",\r\n        secondary:\r\n          \"bg-gray-100 text-gray-900 hover:bg-gray-100/80 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-800/80\",\r\n        ghost: \"hover:bg-gray-100 hover:text-gray-900 dark:hover:bg-gray-800 dark:hover:text-gray-50\",\r\n        link: \"text-gray-900 underline-offset-4 hover:underline dark:text-gray-50\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-4 py-2\",\r\n        sm: \"h-9 rounded-md px-3\",\r\n        lg: \"h-11 rounded-md px-8\",\r\n        icon: \"h-10 w-10\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nexport interface ButtonProps\r\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\r\n    VariantProps<typeof buttonVariants> {\r\n  asChild?: boolean\r\n}\r\n\r\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\r\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\r\n    const Comp = asChild ? Slot : \"button\"\r\n    return (\r\n      <Comp\r\n        className={cn(buttonVariants({ variant, size, className }))}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nButton.displayName = \"Button\"\r\n\r\nexport { Button, buttonVariants }\r\n`;\r\nexport const calendar = `import * as React from \"react\"\r\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\r\nimport { DayPicker } from \"react-day-picker\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { buttonVariants } from \"./button\"\r\n\r\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\r\n\r\nfunction Calendar({\r\n  className,\r\n  classNames,\r\n  showOutsideDays = true,\r\n  ...props\r\n}: CalendarProps) {\r\n  return (\r\n    <DayPicker\r\n      showOutsideDays={showOutsideDays}\r\n      className={cn(\"p-3\", className)}\r\n      classNames={{\r\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\r\n        month: \"space-y-4\",\r\n        caption: \"flex justify-center pt-1 relative items-center\",\r\n        caption_label: \"text-sm font-medium\",\r\n        nav: \"space-x-1 flex items-center\",\r\n        nav_button: cn(\r\n          buttonVariants({ variant: \"outline\" }),\r\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\r\n        ),\r\n        nav_button_previous: \"absolute left-1\",\r\n        nav_button_next: \"absolute right-1\",\r\n        table: \"w-full border-collapse space-y-1\",\r\n        head_row: \"flex\",\r\n        head_cell:\r\n          \"text-gray-500 rounded-md w-9 font-normal text-[0.8rem] dark:text-gray-400\",\r\n        row: \"flex w-full mt-2\",\r\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-gray-100/50 [&:has([aria-selected])]:bg-gray-100 first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20 dark:[&:has([aria-selected].day-outside)]:bg-gray-800/50 dark:[&:has([aria-selected])]:bg-gray-800\",\r\n        day: cn(\r\n          buttonVariants({ variant: \"ghost\" }),\r\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\r\n        ),\r\n        day_range_end: \"day-range-end\",\r\n        day_selected:\r\n          \"bg-gray-900 text-gray-50 hover:bg-gray-900 hover:text-gray-50 focus:bg-gray-900 focus:text-gray-50 dark:bg-gray-50 dark:text-gray-900 dark:hover:bg-gray-50 dark:hover:text-gray-900 dark:focus:bg-gray-50 dark:focus:text-gray-900\",\r\n        day_today: \"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-gray-50\",\r\n        day_outside:\r\n          \"day-outside text-gray-500 opacity-50 aria-selected:bg-gray-100/50 aria-selected:text-gray-500 aria-selected:opacity-30 dark:text-gray-400 dark:aria-selected:bg-gray-800/50 dark:aria-selected:text-gray-400\",\r\n        day_disabled: \"text-gray-500 opacity-50 dark:text-gray-400\",\r\n        day_range_middle:\r\n          \"aria-selected:bg-gray-100 aria-selected:text-gray-900 dark:aria-selected:bg-gray-800 dark:aria-selected:text-gray-50\",\r\n        day_hidden: \"invisible\",\r\n        ...classNames,\r\n      }}\r\n      components={{\r\n        IconLeft: ({ ...props }) => <ChevronLeft className=\"h-4 w-4\" />,\r\n        IconRight: ({ ...props }) => <ChevronRight className=\"h-4 w-4\" />,\r\n      }}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nCalendar.displayName = \"Calendar\"\r\n\r\nexport { Calendar }\r\n\r\n`;\r\nexport const card = `import * as React from 'react';\r\n\r\nimport { cn } from '../../lib/utils';\r\n\r\nconst Card = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\r\n      \"rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCard.displayName = \"Card\"\r\n\r\nconst CardHeader = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardHeader.displayName = \"CardHeader\"\r\n\r\nconst CardTitle = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLHeadingElement>\r\n>(({ className, ...props }, ref) => (\r\n  <h3\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-2xl font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nCardTitle.displayName = \"CardTitle\"\r\n\r\nconst CardDescription = React.forwardRef<\r\n  HTMLParagraphElement,\r\n  React.HTMLAttributes<HTMLParagraphElement>\r\n>(({ className, ...props }, ref) => (\r\n  <p\r\n    ref={ref}\r\n    className={cn(\"text-sm text-gray-500 dark:text-gray-400\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardDescription.displayName = \"CardDescription\"\r\n\r\nconst CardContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\r\n))\r\nCardContent.displayName = \"CardContent\"\r\n\r\nconst CardFooter = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div\r\n    ref={ref}\r\n    className={cn(\"flex items-center p-6 pt-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nCardFooter.displayName = \"CardFooter\"\r\n\r\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\r\n`;\r\nexport const carousel = `import * as React from \"react\"\r\nimport useEmblaCarousel, {\r\n  type UseEmblaCarouselType,\r\n} from \"embla-carousel-react\"\r\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { Button } from \"./button\"\r\n\r\ntype CarouselApi = UseEmblaCarouselType[1]\r\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\r\ntype CarouselOptions = UseCarouselParameters[0]\r\ntype CarouselPlugin = UseCarouselParameters[1]\r\n\r\ntype CarouselProps = {\r\n  opts?: CarouselOptions\r\n  plugins?: CarouselPlugin\r\n  orientation?: \"horizontal\" | \"vertical\"\r\n  setApi?: (api: CarouselApi) => void\r\n}\r\n\r\ntype CarouselContextProps = {\r\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\r\n  api: ReturnType<typeof useEmblaCarousel>[1]\r\n  scrollPrev: () => void\r\n  scrollNext: () => void\r\n  canScrollPrev: boolean\r\n  canScrollNext: boolean\r\n} & CarouselProps\r\n\r\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\r\n\r\nfunction useCarousel() {\r\n  const context = React.useContext(CarouselContext)\r\n\r\n  if (!context) {\r\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\r\n  }\r\n\r\n  return context\r\n}\r\n\r\nconst Carousel = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\r\n>(\r\n  (\r\n    {\r\n      orientation = \"horizontal\",\r\n      opts,\r\n      setApi,\r\n      plugins,\r\n      className,\r\n      children,\r\n      ...props\r\n    },\r\n    ref\r\n  ) => {\r\n    const [carouselRef, api] = useEmblaCarousel(\r\n      {\r\n        ...opts,\r\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\r\n      },\r\n      plugins\r\n    )\r\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\r\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\r\n\r\n    const onSelect = React.useCallback((api: CarouselApi) => {\r\n      if (!api) {\r\n        return\r\n      }\r\n\r\n      setCanScrollPrev(api.canScrollPrev())\r\n      setCanScrollNext(api.canScrollNext())\r\n    }, [])\r\n\r\n    const scrollPrev = React.useCallback(() => {\r\n      api?.scrollPrev()\r\n    }, [api])\r\n\r\n    const scrollNext = React.useCallback(() => {\r\n      api?.scrollNext()\r\n    }, [api])\r\n\r\n    const handleKeyDown = React.useCallback(\r\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\r\n        if (event.key === \"ArrowLeft\") {\r\n          event.preventDefault()\r\n          scrollPrev()\r\n        } else if (event.key === \"ArrowRight\") {\r\n          event.preventDefault()\r\n          scrollNext()\r\n        }\r\n      },\r\n      [scrollPrev, scrollNext]\r\n    )\r\n\r\n    React.useEffect(() => {\r\n      if (!api || !setApi) {\r\n        return\r\n      }\r\n\r\n      setApi(api)\r\n    }, [api, setApi])\r\n\r\n    React.useEffect(() => {\r\n      if (!api) {\r\n        return\r\n      }\r\n\r\n      onSelect(api)\r\n      api.on(\"reInit\", onSelect)\r\n      api.on(\"select\", onSelect)\r\n\r\n      return () => {\r\n        api?.off(\"select\", onSelect)\r\n      }\r\n    }, [api, onSelect])\r\n\r\n    return (\r\n      <CarouselContext.Provider\r\n        value={{\r\n          carouselRef,\r\n          api: api,\r\n          opts,\r\n          orientation:\r\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\r\n          scrollPrev,\r\n          scrollNext,\r\n          canScrollPrev,\r\n          canScrollNext,\r\n        }}\r\n      >\r\n        <div\r\n          ref={ref}\r\n          onKeyDownCapture={handleKeyDown}\r\n          className={cn(\"relative\", className)}\r\n          role=\"region\"\r\n          aria-roledescription=\"carousel\"\r\n          {...props}\r\n        >\r\n          {children}\r\n        </div>\r\n      </CarouselContext.Provider>\r\n    )\r\n  }\r\n)\r\nCarousel.displayName = \"Carousel\"\r\n\r\nconst CarouselContent = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { carouselRef, orientation } = useCarousel()\r\n\r\n  return (\r\n    <div ref={carouselRef} className=\"overflow-hidden\">\r\n      <div\r\n        ref={ref}\r\n        className={cn(\r\n          \"flex\",\r\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    </div>\r\n  )\r\n})\r\nCarouselContent.displayName = \"CarouselContent\"\r\n\r\nconst CarouselItem = React.forwardRef<\r\n  HTMLDivElement,\r\n  React.HTMLAttributes<HTMLDivElement>\r\n>(({ className, ...props }, ref) => {\r\n  const { orientation } = useCarousel()\r\n\r\n  return (\r\n    <div\r\n      ref={ref}\r\n      role=\"group\"\r\n      aria-roledescription=\"slide\"\r\n      className={cn(\r\n        \"min-w-0 shrink-0 grow-0 basis-full\",\r\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nCarouselItem.displayName = \"CarouselItem\"\r\n\r\nconst CarouselPrevious = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<typeof Button>\r\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\r\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant={variant}\r\n      size={size}\r\n      className={cn(\r\n        \"absolute  h-8 w-8 rounded-full\",\r\n        orientation === \"horizontal\"\r\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\r\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\r\n        className\r\n      )}\r\n      disabled={!canScrollPrev}\r\n      onClick={scrollPrev}\r\n      {...props}\r\n    >\r\n      <ArrowLeft className=\"h-4 w-4\" />\r\n      <span className=\"sr-only\">Previous slide</span>\r\n    </Button>\r\n  )\r\n})\r\nCarouselPrevious.displayName = \"CarouselPrevious\"\r\n\r\nconst CarouselNext = React.forwardRef<\r\n  HTMLButtonElement,\r\n  React.ComponentProps<typeof Button>\r\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\r\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\r\n\r\n  return (\r\n    <Button\r\n      ref={ref}\r\n      variant={variant}\r\n      size={size}\r\n      className={cn(\r\n        \"absolute h-8 w-8 rounded-full\",\r\n        orientation === \"horizontal\"\r\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\r\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\r\n        className\r\n      )}\r\n      disabled={!canScrollNext}\r\n      onClick={scrollNext}\r\n      {...props}\r\n    >\r\n      <ArrowRight className=\"h-4 w-4\" />\r\n      <span className=\"sr-only\">Next slide</span>\r\n    </Button>\r\n  )\r\n})\r\nCarouselNext.displayName = \"CarouselNext\"\r\n\r\nexport {\r\n  type CarouselApi,\r\n  Carousel,\r\n  CarouselContent,\r\n  CarouselItem,\r\n  CarouselPrevious,\r\n  CarouselNext,\r\n}\r\n\r\n`;\r\nexport const checkbox = `import * as React from \"react\"\r\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\r\nimport { Check } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Checkbox = React.forwardRef<\r\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <CheckboxPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-gray-200 dark:border-gray-900 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gray-900 data-[state=checked]:text-gray-50  dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300 dark:data-[state=checked]:bg-gray-50 dark:data-[state=checked]:text-gray-900\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <CheckboxPrimitive.Indicator\r\n      className={cn(\"flex items-center justify-center text-current\")}\r\n    >\r\n      <Check className=\"h-4 w-4\" />\r\n    </CheckboxPrimitive.Indicator>\r\n  </CheckboxPrimitive.Root>\r\n))\r\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\r\n\r\nexport { Checkbox }\r\n\r\n`;\r\nexport const collapsible = `import * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\r\n\r\nconst Collapsible = CollapsiblePrimitive.Root\r\n\r\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\r\n\r\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\r\n\r\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\r\n\r\n`;\r\nexport const dialog = `import * as React from \"react\"\r\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Dialog = DialogPrimitive.Root\r\n\r\nconst DialogTrigger = DialogPrimitive.Trigger\r\n\r\nconst DialogPortal = DialogPrimitive.Portal\r\n\r\nconst DialogClose = DialogPrimitive.Close\r\n\r\nconst DialogOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\r\n\r\nconst DialogContent = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DialogPortal>\r\n    <DialogOverlay />\r\n    <DialogPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-gray-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg dark:border-gray-800 dark:bg-gray-950\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-gray-100 data-[state=open]:text-gray-500 dark:ring-offset-gray-950 dark:focus:ring-gray-300 dark:data-[state=open]:bg-gray-800 dark:data-[state=open]:text-gray-400\">\r\n        <X className=\"h-4 w-4\" />\r\n        <span className=\"sr-only\">Close</span>\r\n      </DialogPrimitive.Close>\r\n    </DialogPrimitive.Content>\r\n  </DialogPortal>\r\n))\r\nDialogContent.displayName = DialogPrimitive.Content.displayName\r\n\r\nconst DialogHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogHeader.displayName = \"DialogHeader\"\r\n\r\nconst DialogFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\r\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nDialogFooter.displayName = \"DialogFooter\"\r\n\r\nconst DialogTitle = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDialogTitle.displayName = DialogPrimitive.Title.displayName\r\n\r\nconst DialogDescription = React.forwardRef<\r\n  React.ElementRef<typeof DialogPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DialogPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-gray-500 dark:text-gray-400\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDialogDescription.displayName = DialogPrimitive.Description.displayName\r\n\r\nexport {\r\n  Dialog,\r\n  DialogPortal,\r\n  DialogOverlay,\r\n  DialogClose,\r\n  DialogTrigger,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogFooter,\r\n  DialogTitle,\r\n  DialogDescription,\r\n}\r\n\r\n`;\r\nexport const drawer = `import * as React from \"react\"\r\nimport { Drawer as DrawerPrimitive } from \"vaul\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Drawer = ({\r\n  shouldScaleBackground = true,\r\n  ...props\r\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\r\n  <DrawerPrimitive.Root\r\n    shouldScaleBackground={shouldScaleBackground}\r\n    {...props}\r\n  />\r\n)\r\nDrawer.displayName = \"Drawer\"\r\n\r\nconst DrawerTrigger = DrawerPrimitive.Trigger\r\n\r\nconst DrawerPortal = DrawerPrimitive.Portal\r\n\r\nconst DrawerClose = DrawerPrimitive.Close\r\n\r\nconst DrawerOverlay = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Overlay\r\n    ref={ref}\r\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\r\n\r\nconst DrawerContent = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DrawerPortal>\r\n    <DrawerOverlay />\r\n    <DrawerPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border border-gray-200 bg-white dark:border-gray-800 dark:bg-gray-950\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-gray-100 dark:bg-gray-800\" />\r\n      {children}\r\n    </DrawerPrimitive.Content>\r\n  </DrawerPortal>\r\n))\r\nDrawerContent.displayName = \"DrawerContent\"\r\n\r\nconst DrawerHeader = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\r\n    {...props}\r\n  />\r\n)\r\nDrawerHeader.displayName = \"DrawerHeader\"\r\n\r\nconst DrawerFooter = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) => (\r\n  <div\r\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\r\n    {...props}\r\n  />\r\n)\r\nDrawerFooter.displayName = \"DrawerFooter\"\r\n\r\nconst DrawerTitle = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Title>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Title\r\n    ref={ref}\r\n    className={cn(\r\n      \"text-lg font-semibold leading-none tracking-tight\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\r\n\r\nconst DrawerDescription = React.forwardRef<\r\n  React.ElementRef<typeof DrawerPrimitive.Description>,\r\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <DrawerPrimitive.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm text-gray-500 dark:text-gray-400\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\r\n\r\nexport {\r\n  Drawer,\r\n  DrawerPortal,\r\n  DrawerOverlay,\r\n  DrawerTrigger,\r\n  DrawerClose,\r\n  DrawerContent,\r\n  DrawerHeader,\r\n  DrawerFooter,\r\n  DrawerTitle,\r\n  DrawerDescription,\r\n}\r\n\r\n`;\r\nexport const dropdownMenu = `import * as React from \"react\"\r\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst DropdownMenu = DropdownMenuPrimitive.Root\r\n\r\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\r\n\r\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\r\n\r\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\r\n\r\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\r\n\r\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\r\n\r\nconst DropdownMenuSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-gray-100 data-[state=open]:bg-gray-100 dark:focus:bg-gray-800 dark:data-[state=open]:bg-gray-800\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\r\n  </DropdownMenuPrimitive.SubTrigger>\r\n))\r\nDropdownMenuSubTrigger.displayName =\r\n  DropdownMenuPrimitive.SubTrigger.displayName\r\n\r\nconst DropdownMenuSubContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSubContent.displayName =\r\n  DropdownMenuPrimitive.SubContent.displayName\r\n\r\nconst DropdownMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Portal>\r\n    <DropdownMenuPrimitive.Content\r\n      ref={ref}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </DropdownMenuPrimitive.Portal>\r\n))\r\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\r\n\r\nconst DropdownMenuItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\r\n\r\nconst DropdownMenuCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.CheckboxItem>\r\n))\r\nDropdownMenuCheckboxItem.displayName =\r\n  DropdownMenuPrimitive.CheckboxItem.displayName\r\n\r\nconst DropdownMenuRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <DropdownMenuPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </DropdownMenuPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </DropdownMenuPrimitive.RadioItem>\r\n))\r\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\r\n\r\nconst DropdownMenuLabel = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\r\n\r\nconst DropdownMenuSeparator = React.forwardRef<\r\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <DropdownMenuPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-gray-100 dark:bg-gray-800\", className)}\r\n    {...props}\r\n  />\r\n))\r\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\r\n\r\nconst DropdownMenuShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\r\n\r\nexport {\r\n  DropdownMenu,\r\n  DropdownMenuTrigger,\r\n  DropdownMenuContent,\r\n  DropdownMenuItem,\r\n  DropdownMenuCheckboxItem,\r\n  DropdownMenuRadioItem,\r\n  DropdownMenuLabel,\r\n  DropdownMenuSeparator,\r\n  DropdownMenuShortcut,\r\n  DropdownMenuGroup,\r\n  DropdownMenuPortal,\r\n  DropdownMenuSub,\r\n  DropdownMenuSubContent,\r\n  DropdownMenuSubTrigger,\r\n  DropdownMenuRadioGroup,\r\n}\r\n\r\n`;\r\nexport const hoverCard = `import * as React from \"react\"\r\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst HoverCard = HoverCardPrimitive.Root\r\n\r\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\r\n\r\nconst HoverCardContent = React.forwardRef<\r\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\r\n  <HoverCardPrimitive.Content\r\n    ref={ref}\r\n    align={align}\r\n    sideOffset={sideOffset}\r\n    className={cn(\r\n      \"z-50 w-64 rounded-md border border-gray-200 bg-white p-4 text-gray-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\r\n\r\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\r\n\r\n`;\r\nexport const input = `import * as React from \"react\"\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nexport interface InputProps\r\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\r\n\r\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\r\n  ({ className, type, ...props }, ref) => {\r\n    return (\r\n      <input\r\n        type={type}\r\n        className={cn(\r\n          \"flex h-10 w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-800 dark:bg-gray-950 dark:ring-offset-gray-950 dark:placeholder:text-gray-400 dark:focus-visible:ring-gray-300\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nInput.displayName = \"Input\"\r\n\r\nexport { Input }\r\n`;\r\nexport const label = `import * as React from 'react';\r\nimport * as LabelPrimitive from '@radix-ui/react-label';\r\nimport { cva, type VariantProps } from 'class-variance-authority';\r\n\r\nimport { cn } from '../../lib/utils';\r\n\r\nconst labelVariants = cva(\r\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\r\n)\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\r\n    VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root\r\n    ref={ref}\r\n    className={cn(labelVariants(), className)}\r\n    {...props}\r\n  />\r\n))\r\nLabel.displayName = LabelPrimitive.Root.displayName\r\n\r\nexport { Label }\r\n`;\r\nexport const menuBar = `\r\nimport * as React from \"react\"\r\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\r\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst MenubarMenu = MenubarPrimitive.Menu\r\n\r\nconst MenubarGroup = MenubarPrimitive.Group\r\n\r\nconst MenubarPortal = MenubarPrimitive.Portal\r\n\r\nconst MenubarSub = MenubarPrimitive.Sub\r\n\r\nconst MenubarRadioGroup = MenubarPrimitive.RadioGroup\r\n\r\nconst Menubar = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 items-center space-x-1 rounded-md border border-gray-200 bg-white p-1 dark:border-gray-800 dark:bg-gray-950\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubar.displayName = MenubarPrimitive.Root.displayName\r\n\r\nconst MenubarTrigger = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-gray-100 focus:text-gray-900 data-[state=open]:bg-gray-100 data-[state=open]:text-gray-900 dark:focus:bg-gray-800 dark:focus:text-gray-50 dark:data-[state=open]:bg-gray-800 dark:data-[state=open]:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\r\n\r\nconst MenubarSubTrigger = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, children, ...props }, ref) => (\r\n  <MenubarPrimitive.SubTrigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[state=open]:bg-gray-100 data-[state=open]:text-gray-900 dark:focus:bg-gray-800 dark:focus:text-gray-50 dark:data-[state=open]:bg-gray-800 dark:data-[state=open]:text-gray-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\r\n  </MenubarPrimitive.SubTrigger>\r\n))\r\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\r\n\r\nconst MenubarSubContent = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.SubContent\r\n    ref={ref}\r\n    className={cn(\r\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-950 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\r\n\r\nconst MenubarContent = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\r\n>(\r\n  (\r\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\r\n    ref\r\n  ) => (\r\n    <MenubarPrimitive.Portal>\r\n      <MenubarPrimitive.Content\r\n        ref={ref}\r\n        align={align}\r\n        alignOffset={alignOffset}\r\n        sideOffset={sideOffset}\r\n        className={cn(\r\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border border-gray-200 bg-white p-1 text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n          className\r\n        )}\r\n        {...props}\r\n      />\r\n    </MenubarPrimitive.Portal>\r\n  )\r\n)\r\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\r\n\r\nconst MenubarItem = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <MenubarPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\r\n\r\nconst MenubarCheckboxItem = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\r\n>(({ className, children, checked, ...props }, ref) => (\r\n  <MenubarPrimitive.CheckboxItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      className\r\n    )}\r\n    checked={checked}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <MenubarPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </MenubarPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </MenubarPrimitive.CheckboxItem>\r\n))\r\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\r\n\r\nconst MenubarRadioItem = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\r\n>(({ className, children, ...props }, ref) => (\r\n  <MenubarPrimitive.RadioItem\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <MenubarPrimitive.ItemIndicator>\r\n        <Circle className=\"h-2 w-2 fill-current\" />\r\n      </MenubarPrimitive.ItemIndicator>\r\n    </span>\r\n    {children}\r\n  </MenubarPrimitive.RadioItem>\r\n))\r\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\r\n\r\nconst MenubarLabel = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\r\n    inset?: boolean\r\n  }\r\n>(({ className, inset, ...props }, ref) => (\r\n  <MenubarPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\r\n      \"px-2 py-1.5 text-sm font-semibold\",\r\n      inset && \"pl-8\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\r\n\r\nconst MenubarSeparator = React.forwardRef<\r\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <MenubarPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-gray-100 dark:bg-gray-800\", className)}\r\n    {...props}\r\n  />\r\n))\r\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\r\n\r\nconst MenubarShortcut = ({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement>) => {\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"ml-auto text-xs tracking-widest text-gray-500 dark:text-gray-400\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\nMenubarShortcut.displayname = \"MenubarShortcut\"\r\n\r\nexport {\r\n  Menubar,\r\n  MenubarMenu,\r\n  MenubarTrigger,\r\n  MenubarContent,\r\n  MenubarItem,\r\n  MenubarSeparator,\r\n  MenubarLabel,\r\n  MenubarCheckboxItem,\r\n  MenubarRadioGroup,\r\n  MenubarRadioItem,\r\n  MenubarPortal,\r\n  MenubarSubContent,\r\n  MenubarSubTrigger,\r\n  MenubarGroup,\r\n  MenubarSub,\r\n  MenubarShortcut,\r\n}\r\n\r\n`;\r\nexport const navigationMenu = `import * as React from \"react\"\r\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\r\nimport { cva } from \"class-variance-authority\"\r\nimport { ChevronDown } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst NavigationMenu = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <NavigationMenuViewport />\r\n  </NavigationMenuPrimitive.Root>\r\n))\r\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\r\n\r\nconst NavigationMenuList = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\r\n\r\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\r\n\r\nconst navigationMenuTriggerStyle = cva(\r\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-white px-4 py-2 text-sm font-medium transition-colors hover:bg-gray-100 hover:text-gray-900 focus:bg-gray-100 focus:text-gray-900 focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-gray-100/50 data-[state=open]:bg-gray-100/50 dark:bg-gray-950 dark:hover:bg-gray-800 dark:hover:text-gray-50 dark:focus:bg-gray-800 dark:focus:text-gray-50 dark:data-[active]:bg-gray-800/50 dark:data-[state=open]:bg-gray-800/50\"\r\n)\r\n\r\nconst NavigationMenuTrigger = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\r\n    {...props}\r\n  >\r\n    {children}{\"\"}\r\n    <ChevronDown\r\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\r\n      aria-hidden=\"true\"\r\n    />\r\n  </NavigationMenuPrimitive.Trigger>\r\n))\r\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\r\n\r\nconst NavigationMenuContent = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\r\n\r\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\r\n\r\nconst NavigationMenuViewport = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\r\n    <NavigationMenuPrimitive.Viewport\r\n      className={cn(\r\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border border-gray-200 bg-white text-gray-950 shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)] dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n        className\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nNavigationMenuViewport.displayName =\r\n  NavigationMenuPrimitive.Viewport.displayName\r\n\r\nconst NavigationMenuIndicator = React.forwardRef<\r\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\r\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\r\n>(({ className, ...props }, ref) => (\r\n  <NavigationMenuPrimitive.Indicator\r\n    ref={ref}\r\n    className={cn(\r\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-gray-200 shadow-md dark:bg-gray-800\" />\r\n  </NavigationMenuPrimitive.Indicator>\r\n))\r\nNavigationMenuIndicator.displayName =\r\n  NavigationMenuPrimitive.Indicator.displayName\r\n\r\nexport {\r\n  navigationMenuTriggerStyle,\r\n  NavigationMenu,\r\n  NavigationMenuList,\r\n  NavigationMenuItem,\r\n  NavigationMenuContent,\r\n  NavigationMenuTrigger,\r\n  NavigationMenuLink,\r\n  NavigationMenuIndicator,\r\n  NavigationMenuViewport,\r\n}\r\n\r\n`;\r\nexport const pagination = `import * as React from \"react\"\r\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { ButtonProps, buttonVariants } from \"./button\"\r\n\r\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\r\n  <nav\r\n    role=\"navigation\"\r\n    aria-label=\"pagination\"\r\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\r\n    {...props}\r\n  />\r\n)\r\nPagination.displayName = \"Pagination\"\r\n\r\nconst PaginationContent = React.forwardRef<\r\n  HTMLUListElement,\r\n  React.ComponentProps<\"ul\">\r\n>(({ className, ...props }, ref) => (\r\n  <ul\r\n    ref={ref}\r\n    className={cn(\"flex flex-row items-center gap-1\", className)}\r\n    {...props}\r\n  />\r\n))\r\nPaginationContent.displayName = \"PaginationContent\"\r\n\r\nconst PaginationItem = React.forwardRef<\r\n  HTMLLIElement,\r\n  React.ComponentProps<\"li\">\r\n>(({ className, ...props }, ref) => (\r\n  <li ref={ref} className={cn(\"\", className)} {...props} />\r\n))\r\nPaginationItem.displayName = \"PaginationItem\"\r\n\r\ntype PaginationLinkProps = {\r\n  isActive?: boolean\r\n} & Pick<ButtonProps, \"size\"> &\r\n  React.ComponentProps<\"a\">\r\n\r\nconst PaginationLink = ({\r\n  className,\r\n  isActive,\r\n  size = \"icon\",\r\n  ...props\r\n}: PaginationLinkProps) => (\r\n  <a\r\n    aria-current={isActive ? \"page\" : undefined}\r\n    className={cn(\r\n      buttonVariants({\r\n        variant: isActive ? \"outline\" : \"ghost\",\r\n        size,\r\n      }),\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n)\r\nPaginationLink.displayName = \"PaginationLink\"\r\n\r\nconst PaginationPrevious = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof PaginationLink>) => (\r\n  <PaginationLink\r\n    aria-label=\"Go to previous page\"\r\n    size=\"default\"\r\n    className={cn(\"gap-1 pl-2.5\", className)}\r\n    {...props}\r\n  >\r\n    <ChevronLeft className=\"h-4 w-4\" />\r\n    <span>Previous</span>\r\n  </PaginationLink>\r\n)\r\nPaginationPrevious.displayName = \"PaginationPrevious\"\r\n\r\nconst PaginationNext = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof PaginationLink>) => (\r\n  <PaginationLink\r\n    aria-label=\"Go to next page\"\r\n    size=\"default\"\r\n    className={cn(\"gap-1 pr-2.5\", className)}\r\n    {...props}\r\n  >\r\n    <span>Next</span>\r\n    <ChevronRight className=\"h-4 w-4\" />\r\n  </PaginationLink>\r\n)\r\nPaginationNext.displayName = \"PaginationNext\"\r\n\r\nconst PaginationEllipsis = ({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<\"span\">) => (\r\n  <span\r\n    aria-hidden\r\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\r\n    {...props}\r\n  >\r\n    <MoreHorizontal className=\"h-4 w-4\" />\r\n    <span className=\"sr-only\">More pages</span>\r\n  </span>\r\n)\r\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\r\n\r\nexport {\r\n  Pagination,\r\n  PaginationContent,\r\n  PaginationEllipsis,\r\n  PaginationItem,\r\n  PaginationLink,\r\n  PaginationNext,\r\n  PaginationPrevious,\r\n}\r\n\r\n`;\r\nexport const popover = `import * as React from \"react\"\r\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Popover = PopoverPrimitive.Root\r\n\r\nconst PopoverTrigger = PopoverPrimitive.Trigger\r\n\r\nconst PopoverContent = React.forwardRef<\r\n  React.ElementRef<typeof PopoverPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\r\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\r\n  <PopoverPrimitive.Portal>\r\n    <PopoverPrimitive.Content\r\n      ref={ref}\r\n      align={align}\r\n      sideOffset={sideOffset}\r\n      className={cn(\r\n        \"z-50 w-72 rounded-md border border-gray-200 bg-white p-4 text-gray-950 shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  </PopoverPrimitive.Portal>\r\n))\r\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\r\n\r\nexport { Popover, PopoverTrigger, PopoverContent }\r\n\r\n`;\r\nexport const progress = `import * as React from \"react\"\r\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Progress = React.forwardRef<\r\n  React.ElementRef<typeof ProgressPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\r\n>(({ className, value, ...props }, ref) => (\r\n  <ProgressPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative h-4 w-full overflow-hidden rounded-full bg-gray-100 dark:bg-gray-800\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ProgressPrimitive.Indicator\r\n      className=\"h-full w-full flex-1 bg-gray-900 transition-all dark:bg-gray-50\"\r\n      style={{ transform: \\`translateX(-\\${100 - (value || 0)}%)\\` }}\r\n    />\r\n  </ProgressPrimitive.Root>\r\n))\r\nProgress.displayName = ProgressPrimitive.Root.displayName\r\n\r\nexport { Progress }\r\n`;\r\nexport const radioGroup = `import * as React from \"react\"\r\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\r\nimport { Circle } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst RadioGroup = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Root\r\n      className={cn(\"grid gap-2\", className)}\r\n      {...props}\r\n      ref={ref}\r\n    />\r\n  )\r\n})\r\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\r\n\r\nconst RadioGroupItem = React.forwardRef<\r\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\r\n>(({ className, ...props }, ref) => {\r\n  return (\r\n    <RadioGroupPrimitive.Item\r\n      ref={ref}\r\n      className={cn(\r\n        \"aspect-square h-4 w-4 rounded-full border border-gray-200 dark:border-gray-900 text-gray-900 ring-offset-white focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50  dark:text-gray-50 dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300\",\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\r\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\r\n      </RadioGroupPrimitive.Indicator>\r\n    </RadioGroupPrimitive.Item>\r\n  )\r\n})\r\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\r\n\r\nexport { RadioGroup, RadioGroupItem }\r\n\r\n`;\r\nexport const select = `import * as React from \"react\"\r\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\r\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Select = SelectPrimitive.Root\r\n\r\nconst SelectGroup = SelectPrimitive.Group\r\n\r\nconst SelectValue = SelectPrimitive.Value\r\n\r\nconst SelectTrigger = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex h-10 w-full items-center justify-between rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-gray-800 dark:bg-gray-950 dark:ring-offset-gray-950 dark:placeholder:text-gray-400 dark:focus:ring-gray-300\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    {children}\r\n    <SelectPrimitive.Icon asChild>\r\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\r\n    </SelectPrimitive.Icon>\r\n  </SelectPrimitive.Trigger>\r\n))\r\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\r\n\r\nconst SelectScrollUpButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollUpButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronUp className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollUpButton>\r\n))\r\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\r\n\r\nconst SelectScrollDownButton = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.ScrollDownButton\r\n    ref={ref}\r\n    className={cn(\r\n      \"flex cursor-default items-center justify-center py-1\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <ChevronDown className=\"h-4 w-4\" />\r\n  </SelectPrimitive.ScrollDownButton>\r\n))\r\nSelectScrollDownButton.displayName =\r\n  SelectPrimitive.ScrollDownButton.displayName\r\n\r\nconst SelectContent = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\r\n>(({ className, children, position = \"popper\", ...props }, ref) => (\r\n  <SelectPrimitive.Portal>\r\n    <SelectPrimitive.Content\r\n      ref={ref}\r\n      className={cn(\r\n        \"relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-gray-200 bg-white text-gray-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n        position === \"popper\" &&\r\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\r\n        className\r\n      )}\r\n      position={position}\r\n      {...props}\r\n    >\r\n      <SelectScrollUpButton />\r\n      <SelectPrimitive.Viewport\r\n        className={cn(\r\n          \"p-1\",\r\n          position === \"popper\" &&\r\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\r\n        )}\r\n      >\r\n        {children}\r\n      </SelectPrimitive.Viewport>\r\n      <SelectScrollDownButton />\r\n    </SelectPrimitive.Content>\r\n  </SelectPrimitive.Portal>\r\n))\r\nSelectContent.displayName = SelectPrimitive.Content.displayName\r\n\r\nconst SelectLabel = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Label>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Label\r\n    ref={ref}\r\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectLabel.displayName = SelectPrimitive.Label.displayName\r\n\r\nconst SelectItem = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\r\n>(({ className, children, ...props }, ref) => (\r\n  <SelectPrimitive.Item\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-gray-100 focus:text-gray-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-gray-800 dark:focus:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\r\n      <SelectPrimitive.ItemIndicator>\r\n        <Check className=\"h-4 w-4\" />\r\n      </SelectPrimitive.ItemIndicator>\r\n    </span>\r\n\r\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\r\n  </SelectPrimitive.Item>\r\n))\r\nSelectItem.displayName = SelectPrimitive.Item.displayName\r\n\r\nconst SelectSeparator = React.forwardRef<\r\n  React.ElementRef<typeof SelectPrimitive.Separator>,\r\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\r\n>(({ className, ...props }, ref) => (\r\n  <SelectPrimitive.Separator\r\n    ref={ref}\r\n    className={cn(\"-mx-1 my-1 h-px bg-gray-100 dark:bg-gray-800\", className)}\r\n    {...props}\r\n  />\r\n))\r\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\r\n\r\nexport {\r\n  Select,\r\n  SelectGroup,\r\n  SelectValue,\r\n  SelectTrigger,\r\n  SelectContent,\r\n  SelectLabel,\r\n  SelectItem,\r\n  SelectSeparator,\r\n  SelectScrollUpButton,\r\n  SelectScrollDownButton,\r\n}\r\n\r\n`;\r\nexport const separator = `import * as React from \"react\"\r\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Separator = React.forwardRef<\r\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\r\n>(\r\n  (\r\n    { className, orientation = \"horizontal\", decorative = true, ...props },\r\n    ref\r\n  ) => (\r\n    <SeparatorPrimitive.Root\r\n      ref={ref}\r\n      decorative={decorative}\r\n      orientation={orientation}\r\n      className={cn(\r\n        \"shrink-0 bg-gray-200 dark:bg-gray-800\",\r\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n)\r\nSeparator.displayName = SeparatorPrimitive.Root.displayName\r\n\r\nexport { Separator }\r\n\r\n`;\r\nexport const skeleton = `import { cn } from \"../../lib/utils\"\r\n\r\nfunction Skeleton({\r\n  className,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\"animate-pulse rounded-md bg-gray-100 dark:bg-gray-800\", className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Skeleton }\r\n`;\r\nexport const slider = `import * as React from \"react\"\r\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Slider = React.forwardRef<\r\n  React.ElementRef<typeof SliderPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SliderPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\r\n      \"relative flex w-full touch-none select-none items-center\",\r\n      className\r\n    )}\r\n    {...props}\r\n  >\r\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-gray-100 dark:bg-gray-800\">\r\n      <SliderPrimitive.Range className=\"absolute h-full bg-gray-900 dark:bg-gray-50\" />\r\n    </SliderPrimitive.Track>\r\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-gray-900 bg-white ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:border-gray-50 dark:bg-gray-950 dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300\" />\r\n  </SliderPrimitive.Root>\r\n))\r\nSlider.displayName = SliderPrimitive.Root.displayName\r\n\r\nexport { Slider }\r\n\r\n`;\r\nexport const switchComponent = `import * as React from \"react\"\r\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Switch = React.forwardRef<\r\n  React.ElementRef<typeof SwitchPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\r\n>(({ className, ...props }, ref) => (\r\n  <SwitchPrimitives.Root\r\n    className={cn(\r\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 focus-visible:ring-offset-white disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gray-900 data-[state=unchecked]:bg-gray-200 dark:focus-visible:ring-gray-300 dark:focus-visible:ring-offset-gray-950 dark:data-[state=checked]:bg-gray-50 dark:data-[state=unchecked]:bg-gray-800\",\r\n      className\r\n    )}\r\n    {...props}\r\n    ref={ref}\r\n  >\r\n    <SwitchPrimitives.Thumb\r\n      className={cn(\r\n        \"pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 dark:bg-gray-950\"\r\n      )}\r\n    />\r\n  </SwitchPrimitives.Root>\r\n))\r\nSwitch.displayName = SwitchPrimitives.Root.displayName\r\n\r\nexport { Switch }\r\n\r\n`;\r\nexport const table = `import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Table = React.forwardRef<\r\n  HTMLTableElement,\r\n  React.HTMLAttributes<HTMLTableElement>\r\n>(({ className, ...props }, ref) => (\r\n  <div className=\"relative w-full overflow-auto\">\r\n    <table\r\n      ref={ref}\r\n      className={cn(\"w-full caption-bottom text-sm\", className)}\r\n      {...props}\r\n    />\r\n  </div>\r\n))\r\nTable.displayName = \"Table\"\r\n\r\nconst TableHeader = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\r\n))\r\nTableHeader.displayName = \"TableHeader\"\r\n\r\nconst TableBody = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tbody\r\n    ref={ref}\r\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableBody.displayName = \"TableBody\"\r\n\r\nconst TableFooter = React.forwardRef<\r\n  HTMLTableSectionElement,\r\n  React.HTMLAttributes<HTMLTableSectionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tfoot\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-t bg-gray-100/50 font-medium [&>tr]:last:border-b-0 dark:bg-gray-800/50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableFooter.displayName = \"TableFooter\"\r\n\r\nconst TableRow = React.forwardRef<\r\n  HTMLTableRowElement,\r\n  React.HTMLAttributes<HTMLTableRowElement>\r\n>(({ className, ...props }, ref) => (\r\n  <tr\r\n    ref={ref}\r\n    className={cn(\r\n      \"border-b transition-colors hover:bg-gray-100/50 data-[state=selected]:bg-gray-100 dark:hover:bg-gray-800/50 dark:data-[state=selected]:bg-gray-800\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableRow.displayName = \"TableRow\"\r\n\r\nconst TableHead = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.ThHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <th\r\n    ref={ref}\r\n    className={cn(\r\n      \"h-12 px-4 text-left align-middle font-medium text-gray-500 [&:has([role=checkbox])]:pr-0 dark:text-gray-400\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTableHead.displayName = \"TableHead\"\r\n\r\nconst TableCell = React.forwardRef<\r\n  HTMLTableCellElement,\r\n  React.TdHTMLAttributes<HTMLTableCellElement>\r\n>(({ className, ...props }, ref) => (\r\n  <td\r\n    ref={ref}\r\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCell.displayName = \"TableCell\"\r\n\r\nconst TableCaption = React.forwardRef<\r\n  HTMLTableCaptionElement,\r\n  React.HTMLAttributes<HTMLTableCaptionElement>\r\n>(({ className, ...props }, ref) => (\r\n  <caption\r\n    ref={ref}\r\n    className={cn(\"mt-4 text-sm text-gray-500 dark:text-gray-400\", className)}\r\n    {...props}\r\n  />\r\n))\r\nTableCaption.displayName = \"TableCaption\"\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n\r\n`;\r\nexport const tabs = `import * as React from \"react\"\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst Tabs = TabsPrimitive.Root\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 text-gray-500 dark:bg-gray-800 dark:text-gray-400\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsList.displayName = TabsPrimitive.List.displayName\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-gray-950 data-[state=active]:shadow-sm dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300 dark:data-[state=active]:bg-gray-950 dark:data-[state=active]:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 dark:ring-offset-gray-950 dark:focus-visible:ring-gray-300\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTabsContent.displayName = TabsPrimitive.Content.displayName\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n\r\n`;\r\nexport const textarea = `import * as React from \"react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nexport interface TextareaProps\r\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\r\n  ({ className, ...props }, ref) => {\r\n    return (\r\n      <textarea\r\n        className={cn(\r\n          \"flex min-h-[80px] w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-gray-800 dark:bg-gray-950 dark:ring-offset-gray-950 dark:placeholder:text-gray-400 dark:focus-visible:ring-gray-300\",\r\n          className\r\n        )}\r\n        ref={ref}\r\n        {...props}\r\n      />\r\n    )\r\n  }\r\n)\r\nTextarea.displayName = \"Textarea\"\r\n\r\nexport { Textarea }\r\n\r\n`;\r\nexport const toast = `import * as React from \"react\"\r\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\nimport { X } from \"lucide-react\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst ToastProvider = ToastPrimitives.Provider\r\n\r\nconst ToastViewport = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Viewport\r\n    ref={ref}\r\n    className={cn(\r\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\r\n\r\nconst toastVariants = cva(\r\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border border-gray-200 p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full dark:border-gray-800\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"border bg-white text-gray-950 dark:bg-gray-950 dark:text-gray-50\",\r\n        destructive:\r\n          \"destructive group border-red-500 bg-red-500 text-gray-50 dark:border-red-900 dark:bg-red-900 dark:text-gray-50\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Toast = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\r\n    VariantProps<typeof toastVariants>\r\n>(({ className, variant, ...props }, ref) => {\r\n  return (\r\n    <ToastPrimitives.Root\r\n      ref={ref}\r\n      className={cn(toastVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n})\r\nToast.displayName = ToastPrimitives.Root.displayName\r\n\r\nconst ToastAction = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Action>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Action\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-gray-200 bg-transparent px-3 text-sm font-medium ring-offset-white transition-colors hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-950 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-gray-100/40 group-[.destructive]:hover:border-red-500/30 group-[.destructive]:hover:bg-red-500 group-[.destructive]:hover:text-gray-50 group-[.destructive]:focus:ring-red-500 dark:border-gray-800 dark:ring-offset-gray-950 dark:hover:bg-gray-800 dark:focus:ring-gray-300 dark:group-[.destructive]:border-gray-800/40 dark:group-[.destructive]:hover:border-red-900/30 dark:group-[.destructive]:hover:bg-red-900 dark:group-[.destructive]:hover:text-gray-50 dark:group-[.destructive]:focus:ring-red-900\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nToastAction.displayName = ToastPrimitives.Action.displayName\r\n\r\nconst ToastClose = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Close>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Close\r\n    ref={ref}\r\n    className={cn(\r\n      \"absolute right-2 top-2 rounded-md p-1 text-gray-950/50 opacity-0 transition-opacity hover:text-gray-950 focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 dark:text-gray-50/50 dark:hover:text-gray-50\",\r\n      className\r\n    )}\r\n    toast-close=\"\"\r\n    {...props}\r\n  >\r\n    <X className=\"h-4 w-4\" />\r\n  </ToastPrimitives.Close>\r\n))\r\nToastClose.displayName = ToastPrimitives.Close.displayName\r\n\r\nconst ToastTitle = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Title>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Title\r\n    ref={ref}\r\n    className={cn(\"text-sm font-semibold\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastTitle.displayName = ToastPrimitives.Title.displayName\r\n\r\nconst ToastDescription = React.forwardRef<\r\n  React.ElementRef<typeof ToastPrimitives.Description>,\r\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\r\n>(({ className, ...props }, ref) => (\r\n  <ToastPrimitives.Description\r\n    ref={ref}\r\n    className={cn(\"text-sm opacity-90\", className)}\r\n    {...props}\r\n  />\r\n))\r\nToastDescription.displayName = ToastPrimitives.Description.displayName\r\n\r\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\r\n\r\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\r\n\r\nexport {\r\n  type ToastProps,\r\n  type ToastActionElement,\r\n  ToastProvider,\r\n  ToastViewport,\r\n  Toast,\r\n  ToastTitle,\r\n  ToastDescription,\r\n  ToastClose,\r\n  ToastAction,\r\n}\r\n\r\n`;\r\nexport const toaster = `import {\r\n  Toast,\r\n  ToastClose,\r\n  ToastDescription,\r\n  ToastProvider,\r\n  ToastTitle,\r\n  ToastViewport,\r\n} from \"./toast\"\r\nimport { useToast } from \"./use-toast\"\r\n\r\nexport function Toaster() {\r\n  const { toasts } = useToast()\r\n\r\n  return (\r\n    <ToastProvider>\r\n      {toasts.map(function ({ id, title, description, action, ...props }) {\r\n        return (\r\n          <Toast key={id} {...props}>\r\n            <div className=\"grid gap-1\">\r\n              {title && <ToastTitle>{title}</ToastTitle>}\r\n              {description && (\r\n                <ToastDescription>{description}</ToastDescription>\r\n              )}\r\n            </div>\r\n            {action}\r\n            <ToastClose />\r\n          </Toast>\r\n        )\r\n      })}\r\n      <ToastViewport />\r\n    </ToastProvider>\r\n  )\r\n}\r\n\r\n`;\r\nexport const toggleGroup = `import * as React from \"react\"\r\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\r\nimport { type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\nimport { toggleVariants } from \"./toggle\"\r\n\r\nconst ToggleGroupContext = React.createContext<\r\n  VariantProps<typeof toggleVariants>\r\n>({\r\n  size: \"default\",\r\n  variant: \"default\",\r\n})\r\n\r\nconst ToggleGroup = React.forwardRef<\r\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\r\n    VariantProps<typeof toggleVariants>\r\n>(({ className, variant, size, children, ...props }, ref) => (\r\n  <ToggleGroupPrimitive.Root\r\n    ref={ref}\r\n    className={cn(\"flex items-center justify-center gap-1\", className)}\r\n    {...props}\r\n  >\r\n    <ToggleGroupContext.Provider value={{ variant, size }}>\r\n      {children}\r\n    </ToggleGroupContext.Provider>\r\n  </ToggleGroupPrimitive.Root>\r\n))\r\n\r\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\r\n\r\nconst ToggleGroupItem = React.forwardRef<\r\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\r\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\r\n    VariantProps<typeof toggleVariants>\r\n>(({ className, children, variant, size, ...props }, ref) => {\r\n  const context = React.useContext(ToggleGroupContext)\r\n\r\n  return (\r\n    <ToggleGroupPrimitive.Item\r\n      ref={ref}\r\n      className={cn(\r\n        toggleVariants({\r\n          variant: context.variant || variant,\r\n          size: context.size || size,\r\n        }),\r\n        className\r\n      )}\r\n      {...props}\r\n    >\r\n      {children}\r\n    </ToggleGroupPrimitive.Item>\r\n  )\r\n})\r\n\r\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\r\n\r\nexport { ToggleGroup, ToggleGroupItem }\r\n\r\n`;\r\nexport const toggle = `import * as React from \"react\"\r\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\r\nimport { cva, type VariantProps } from \"class-variance-authority\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst toggleVariants = cva(\r\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors hover:bg-gray-100 hover:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-gray-100 data-[state=on]:text-gray-900 dark:ring-offset-gray-950 dark:hover:bg-gray-800 dark:hover:text-gray-400 dark:focus-visible:ring-gray-300 dark:data-[state=on]:bg-gray-800 dark:data-[state=on]:text-gray-50\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: \"bg-transparent\",\r\n        outline:\r\n          \"border border-gray-200 bg-transparent hover:bg-gray-100 hover:text-gray-900 dark:border-gray-800 dark:hover:bg-gray-800 dark:hover:text-gray-50\",\r\n      },\r\n      size: {\r\n        default: \"h-10 px-3\",\r\n        sm: \"h-9 px-2.5\",\r\n        lg: \"h-11 px-5\",\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: \"default\",\r\n      size: \"default\",\r\n    },\r\n  }\r\n)\r\n\r\nconst Toggle = React.forwardRef<\r\n  React.ElementRef<typeof TogglePrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\r\n    VariantProps<typeof toggleVariants>\r\n>(({ className, variant, size, ...props }, ref) => (\r\n  <TogglePrimitive.Root\r\n    ref={ref}\r\n    className={cn(toggleVariants({ variant, size, className }))}\r\n    {...props}\r\n  />\r\n))\r\n\r\nToggle.displayName = TogglePrimitive.Root.displayName\r\n\r\nexport { Toggle, toggleVariants }\r\n\r\n`;\r\nexport const tooltip = `import * as React from \"react\"\r\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\r\n\r\nimport { cn } from \"../../lib/utils\"\r\n\r\nconst TooltipProvider = TooltipPrimitive.Provider\r\n\r\nconst Tooltip = TooltipPrimitive.Root\r\n\r\nconst TooltipTrigger = TooltipPrimitive.Trigger\r\n\r\nconst TooltipContent = React.forwardRef<\r\n  React.ElementRef<typeof TooltipPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\r\n>(({ className, sideOffset = 4, ...props }, ref) => (\r\n  <TooltipPrimitive.Content\r\n    ref={ref}\r\n    sideOffset={sideOffset}\r\n    className={cn(\r\n      \"z-50 overflow-hidden rounded-md border border-gray-200 bg-white px-3 py-1.5 text-sm text-gray-950 shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-gray-800 dark:bg-gray-950 dark:text-gray-50\",\r\n      className\r\n    )}\r\n    {...props}\r\n  />\r\n))\r\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\r\n\r\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\r\n\r\n`;\r\nexport const useToast = `import * as React from \"react\"\r\n\r\nimport type {\r\n  ToastActionElement,\r\n  ToastProps,\r\n} from \"./toast\"\r\n\r\nconst TOAST_LIMIT = 1\r\nconst TOAST_REMOVE_DELAY = 1000000\r\n\r\ntype ToasterToast = ToastProps & {\r\n  id: string\r\n  title?: React.ReactNode\r\n  description?: React.ReactNode\r\n  action?: ToastActionElement\r\n}\r\n\r\nconst actionTypes = {\r\n  ADD_TOAST: \"ADD_TOAST\",\r\n  UPDATE_TOAST: \"UPDATE_TOAST\",\r\n  DISMISS_TOAST: \"DISMISS_TOAST\",\r\n  REMOVE_TOAST: \"REMOVE_TOAST\",\r\n} as const\r\n\r\nlet count = 0\r\n\r\nfunction genId() {\r\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\r\n  return count.toString()\r\n}\r\n\r\ntype ActionType = typeof actionTypes\r\n\r\ntype Action =\r\n  | {\r\n      type: ActionType[\"ADD_TOAST\"]\r\n      toast: ToasterToast\r\n    }\r\n  | {\r\n      type: ActionType[\"UPDATE_TOAST\"]\r\n      toast: Partial<ToasterToast>\r\n    }\r\n  | {\r\n      type: ActionType[\"DISMISS_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n  | {\r\n      type: ActionType[\"REMOVE_TOAST\"]\r\n      toastId?: ToasterToast[\"id\"]\r\n    }\r\n\r\ninterface State {\r\n  toasts: ToasterToast[]\r\n}\r\n\r\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\r\n\r\nconst addToRemoveQueue = (toastId: string) => {\r\n  if (toastTimeouts.has(toastId)) {\r\n    return\r\n  }\r\n\r\n  const timeout = setTimeout(() => {\r\n    toastTimeouts.delete(toastId)\r\n    dispatch({\r\n      type: \"REMOVE_TOAST\",\r\n      toastId: toastId,\r\n    })\r\n  }, TOAST_REMOVE_DELAY)\r\n\r\n  toastTimeouts.set(toastId, timeout)\r\n}\r\n\r\nexport const reducer = (state: State, action: Action): State => {\r\n  switch (action.type) {\r\n    case \"ADD_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\r\n      }\r\n\r\n    case \"UPDATE_TOAST\":\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\r\n        ),\r\n      }\r\n\r\n    case \"DISMISS_TOAST\": {\r\n      const { toastId } = action\r\n\r\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\r\n      // but I'll keep it here for simplicity\r\n      if (toastId) {\r\n        addToRemoveQueue(toastId)\r\n      } else {\r\n        state.toasts.forEach((toast) => {\r\n          addToRemoveQueue(toast.id)\r\n        })\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.map((t) =>\r\n          t.id === toastId || toastId === undefined\r\n            ? {\r\n                ...t,\r\n                open: false,\r\n              }\r\n            : t\r\n        ),\r\n      }\r\n    }\r\n    case \"REMOVE_TOAST\":\r\n      if (action.toastId === undefined) {\r\n        return {\r\n          ...state,\r\n          toasts: [],\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\r\n      }\r\n  }\r\n}\r\n\r\nconst listeners: Array<(state: State) => void> = []\r\n\r\nlet memoryState: State = { toasts: [] }\r\n\r\nfunction dispatch(action: Action) {\r\n  memoryState = reducer(memoryState, action)\r\n  listeners.forEach((listener) => {\r\n    listener(memoryState)\r\n  })\r\n}\r\n\r\ntype Toast = Omit<ToasterToast, \"id\">\r\n\r\nfunction toast({ ...props }: Toast) {\r\n  const id = genId()\r\n\r\n  const update = (props: ToasterToast) =>\r\n    dispatch({\r\n      type: \"UPDATE_TOAST\",\r\n      toast: { ...props, id },\r\n    })\r\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\r\n\r\n  dispatch({\r\n    type: \"ADD_TOAST\",\r\n    toast: {\r\n      ...props,\r\n      id,\r\n      open: true,\r\n      onOpenChange: (open) => {\r\n        if (!open) dismiss()\r\n      },\r\n    },\r\n  })\r\n\r\n  return {\r\n    id: id,\r\n    dismiss,\r\n    update,\r\n  }\r\n}\r\n\r\nfunction useToast() {\r\n  const [state, setState] = React.useState<State>(memoryState)\r\n\r\n  React.useEffect(() => {\r\n    listeners.push(setState)\r\n    return () => {\r\n      const index = listeners.indexOf(setState)\r\n      if (index > -1) {\r\n        listeners.splice(index, 1)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  return {\r\n    ...state,\r\n    toast,\r\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\r\n  }\r\n}\r\n\r\nexport { useToast, toast }\r\n`;\r\n\r\nexport const shadcnComponents = {\r\n  utils: utils,\r\n  accordian: accordian,\r\n  alertDialog: alertDialog,\r\n  alert: alert,\r\n  avatar: avatar,\r\n  badge: badge,\r\n  breadcrumb: breadcrumb,\r\n  button: button,\r\n  calendar: calendar,\r\n  card: card,\r\n  carousel: carousel,\r\n  checkbox: checkbox,\r\n  collapsible: collapsible,\r\n  dialog: dialog,\r\n  drawer: drawer,\r\n  dropdownMenu: dropdownMenu,\r\n  hoverCard: hoverCard,\r\n  input: input,\r\n  label: label,\r\n  menuBar: menuBar,\r\n  navigationMenu: navigationMenu,\r\n  pagination: pagination,\r\n  popover: popover,\r\n  progress: progress,\r\n  radioGroup: radioGroup,\r\n  select: select,\r\n  separator: separator,\r\n  skeleton: skeleton,\r\n  slider: slider,\r\n  switchComponent: switchComponent,\r\n  table: table,\r\n  tabs: tabs,\r\n  textarea: textarea,\r\n  toast: toast,\r\n  toaster: toaster,\r\n  toggleGroup: toggleGroup,\r\n  toggle: toggle,\r\n  tooltip: tooltip,\r\n  useToast: useToast,\r\n};\r\n\r\nexport const essentialShadcnComponents = {\r\n  utils: utils,\r\n  avatar: avatar,\r\n  button: button,\r\n  card: card,\r\n  checkbox: checkbox,\r\n  input: input,\r\n  label: label,\r\n  radioGroup: radioGroup,\r\n  select: select,\r\n  textarea: textarea,\r\n  // badge: badge,\r\n  // dialog: dialog,\r\n  // table: table,\r\n};\r\n","import { z, ZodArray, ZodError, ZodIssueCode } from 'zod';\r\nimport { tConversationSchema, googleSettings as google, openAISettings as openAI } from './schemas';\r\nimport type { ZodIssue } from 'zod';\r\nimport type { TConversation, TSetOption, TPreset } from './schemas';\r\n\r\nexport type GoogleSettings = Partial<typeof google>;\r\nexport type OpenAISettings = Partial<typeof google>;\r\n\r\nexport type ComponentType =\r\n  | 'input'\r\n  | 'textarea'\r\n  | 'slider'\r\n  | 'checkbox'\r\n  | 'switch'\r\n  | 'dropdown'\r\n  | 'combobox'\r\n  | 'tags';\r\n\r\nexport type OptionType = 'conversation' | 'model' | 'custom';\r\n\r\nexport type Option = Record<string, unknown> & {\r\n  label?: string;\r\n  value: string | number | null;\r\n};\r\n\r\nexport type OptionWithIcon = Option & { icon?: React.ReactNode };\r\n\r\nexport enum ComponentTypes {\r\n  Input = 'input',\r\n  Textarea = 'textarea',\r\n  Slider = 'slider',\r\n  Checkbox = 'checkbox',\r\n  Switch = 'switch',\r\n  Dropdown = 'dropdown',\r\n  Combobox = 'combobox',\r\n  Tags = 'tags',\r\n}\r\n\r\nexport enum SettingTypes {\r\n  Number = 'number',\r\n  Boolean = 'boolean',\r\n  String = 'string',\r\n  Enum = 'enum',\r\n  Array = 'array',\r\n}\r\n\r\nexport enum OptionTypes {\r\n  Conversation = 'conversation',\r\n  Model = 'model',\r\n  Custom = 'custom',\r\n}\r\nexport interface SettingDefinition {\r\n  key: string;\r\n  description?: string;\r\n  type: 'number' | 'boolean' | 'string' | 'enum' | 'array';\r\n  default?: number | boolean | string | string[];\r\n  showLabel?: boolean;\r\n  showDefault?: boolean;\r\n  options?: string[];\r\n  range?: SettingRange;\r\n  enumMappings?: Record<string, number | boolean | string>;\r\n  component: ComponentType;\r\n  optionType?: OptionType;\r\n  columnSpan?: number;\r\n  columns?: number;\r\n  label?: string;\r\n  placeholder?: string;\r\n  labelCode?: boolean;\r\n  placeholderCode?: boolean;\r\n  descriptionCode?: boolean;\r\n  minText?: number;\r\n  maxText?: number;\r\n  minTags?: number; // Specific to tags component\r\n  maxTags?: number; // Specific to tags component\r\n  includeInput?: boolean; // Specific to slider component\r\n  descriptionSide?: 'top' | 'right' | 'bottom' | 'left';\r\n  items?: OptionWithIcon[]; // Specific to combobox component\r\n  searchPlaceholder?: string; // Specific to combobox component\r\n  selectPlaceholder?: string; // Specific to combobox component\r\n  searchPlaceholderCode?: boolean; // Specific to combobox component\r\n  selectPlaceholderCode?: boolean; // Specific to combobox component\r\n}\r\n\r\nexport type DynamicSettingProps = Partial<SettingDefinition> & {\r\n  readonly?: boolean;\r\n  settingKey: string;\r\n  setOption: TSetOption;\r\n  conversation: Partial<TConversation> | Partial<TPreset> | null;\r\n  defaultValue?: number | boolean | string | string[];\r\n  className?: string;\r\n  inputClassName?: string;\r\n};\r\n\r\nconst requiredSettingFields = ['key', 'type', 'component'];\r\n\r\nexport interface SettingRange {\r\n  min: number;\r\n  max: number;\r\n  step?: number;\r\n}\r\n\r\nexport type SettingsConfiguration = SettingDefinition[];\r\n\r\nexport function generateDynamicSchema(settings: SettingsConfiguration) {\r\n  const schemaFields: { [key: string]: z.ZodTypeAny } = {};\r\n\r\n  for (const setting of settings) {\r\n    const {\r\n      key,\r\n      type,\r\n      default: defaultValue,\r\n      range,\r\n      options,\r\n      minText,\r\n      maxText,\r\n      minTags,\r\n      maxTags,\r\n    } = setting;\r\n\r\n    if (type === SettingTypes.Number) {\r\n      let schema = z.number();\r\n      if (range) {\r\n        schema = schema.min(range.min);\r\n        schema = schema.max(range.max);\r\n      }\r\n      if (typeof defaultValue === 'number') {\r\n        schemaFields[key] = schema.default(defaultValue);\r\n      } else {\r\n        schemaFields[key] = schema;\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (type === SettingTypes.Boolean) {\r\n      const schema = z.boolean();\r\n      if (typeof defaultValue === 'boolean') {\r\n        schemaFields[key] = schema.default(defaultValue);\r\n      } else {\r\n        schemaFields[key] = schema;\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (type === SettingTypes.String) {\r\n      let schema = z.string();\r\n      if (minText) {\r\n        schema = schema.min(minText);\r\n      }\r\n      if (maxText) {\r\n        schema = schema.max(maxText);\r\n      }\r\n      if (typeof defaultValue === 'string') {\r\n        schemaFields[key] = schema.default(defaultValue);\r\n      } else {\r\n        schemaFields[key] = schema;\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (type === SettingTypes.Enum) {\r\n      if (!options || options.length === 0) {\r\n        console.warn(`Missing or empty 'options' for enum setting '${key}'.`);\r\n        continue;\r\n      }\r\n\r\n      const schema = z.enum(options as [string, ...string[]]);\r\n      if (typeof defaultValue === 'string') {\r\n        schemaFields[key] = schema.default(defaultValue);\r\n      } else {\r\n        schemaFields[key] = schema;\r\n      }\r\n      continue;\r\n    }\r\n\r\n    if (type === SettingTypes.Array) {\r\n      let schema: z.ZodSchema = z.array(z.string().or(z.number()));\r\n      if (minTags && schema instanceof ZodArray) {\r\n        schema = schema.min(minTags);\r\n      }\r\n      if (maxTags && schema instanceof ZodArray) {\r\n        schema = schema.max(maxTags);\r\n      }\r\n\r\n      if (defaultValue && Array.isArray(defaultValue)) {\r\n        schema = schema.default(defaultValue);\r\n      }\r\n\r\n      schemaFields[key] = schema;\r\n      continue;\r\n    }\r\n\r\n    console.warn(`Unsupported setting type: ${type}`);\r\n  }\r\n\r\n  return z.object(schemaFields);\r\n}\r\n\r\nconst ZodTypeToSettingType: Record<string, string | undefined> = {\r\n  ZodString: 'string',\r\n  ZodNumber: 'number',\r\n  ZodBoolean: 'boolean',\r\n};\r\n\r\nconst minColumns = 1;\r\nconst maxColumns = 4;\r\nconst minSliderOptions = 2;\r\nconst minDropdownOptions = 2;\r\nconst minComboboxOptions = 2;\r\n\r\n/**\r\n * Validates the provided setting using the constraints unique to each component type.\r\n * @throws {ZodError} Throws a ZodError if any validation fails.\r\n */\r\nexport function validateSettingDefinitions(settings: SettingsConfiguration): void {\r\n  const errors: ZodIssue[] = [];\r\n  // Validate columns\r\n  const columnsSet = new Set<number>();\r\n  for (const setting of settings) {\r\n    if (setting.columns !== undefined) {\r\n      if (setting.columns < minColumns || setting.columns > maxColumns) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid columns value for setting ${setting.key}. Must be between ${minColumns} and ${maxColumns}.`,\r\n          path: ['columns'],\r\n        });\r\n      } else {\r\n        columnsSet.add(setting.columns);\r\n      }\r\n    }\r\n  }\r\n\r\n  const columns = columnsSet.size === 1 ? columnsSet.values().next().value : 2;\r\n\r\n  for (const setting of settings) {\r\n    for (const field of requiredSettingFields) {\r\n      if (setting[field as keyof SettingDefinition] === undefined) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Missing required field ${field} for setting ${setting.key}.`,\r\n          path: [field],\r\n        });\r\n      }\r\n    }\r\n\r\n    // check accepted types\r\n    const settingTypes = Object.values(SettingTypes);\r\n    if (!settingTypes.includes(setting.type as SettingTypes)) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid type for setting ${setting.key}. Must be one of ${settingTypes.join(\r\n          ', ',\r\n        )}.`,\r\n        path: ['type'],\r\n      });\r\n    }\r\n\r\n    // Predefined constraints based on components\r\n    if (\r\n      (setting.component === ComponentTypes.Tags && setting.type !== SettingTypes.Array) ||\r\n      (setting.component !== ComponentTypes.Tags && setting.type === SettingTypes.Array)\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Tags component for setting ${setting.key} must have type array.`,\r\n        path: ['type'],\r\n      });\r\n    }\r\n\r\n    if (setting.component === ComponentTypes.Tags) {\r\n      if (setting.minTags !== undefined && setting.minTags < 0) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid minTags value for setting ${setting.key}. Must be non-negative.`,\r\n          path: ['minTags'],\r\n        });\r\n      }\r\n      if (setting.maxTags !== undefined && setting.maxTags < 0) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid maxTags value for setting ${setting.key}. Must be non-negative.`,\r\n          path: ['maxTags'],\r\n        });\r\n      }\r\n      if (setting.default && !Array.isArray(setting.default)) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid default value for setting ${setting.key}. Must be an array.`,\r\n          path: ['default'],\r\n        });\r\n      }\r\n      if (setting.default && setting.maxTags && (setting.default as []).length > setting.maxTags) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid default value for setting ${setting.key}. Must have at most ${setting.maxTags} tags.`,\r\n          path: ['default'],\r\n        });\r\n      }\r\n      if (setting.default && setting.minTags && (setting.default as []).length < setting.minTags) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid default value for setting ${setting.key}. Must have at least ${setting.minTags} tags.`,\r\n          path: ['default'],\r\n        });\r\n      }\r\n      if (!setting.default) {\r\n        setting.default = [];\r\n      }\r\n    }\r\n\r\n    if (\r\n      setting.component === ComponentTypes.Input ||\r\n      setting.component === ComponentTypes.Textarea\r\n    ) {\r\n      if (setting.type === SettingTypes.Number && setting.component === ComponentTypes.Textarea) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Textarea component for setting ${setting.key} must have type string.`,\r\n          path: ['type'],\r\n        });\r\n        // continue;\r\n      }\r\n\r\n      if (\r\n        setting.minText !== undefined &&\r\n        setting.maxText !== undefined &&\r\n        setting.minText > setting.maxText\r\n      ) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `For setting ${setting.key}, minText cannot be greater than maxText.`,\r\n          path: [setting.key, 'minText', 'maxText'],\r\n        });\r\n        // continue;\r\n      }\r\n      if (!setting.placeholder) {\r\n        setting.placeholder = '';\r\n      } // Default placeholder\r\n    }\r\n\r\n    if (setting.component === ComponentTypes.Slider) {\r\n      if (setting.type === SettingTypes.Number && !setting.range) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Slider component for setting ${setting.key} must have a range if type is number.`,\r\n          path: ['range'],\r\n        });\r\n        // continue;\r\n      }\r\n      if (\r\n        setting.type === SettingTypes.Enum &&\r\n        (!setting.options || setting.options.length < minSliderOptions)\r\n      ) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Slider component for setting ${setting.key} requires at least ${minSliderOptions} options for enum type.`,\r\n          path: ['options'],\r\n        });\r\n        // continue;\r\n      }\r\n      setting.includeInput =\r\n        setting.type === SettingTypes.Number ? (setting.includeInput ?? true) : false; // Default to true if type is number\r\n    }\r\n\r\n    if (setting.component === ComponentTypes.Slider && setting.type === SettingTypes.Number) {\r\n      if (setting.default === undefined && setting.range) {\r\n        // Set default to the middle of the range if unspecified\r\n        setting.default = Math.round((setting.range.min + setting.range.max) / 2);\r\n      }\r\n    }\r\n\r\n    if (\r\n      setting.component === ComponentTypes.Checkbox ||\r\n      setting.component === ComponentTypes.Switch\r\n    ) {\r\n      if (setting.options && setting.options.length > 2) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Checkbox/Switch component for setting ${setting.key} must have 1-2 options.`,\r\n          path: ['options'],\r\n        });\r\n        // continue;\r\n      }\r\n      if (!setting.default && setting.type === SettingTypes.Boolean) {\r\n        setting.default = false; // Default to false if type is boolean\r\n      }\r\n    }\r\n\r\n    if (setting.component === ComponentTypes.Dropdown) {\r\n      if (!setting.options || setting.options.length < minDropdownOptions) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Dropdown component for setting ${setting.key} requires at least ${minDropdownOptions} options.`,\r\n          path: ['options'],\r\n        });\r\n        // continue;\r\n      }\r\n      if (!setting.default && setting.options && setting.options.length > 0) {\r\n        setting.default = setting.options[0]; // Default to first option if not specified\r\n      }\r\n    }\r\n\r\n    if (setting.component === ComponentTypes.Combobox) {\r\n      if (!setting.options || setting.options.length < minComboboxOptions) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Combobox component for setting ${setting.key} requires at least ${minComboboxOptions} options.`,\r\n          path: ['options'],\r\n        });\r\n      }\r\n      if (!setting.default && setting.options && setting.options.length > 0) {\r\n        setting.default = setting.options[0];\r\n      }\r\n    }\r\n\r\n    // Default columnSpan\r\n    if (!setting.columnSpan) {\r\n      setting.columnSpan = Math.floor((columns ?? 0) / 2);\r\n    }\r\n\r\n    // Default label to key\r\n    if (!setting.label) {\r\n      setting.label = setting.key;\r\n    }\r\n\r\n    // Validate minText and maxText for input/textarea\r\n    if (\r\n      setting.component === ComponentTypes.Input ||\r\n      setting.component === ComponentTypes.Textarea\r\n    ) {\r\n      if (setting.minText !== undefined && setting.minText < 0) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid minText value for setting ${setting.key}. Must be non-negative.`,\r\n          path: ['minText'],\r\n        });\r\n      }\r\n      if (setting.maxText !== undefined && setting.maxText < 0) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Invalid maxText value for setting ${setting.key}. Must be non-negative.`,\r\n          path: ['maxText'],\r\n        });\r\n      }\r\n    }\r\n\r\n    // Validate optionType and conversation schema\r\n    if (setting.optionType !== OptionTypes.Custom) {\r\n      const conversationSchema =\r\n        tConversationSchema.shape[setting.key as keyof Omit<TConversation, 'disableParams'>];\r\n      if (!conversationSchema) {\r\n        errors.push({\r\n          code: ZodIssueCode.custom,\r\n          message: `Setting ${setting.key} with optionType \"${setting.optionType}\" must be defined in tConversationSchema.`,\r\n          path: ['optionType'],\r\n        });\r\n      } else {\r\n        const zodType = conversationSchema._def.typeName;\r\n        const settingTypeEquivalent = ZodTypeToSettingType[zodType] || null;\r\n        if (settingTypeEquivalent !== setting.type) {\r\n          errors.push({\r\n            code: ZodIssueCode.custom,\r\n            message: `Setting ${setting.key} with optionType \"${setting.optionType}\" must match the type defined in tConversationSchema.`,\r\n            path: ['optionType'],\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    /* Default value checks */\r\n    if (\r\n      setting.type === SettingTypes.Number &&\r\n      isNaN(setting.default as number) &&\r\n      setting.default != null\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid default value for setting ${setting.key}. Must be a number.`,\r\n        path: ['default'],\r\n      });\r\n    }\r\n\r\n    if (\r\n      setting.type === SettingTypes.Boolean &&\r\n      typeof setting.default !== 'boolean' &&\r\n      setting.default != null\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid default value for setting ${setting.key}. Must be a boolean.`,\r\n        path: ['default'],\r\n      });\r\n    }\r\n\r\n    if (\r\n      (setting.type === SettingTypes.String || setting.type === SettingTypes.Enum) &&\r\n      typeof setting.default !== 'string' &&\r\n      setting.default != null\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid default value for setting ${setting.key}. Must be a string.`,\r\n        path: ['default'],\r\n      });\r\n    }\r\n\r\n    if (\r\n      setting.type === SettingTypes.Enum &&\r\n      setting.options &&\r\n      !setting.options.includes(setting.default as string)\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid default value for setting ${\r\n          setting.key\r\n        }. Must be one of the options: [${setting.options.join(', ')}].`,\r\n        path: ['default'],\r\n      });\r\n    }\r\n\r\n    if (\r\n      setting.type === SettingTypes.Number &&\r\n      setting.range &&\r\n      typeof setting.default === 'number' &&\r\n      (setting.default < setting.range.min || setting.default > setting.range.max)\r\n    ) {\r\n      errors.push({\r\n        code: ZodIssueCode.custom,\r\n        message: `Invalid default value for setting ${setting.key}. Must be within the range [${setting.range.min}, ${setting.range.max}].`,\r\n        path: ['default'],\r\n      });\r\n    }\r\n\r\n    // Validate enumMappings\r\n    if (setting.enumMappings && setting.type === SettingTypes.Enum && setting.options) {\r\n      for (const option of setting.options) {\r\n        if (!(option in setting.enumMappings)) {\r\n          errors.push({\r\n            code: ZodIssueCode.custom,\r\n            message: `Missing enumMapping for option \"${option}\" in setting ${setting.key}.`,\r\n            path: ['enumMappings'],\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  if (errors.length > 0) {\r\n    throw new ZodError(errors);\r\n  }\r\n}\r\n\r\nexport const generateOpenAISchema = (customOpenAI: OpenAISettings) => {\r\n  const defaults = { ...openAI, ...customOpenAI };\r\n  return tConversationSchema\r\n    .pick({\r\n      model: true,\r\n      chatGptLabel: true,\r\n      promptPrefix: true,\r\n      temperature: true,\r\n      top_p: true,\r\n      presence_penalty: true,\r\n      frequency_penalty: true,\r\n      resendFiles: true,\r\n      imageDetail: true,\r\n      maxContextTokens: true,\r\n    })\r\n    .transform((obj) => ({\r\n      ...obj,\r\n      model: obj.model ?? defaults.model.default,\r\n      chatGptLabel: obj.chatGptLabel ?? null,\r\n      promptPrefix: obj.promptPrefix ?? null,\r\n      temperature: obj.temperature ?? defaults.temperature.default,\r\n      top_p: obj.top_p ?? defaults.top_p.default,\r\n      presence_penalty: obj.presence_penalty ?? defaults.presence_penalty.default,\r\n      frequency_penalty: obj.frequency_penalty ?? defaults.frequency_penalty.default,\r\n      resendFiles:\r\n        typeof obj.resendFiles === 'boolean' ? obj.resendFiles : defaults.resendFiles.default,\r\n      imageDetail: obj.imageDetail ?? defaults.imageDetail.default,\r\n      maxContextTokens: obj.maxContextTokens ?? undefined,\r\n    }))\r\n    .catch(() => ({\r\n      model: defaults.model.default,\r\n      chatGptLabel: null,\r\n      promptPrefix: null,\r\n      temperature: defaults.temperature.default,\r\n      top_p: defaults.top_p.default,\r\n      presence_penalty: defaults.presence_penalty.default,\r\n      frequency_penalty: defaults.frequency_penalty.default,\r\n      resendFiles: defaults.resendFiles.default,\r\n      imageDetail: defaults.imageDetail.default,\r\n      maxContextTokens: undefined,\r\n    }));\r\n};\r\n\r\nexport const generateGoogleSchema = (customGoogle: GoogleSettings) => {\r\n  const defaults = { ...google, ...customGoogle };\r\n  return tConversationSchema\r\n    .pick({\r\n      model: true,\r\n      modelLabel: true,\r\n      promptPrefix: true,\r\n      examples: true,\r\n      temperature: true,\r\n      maxOutputTokens: true,\r\n      topP: true,\r\n      topK: true,\r\n      maxContextTokens: true,\r\n    })\r\n    .transform((obj) => {\r\n      return {\r\n        ...obj,\r\n        model: obj.model ?? defaults.model.default,\r\n        modelLabel: obj.modelLabel ?? null,\r\n        promptPrefix: obj.promptPrefix ?? null,\r\n        examples: obj.examples ?? [{ input: { content: '' }, output: { content: '' } }],\r\n        temperature: obj.temperature ?? defaults.temperature.default,\r\n        maxOutputTokens: obj.maxOutputTokens ?? defaults.maxOutputTokens.default,\r\n        topP: obj.topP ?? defaults.topP.default,\r\n        topK: obj.topK ?? defaults.topK.default,\r\n        maxContextTokens: obj.maxContextTokens ?? undefined,\r\n      };\r\n    })\r\n    .catch(() => ({\r\n      model: defaults.model.default,\r\n      modelLabel: null,\r\n      promptPrefix: null,\r\n      examples: [{ input: { content: '' }, output: { content: '' } }],\r\n      temperature: defaults.temperature.default,\r\n      maxOutputTokens: defaults.maxOutputTokens.default,\r\n      topP: defaults.topP.default,\r\n      topK: defaults.topK.default,\r\n      maxContextTokens: undefined,\r\n    }));\r\n};\r\n","import { z } from 'zod';\r\n\r\n/**\r\n * Enum for Permission Types\r\n */\r\nexport enum PermissionTypes {\r\n  /**\r\n   * Type for Prompt Permissions\r\n   */\r\n  PROMPTS = 'PROMPTS',\r\n  /**\r\n   * Type for Bookmark Permissions\r\n   */\r\n  BOOKMARKS = 'BOOKMARKS',\r\n  /**\r\n   * Type for Agent Permissions\r\n   */\r\n  AGENTS = 'AGENTS',\r\n  /**\r\n   * Type for Memory Permissions\r\n   */\r\n  MEMORIES = 'MEMORIES',\r\n  /**\r\n   * Type for Multi-Conversation Permissions\r\n   */\r\n  MULTI_CONVO = 'MULTI_CONVO',\r\n  /**\r\n   * Type for Temporary Chat\r\n   */\r\n  TEMPORARY_CHAT = 'TEMPORARY_CHAT',\r\n  /**\r\n   * Type for using the \"Run Code\" LC Code Interpreter API feature\r\n   */\r\n  RUN_CODE = 'RUN_CODE',\r\n  /**\r\n   * Type for using the \"Web Search\" feature\r\n   */\r\n  WEB_SEARCH = 'WEB_SEARCH',\r\n  /**\r\n   * Type for People Picker Permissions\r\n   */\r\n  PEOPLE_PICKER = 'PEOPLE_PICKER',\r\n  /**\r\n   * Type for Marketplace Permissions\r\n   */\r\n  MARKETPLACE = 'MARKETPLACE',\r\n  /**\r\n   * Type for using the \"File Search\" feature\r\n   */\r\n  FILE_SEARCH = 'FILE_SEARCH',\r\n  /**\r\n   * Type for using the \"File Citations\" feature in agents\r\n   */\r\n  FILE_CITATIONS = 'FILE_CITATIONS',\r\n}\r\n\r\n/**\r\n * Enum for Role-Based Access Control Constants\r\n */\r\nexport enum Permissions {\r\n  SHARED_GLOBAL = 'SHARED_GLOBAL',\r\n  USE = 'USE',\r\n  CREATE = 'CREATE',\r\n  UPDATE = 'UPDATE',\r\n  READ = 'READ',\r\n  READ_AUTHOR = 'READ_AUTHOR',\r\n  SHARE = 'SHARE',\r\n  /** Can disable if desired */\r\n  OPT_OUT = 'OPT_OUT',\r\n  VIEW_USERS = 'VIEW_USERS',\r\n  VIEW_GROUPS = 'VIEW_GROUPS',\r\n  VIEW_ROLES = 'VIEW_ROLES',\r\n}\r\n\r\nexport const promptPermissionsSchema = z.object({\r\n  [Permissions.SHARED_GLOBAL]: z.boolean().default(false),\r\n  [Permissions.USE]: z.boolean().default(true),\r\n  [Permissions.CREATE]: z.boolean().default(true),\r\n  // [Permissions.SHARE]: z.boolean().default(false),\r\n});\r\nexport type TPromptPermissions = z.infer<typeof promptPermissionsSchema>;\r\n\r\nexport const bookmarkPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TBookmarkPermissions = z.infer<typeof bookmarkPermissionsSchema>;\r\n\r\nexport const memoryPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n  [Permissions.CREATE]: z.boolean().default(true),\r\n  [Permissions.UPDATE]: z.boolean().default(true),\r\n  [Permissions.READ]: z.boolean().default(true),\r\n  [Permissions.OPT_OUT]: z.boolean().default(true),\r\n});\r\nexport type TMemoryPermissions = z.infer<typeof memoryPermissionsSchema>;\r\n\r\nexport const agentPermissionsSchema = z.object({\r\n  [Permissions.SHARED_GLOBAL]: z.boolean().default(false),\r\n  [Permissions.USE]: z.boolean().default(true),\r\n  [Permissions.CREATE]: z.boolean().default(true),\r\n  // [Permissions.SHARE]: z.boolean().default(false),\r\n});\r\nexport type TAgentPermissions = z.infer<typeof agentPermissionsSchema>;\r\n\r\nexport const multiConvoPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TMultiConvoPermissions = z.infer<typeof multiConvoPermissionsSchema>;\r\n\r\nexport const temporaryChatPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TTemporaryChatPermissions = z.infer<typeof temporaryChatPermissionsSchema>;\r\n\r\nexport const runCodePermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TRunCodePermissions = z.infer<typeof runCodePermissionsSchema>;\r\n\r\nexport const webSearchPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TWebSearchPermissions = z.infer<typeof webSearchPermissionsSchema>;\r\n\r\nexport const peoplePickerPermissionsSchema = z.object({\r\n  [Permissions.VIEW_USERS]: z.boolean().default(true),\r\n  [Permissions.VIEW_GROUPS]: z.boolean().default(true),\r\n  [Permissions.VIEW_ROLES]: z.boolean().default(true),\r\n});\r\nexport type TPeoplePickerPermissions = z.infer<typeof peoplePickerPermissionsSchema>;\r\n\r\nexport const marketplacePermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(false),\r\n});\r\nexport type TMarketplacePermissions = z.infer<typeof marketplacePermissionsSchema>;\r\n\r\nexport const fileSearchPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TFileSearchPermissions = z.infer<typeof fileSearchPermissionsSchema>;\r\n\r\nexport const fileCitationsPermissionsSchema = z.object({\r\n  [Permissions.USE]: z.boolean().default(true),\r\n});\r\nexport type TFileCitationsPermissions = z.infer<typeof fileCitationsPermissionsSchema>;\r\n\r\n// Define a single permissions schema that holds all permission types.\r\nexport const permissionsSchema = z.object({\r\n  [PermissionTypes.PROMPTS]: promptPermissionsSchema,\r\n  [PermissionTypes.BOOKMARKS]: bookmarkPermissionsSchema,\r\n  [PermissionTypes.MEMORIES]: memoryPermissionsSchema,\r\n  [PermissionTypes.AGENTS]: agentPermissionsSchema,\r\n  [PermissionTypes.MULTI_CONVO]: multiConvoPermissionsSchema,\r\n  [PermissionTypes.TEMPORARY_CHAT]: temporaryChatPermissionsSchema,\r\n  [PermissionTypes.RUN_CODE]: runCodePermissionsSchema,\r\n  [PermissionTypes.WEB_SEARCH]: webSearchPermissionsSchema,\r\n  [PermissionTypes.PEOPLE_PICKER]: peoplePickerPermissionsSchema,\r\n  [PermissionTypes.MARKETPLACE]: marketplacePermissionsSchema,\r\n  [PermissionTypes.FILE_SEARCH]: fileSearchPermissionsSchema,\r\n  [PermissionTypes.FILE_CITATIONS]: fileCitationsPermissionsSchema,\r\n});\r\n","import { z } from 'zod';\r\nimport {\r\n  Permissions,\r\n  PermissionTypes,\r\n  permissionsSchema,\r\n  agentPermissionsSchema,\r\n  promptPermissionsSchema,\r\n  memoryPermissionsSchema,\r\n  runCodePermissionsSchema,\r\n  bookmarkPermissionsSchema,\r\n  webSearchPermissionsSchema,\r\n  fileSearchPermissionsSchema,\r\n  multiConvoPermissionsSchema,\r\n  temporaryChatPermissionsSchema,\r\n  peoplePickerPermissionsSchema,\r\n  fileCitationsPermissionsSchema,\r\n} from './permissions';\r\n\r\n/**\r\n * Enum for System Defined Roles\r\n */\r\nexport enum SystemRoles {\r\n  /**\r\n   * The Admin role\r\n   */\r\n  ADMIN = 'ADMIN',\r\n  /**\r\n   * The default user role\r\n   */\r\n  USER = 'USER',\r\n}\r\n\r\nexport const roleSchema = z.object({\r\n  name: z.string(),\r\n  permissions: permissionsSchema,\r\n});\r\n\r\nexport type TRole = z.infer<typeof roleSchema>;\r\n\r\nconst defaultRolesSchema = z.object({\r\n  [SystemRoles.ADMIN]: roleSchema.extend({\r\n    name: z.literal(SystemRoles.ADMIN),\r\n    permissions: permissionsSchema.extend({\r\n      [PermissionTypes.PROMPTS]: promptPermissionsSchema.extend({\r\n        [Permissions.SHARED_GLOBAL]: z.boolean().default(true),\r\n        [Permissions.USE]: z.boolean().default(true),\r\n        [Permissions.CREATE]: z.boolean().default(true),\r\n        // [Permissions.SHARE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.BOOKMARKS]: bookmarkPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.MEMORIES]: memoryPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n        [Permissions.CREATE]: z.boolean().default(true),\r\n        [Permissions.UPDATE]: z.boolean().default(true),\r\n        [Permissions.READ]: z.boolean().default(true),\r\n        [Permissions.OPT_OUT]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.AGENTS]: agentPermissionsSchema.extend({\r\n        [Permissions.SHARED_GLOBAL]: z.boolean().default(true),\r\n        [Permissions.USE]: z.boolean().default(true),\r\n        [Permissions.CREATE]: z.boolean().default(true),\r\n        // [Permissions.SHARE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.MULTI_CONVO]: multiConvoPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.TEMPORARY_CHAT]: temporaryChatPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.RUN_CODE]: runCodePermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.WEB_SEARCH]: webSearchPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.PEOPLE_PICKER]: peoplePickerPermissionsSchema.extend({\r\n        [Permissions.VIEW_USERS]: z.boolean().default(true),\r\n        [Permissions.VIEW_GROUPS]: z.boolean().default(true),\r\n        [Permissions.VIEW_ROLES]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.MARKETPLACE]: z.object({\r\n        [Permissions.USE]: z.boolean().default(false),\r\n      }),\r\n      [PermissionTypes.FILE_SEARCH]: fileSearchPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n      [PermissionTypes.FILE_CITATIONS]: fileCitationsPermissionsSchema.extend({\r\n        [Permissions.USE]: z.boolean().default(true),\r\n      }),\r\n    }),\r\n  }),\r\n  [SystemRoles.USER]: roleSchema.extend({\r\n    name: z.literal(SystemRoles.USER),\r\n    permissions: permissionsSchema,\r\n  }),\r\n});\r\n\r\nexport const roleDefaults = defaultRolesSchema.parse({\r\n  [SystemRoles.ADMIN]: {\r\n    name: SystemRoles.ADMIN,\r\n    permissions: {\r\n      [PermissionTypes.PROMPTS]: {\r\n        [Permissions.SHARED_GLOBAL]: true,\r\n        [Permissions.USE]: true,\r\n        [Permissions.CREATE]: true,\r\n      },\r\n      [PermissionTypes.BOOKMARKS]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.MEMORIES]: {\r\n        [Permissions.USE]: true,\r\n        [Permissions.CREATE]: true,\r\n        [Permissions.UPDATE]: true,\r\n        [Permissions.READ]: true,\r\n        [Permissions.OPT_OUT]: true,\r\n      },\r\n      [PermissionTypes.AGENTS]: {\r\n        [Permissions.SHARED_GLOBAL]: true,\r\n        [Permissions.USE]: true,\r\n        [Permissions.CREATE]: true,\r\n      },\r\n      [PermissionTypes.MULTI_CONVO]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.TEMPORARY_CHAT]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.RUN_CODE]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.WEB_SEARCH]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.PEOPLE_PICKER]: {\r\n        [Permissions.VIEW_USERS]: true,\r\n        [Permissions.VIEW_GROUPS]: true,\r\n        [Permissions.VIEW_ROLES]: true,\r\n      },\r\n      [PermissionTypes.MARKETPLACE]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.FILE_SEARCH]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n      [PermissionTypes.FILE_CITATIONS]: {\r\n        [Permissions.USE]: true,\r\n      },\r\n    },\r\n  },\r\n  [SystemRoles.USER]: {\r\n    name: SystemRoles.USER,\r\n    permissions: {\r\n      [PermissionTypes.PROMPTS]: {},\r\n      [PermissionTypes.BOOKMARKS]: {},\r\n      [PermissionTypes.MEMORIES]: {},\r\n      [PermissionTypes.AGENTS]: {},\r\n      [PermissionTypes.MULTI_CONVO]: {},\r\n      [PermissionTypes.TEMPORARY_CHAT]: {},\r\n      [PermissionTypes.RUN_CODE]: {},\r\n      [PermissionTypes.WEB_SEARCH]: {},\r\n      [PermissionTypes.PEOPLE_PICKER]: {\r\n        [Permissions.VIEW_USERS]: false,\r\n        [Permissions.VIEW_GROUPS]: false,\r\n        [Permissions.VIEW_ROLES]: false,\r\n      },\r\n      [PermissionTypes.MARKETPLACE]: {\r\n        [Permissions.USE]: false,\r\n      },\r\n      [PermissionTypes.FILE_SEARCH]: {},\r\n      [PermissionTypes.FILE_CITATIONS]: {},\r\n    },\r\n  },\r\n});\r\n","import type { Logger as WinstonLogger } from 'winston';\r\nimport type { RunnableConfig } from '@langchain/core/runnables';\r\n\r\nexport type SearchRefType = 'search' | 'image' | 'news' | 'video' | 'ref';\r\n\r\nexport enum DATE_RANGE {\r\n  PAST_HOUR = 'h',\r\n  PAST_24_HOURS = 'd',\r\n  PAST_WEEK = 'w',\r\n  PAST_MONTH = 'm',\r\n  PAST_YEAR = 'y',\r\n}\r\n\r\nexport type SearchProvider = 'serper' | 'searxng';\r\nexport type RerankerType = 'infinity' | 'jina' | 'cohere' | 'none';\r\n\r\nexport interface Highlight {\r\n  score: number;\r\n  text: string;\r\n  references?: UsedReferences;\r\n}\r\n\r\nexport type ProcessedSource = {\r\n  content?: string;\r\n  attribution?: string;\r\n  references?: References;\r\n  highlights?: Highlight[];\r\n  processed?: boolean;\r\n};\r\n\r\nexport type ProcessedOrganic = OrganicResult & ProcessedSource;\r\nexport type ProcessedTopStory = TopStoryResult & ProcessedSource;\r\nexport type ValidSource = ProcessedOrganic | ProcessedTopStory;\r\n\r\nexport type ResultReference = {\r\n  link: string;\r\n  type: 'link' | 'image' | 'video' | 'file';\r\n  title?: string;\r\n  attribution?: string;\r\n};\r\nexport interface SearchResultData {\r\n  turn?: number;\r\n  organic?: ProcessedOrganic[];\r\n  topStories?: ProcessedTopStory[];\r\n  images?: ImageResult[];\r\n  videos?: VideoResult[];\r\n  places?: PlaceResult[];\r\n  news?: NewsResult[];\r\n  shopping?: ShoppingResult[];\r\n  knowledgeGraph?: KnowledgeGraphResult;\r\n  answerBox?: AnswerBoxResult;\r\n  peopleAlsoAsk?: PeopleAlsoAskResult[];\r\n  relatedSearches?: Array<{ query: string }>;\r\n  references?: ResultReference[];\r\n  error?: string;\r\n}\r\n\r\nexport interface SearchResult {\r\n  data?: SearchResultData;\r\n  error?: string;\r\n  success: boolean;\r\n}\r\n\r\nexport interface Source {\r\n  link: string;\r\n  html?: string;\r\n  title?: string;\r\n  snippet?: string;\r\n  date?: string;\r\n}\r\n\r\nexport interface SearchConfig {\r\n  searchProvider?: SearchProvider;\r\n  serperApiKey?: string;\r\n  searxngInstanceUrl?: string;\r\n  searxngApiKey?: string;\r\n}\r\n\r\nexport type References = {\r\n  links: MediaReference[];\r\n  images: MediaReference[];\r\n  videos: MediaReference[];\r\n};\r\nexport interface ScrapeResult {\r\n  url: string;\r\n  error?: boolean;\r\n  content: string;\r\n  attribution?: string;\r\n  references?: References;\r\n  highlights?: Highlight[];\r\n}\r\n\r\nexport interface ProcessSourcesConfig {\r\n  topResults?: number;\r\n  strategies?: string[];\r\n  filterContent?: boolean;\r\n  reranker?: unknown;\r\n  logger?: Logger;\r\n}\r\n\r\nexport interface FirecrawlConfig {\r\n  firecrawlApiKey?: string;\r\n  firecrawlApiUrl?: string;\r\n  firecrawlOptions?: {\r\n    formats?: string[];\r\n    includeTags?: string[];\r\n    excludeTags?: string[];\r\n    headers?: Record<string, string>;\r\n    waitFor?: number;\r\n    timeout?: number;\r\n    maxAge?: number;\r\n    mobile?: boolean;\r\n    skipTlsVerification?: boolean;\r\n    blockAds?: boolean;\r\n    removeBase64Images?: boolean;\r\n    parsePDF?: boolean;\r\n    storeInCache?: boolean;\r\n    zeroDataRetention?: boolean;\r\n    location?: {\r\n      country?: string;\r\n      languages?: string[];\r\n    };\r\n    onlyMainContent?: boolean;\r\n    changeTrackingOptions?: {\r\n      modes?: string[];\r\n      schema?: Record<string, unknown>;\r\n      prompt?: string;\r\n      tag?: string | null;\r\n    };\r\n  };\r\n}\r\n\r\nexport interface ScraperContentResult {\r\n  content: string;\r\n}\r\n\r\nexport interface ScraperExtractionResult {\r\n  no_extraction: ScraperContentResult;\r\n}\r\n\r\nexport interface JinaRerankerResult {\r\n  index: number;\r\n  relevance_score: number;\r\n  document?: string | { text: string };\r\n}\r\n\r\nexport interface JinaRerankerResponse {\r\n  model: string;\r\n  usage: {\r\n    total_tokens: number;\r\n  };\r\n  results: JinaRerankerResult[];\r\n}\r\n\r\nexport interface CohereRerankerResult {\r\n  index: number;\r\n  relevance_score: number;\r\n}\r\n\r\nexport interface CohereRerankerResponse {\r\n  results: CohereRerankerResult[];\r\n  id: string;\r\n  meta: {\r\n    api_version: {\r\n      version: string;\r\n      is_experimental: boolean;\r\n    };\r\n    billed_units: {\r\n      search_units: number;\r\n    };\r\n  };\r\n}\r\n\r\nexport type SafeSearchLevel = 0 | 1 | 2;\r\n\r\nexport type Logger = WinstonLogger;\r\nexport interface SearchToolConfig extends SearchConfig, ProcessSourcesConfig, FirecrawlConfig {\r\n  logger?: Logger;\r\n  safeSearch?: SafeSearchLevel;\r\n  jinaApiKey?: string;\r\n  jinaApiUrl?: string;\r\n  cohereApiKey?: string;\r\n  rerankerType?: RerankerType;\r\n  onSearchResults?: (results: SearchResult, runnableConfig?: RunnableConfig) => void;\r\n  onGetHighlights?: (link: string) => void;\r\n}\r\nexport interface MediaReference {\r\n  originalUrl: string;\r\n  title?: string;\r\n  text?: string;\r\n}\r\n\r\nexport type UsedReferences = {\r\n  type: 'link' | 'image' | 'video';\r\n  originalIndex: number;\r\n  reference: MediaReference;\r\n}[];\r\n\r\n/** Firecrawl */\r\n\r\nexport interface FirecrawlScrapeOptions {\r\n  formats?: string[];\r\n  includeTags?: string[];\r\n  excludeTags?: string[];\r\n  headers?: Record<string, string>;\r\n  waitFor?: number;\r\n  timeout?: number;\r\n}\r\n\r\nexport interface ScrapeMetadata {\r\n  // Core source information\r\n  sourceURL?: string;\r\n  url?: string;\r\n  scrapeId?: string;\r\n  statusCode?: number;\r\n  // Basic metadata\r\n  title?: string;\r\n  description?: string;\r\n  language?: string;\r\n  favicon?: string;\r\n  viewport?: string;\r\n  robots?: string;\r\n  'theme-color'?: string;\r\n  // Open Graph metadata\r\n  'og:url'?: string;\r\n  'og:title'?: string;\r\n  'og:description'?: string;\r\n  'og:type'?: string;\r\n  'og:image'?: string;\r\n  'og:image:width'?: string;\r\n  'og:image:height'?: string;\r\n  'og:site_name'?: string;\r\n  ogUrl?: string;\r\n  ogTitle?: string;\r\n  ogDescription?: string;\r\n  ogImage?: string;\r\n  ogSiteName?: string;\r\n  // Article metadata\r\n  'article:author'?: string;\r\n  'article:published_time'?: string;\r\n  'article:modified_time'?: string;\r\n  'article:section'?: string;\r\n  'article:tag'?: string;\r\n  'article:publisher'?: string;\r\n  publishedTime?: string;\r\n  modifiedTime?: string;\r\n  // Twitter metadata\r\n  'twitter:site'?: string | boolean | number | null;\r\n  'twitter:creator'?: string;\r\n  'twitter:card'?: string;\r\n  'twitter:image'?: string;\r\n  'twitter:dnt'?: string;\r\n  'twitter:app:name:iphone'?: string;\r\n  'twitter:app:id:iphone'?: string;\r\n  'twitter:app:url:iphone'?: string;\r\n  'twitter:app:name:ipad'?: string;\r\n  'twitter:app:id:ipad'?: string;\r\n  'twitter:app:url:ipad'?: string;\r\n  'twitter:app:name:googleplay'?: string;\r\n  'twitter:app:id:googleplay'?: string;\r\n  'twitter:app:url:googleplay'?: string;\r\n  // Facebook metadata\r\n  'fb:app_id'?: string;\r\n  // App links\r\n  'al:ios:url'?: string;\r\n  'al:ios:app_name'?: string;\r\n  'al:ios:app_store_id'?: string;\r\n  // Allow for additional properties that might be present\r\n  [key: string]: string | number | boolean | null | undefined;\r\n}\r\n\r\nexport interface FirecrawlScrapeResponse {\r\n  success: boolean;\r\n  data?: {\r\n    markdown?: string;\r\n    html?: string;\r\n    rawHtml?: string;\r\n    screenshot?: string;\r\n    links?: string[];\r\n    metadata?: ScrapeMetadata;\r\n  };\r\n  error?: string;\r\n}\r\n\r\nexport interface FirecrawlScraperConfig {\r\n  apiKey?: string;\r\n  apiUrl?: string;\r\n  formats?: string[];\r\n  timeout?: number;\r\n  logger?: Logger;\r\n}\r\n\r\nexport type GetSourcesParams = {\r\n  query: string;\r\n  date?: DATE_RANGE;\r\n  country?: string;\r\n  numResults?: number;\r\n  safeSearch?: SearchToolConfig['safeSearch'];\r\n  images?: boolean;\r\n  videos?: boolean;\r\n  news?: boolean;\r\n  type?: 'search' | 'images' | 'videos' | 'news';\r\n};\r\n\r\n/** Serper API */\r\nexport interface VideoResult {\r\n  title?: string;\r\n  link?: string;\r\n  snippet?: string;\r\n  imageUrl?: string;\r\n  duration?: string;\r\n  source?: string;\r\n  channel?: string;\r\n  date?: string;\r\n  position?: number;\r\n}\r\n\r\nexport interface PlaceResult {\r\n  position?: number;\r\n  name?: string;\r\n  address?: string;\r\n  latitude?: number;\r\n  longitude?: number;\r\n  rating?: number;\r\n  ratingCount?: number;\r\n  category?: string;\r\n  identifier?: string;\r\n}\r\n\r\nexport interface NewsResult {\r\n  title?: string;\r\n  link?: string;\r\n  snippet?: string;\r\n  date?: string;\r\n  source?: string;\r\n  imageUrl?: string;\r\n  position?: number;\r\n}\r\n\r\nexport interface ShoppingResult {\r\n  title?: string;\r\n  source?: string;\r\n  link?: string;\r\n  price?: string;\r\n  delivery?: string;\r\n  imageUrl?: string;\r\n  rating?: number;\r\n  ratingCount?: number;\r\n  offers?: string;\r\n  productId?: string;\r\n  position?: number;\r\n}\r\n\r\nexport interface ScholarResult {\r\n  title?: string;\r\n  link?: string;\r\n  publicationInfo?: string;\r\n  snippet?: string;\r\n  year?: number;\r\n  citedBy?: number;\r\n}\r\n\r\nexport interface ImageResult {\r\n  title?: string;\r\n  imageUrl?: string;\r\n  imageWidth?: number;\r\n  imageHeight?: number;\r\n  thumbnailUrl?: string;\r\n  thumbnailWidth?: number;\r\n  thumbnailHeight?: number;\r\n  source?: string;\r\n  domain?: string;\r\n  link?: string;\r\n  googleUrl?: string;\r\n  position?: number;\r\n}\r\n\r\nexport interface SerperSearchPayload extends SerperSearchInput {\r\n  /**\r\n   * Search type/vertical\r\n   * Options: \"search\" (web), \"images\", \"news\", \"places\", \"videos\"\r\n   */\r\n  type?: 'search' | 'images' | 'news' | 'places' | 'videos';\r\n\r\n  /**\r\n   * Starting index for search results pagination (used instead of page)\r\n   */\r\n  start?: number;\r\n\r\n  /**\r\n   * Filtering for safe search\r\n   * Options: \"off\", \"moderate\", \"active\"\r\n   */\r\n  safe?: 'off' | 'moderate' | 'active';\r\n}\r\n\r\nexport type SerperSearchParameters = Pick<SerperSearchPayload, 'q' | 'type'> & {\r\n  engine: 'google';\r\n};\r\n\r\nexport interface OrganicResult {\r\n  position?: number;\r\n  title?: string;\r\n  link: string;\r\n  snippet?: string;\r\n  date?: string;\r\n  sitelinks?: Array<{\r\n    title: string;\r\n    link: string;\r\n  }>;\r\n}\r\n\r\nexport interface TopStoryResult {\r\n  title?: string;\r\n  link: string;\r\n  source?: string;\r\n  date?: string;\r\n  imageUrl?: string;\r\n}\r\nexport interface KnowledgeGraphResult {\r\n  title?: string;\r\n  type?: string;\r\n  imageUrl?: string;\r\n  description?: string;\r\n  descriptionSource?: string;\r\n  descriptionLink?: string;\r\n  attributes?: Record<string, string>;\r\n  website?: string;\r\n}\r\n\r\nexport interface AnswerBoxResult {\r\n  title?: string;\r\n  snippet?: string;\r\n  snippetHighlighted?: string[];\r\n  link?: string;\r\n  date?: string;\r\n}\r\n\r\nexport interface PeopleAlsoAskResult {\r\n  question?: string;\r\n  snippet?: string;\r\n  title?: string;\r\n  link?: string;\r\n}\r\n\r\nexport type RelatedSearches = Array<{ query: string }>;\r\n\r\nexport interface SerperSearchInput {\r\n  /**\r\n   * The search query string\r\n   */\r\n  q: string;\r\n\r\n  /**\r\n   * Country code for localized results\r\n   * Examples: \"us\", \"uk\", \"ca\", \"de\", etc.\r\n   */\r\n  gl?: string;\r\n\r\n  /**\r\n   * Interface language\r\n   * Examples: \"en\", \"fr\", \"de\", etc.\r\n   */\r\n  hl?: string;\r\n\r\n  /**\r\n   * Number of results to return (up to 100)\r\n   */\r\n  num?: number;\r\n  /**\r\n   * Specific location for contextual results\r\n   * Example: \"New York, NY\"\r\n   */\r\n  location?: string;\r\n\r\n  /**\r\n   * Search autocorrection setting\r\n   */\r\n  autocorrect?: boolean;\r\n  page?: number;\r\n  /**\r\n   * Date range for search results\r\n   * Options: \"h\" (past hour), \"d\" (past 24 hours), \"w\" (past week),\r\n   * \"m\" (past month), \"y\" (past year)\r\n   * `qdr:${DATE_RANGE}`\r\n   */\r\n  tbs?: string;\r\n}\r\n\r\nexport type SerperResultData = {\r\n  searchParameters: SerperSearchPayload;\r\n  organic?: OrganicResult[];\r\n  topStories?: TopStoryResult[];\r\n  images?: ImageResult[];\r\n  videos?: VideoResult[];\r\n  places?: PlaceResult[];\r\n  news?: NewsResult[];\r\n  shopping?: ShoppingResult[];\r\n  peopleAlsoAsk?: PeopleAlsoAskResult[];\r\n  relatedSearches?: RelatedSearches;\r\n  knowledgeGraph?: KnowledgeGraphResult;\r\n  answerBox?: AnswerBoxResult;\r\n  credits?: number;\r\n};\r\n\r\n/** SearXNG */\r\n\r\nexport interface SearxNGSearchPayload {\r\n  /**\r\n   * The search query string\r\n   * Supports syntax specific to different search engines\r\n   * Example: \"site:github.com SearXNG\"\r\n   */\r\n  q: string;\r\n\r\n  /**\r\n   * Comma-separated list of search categories\r\n   * Example: \"general,images,news\"\r\n   */\r\n  categories?: string;\r\n\r\n  /**\r\n   * Comma-separated list of search engines to use\r\n   * Example: \"google,bing,duckduckgo\"\r\n   */\r\n  engines?: string;\r\n\r\n  /**\r\n   * Code of the language for search results\r\n   * Example: \"en\", \"fr\", \"de\", \"es\"\r\n   */\r\n  language?: string;\r\n\r\n  /**\r\n   * Search page number\r\n   * Default: 1\r\n   */\r\n  pageno?: number;\r\n\r\n  /**\r\n   * Time range filter for search results\r\n   * Options: \"day\", \"month\", \"year\"\r\n   */\r\n  time_range?: 'day' | 'month' | 'year';\r\n\r\n  /**\r\n   * Output format of results\r\n   * Options: \"json\", \"csv\", \"rss\"\r\n   */\r\n  format?: 'json' | 'csv' | 'rss';\r\n\r\n  /**\r\n   * Open search results on new tab\r\n   * Options: `0` (off), `1` (on)\r\n   */\r\n  results_on_new_tab?: 0 | 1;\r\n\r\n  /**\r\n   * Proxy image results through SearxNG\r\n   * Options: true, false\r\n   */\r\n  image_proxy?: boolean;\r\n\r\n  /**\r\n   * Service for autocomplete suggestions\r\n   * Options: \"google\", \"dbpedia\", \"duckduckgo\", \"mwmbl\",\r\n   *          \"startpage\", \"wikipedia\", \"stract\", \"swisscows\", \"qwant\"\r\n   */\r\n  autocomplete?: string;\r\n\r\n  /**\r\n   * Safe search filtering level\r\n   * Options: \"0\" (off), \"1\" (moderate), \"2\" (strict)\r\n   */\r\n  safesearch?: 0 | 1 | 2;\r\n\r\n  /**\r\n   * Theme to use for results page\r\n   * Default: \"simple\" (other themes may be available per instance)\r\n   */\r\n  theme?: string;\r\n\r\n  /**\r\n   * List of enabled plugins\r\n   * Default: \"Hash_plugin,Self_Information,Tracker_URL_remover,Ahmia_blacklist\"\r\n   */\r\n  enabled_plugins?: string;\r\n\r\n  /**\r\n   * List of disabled plugins\r\n   */\r\n  disabled_plugins?: string;\r\n\r\n  /**\r\n   * List of enabled engines\r\n   */\r\n  enabled_engines?: string;\r\n\r\n  /**\r\n   * List of disabled engines\r\n   */\r\n  disabled_engines?: string;\r\n}\r\n\r\nexport interface SearXNGResult {\r\n  title?: string;\r\n  url?: string;\r\n  content?: string;\r\n  publishedDate?: string;\r\n  img_src?: string;\r\n}\r\n\r\nexport type ProcessSourcesFields = {\r\n  result: SearchResult;\r\n  numElements: number;\r\n  query: string;\r\n  news: boolean;\r\n  proMode: boolean;\r\n  onGetHighlights: SearchToolConfig['onGetHighlights'];\r\n};\r\n","import { z } from 'zod';\r\n\r\n/**\r\n * Granular Permission System Types for Agent Sharing\r\n *\r\n * This file contains TypeScript interfaces and Zod schemas for the enhanced\r\n * agent permission system that supports sharing with specific users/groups\r\n * and Entra ID integration.\r\n */\r\n\r\n// ===== ENUMS & CONSTANTS =====\r\n\r\n/**\r\n * Principal types for permission system\r\n */\r\nexport enum PrincipalType {\r\n  USER = 'user',\r\n  GROUP = 'group',\r\n  PUBLIC = 'public',\r\n  ROLE = 'role',\r\n}\r\n\r\n/**\r\n * Principal model types for MongoDB references\r\n */\r\nexport enum PrincipalModel {\r\n  USER = 'User',\r\n  GROUP = 'Group',\r\n  ROLE = 'Role',\r\n}\r\n\r\n/**\r\n * Source of the principal (local LibreChat or external Entra ID)\r\n */\r\nexport type TPrincipalSource = 'local' | 'entra';\r\n\r\n/**\r\n * Access levels for agents\r\n */\r\nexport type TAccessLevel = 'none' | 'viewer' | 'editor' | 'owner';\r\n\r\n/**\r\n * Resource types for permission system\r\n */\r\nexport enum ResourceType {\r\n  AGENT = 'agent',\r\n  PROMPTGROUP = 'promptGroup',\r\n}\r\n\r\n/**\r\n * Permission bit constants for bitwise operations\r\n */\r\nexport enum PermissionBits {\r\n  /** 001 - Can view and use agent */\r\n  VIEW = 1,\r\n  /**  010 - Can modify agent settings */\r\n  EDIT = 2,\r\n  /**  100 - Can delete agent */\r\n  DELETE = 4,\r\n  /**  1000 - Can share agent with others (future) */\r\n  SHARE = 8,\r\n}\r\n\r\n/**\r\n * Standard access role IDs\r\n */\r\nexport enum AccessRoleIds {\r\n  AGENT_VIEWER = 'agent_viewer',\r\n  AGENT_EDITOR = 'agent_editor',\r\n  AGENT_OWNER = 'agent_owner',\r\n  PROMPTGROUP_VIEWER = 'promptGroup_viewer',\r\n  PROMPTGROUP_EDITOR = 'promptGroup_editor',\r\n  PROMPTGROUP_OWNER = 'promptGroup_owner',\r\n}\r\n\r\n// ===== ZOD SCHEMAS =====\r\n\r\n/**\r\n * Principal schema - represents a user, group, role, or public access\r\n */\r\nexport const principalSchema = z.object({\r\n  type: z.nativeEnum(PrincipalType),\r\n  id: z.string().optional(), // undefined for 'public' type, role name for 'role' type\r\n  name: z.string().optional(),\r\n  email: z.string().optional(), // for user and group types\r\n  source: z.enum(['local', 'entra']).optional(),\r\n  avatar: z.string().optional(), // for user and group types\r\n  description: z.string().optional(), // for group and role types\r\n  idOnTheSource: z.string().optional(), // Entra ID for users/groups\r\n  accessRoleId: z.nativeEnum(AccessRoleIds).optional(), // Access role ID for permissions\r\n  memberCount: z.number().optional(), // for group type\r\n});\r\n\r\n/**\r\n * Access role schema - defines named permission sets\r\n */\r\nexport const accessRoleSchema = z.object({\r\n  accessRoleId: z.nativeEnum(AccessRoleIds),\r\n  name: z.string(),\r\n  description: z.string().optional(),\r\n  resourceType: z.nativeEnum(ResourceType).default(ResourceType.AGENT),\r\n  permBits: z.number(),\r\n});\r\n\r\n/**\r\n * Permission entry schema - represents a single ACL entry\r\n */\r\nexport const permissionEntrySchema = z.object({\r\n  id: z.string(),\r\n  principalType: z.nativeEnum(PrincipalType),\r\n  principalId: z.string().optional(), // undefined for 'public'\r\n  principalName: z.string().optional(),\r\n  role: accessRoleSchema,\r\n  grantedBy: z.string(),\r\n  grantedAt: z.string(), // ISO date string\r\n  inheritedFrom: z.string().optional(), // for project-level inheritance\r\n  source: z.enum(['local', 'entra']).optional(),\r\n});\r\n\r\n/**\r\n * Resource permissions response schema\r\n */\r\nexport const resourcePermissionsResponseSchema = z.object({\r\n  resourceType: z.nativeEnum(ResourceType),\r\n  resourceId: z.string(),\r\n  permissions: z.array(permissionEntrySchema),\r\n});\r\n\r\n/**\r\n * Update resource permissions request schema\r\n * This matches the user's requirement for the frontend DTO structure\r\n */\r\nexport const updateResourcePermissionsRequestSchema = z.object({\r\n  updated: principalSchema.array(),\r\n  removed: principalSchema.array(),\r\n  public: z.boolean(),\r\n  publicAccessRoleId: z.string().optional(),\r\n});\r\n\r\n/**\r\n * Update resource permissions response schema\r\n * Returns the updated permissions with accessRoleId included\r\n */\r\nexport const updateResourcePermissionsResponseSchema = z.object({\r\n  message: z.string(),\r\n  results: z.object({\r\n    principals: principalSchema.array(),\r\n    public: z.boolean(),\r\n    publicAccessRoleId: z.string().optional(),\r\n  }),\r\n});\r\n\r\n// ===== TYPESCRIPT TYPES =====\r\n\r\n/**\r\n * Principal - represents a user, group, or public access\r\n */\r\nexport type TPrincipal = z.infer<typeof principalSchema>;\r\n\r\n/**\r\n * Access role - defines named permission sets\r\n */\r\nexport type TAccessRole = z.infer<typeof accessRoleSchema>;\r\n\r\n/**\r\n * Permission entry - represents a single ACL entry\r\n */\r\nexport type TPermissionEntry = z.infer<typeof permissionEntrySchema>;\r\n\r\n/**\r\n * Resource permissions response\r\n */\r\nexport type TResourcePermissionsResponse = z.infer<typeof resourcePermissionsResponseSchema>;\r\n\r\n/**\r\n * Update resource permissions request\r\n * This matches the user's requirement for the frontend DTO structure\r\n */\r\nexport type TUpdateResourcePermissionsRequest = z.infer<\r\n  typeof updateResourcePermissionsRequestSchema\r\n>;\r\n\r\n/**\r\n * Update resource permissions response\r\n * Returns the updated permissions with accessRoleId included\r\n */\r\nexport type TUpdateResourcePermissionsResponse = z.infer<\r\n  typeof updateResourcePermissionsResponseSchema\r\n>;\r\n\r\n/**\r\n * Principal search request parameters\r\n */\r\nexport type TPrincipalSearchParams = {\r\n  q: string; // search query (required)\r\n  limit?: number; // max results (1-50, default 10)\r\n  type?: PrincipalType.USER | PrincipalType.GROUP | PrincipalType.ROLE; // filter by type (optional)\r\n};\r\n\r\n/**\r\n * Principal search result item\r\n */\r\nexport type TPrincipalSearchResult = {\r\n  id?: string | null; // null for Entra ID principals that don't exist locally yet\r\n  type: PrincipalType.USER | PrincipalType.GROUP | PrincipalType.ROLE;\r\n  name: string;\r\n  email?: string; // for users and groups\r\n  username?: string; // for users\r\n  avatar?: string; // for users and groups\r\n  provider?: string; // for users\r\n  source: 'local' | 'entra';\r\n  memberCount?: number; // for groups\r\n  description?: string; // for groups\r\n  idOnTheSource?: string; // Entra ID for users (maps to openidId) and groups (maps to idOnTheSource)\r\n};\r\n\r\n/**\r\n * Principal search response\r\n */\r\nexport type TPrincipalSearchResponse = {\r\n  query: string;\r\n  limit: number;\r\n  type?: PrincipalType.USER | PrincipalType.GROUP | PrincipalType.ROLE;\r\n  results: TPrincipalSearchResult[];\r\n  count: number;\r\n  sources: {\r\n    local: number;\r\n    entra: number;\r\n  };\r\n};\r\n\r\n/**\r\n * Available roles response\r\n */\r\nexport type TAvailableRolesResponse = {\r\n  resourceType: ResourceType;\r\n  roles: TAccessRole[];\r\n};\r\n\r\n/**\r\n * Get resource permissions response schema\r\n * This matches the enhanced aggregation-based endpoint response format\r\n */\r\nexport const getResourcePermissionsResponseSchema = z.object({\r\n  resourceType: z.nativeEnum(ResourceType),\r\n  resourceId: z.nativeEnum(AccessRoleIds),\r\n  principals: z.array(principalSchema),\r\n  public: z.boolean(),\r\n  publicAccessRoleId: z.nativeEnum(AccessRoleIds).optional(),\r\n});\r\n\r\n/**\r\n * Get resource permissions response type\r\n * This matches the enhanced aggregation-based endpoint response format\r\n */\r\nexport type TGetResourcePermissionsResponse = z.infer<typeof getResourcePermissionsResponseSchema>;\r\n\r\n/**\r\n * Effective permissions response schema\r\n * Returns just the permission bitmask for a user on a resource\r\n */\r\nexport const effectivePermissionsResponseSchema = z.object({\r\n  permissionBits: z.number(),\r\n});\r\n\r\n/**\r\n * Effective permissions response type\r\n * Returns just the permission bitmask for a user on a resource\r\n */\r\nexport type TEffectivePermissionsResponse = z.infer<typeof effectivePermissionsResponseSchema>;\r\n\r\n// ===== UTILITY TYPES =====\r\n\r\n/**\r\n * Permission check result\r\n */\r\nexport interface TPermissionCheck {\r\n  canView: boolean;\r\n  canEdit: boolean;\r\n  canDelete: boolean;\r\n  canShare: boolean;\r\n  accessLevel: TAccessLevel;\r\n}\r\n\r\n// ===== HELPER FUNCTIONS =====\r\n\r\n/**\r\n * Convert permission bits to access level\r\n */\r\nexport function permBitsToAccessLevel(permBits: number): TAccessLevel {\r\n  if ((permBits & PermissionBits.DELETE) > 0) return 'owner';\r\n  if ((permBits & PermissionBits.EDIT) > 0) return 'editor';\r\n  if ((permBits & PermissionBits.VIEW) > 0) return 'viewer';\r\n  return 'none';\r\n}\r\n\r\n/**\r\n * Convert access role ID to permission bits\r\n */\r\nexport function accessRoleToPermBits(accessRoleId: string): number {\r\n  switch (accessRoleId) {\r\n    case AccessRoleIds.AGENT_VIEWER:\r\n      return PermissionBits.VIEW;\r\n    case AccessRoleIds.AGENT_EDITOR:\r\n      return PermissionBits.VIEW | PermissionBits.EDIT;\r\n    case AccessRoleIds.AGENT_OWNER:\r\n      return PermissionBits.VIEW | PermissionBits.EDIT | PermissionBits.DELETE;\r\n    default:\r\n      return PermissionBits.VIEW;\r\n  }\r\n}\r\n\r\n/**\r\n * Check if permission bitmask contains other bitmask\r\n * @param permissions - The permission bitmask to check\r\n * @param requiredPermission - The required permission bit(s)\r\n * @returns {boolean} Whether permissions contains requiredPermission\r\n */\r\nexport function hasPermissions(permissions: number, requiredPermission: number): boolean {\r\n  return (permissions & requiredPermission) === requiredPermission;\r\n}\r\n","export enum QueryKeys {\r\n  messages = 'messages',\r\n  sharedMessages = 'sharedMessages',\r\n  sharedLinks = 'sharedLinks',\r\n  allConversations = 'allConversations',\r\n  archivedConversations = 'archivedConversations',\r\n  searchConversations = 'searchConversations',\r\n  conversation = 'conversation',\r\n  searchEnabled = 'searchEnabled',\r\n  user = 'user',\r\n  name = 'name', // user key name\r\n  models = 'models',\r\n  balance = 'balance',\r\n  endpoints = 'endpoints',\r\n  presets = 'presets',\r\n  searchResults = 'searchResults',\r\n  tokenCount = 'tokenCount',\r\n  availablePlugins = 'availablePlugins',\r\n  startupConfig = 'startupConfig',\r\n  assistants = 'assistants',\r\n  assistant = 'assistant',\r\n  agents = 'agents',\r\n  agent = 'agent',\r\n  files = 'files',\r\n  fileConfig = 'fileConfig',\r\n  tools = 'tools',\r\n  toolAuth = 'toolAuth',\r\n  toolCalls = 'toolCalls',\r\n  mcpTools = 'mcpTools',\r\n  mcpConnectionStatus = 'mcpConnectionStatus',\r\n  mcpAuthValues = 'mcpAuthValues',\r\n  agentTools = 'agentTools',\r\n  actions = 'actions',\r\n  assistantDocs = 'assistantDocs',\r\n  agentDocs = 'agentDocs',\r\n  fileDownload = 'fileDownload',\r\n  voices = 'voices',\r\n  customConfigSpeech = 'customConfigSpeech',\r\n  prompts = 'prompts',\r\n  prompt = 'prompt',\r\n  promptGroups = 'promptGroups',\r\n  allPromptGroups = 'allPromptGroups',\r\n  promptGroup = 'promptGroup',\r\n  categories = 'categories',\r\n  randomPrompts = 'randomPrompts',\r\n  agentCategories = 'agentCategories',\r\n  marketplaceAgents = 'marketplaceAgents',\r\n  roles = 'roles',\r\n  conversationTags = 'conversationTags',\r\n  health = 'health',\r\n  userTerms = 'userTerms',\r\n  banner = 'banner',\r\n  /* Memories */\r\n  memories = 'memories',\r\n  principalSearch = 'principalSearch',\r\n  accessRoles = 'accessRoles',\r\n  resourcePermissions = 'resourcePermissions',\r\n  effectivePermissions = 'effectivePermissions',\r\n  graphToken = 'graphToken',\r\n}\r\n\r\n// Dynamic query keys that require parameters\r\nexport const DynamicQueryKeys = {\r\n  agentFiles: (agentId: string) => ['agentFiles', agentId] as const,\r\n} as const;\r\n\r\nexport enum MutationKeys {\r\n  fileUpload = 'fileUpload',\r\n  fileDelete = 'fileDelete',\r\n  updatePreset = 'updatePreset',\r\n  deletePreset = 'deletePreset',\r\n  loginUser = 'loginUser',\r\n  logoutUser = 'logoutUser',\r\n  refreshToken = 'refreshToken',\r\n  avatarUpload = 'avatarUpload',\r\n  speechToText = 'speechToText',\r\n  textToSpeech = 'textToSpeech',\r\n  assistantAvatarUpload = 'assistantAvatarUpload',\r\n  agentAvatarUpload = 'agentAvatarUpload',\r\n  updateAction = 'updateAction',\r\n  updateAgentAction = 'updateAgentAction',\r\n  deleteAction = 'deleteAction',\r\n  deleteAgentAction = 'deleteAgentAction',\r\n  revertAgentVersion = 'revertAgentVersion',\r\n  deleteUser = 'deleteUser',\r\n  updateRole = 'updateRole',\r\n  enableTwoFactor = 'enableTwoFactor',\r\n  verifyTwoFactor = 'verifyTwoFactor',\r\n  updateMemoryPreferences = 'updateMemoryPreferences',\r\n}\r\n","import axios from 'axios';\r\n\r\nexport function setAcceptLanguageHeader(value: string): void {\r\n  axios.defaults.headers.common['Accept-Language'] = value;\r\n}\r\n\r\nexport function setTokenHeader(token: string) {\r\n  axios.defaults.headers.common['Authorization'] = 'Bearer ' + token;\r\n}\r\n","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport axios, { AxiosError, AxiosRequestConfig } from 'axios';\r\nimport * as endpoints from './api-endpoints';\r\nimport { setTokenHeader } from './headers-helpers';\r\nimport type * as t from './types';\r\n\r\nasync function _get<T>(url: string, options?: AxiosRequestConfig): Promise<T> {\r\n  const response = await axios.get(url, { ...options });\r\n  return response.data;\r\n}\r\n\r\nasync function _getResponse<T>(url: string, options?: AxiosRequestConfig): Promise<T> {\r\n  return await axios.get(url, { ...options });\r\n}\r\n\r\nasync function _post(url: string, data?: any) {\r\n  const response = await axios.post(url, JSON.stringify(data), {\r\n    headers: { 'Content-Type': 'application/json' },\r\n  });\r\n  return response.data;\r\n}\r\n\r\nasync function _postMultiPart(url: string, formData: FormData, options?: AxiosRequestConfig) {\r\n  const response = await axios.post(url, formData, {\r\n    ...options,\r\n    headers: { 'Content-Type': 'multipart/form-data' },\r\n  });\r\n  return response.data;\r\n}\r\n\r\nasync function _postTTS(url: string, formData: FormData, options?: AxiosRequestConfig) {\r\n  const response = await axios.post(url, formData, {\r\n    ...options,\r\n    headers: { 'Content-Type': 'multipart/form-data' },\r\n    responseType: 'arraybuffer',\r\n  });\r\n  return response.data;\r\n}\r\n\r\nasync function _put(url: string, data?: any) {\r\n  const response = await axios.put(url, JSON.stringify(data), {\r\n    headers: { 'Content-Type': 'application/json' },\r\n  });\r\n  return response.data;\r\n}\r\n\r\nasync function _delete<T>(url: string): Promise<T> {\r\n  const response = await axios.delete(url);\r\n  return response.data;\r\n}\r\n\r\nasync function _deleteWithOptions<T>(url: string, options?: AxiosRequestConfig): Promise<T> {\r\n  const response = await axios.delete(url, { ...options });\r\n  return response.data;\r\n}\r\n\r\nasync function _patch(url: string, data?: any) {\r\n  const response = await axios.patch(url, JSON.stringify(data), {\r\n    headers: { 'Content-Type': 'application/json' },\r\n  });\r\n  return response.data;\r\n}\r\n\r\nlet isRefreshing = false;\r\nlet failedQueue: { resolve: (value?: any) => void; reject: (reason?: any) => void }[] = [];\r\n\r\nconst refreshToken = (retry?: boolean): Promise<t.TRefreshTokenResponse | undefined> =>\r\n  _post(endpoints.refreshToken(retry));\r\n\r\nconst dispatchTokenUpdatedEvent = (token: string) => {\r\n  setTokenHeader(token);\r\n  window.dispatchEvent(new CustomEvent('tokenUpdated', { detail: token }));\r\n};\r\n\r\nconst processQueue = (error: AxiosError | null, token: string | null = null) => {\r\n  failedQueue.forEach((prom) => {\r\n    if (error) {\r\n      prom.reject(error);\r\n    } else {\r\n      prom.resolve(token);\r\n    }\r\n  });\r\n  failedQueue = [];\r\n};\r\n\r\nif (typeof window !== 'undefined') {\r\n  axios.interceptors.response.use(\r\n    (response) => response,\r\n    async (error) => {\r\n      const originalRequest = error.config;\r\n      if (!error.response) {\r\n        return Promise.reject(error);\r\n      }\r\n\r\n      if (originalRequest.url?.includes('/api/auth/2fa') === true) {\r\n        return Promise.reject(error);\r\n      }\r\n      if (originalRequest.url?.includes('/api/auth/logout') === true) {\r\n        return Promise.reject(error);\r\n      }\r\n\r\n      if (error.response.status === 401 && !originalRequest._retry) {\r\n        console.warn('401 error, refreshing token');\r\n        originalRequest._retry = true;\r\n\r\n        if (isRefreshing) {\r\n          try {\r\n            const token = await new Promise((resolve, reject) => {\r\n              failedQueue.push({ resolve, reject });\r\n            });\r\n            originalRequest.headers['Authorization'] = 'Bearer ' + token;\r\n            return await axios(originalRequest);\r\n          } catch (err) {\r\n            return Promise.reject(err);\r\n          }\r\n        }\r\n\r\n        isRefreshing = true;\r\n\r\n        try {\r\n          const response = await refreshToken(\r\n            // Handle edge case where we get a blank screen if the initial 401 error is from a refresh token request\r\n            originalRequest.url?.includes('api/auth/refresh') === true ? true : false,\r\n          );\r\n\r\n          const token = response?.token ?? '';\r\n\r\n          if (token) {\r\n            originalRequest.headers['Authorization'] = 'Bearer ' + token;\r\n            dispatchTokenUpdatedEvent(token);\r\n            processQueue(null, token);\r\n            return await axios(originalRequest);\r\n          } else if (window.location.href.includes('share/')) {\r\n            console.log(\r\n              `Refresh token failed from shared link, attempting request to ${originalRequest.url}`,\r\n            );\r\n          } else {\r\n            window.location.href = '/login';\r\n          }\r\n        } catch (err) {\r\n          processQueue(err as AxiosError, null);\r\n          return Promise.reject(err);\r\n        } finally {\r\n          isRefreshing = false;\r\n        }\r\n      }\r\n\r\n      return Promise.reject(error);\r\n    },\r\n  );\r\n}\r\n\r\nexport default {\r\n  get: _get,\r\n  getResponse: _getResponse,\r\n  post: _post,\r\n  postMultiPart: _postMultiPart,\r\n  postTTS: _postTTS,\r\n  put: _put,\r\n  delete: _delete,\r\n  deleteWithOptions: _deleteWithOptions,\r\n  patch: _patch,\r\n  refreshToken,\r\n  dispatchTokenUpdatedEvent,\r\n};\r\n","import type { AxiosResponse } from 'axios';\r\nimport type * as t from './types';\r\nimport * as endpoints from './api-endpoints';\r\nimport * as a from './types/assistants';\r\nimport * as ag from './types/agents';\r\nimport * as m from './types/mutations';\r\nimport * as q from './types/queries';\r\nimport * as f from './types/files';\r\nimport * as config from './config';\r\nimport request from './request';\r\nimport * as s from './schemas';\r\nimport * as r from './roles';\r\nimport * as permissions from './accessPermissions';\r\n\r\nexport function revokeUserKey(name: string): Promise<unknown> {\r\n  return request.delete(endpoints.revokeUserKey(name));\r\n}\r\n\r\nexport function revokeAllUserKeys(): Promise<unknown> {\r\n  return request.delete(endpoints.revokeAllUserKeys());\r\n}\r\n\r\nexport function deleteUser(): Promise<s.TPreset> {\r\n  return request.delete(endpoints.deleteUser());\r\n}\r\n\r\nexport function getSharedMessages(shareId: string): Promise<t.TSharedMessagesResponse> {\r\n  return request.get(endpoints.shareMessages(shareId));\r\n}\r\n\r\nexport const listSharedLinks = async (\r\n  params: q.SharedLinksListParams,\r\n): Promise<q.SharedLinksResponse> => {\r\n  const { pageSize, isPublic, sortBy, sortDirection, search, cursor } = params;\r\n\r\n  return request.get(\r\n    endpoints.getSharedLinks(pageSize, isPublic, sortBy, sortDirection, search, cursor),\r\n  );\r\n};\r\n\r\nexport function getSharedLink(conversationId: string): Promise<t.TSharedLinkGetResponse> {\r\n  return request.get(endpoints.getSharedLink(conversationId));\r\n}\r\n\r\nexport function createSharedLink(conversationId: string): Promise<t.TSharedLinkResponse> {\r\n  return request.post(endpoints.createSharedLink(conversationId));\r\n}\r\n\r\nexport function updateSharedLink(shareId: string): Promise<t.TSharedLinkResponse> {\r\n  return request.patch(endpoints.updateSharedLink(shareId));\r\n}\r\n\r\nexport function deleteSharedLink(shareId: string): Promise<m.TDeleteSharedLinkResponse> {\r\n  return request.delete(endpoints.shareMessages(shareId));\r\n}\r\n\r\nexport function updateUserKey(payload: t.TUpdateUserKeyRequest) {\r\n  const { value } = payload;\r\n  if (!value) {\r\n    throw new Error('value is required');\r\n  }\r\n\r\n  return request.put(endpoints.keys(), payload);\r\n}\r\n\r\nexport function getPresets(): Promise<s.TPreset[]> {\r\n  return request.get(endpoints.presets());\r\n}\r\n\r\nexport function createPreset(payload: s.TPreset): Promise<s.TPreset> {\r\n  return request.post(endpoints.presets(), payload);\r\n}\r\n\r\nexport function updatePreset(payload: s.TPreset): Promise<s.TPreset> {\r\n  return request.post(endpoints.presets(), payload);\r\n}\r\n\r\nexport function deletePreset(arg: s.TPreset | undefined): Promise<m.PresetDeleteResponse> {\r\n  return request.post(endpoints.deletePreset(), arg);\r\n}\r\n\r\nexport function getSearchEnabled(): Promise<boolean> {\r\n  return request.get(endpoints.searchEnabled());\r\n}\r\n\r\nexport function getUser(): Promise<t.TUser> {\r\n  return request.get(endpoints.user());\r\n}\r\n\r\nexport function getUserBalance(): Promise<t.TBalanceResponse> {\r\n  return request.get(endpoints.balance());\r\n}\r\n\r\nexport const updateTokenCount = (text: string) => {\r\n  return request.post(endpoints.tokenizer(), { arg: text });\r\n};\r\n\r\nexport const login = (payload: t.TLoginUser): Promise<t.TLoginResponse> => {\r\n  return request.post(endpoints.login(), payload);\r\n};\r\n\r\nexport const logout = (): Promise<m.TLogoutResponse> => {\r\n  return request.post(endpoints.logout());\r\n};\r\n\r\nexport const register = (payload: t.TRegisterUser) => {\r\n  return request.post(endpoints.register(), payload);\r\n};\r\n\r\nexport const userKeyQuery = (name: string): Promise<t.TCheckUserKeyResponse> =>\r\n  request.get(endpoints.userKeyQuery(name));\r\n\r\nexport const getLoginGoogle = () => {\r\n  return request.get(endpoints.loginGoogle());\r\n};\r\n\r\nexport const requestPasswordReset = (\r\n  payload: t.TRequestPasswordReset,\r\n): Promise<t.TRequestPasswordResetResponse> => {\r\n  return request.post(endpoints.requestPasswordReset(), payload);\r\n};\r\n\r\nexport const resetPassword = (payload: t.TResetPassword) => {\r\n  return request.post(endpoints.resetPassword(), payload);\r\n};\r\n\r\nexport const verifyEmail = (payload: t.TVerifyEmail): Promise<t.VerifyEmailResponse> => {\r\n  return request.post(endpoints.verifyEmail(), payload);\r\n};\r\n\r\nexport const resendVerificationEmail = (\r\n  payload: t.TResendVerificationEmail,\r\n): Promise<t.VerifyEmailResponse> => {\r\n  return request.post(endpoints.resendVerificationEmail(), payload);\r\n};\r\n\r\nexport const getAvailablePlugins = (): Promise<s.TPlugin[]> => {\r\n  return request.get(endpoints.plugins());\r\n};\r\n\r\nexport const updateUserPlugins = (payload: t.TUpdateUserPlugins) => {\r\n  return request.post(endpoints.userPlugins(), payload);\r\n};\r\n\r\nexport const reinitializeMCPServer = (serverName: string) => {\r\n  return request.post(endpoints.mcpReinitialize(serverName));\r\n};\r\n\r\nexport const getMCPConnectionStatus = (): Promise<q.MCPConnectionStatusResponse> => {\r\n  return request.get(endpoints.mcpConnectionStatus());\r\n};\r\n\r\nexport const getMCPServerConnectionStatus = (\r\n  serverName: string,\r\n): Promise<q.MCPServerConnectionStatusResponse> => {\r\n  return request.get(endpoints.mcpServerConnectionStatus(serverName));\r\n};\r\n\r\nexport const getMCPAuthValues = (serverName: string): Promise<q.MCPAuthValuesResponse> => {\r\n  return request.get(endpoints.mcpAuthValues(serverName));\r\n};\r\n\r\nexport function cancelMCPOAuth(serverName: string): Promise<m.CancelMCPOAuthResponse> {\r\n  return request.post(endpoints.cancelMCPOAuth(serverName), {});\r\n}\r\n\r\n/* Config */\r\n\r\nexport const getStartupConfig = (): Promise<\r\n  config.TStartupConfig & {\r\n    mcpCustomUserVars?: Record<string, { title: string; description: string }>;\r\n  }\r\n> => {\r\n  return request.get(endpoints.config());\r\n};\r\n\r\nexport const getAIEndpoints = (): Promise<t.TEndpointsConfig> => {\r\n  return request.get(endpoints.aiEndpoints());\r\n};\r\n\r\nexport const getModels = async (): Promise<t.TModelsConfig> => {\r\n  return request.get(endpoints.models());\r\n};\r\n\r\n/* Assistants */\r\n\r\nexport const createAssistant = ({\r\n  version,\r\n  ...data\r\n}: a.AssistantCreateParams): Promise<a.Assistant> => {\r\n  return request.post(endpoints.assistants({ version }), data);\r\n};\r\n\r\nexport const getAssistantById = ({\r\n  endpoint,\r\n  assistant_id,\r\n  version,\r\n}: {\r\n  endpoint: s.AssistantsEndpoint;\r\n  assistant_id: string;\r\n  version: number | string | number;\r\n}): Promise<a.Assistant> => {\r\n  return request.get(\r\n    endpoints.assistants({\r\n      path: assistant_id,\r\n      endpoint,\r\n      version,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const updateAssistant = ({\r\n  assistant_id,\r\n  data,\r\n  version,\r\n}: {\r\n  assistant_id: string;\r\n  data: a.AssistantUpdateParams;\r\n  version: number | string;\r\n}): Promise<a.Assistant> => {\r\n  return request.patch(\r\n    endpoints.assistants({\r\n      path: assistant_id,\r\n      version,\r\n    }),\r\n    data,\r\n  );\r\n};\r\n\r\nexport const deleteAssistant = ({\r\n  assistant_id,\r\n  model,\r\n  endpoint,\r\n  version,\r\n}: m.DeleteAssistantBody & { version: number | string }): Promise<void> => {\r\n  return request.delete(\r\n    endpoints.assistants({\r\n      path: assistant_id,\r\n      options: { model, endpoint },\r\n      version,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const listAssistants = (\r\n  params: a.AssistantListParams,\r\n  version: number | string,\r\n): Promise<a.AssistantListResponse> => {\r\n  return request.get(\r\n    endpoints.assistants({\r\n      version,\r\n      options: params,\r\n    }),\r\n  );\r\n};\r\n\r\nexport function getAssistantDocs({\r\n  endpoint,\r\n  version,\r\n}: {\r\n  endpoint: s.AssistantsEndpoint | string;\r\n  version: number | string;\r\n}): Promise<a.AssistantDocument[]> {\r\n  if (!s.isAssistantsEndpoint(endpoint)) {\r\n    return Promise.resolve([]);\r\n  }\r\n  return request.get(\r\n    endpoints.assistants({\r\n      path: 'documents',\r\n      version,\r\n      options: { endpoint },\r\n      endpoint: endpoint as s.AssistantsEndpoint,\r\n    }),\r\n  );\r\n}\r\n\r\n/* Tools */\r\n\r\nexport const getAvailableTools = (\r\n  _endpoint: s.AssistantsEndpoint | s.EModelEndpoint.agents,\r\n  version?: number | string,\r\n): Promise<s.TPlugin[]> => {\r\n  let path = '';\r\n  if (s.isAssistantsEndpoint(_endpoint)) {\r\n    const endpoint = _endpoint as s.AssistantsEndpoint;\r\n    path = endpoints.assistants({\r\n      path: 'tools',\r\n      endpoint: endpoint,\r\n      version: version ?? config.defaultAssistantsVersion[endpoint],\r\n    });\r\n  } else {\r\n    path = endpoints.agents({\r\n      path: 'tools',\r\n    });\r\n  }\r\n\r\n  return request.get(path);\r\n};\r\n\r\n/* MCP Tools - Decoupled from regular tools */\r\n\r\nexport const getMCPTools = (): Promise<q.MCPServersResponse> => {\r\n  return request.get(endpoints.mcp.tools);\r\n};\r\n\r\nexport const getVerifyAgentToolAuth = (\r\n  params: q.VerifyToolAuthParams,\r\n): Promise<q.VerifyToolAuthResponse> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: `tools/${params.toolId}/auth`,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const callTool = <T extends m.ToolId>({\r\n  toolId,\r\n  toolParams,\r\n}: {\r\n  toolId: T;\r\n  toolParams: m.ToolParams<T>;\r\n}): Promise<m.ToolCallResponse> => {\r\n  return request.post(\r\n    endpoints.agents({\r\n      path: `tools/${toolId}/call`,\r\n    }),\r\n    toolParams,\r\n  );\r\n};\r\n\r\nexport const getToolCalls = (params: q.GetToolCallParams): Promise<q.ToolCallResults> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: 'tools/calls',\r\n      options: params,\r\n    }),\r\n  );\r\n};\r\n\r\n/* Files */\r\n\r\nexport const getFiles = (): Promise<f.TFile[]> => {\r\n  return request.get(endpoints.files());\r\n};\r\n\r\nexport const getAgentFiles = (agentId: string): Promise<f.TFile[]> => {\r\n  return request.get(endpoints.agentFiles(agentId));\r\n};\r\n\r\nexport const getFileConfig = (): Promise<f.FileConfig> => {\r\n  return request.get(`${endpoints.files()}/config`);\r\n};\r\n\r\nexport const uploadImage = (\r\n  data: FormData,\r\n  signal?: AbortSignal | null,\r\n): Promise<f.TFileUpload> => {\r\n  const requestConfig = signal ? { signal } : undefined;\r\n  return request.postMultiPart(endpoints.images(), data, requestConfig);\r\n};\r\n\r\nexport const uploadFile = (data: FormData, signal?: AbortSignal | null): Promise<f.TFileUpload> => {\r\n  const requestConfig = signal ? { signal } : undefined;\r\n  return request.postMultiPart(endpoints.files(), data, requestConfig);\r\n};\r\n\r\n/* actions */\r\n\r\nexport const updateAction = (data: m.UpdateActionVariables): Promise<m.UpdateActionResponse> => {\r\n  const { assistant_id, version, ...body } = data;\r\n  return request.post(\r\n    endpoints.assistants({\r\n      path: `actions/${assistant_id}`,\r\n      version,\r\n    }),\r\n    body,\r\n  );\r\n};\r\n\r\nexport function getActions(): Promise<ag.Action[]> {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: 'actions',\r\n    }),\r\n  );\r\n}\r\n\r\nexport const deleteAction = async ({\r\n  assistant_id,\r\n  action_id,\r\n  model,\r\n  version,\r\n  endpoint,\r\n}: m.DeleteActionVariables & { version: number | string }): Promise<void> =>\r\n  request.delete(\r\n    endpoints.assistants({\r\n      path: `actions/${assistant_id}/${action_id}/${model}`,\r\n      version,\r\n      endpoint,\r\n    }),\r\n  );\r\n\r\n/**\r\n * Agents\r\n */\r\n\r\nexport const createAgent = ({ ...data }: a.AgentCreateParams): Promise<a.Agent> => {\r\n  return request.post(endpoints.agents({}), data);\r\n};\r\n\r\nexport const getAgentById = ({ agent_id }: { agent_id: string }): Promise<a.Agent> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: agent_id,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const getExpandedAgentById = ({ agent_id }: { agent_id: string }): Promise<a.Agent> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: `${agent_id}/expanded`,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const updateAgent = ({\r\n  agent_id,\r\n  data,\r\n}: {\r\n  agent_id: string;\r\n  data: a.AgentUpdateParams;\r\n}): Promise<a.Agent> => {\r\n  return request.patch(\r\n    endpoints.agents({\r\n      path: agent_id,\r\n    }),\r\n    data,\r\n  );\r\n};\r\n\r\nexport const duplicateAgent = ({\r\n  agent_id,\r\n}: m.DuplicateAgentBody): Promise<{ agent: a.Agent; actions: ag.Action[] }> => {\r\n  return request.post(\r\n    endpoints.agents({\r\n      path: `${agent_id}/duplicate`,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const deleteAgent = ({ agent_id }: m.DeleteAgentBody): Promise<void> => {\r\n  return request.delete(\r\n    endpoints.agents({\r\n      path: agent_id,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const listAgents = (params: a.AgentListParams): Promise<a.AgentListResponse> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      options: params,\r\n    }),\r\n  );\r\n};\r\n\r\nexport const revertAgentVersion = ({\r\n  agent_id,\r\n  version_index,\r\n}: {\r\n  agent_id: string;\r\n  version_index: number;\r\n}): Promise<a.Agent> => request.post(endpoints.revertAgentVersion(agent_id), { version_index });\r\n\r\n/* Marketplace */\r\n\r\n/**\r\n * Get agent categories with counts for marketplace tabs\r\n */\r\nexport const getAgentCategories = (): Promise<t.TMarketplaceCategory[]> => {\r\n  return request.get(endpoints.agents({ path: 'categories' }));\r\n};\r\n\r\n/**\r\n * Unified marketplace agents endpoint with query string controls\r\n */\r\nexport const getMarketplaceAgents = (params: {\r\n  requiredPermission: number;\r\n  category?: string;\r\n  search?: string;\r\n  limit?: number;\r\n  cursor?: string;\r\n  promoted?: 0 | 1;\r\n}): Promise<a.AgentListResponse> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      // path: 'marketplace',\r\n      options: params,\r\n    }),\r\n  );\r\n};\r\n\r\n/* Tools */\r\n\r\nexport const getAvailableAgentTools = (): Promise<s.TPlugin[]> => {\r\n  return request.get(\r\n    endpoints.agents({\r\n      path: 'tools',\r\n    }),\r\n  );\r\n};\r\n\r\n/* Actions */\r\n\r\nexport const updateAgentAction = (\r\n  data: m.UpdateAgentActionVariables,\r\n): Promise<m.UpdateAgentActionResponse> => {\r\n  const { agent_id, ...body } = data;\r\n  return request.post(\r\n    endpoints.agents({\r\n      path: `actions/${agent_id}`,\r\n    }),\r\n    body,\r\n  );\r\n};\r\n\r\nexport const deleteAgentAction = async ({\r\n  agent_id,\r\n  action_id,\r\n}: m.DeleteAgentActionVariables): Promise<void> =>\r\n  request.delete(\r\n    endpoints.agents({\r\n      path: `actions/${agent_id}/${action_id}`,\r\n    }),\r\n  );\r\n\r\n/**\r\n * Imports a conversations file.\r\n *\r\n * @param data - The FormData containing the file to import.\r\n * @returns A Promise that resolves to the import start response.\r\n */\r\nexport const importConversationsFile = (data: FormData): Promise<t.TImportResponse> => {\r\n  return request.postMultiPart(endpoints.importConversation(), data);\r\n};\r\n\r\nexport const uploadAvatar = (data: FormData): Promise<f.AvatarUploadResponse> => {\r\n  return request.postMultiPart(endpoints.avatar(), data);\r\n};\r\n\r\nexport const uploadAssistantAvatar = (data: m.AssistantAvatarVariables): Promise<a.Assistant> => {\r\n  return request.postMultiPart(\r\n    endpoints.assistants({\r\n      isAvatar: true,\r\n      path: `${data.assistant_id}/avatar`,\r\n      options: { model: data.model, endpoint: data.endpoint },\r\n      version: data.version,\r\n    }),\r\n    data.formData,\r\n  );\r\n};\r\n\r\nexport const uploadAgentAvatar = (data: m.AgentAvatarVariables): Promise<a.Agent> => {\r\n  return request.postMultiPart(\r\n    `${endpoints.images()}/agents/${data.agent_id}/avatar`,\r\n    data.formData,\r\n  );\r\n};\r\n\r\nexport const getFileDownload = async (userId: string, file_id: string): Promise<AxiosResponse> => {\r\n  return request.getResponse(`${endpoints.files()}/download/${userId}/${file_id}`, {\r\n    responseType: 'blob',\r\n    headers: {\r\n      Accept: 'application/octet-stream',\r\n    },\r\n  });\r\n};\r\n\r\nexport const getCodeOutputDownload = async (url: string): Promise<AxiosResponse> => {\r\n  return request.getResponse(url, {\r\n    responseType: 'blob',\r\n    headers: {\r\n      Accept: 'application/octet-stream',\r\n    },\r\n  });\r\n};\r\n\r\nexport const deleteFiles = async (payload: {\r\n  files: f.BatchFile[];\r\n  agent_id?: string;\r\n  assistant_id?: string;\r\n  tool_resource?: a.EToolResources;\r\n}): Promise<f.DeleteFilesResponse> =>\r\n  request.deleteWithOptions(endpoints.files(), {\r\n    data: payload,\r\n  });\r\n\r\n/* Speech */\r\n\r\nexport const speechToText = (data: FormData): Promise<f.SpeechToTextResponse> => {\r\n  return request.postMultiPart(endpoints.speechToText(), data);\r\n};\r\n\r\nexport const textToSpeech = (data: FormData): Promise<ArrayBuffer> => {\r\n  return request.postTTS(endpoints.textToSpeechManual(), data);\r\n};\r\n\r\nexport const getVoices = (): Promise<f.VoiceResponse> => {\r\n  return request.get(endpoints.textToSpeechVoices());\r\n};\r\n\r\nexport const getCustomConfigSpeech = (): Promise<t.TCustomConfigSpeechResponse> => {\r\n  return request.get(endpoints.getCustomConfigSpeech());\r\n};\r\n\r\n/* conversations */\r\n\r\nexport function duplicateConversation(\r\n  payload: t.TDuplicateConvoRequest,\r\n): Promise<t.TDuplicateConvoResponse> {\r\n  return request.post(endpoints.duplicateConversation(), payload);\r\n}\r\n\r\nexport function forkConversation(payload: t.TForkConvoRequest): Promise<t.TForkConvoResponse> {\r\n  return request.post(endpoints.forkConversation(), payload);\r\n}\r\n\r\nexport function deleteConversation(payload: t.TDeleteConversationRequest) {\r\n  return request.deleteWithOptions(endpoints.deleteConversation(), { data: { arg: payload } });\r\n}\r\n\r\nexport function clearAllConversations(): Promise<unknown> {\r\n  return request.delete(endpoints.deleteAllConversation());\r\n}\r\n\r\nexport const listConversations = (\r\n  params?: q.ConversationListParams,\r\n): Promise<q.ConversationListResponse> => {\r\n  return request.get(endpoints.conversations(params ?? {}));\r\n};\r\n\r\nexport function getConversations(cursor: string): Promise<t.TGetConversationsResponse> {\r\n  return request.get(endpoints.conversations({ cursor }));\r\n}\r\n\r\nexport function getConversationById(id: string): Promise<s.TConversation> {\r\n  return request.get(endpoints.conversationById(id));\r\n}\r\n\r\nexport function updateConversation(\r\n  payload: t.TUpdateConversationRequest,\r\n): Promise<t.TUpdateConversationResponse> {\r\n  return request.post(endpoints.updateConversation(), { arg: payload });\r\n}\r\n\r\nexport function archiveConversation(\r\n  payload: t.TArchiveConversationRequest,\r\n): Promise<t.TArchiveConversationResponse> {\r\n  return request.post(endpoints.updateConversation(), { arg: payload });\r\n}\r\n\r\nexport function genTitle(payload: m.TGenTitleRequest): Promise<m.TGenTitleResponse> {\r\n  return request.post(endpoints.genTitle(), payload);\r\n}\r\n\r\nexport const listMessages = (params?: q.MessagesListParams): Promise<q.MessagesListResponse> => {\r\n  return request.get(endpoints.messages(params ?? {}));\r\n};\r\n\r\nexport function updateMessage(payload: t.TUpdateMessageRequest): Promise<unknown> {\r\n  const { conversationId, messageId, text } = payload;\r\n  if (!conversationId) {\r\n    throw new Error('conversationId is required');\r\n  }\r\n\r\n  return request.put(endpoints.messages({ conversationId, messageId }), { text });\r\n}\r\n\r\nexport function updateMessageContent(payload: t.TUpdateMessageContent): Promise<unknown> {\r\n  const { conversationId, messageId, index, text } = payload;\r\n  if (!conversationId) {\r\n    throw new Error('conversationId is required');\r\n  }\r\n\r\n  return request.put(endpoints.messages({ conversationId, messageId }), { text, index });\r\n}\r\n\r\nexport const editArtifact = async ({\r\n  messageId,\r\n  ...params\r\n}: m.TEditArtifactRequest): Promise<m.TEditArtifactResponse> => {\r\n  return request.post(endpoints.messagesArtifacts(messageId), params);\r\n};\r\n\r\nexport function getMessagesByConvoId(conversationId: string): Promise<s.TMessage[]> {\r\n  if (\r\n    conversationId === config.Constants.NEW_CONVO ||\r\n    conversationId === config.Constants.PENDING_CONVO\r\n  ) {\r\n    return Promise.resolve([]);\r\n  }\r\n  return request.get(endpoints.messages({ conversationId }));\r\n}\r\n\r\nexport function getPrompt(id: string): Promise<{ prompt: t.TPrompt }> {\r\n  return request.get(endpoints.getPrompt(id));\r\n}\r\n\r\nexport function getPrompts(filter: t.TPromptsWithFilterRequest): Promise<t.TPrompt[]> {\r\n  return request.get(endpoints.getPromptsWithFilters(filter));\r\n}\r\n\r\nexport function getAllPromptGroups(): Promise<q.AllPromptGroupsResponse> {\r\n  return request.get(endpoints.getAllPromptGroups());\r\n}\r\n\r\nexport function getPromptGroups(\r\n  filter: t.TPromptGroupsWithFilterRequest,\r\n): Promise<t.PromptGroupListResponse> {\r\n  return request.get(endpoints.getPromptGroupsWithFilters(filter));\r\n}\r\n\r\nexport function getPromptGroup(id: string): Promise<t.TPromptGroup> {\r\n  return request.get(endpoints.getPromptGroup(id));\r\n}\r\n\r\nexport function createPrompt(payload: t.TCreatePrompt): Promise<t.TCreatePromptResponse> {\r\n  return request.post(endpoints.postPrompt(), payload);\r\n}\r\n\r\nexport function addPromptToGroup(\r\n  groupId: string,\r\n  payload: t.TCreatePrompt,\r\n): Promise<t.TCreatePromptResponse> {\r\n  return request.post(endpoints.addPromptToGroup(groupId), payload);\r\n}\r\n\r\nexport function updatePromptGroup(\r\n  variables: t.TUpdatePromptGroupVariables,\r\n): Promise<t.TUpdatePromptGroupResponse> {\r\n  return request.patch(endpoints.updatePromptGroup(variables.id), variables.payload);\r\n}\r\n\r\nexport function deletePrompt(payload: t.TDeletePromptVariables): Promise<t.TDeletePromptResponse> {\r\n  return request.delete(endpoints.deletePrompt(payload));\r\n}\r\n\r\nexport function makePromptProduction(id: string): Promise<t.TMakePromptProductionResponse> {\r\n  return request.patch(endpoints.updatePromptTag(id));\r\n}\r\n\r\nexport function updatePromptLabels(\r\n  variables: t.TUpdatePromptLabelsRequest,\r\n): Promise<t.TUpdatePromptLabelsResponse> {\r\n  return request.patch(endpoints.updatePromptLabels(variables.id), variables.payload);\r\n}\r\n\r\nexport function deletePromptGroup(id: string): Promise<t.TDeletePromptGroupResponse> {\r\n  return request.delete(endpoints.deletePromptGroup(id));\r\n}\r\n\r\nexport function getCategories(): Promise<t.TGetCategoriesResponse> {\r\n  return request.get(endpoints.getCategories());\r\n}\r\n\r\nexport function getRandomPrompts(\r\n  variables: t.TGetRandomPromptsRequest,\r\n): Promise<t.TGetRandomPromptsResponse> {\r\n  return request.get(endpoints.getRandomPrompts(variables.limit, variables.skip));\r\n}\r\n\r\n/* Roles */\r\nexport function getRole(roleName: string): Promise<r.TRole> {\r\n  return request.get(endpoints.getRole(roleName));\r\n}\r\n\r\nexport function updatePromptPermissions(\r\n  variables: m.UpdatePromptPermVars,\r\n): Promise<m.UpdatePermResponse> {\r\n  return request.put(endpoints.updatePromptPermissions(variables.roleName), variables.updates);\r\n}\r\n\r\nexport function updateAgentPermissions(\r\n  variables: m.UpdateAgentPermVars,\r\n): Promise<m.UpdatePermResponse> {\r\n  return request.put(endpoints.updateAgentPermissions(variables.roleName), variables.updates);\r\n}\r\n\r\nexport function updateMemoryPermissions(\r\n  variables: m.UpdateMemoryPermVars,\r\n): Promise<m.UpdatePermResponse> {\r\n  return request.put(endpoints.updateMemoryPermissions(variables.roleName), variables.updates);\r\n}\r\n\r\nexport function updatePeoplePickerPermissions(\r\n  variables: m.UpdatePeoplePickerPermVars,\r\n): Promise<m.UpdatePermResponse> {\r\n  return request.put(\r\n    endpoints.updatePeoplePickerPermissions(variables.roleName),\r\n    variables.updates,\r\n  );\r\n}\r\n\r\nexport function updateMarketplacePermissions(\r\n  variables: m.UpdateMarketplacePermVars,\r\n): Promise<m.UpdatePermResponse> {\r\n  return request.put(endpoints.updateMarketplacePermissions(variables.roleName), variables.updates);\r\n}\r\n\r\n/* Tags */\r\nexport function getConversationTags(): Promise<t.TConversationTagsResponse> {\r\n  return request.get(endpoints.conversationTags());\r\n}\r\n\r\nexport function createConversationTag(\r\n  payload: t.TConversationTagRequest,\r\n): Promise<t.TConversationTagResponse> {\r\n  return request.post(endpoints.conversationTags(), payload);\r\n}\r\n\r\nexport function updateConversationTag(\r\n  tag: string,\r\n  payload: t.TConversationTagRequest,\r\n): Promise<t.TConversationTagResponse> {\r\n  return request.put(endpoints.conversationTags(tag), payload);\r\n}\r\nexport function deleteConversationTag(tag: string): Promise<t.TConversationTagResponse> {\r\n  return request.delete(endpoints.conversationTags(tag));\r\n}\r\n\r\nexport function addTagToConversation(\r\n  conversationId: string,\r\n  payload: t.TTagConversationRequest,\r\n): Promise<t.TTagConversationResponse> {\r\n  return request.put(endpoints.addTagToConversation(conversationId), payload);\r\n}\r\nexport function rebuildConversationTags(): Promise<t.TConversationTagsResponse> {\r\n  return request.post(endpoints.conversationTags('rebuild'));\r\n}\r\n\r\nexport function healthCheck(): Promise<string> {\r\n  return request.get(endpoints.health());\r\n}\r\n\r\nexport function getUserTerms(): Promise<t.TUserTermsResponse> {\r\n  return request.get(endpoints.userTerms());\r\n}\r\n\r\nexport function acceptTerms(): Promise<t.TAcceptTermsResponse> {\r\n  return request.post(endpoints.acceptUserTerms());\r\n}\r\n\r\nexport function getBanner(): Promise<t.TBannerResponse> {\r\n  return request.get(endpoints.banner());\r\n}\r\n\r\nexport function updateFeedback(\r\n  conversationId: string,\r\n  messageId: string,\r\n  payload: t.TUpdateFeedbackRequest,\r\n): Promise<t.TUpdateFeedbackResponse> {\r\n  return request.put(endpoints.feedback(conversationId, messageId), payload);\r\n}\r\n\r\n// 2FA\r\nexport function enableTwoFactor(): Promise<t.TEnable2FAResponse> {\r\n  return request.get(endpoints.enableTwoFactor());\r\n}\r\n\r\nexport function verifyTwoFactor(payload: t.TVerify2FARequest): Promise<t.TVerify2FAResponse> {\r\n  return request.post(endpoints.verifyTwoFactor(), payload);\r\n}\r\n\r\nexport function confirmTwoFactor(payload: t.TVerify2FARequest): Promise<t.TVerify2FAResponse> {\r\n  return request.post(endpoints.confirmTwoFactor(), payload);\r\n}\r\n\r\nexport function disableTwoFactor(payload?: t.TDisable2FARequest): Promise<t.TDisable2FAResponse> {\r\n  return request.post(endpoints.disableTwoFactor(), payload);\r\n}\r\n\r\nexport function regenerateBackupCodes(): Promise<t.TRegenerateBackupCodesResponse> {\r\n  return request.post(endpoints.regenerateBackupCodes());\r\n}\r\n\r\nexport function verifyTwoFactorTemp(\r\n  payload: t.TVerify2FATempRequest,\r\n): Promise<t.TVerify2FATempResponse> {\r\n  return request.post(endpoints.verifyTwoFactorTemp(), payload);\r\n}\r\n\r\n/* Memories */\r\nexport const getMemories = (): Promise<q.MemoriesResponse> => {\r\n  return request.get(endpoints.memories());\r\n};\r\n\r\nexport const deleteMemory = (key: string): Promise<void> => {\r\n  return request.delete(endpoints.memory(key));\r\n};\r\n\r\nexport const updateMemory = (\r\n  key: string,\r\n  value: string,\r\n  originalKey?: string,\r\n): Promise<q.TUserMemory> => {\r\n  return request.patch(endpoints.memory(originalKey || key), { key, value });\r\n};\r\n\r\nexport const updateMemoryPreferences = (preferences: {\r\n  memories: boolean;\r\n}): Promise<{ updated: boolean; preferences: { memories: boolean } }> => {\r\n  return request.patch(endpoints.memoryPreferences(), preferences);\r\n};\r\n\r\nexport const createMemory = (data: {\r\n  key: string;\r\n  value: string;\r\n}): Promise<{ created: boolean; memory: q.TUserMemory }> => {\r\n  return request.post(endpoints.memories(), data);\r\n};\r\n\r\nexport function searchPrincipals(\r\n  params: q.PrincipalSearchParams,\r\n): Promise<q.PrincipalSearchResponse> {\r\n  return request.get(endpoints.searchPrincipals(params));\r\n}\r\n\r\nexport function getAccessRoles(\r\n  resourceType: permissions.ResourceType,\r\n): Promise<q.AccessRolesResponse> {\r\n  return request.get(endpoints.getAccessRoles(resourceType));\r\n}\r\n\r\nexport function getResourcePermissions(\r\n  resourceType: permissions.ResourceType,\r\n  resourceId: string,\r\n): Promise<permissions.TGetResourcePermissionsResponse> {\r\n  return request.get(endpoints.getResourcePermissions(resourceType, resourceId));\r\n}\r\n\r\nexport function updateResourcePermissions(\r\n  resourceType: permissions.ResourceType,\r\n  resourceId: string,\r\n  data: permissions.TUpdateResourcePermissionsRequest,\r\n): Promise<permissions.TUpdateResourcePermissionsResponse> {\r\n  return request.put(endpoints.updateResourcePermissions(resourceType, resourceId), data);\r\n}\r\n\r\nexport function getEffectivePermissions(\r\n  resourceType: permissions.ResourceType,\r\n  resourceId: string,\r\n): Promise<permissions.TEffectivePermissionsResponse> {\r\n  return request.get(endpoints.getEffectivePermissions(resourceType, resourceId));\r\n}\r\n\r\n// SharePoint Graph API Token\r\nexport function getGraphApiToken(params: q.GraphTokenParams): Promise<q.GraphTokenResponse> {\r\n  return request.get(endpoints.graphToken(params.scopes));\r\n}\r\n\r\nexport function getDomainServerBaseUrl(): string {\r\n  return `${endpoints.apiBaseUrl()}/api`;\r\n}\r\n","import { z } from 'zod';\r\nimport _axios from 'axios';\r\nimport { URL } from 'url';\r\nimport crypto from 'crypto';\r\nimport { load } from 'js-yaml';\r\nimport type { ActionMetadata, ActionMetadataRuntime } from './types/agents';\r\nimport type { FunctionTool, Schema, Reference } from './types/assistants';\r\nimport { AuthTypeEnum, AuthorizationTypeEnum } from './types/agents';\r\nimport type { OpenAPIV3 } from 'openapi-types';\r\nimport { Tools } from './types/assistants';\r\n\r\nexport type ParametersSchema = {\r\n  type: string;\r\n  properties: Record<string, Reference | Schema>;\r\n  required: string[];\r\n  additionalProperties?: boolean;\r\n};\r\n\r\nexport type OpenAPISchema = OpenAPIV3.SchemaObject &\r\n  ParametersSchema & {\r\n    items?: OpenAPIV3.ReferenceObject | OpenAPIV3.SchemaObject;\r\n  };\r\n\r\nexport type ApiKeyCredentials = {\r\n  api_key: string;\r\n  custom_auth_header?: string;\r\n  authorization_type?: AuthorizationTypeEnum;\r\n};\r\n\r\nexport type OAuthCredentials = {\r\n  tokenUrl: string;\r\n  clientId: string;\r\n  clientSecret: string;\r\n  scope: string;\r\n};\r\n\r\nexport type Credentials = ApiKeyCredentials | OAuthCredentials;\r\n\r\ntype MediaTypeObject =\r\n  | undefined\r\n  | {\r\n      [media: string]: OpenAPIV3.MediaTypeObject | undefined;\r\n    };\r\n\r\ntype RequestBodyObject = Omit<OpenAPIV3.RequestBodyObject, 'content'> & {\r\n  content: MediaTypeObject;\r\n};\r\n\r\nexport function sha1(input: string) {\r\n  return crypto.createHash('sha1').update(input).digest('hex');\r\n}\r\n\r\nexport function createURL(domain: string, path: string) {\r\n  const cleanDomain = domain.replace(/\\/$/, '');\r\n  const cleanPath = path.replace(/^\\//, '');\r\n  const fullURL = `${cleanDomain}/${cleanPath}`;\r\n  return new URL(fullURL).toString();\r\n}\r\n\r\nconst schemaTypeHandlers: Record<string, (schema: OpenAPISchema) => z.ZodTypeAny> = {\r\n  string: (schema) => {\r\n    if (schema.enum) {\r\n      return z.enum(schema.enum as [string, ...string[]]);\r\n    }\r\n\r\n    let stringSchema = z.string();\r\n    if (schema.minLength !== undefined) {\r\n      stringSchema = stringSchema.min(schema.minLength);\r\n    }\r\n    if (schema.maxLength !== undefined) {\r\n      stringSchema = stringSchema.max(schema.maxLength);\r\n    }\r\n    return stringSchema;\r\n  },\r\n  number: (schema) => {\r\n    let numberSchema = z.number();\r\n    if (schema.minimum !== undefined) {\r\n      numberSchema = numberSchema.min(schema.minimum);\r\n    }\r\n    if (schema.maximum !== undefined) {\r\n      numberSchema = numberSchema.max(schema.maximum);\r\n    }\r\n    return numberSchema;\r\n  },\r\n  integer: (schema) => (schemaTypeHandlers.number(schema) as z.ZodNumber).int(),\r\n  boolean: () => z.boolean(),\r\n  array: (schema) => {\r\n    if (schema.items) {\r\n      const zodSchema = openAPISchemaToZod(schema.items as OpenAPISchema);\r\n      if (zodSchema) {\r\n        return z.array(zodSchema);\r\n      }\r\n\r\n      return z.array(z.unknown());\r\n    }\r\n    return z.array(z.unknown());\r\n  },\r\n  object: (schema) => {\r\n    const shape: { [key: string]: z.ZodTypeAny } = {};\r\n    if (schema.properties) {\r\n      Object.entries(schema.properties).forEach(([key, value]) => {\r\n        const zodSchema = openAPISchemaToZod(value as OpenAPISchema);\r\n        shape[key] = zodSchema || z.unknown();\r\n        if (schema.required && schema.required.includes(key)) {\r\n          shape[key] = shape[key].describe(value.description || '');\r\n        } else {\r\n          shape[key] = shape[key].optional().describe(value.description || '');\r\n        }\r\n      });\r\n    }\r\n    return z.object(shape);\r\n  },\r\n};\r\n\r\nfunction openAPISchemaToZod(schema: OpenAPISchema): z.ZodTypeAny | undefined {\r\n  if (schema.type === 'object' && Object.keys(schema.properties || {}).length === 0) {\r\n    return undefined;\r\n  }\r\n\r\n  const handler = schemaTypeHandlers[schema.type as string] || (() => z.unknown());\r\n  return handler(schema);\r\n}\r\n\r\n/**\r\n * Class representing a function signature.\r\n */\r\nexport class FunctionSignature {\r\n  name: string;\r\n  description: string;\r\n  parameters: ParametersSchema;\r\n  strict: boolean;\r\n\r\n  constructor(name: string, description: string, parameters: ParametersSchema, strict?: boolean) {\r\n    this.name = name;\r\n    this.description = description;\r\n    this.parameters = parameters;\r\n    this.strict = strict ?? false;\r\n  }\r\n\r\n  toObjectTool(): FunctionTool {\r\n    const parameters = {\r\n      ...this.parameters,\r\n      additionalProperties: this.strict ? false : undefined,\r\n    };\r\n\r\n    return {\r\n      type: Tools.function,\r\n      function: {\r\n        name: this.name,\r\n        description: this.description,\r\n        parameters,\r\n        ...(this.strict ? { strict: this.strict } : {}),\r\n      },\r\n    };\r\n  }\r\n}\r\n\r\nclass RequestConfig {\r\n  constructor(\r\n    readonly domain: string,\r\n    readonly basePath: string,\r\n    readonly method: string,\r\n    readonly operation: string,\r\n    readonly isConsequential: boolean,\r\n    readonly contentType: string,\r\n    readonly parameterLocations?: Record<string, 'query' | 'path' | 'header' | 'body'>,\r\n  ) {}\r\n}\r\n\r\nclass RequestExecutor {\r\n  path: string;\r\n  params?: Record<string, unknown>;\r\n  private operationHash?: string;\r\n  private authHeaders: Record<string, string> = {};\r\n  private authToken?: string;\r\n\r\n  constructor(private config: RequestConfig) {\r\n    this.path = config.basePath;\r\n  }\r\n\r\n  setParams(params: Record<string, unknown>) {\r\n    this.operationHash = sha1(JSON.stringify(params));\r\n    this.params = { ...params } as Record<string, unknown>;\r\n    if (this.config.parameterLocations) {\r\n      //Substituting Path Parameters:\r\n      for (const [key, value] of Object.entries(params)) {\r\n        if (this.config.parameterLocations[key] === 'path') {\r\n          const paramPattern = `{${key}}`;\r\n          if (this.path.includes(paramPattern)) {\r\n            this.path = this.path.replace(paramPattern, encodeURIComponent(String(value)));\r\n            delete this.params[key];\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      // Fallback: if no locations are defined, perform path substitution for all keys.\r\n      for (const [key, value] of Object.entries(params)) {\r\n        const paramPattern = `{${key}}`;\r\n        if (this.path.includes(paramPattern)) {\r\n          this.path = this.path.replace(paramPattern, encodeURIComponent(String(value)));\r\n          delete this.params[key];\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  async setAuth(metadata: ActionMetadataRuntime) {\r\n    if (!metadata.auth) {\r\n      return this;\r\n    }\r\n\r\n    const {\r\n      type,\r\n      /* API Key */\r\n      authorization_type,\r\n      custom_auth_header,\r\n      /* OAuth */\r\n      authorization_url,\r\n      client_url,\r\n      scope,\r\n      token_exchange_method,\r\n    } = metadata.auth;\r\n\r\n    const {\r\n      /* API Key */\r\n      api_key,\r\n      /* OAuth */\r\n      oauth_client_id,\r\n      oauth_client_secret,\r\n      oauth_token_expires_at,\r\n      oauth_access_token = '',\r\n    } = metadata;\r\n\r\n    const isApiKey = api_key != null && api_key.length > 0 && type === AuthTypeEnum.ServiceHttp;\r\n    const isOAuth = !!(\r\n      oauth_client_id != null &&\r\n      oauth_client_id &&\r\n      oauth_client_secret != null &&\r\n      oauth_client_secret &&\r\n      type === AuthTypeEnum.OAuth &&\r\n      authorization_url != null &&\r\n      authorization_url &&\r\n      client_url != null &&\r\n      client_url &&\r\n      scope != null &&\r\n      scope &&\r\n      token_exchange_method\r\n    );\r\n\r\n    if (isApiKey && authorization_type === AuthorizationTypeEnum.Basic) {\r\n      const basicToken = Buffer.from(api_key).toString('base64');\r\n      this.authHeaders['Authorization'] = `Basic ${basicToken}`;\r\n    } else if (isApiKey && authorization_type === AuthorizationTypeEnum.Bearer) {\r\n      this.authHeaders['Authorization'] = `Bearer ${api_key}`;\r\n    } else if (\r\n      isApiKey &&\r\n      authorization_type === AuthorizationTypeEnum.Custom &&\r\n      custom_auth_header != null &&\r\n      custom_auth_header\r\n    ) {\r\n      this.authHeaders[custom_auth_header] = api_key;\r\n    } else if (isOAuth) {\r\n      // TODO: maybe doing it in a different way later on. but we want that the user needs to folllow the oauth flow.\r\n      // If we do not have a valid token, bail or ask user to sign in\r\n      const now = new Date();\r\n\r\n      // 1. Check if token is set\r\n      if (!oauth_access_token) {\r\n        throw new Error('No access token found. Please log in first.');\r\n      }\r\n\r\n      // 2. Check if token is expired\r\n      if (oauth_token_expires_at && now >= new Date(oauth_token_expires_at)) {\r\n        // Optionally check refresh_token logic, or just prompt user to re-login\r\n        throw new Error('Access token is expired. Please re-login.');\r\n      }\r\n\r\n      // If valid, use it\r\n      this.authToken = oauth_access_token;\r\n      this.authHeaders['Authorization'] = `Bearer ${this.authToken}`;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  async execute() {\r\n    const url = createURL(this.config.domain, this.path);\r\n    const headers: Record<string, string> = {\r\n      ...this.authHeaders,\r\n      ...(this.config.contentType ? { 'Content-Type': this.config.contentType } : {}),\r\n    };\r\n    const method = this.config.method.toLowerCase();\r\n    const axios = _axios.create();\r\n\r\n    // Initialize separate containers for query and body parameters.\r\n    const queryParams: Record<string, unknown> = {};\r\n    const bodyParams: Record<string, unknown> = {};\r\n\r\n    if (this.config.parameterLocations && this.params) {\r\n      for (const key of Object.keys(this.params)) {\r\n        // Determine parameter placement; default to \"query\" for GET and \"body\" for others.\r\n        const loc: 'query' | 'path' | 'header' | 'body' =\r\n          this.config.parameterLocations[key] || (method === 'get' ? 'query' : 'body');\r\n\r\n        const val = this.params[key];\r\n        if (loc === 'query') {\r\n          queryParams[key] = val;\r\n        } else if (loc === 'header') {\r\n          headers[key] = String(val);\r\n        } else if (loc === 'body') {\r\n          bodyParams[key] = val;\r\n        }\r\n      }\r\n    } else if (this.params) {\r\n      Object.assign(queryParams, this.params);\r\n      Object.assign(bodyParams, this.params);\r\n    }\r\n\r\n    if (method === 'get') {\r\n      return axios.get(url, { headers, params: queryParams });\r\n    } else if (method === 'post') {\r\n      return axios.post(url, bodyParams, { headers, params: queryParams });\r\n    } else if (method === 'put') {\r\n      return axios.put(url, bodyParams, { headers, params: queryParams });\r\n    } else if (method === 'delete') {\r\n      return axios.delete(url, { headers, data: bodyParams, params: queryParams });\r\n    } else if (method === 'patch') {\r\n      return axios.patch(url, bodyParams, { headers, params: queryParams });\r\n    } else {\r\n      throw new Error(`Unsupported HTTP method: ${method}`);\r\n    }\r\n  }\r\n\r\n  getConfig() {\r\n    return this.config;\r\n  }\r\n}\r\n\r\nexport class ActionRequest {\r\n  private config: RequestConfig;\r\n\r\n  constructor(\r\n    domain: string,\r\n    path: string,\r\n    method: string,\r\n    operation: string,\r\n    isConsequential: boolean,\r\n    contentType: string,\r\n    parameterLocations?: Record<string, 'query' | 'path' | 'header' | 'body'>,\r\n  ) {\r\n    this.config = new RequestConfig(\r\n      domain,\r\n      path,\r\n      method,\r\n      operation,\r\n      isConsequential,\r\n      contentType,\r\n      parameterLocations,\r\n    );\r\n  }\r\n\r\n  // Add getters to maintain backward compatibility\r\n  get domain() {\r\n    return this.config.domain;\r\n  }\r\n  get path() {\r\n    return this.config.basePath;\r\n  }\r\n  get method() {\r\n    return this.config.method;\r\n  }\r\n  get operation() {\r\n    return this.config.operation;\r\n  }\r\n  get isConsequential() {\r\n    return this.config.isConsequential;\r\n  }\r\n  get contentType() {\r\n    return this.config.contentType;\r\n  }\r\n\r\n  createExecutor() {\r\n    return new RequestExecutor(this.config);\r\n  }\r\n\r\n  // Maintain backward compatibility by delegating to a new executor\r\n  setParams(params: Record<string, unknown>) {\r\n    const executor = this.createExecutor();\r\n    executor.setParams(params);\r\n    return executor;\r\n  }\r\n\r\n  async setAuth(metadata: ActionMetadata) {\r\n    const executor = this.createExecutor();\r\n    return executor.setAuth(metadata);\r\n  }\r\n\r\n  async execute() {\r\n    const executor = this.createExecutor();\r\n    return executor.execute();\r\n  }\r\n}\r\n\r\nexport function resolveRef<\r\n  T extends\r\n    | OpenAPIV3.ReferenceObject\r\n    | OpenAPIV3.SchemaObject\r\n    | OpenAPIV3.ParameterObject\r\n    | OpenAPIV3.RequestBodyObject,\r\n>(obj: T, components?: OpenAPIV3.ComponentsObject): Exclude<T, OpenAPIV3.ReferenceObject> {\r\n  if ('$ref' in obj && components) {\r\n    const refPath = obj.$ref.replace(/^#\\/components\\//, '').split('/');\r\n\r\n    let resolved: unknown = components as Record<string, unknown>;\r\n    for (const segment of refPath) {\r\n      if (typeof resolved === 'object' && resolved !== null && segment in resolved) {\r\n        resolved = (resolved as Record<string, unknown>)[segment];\r\n      } else {\r\n        throw new Error(`Could not resolve reference: ${obj.$ref}`);\r\n      }\r\n    }\r\n\r\n    return resolveRef(resolved as typeof obj, components) as Exclude<T, OpenAPIV3.ReferenceObject>;\r\n  }\r\n\r\n  return obj as Exclude<T, OpenAPIV3.ReferenceObject>;\r\n}\r\n\r\nfunction sanitizeOperationId(input: string) {\r\n  return input.replace(/[^a-zA-Z0-9_-]/g, '');\r\n}\r\n\r\n/**\r\n * Converts an OpenAPI spec to function signatures and request builders.\r\n */\r\nexport function openapiToFunction(\r\n  openapiSpec: OpenAPIV3.Document,\r\n  generateZodSchemas = false,\r\n): {\r\n  functionSignatures: FunctionSignature[];\r\n  requestBuilders: Record<string, ActionRequest>;\r\n  zodSchemas?: Record<string, z.ZodTypeAny>;\r\n} {\r\n  const functionSignatures: FunctionSignature[] = [];\r\n  const requestBuilders: Record<string, ActionRequest> = {};\r\n  const zodSchemas: Record<string, z.ZodTypeAny> = {};\r\n  const baseUrl = openapiSpec.servers?.[0]?.url ?? '';\r\n\r\n  // Iterate over each path and method in the OpenAPI spec\r\n  for (const [path, methods] of Object.entries(openapiSpec.paths)) {\r\n    for (const [method, operation] of Object.entries(methods as OpenAPIV3.PathsObject)) {\r\n      const paramLocations: Record<string, 'query' | 'path' | 'header' | 'body'> = {};\r\n      const operationObj = operation as OpenAPIV3.OperationObject & {\r\n        'x-openai-isConsequential'?: boolean;\r\n      } & {\r\n        'x-strict'?: boolean;\r\n      };\r\n\r\n      // Operation ID is used as the function name\r\n      const defaultOperationId = `${method}_${path}`;\r\n      const operationId = operationObj.operationId || sanitizeOperationId(defaultOperationId);\r\n      const description = operationObj.summary || operationObj.description || '';\r\n      const isStrict = operationObj['x-strict'] ?? false;\r\n\r\n      const parametersSchema: OpenAPISchema = {\r\n        type: 'object',\r\n        properties: {},\r\n        required: [],\r\n      };\r\n\r\n      if (operationObj.parameters) {\r\n        for (const param of operationObj.parameters ?? []) {\r\n          const resolvedParam = resolveRef(\r\n            param,\r\n            openapiSpec.components,\r\n          ) as OpenAPIV3.ParameterObject;\r\n\r\n          const paramName = resolvedParam.name;\r\n          if (!paramName || !resolvedParam.schema) {\r\n            continue;\r\n          }\r\n\r\n          const paramSchema = resolveRef(\r\n            resolvedParam.schema,\r\n            openapiSpec.components,\r\n          ) as OpenAPIV3.SchemaObject;\r\n\r\n          parametersSchema.properties[paramName] = paramSchema;\r\n          if (resolvedParam.required) {\r\n            parametersSchema.required.push(paramName);\r\n          }\r\n          // Record the parameter location from the OpenAPI \"in\" field.\r\n          paramLocations[paramName] =\r\n            resolvedParam.in === 'query' ||\r\n            resolvedParam.in === 'path' ||\r\n            resolvedParam.in === 'header' ||\r\n            resolvedParam.in === 'body'\r\n              ? resolvedParam.in\r\n              : 'query';\r\n        }\r\n      }\r\n\r\n      let contentType = '';\r\n      if (operationObj.requestBody) {\r\n        const requestBody = operationObj.requestBody as RequestBodyObject;\r\n        const content = requestBody.content;\r\n        contentType = Object.keys(content ?? {})[0];\r\n        const schema = content?.[contentType]?.schema;\r\n        const resolvedSchema = resolveRef(\r\n          schema as OpenAPIV3.ReferenceObject | OpenAPIV3.SchemaObject,\r\n          openapiSpec.components,\r\n        );\r\n        parametersSchema.properties = {\r\n          ...parametersSchema.properties,\r\n          ...resolvedSchema.properties,\r\n        };\r\n        if (resolvedSchema.required) {\r\n          parametersSchema.required.push(...resolvedSchema.required);\r\n        }\r\n        // Mark requestBody properties as belonging to the \"body\"\r\n        if (resolvedSchema.properties) {\r\n          for (const key in resolvedSchema.properties) {\r\n            paramLocations[key] = 'body';\r\n          }\r\n        }\r\n\r\n        contentType = contentType ?? 'application/json';\r\n      }\r\n\r\n      const functionSignature = new FunctionSignature(\r\n        operationId,\r\n        description,\r\n        parametersSchema,\r\n        isStrict,\r\n      );\r\n      functionSignatures.push(functionSignature);\r\n\r\n      const actionRequest = new ActionRequest(\r\n        baseUrl,\r\n        path,\r\n        method,\r\n        operationId,\r\n        !!(operationObj['x-openai-isConsequential'] ?? false),\r\n        contentType,\r\n        paramLocations,\r\n      );\r\n\r\n      requestBuilders[operationId] = actionRequest;\r\n\r\n      if (generateZodSchemas && Object.keys(parametersSchema.properties).length > 0) {\r\n        const schema = openAPISchemaToZod(parametersSchema);\r\n        if (schema) {\r\n          zodSchemas[operationId] = schema;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return { functionSignatures, requestBuilders, zodSchemas };\r\n}\r\n\r\nexport type ValidationResult = {\r\n  status: boolean;\r\n  message: string;\r\n  spec?: OpenAPIV3.Document;\r\n};\r\n\r\n/**\r\n * Validates and parses an OpenAPI spec.\r\n */\r\nexport function validateAndParseOpenAPISpec(specString: string): ValidationResult {\r\n  try {\r\n    let parsedSpec;\r\n    try {\r\n      parsedSpec = JSON.parse(specString);\r\n    } catch {\r\n      parsedSpec = load(specString);\r\n    }\r\n\r\n    // Check for servers\r\n    if (\r\n      !parsedSpec.servers ||\r\n      !Array.isArray(parsedSpec.servers) ||\r\n      parsedSpec.servers.length === 0\r\n    ) {\r\n      return { status: false, message: 'Could not find a valid URL in `servers`' };\r\n    }\r\n\r\n    if (!parsedSpec.servers[0].url) {\r\n      return { status: false, message: 'Could not find a valid URL in `servers`' };\r\n    }\r\n\r\n    // Check for paths\r\n    const paths = parsedSpec.paths;\r\n    if (!paths || typeof paths !== 'object' || Object.keys(paths).length === 0) {\r\n      return { status: false, message: 'No paths found in the OpenAPI spec.' };\r\n    }\r\n\r\n    const components = parsedSpec.components?.schemas || {};\r\n    const messages = [];\r\n\r\n    for (const [path, methods] of Object.entries(paths)) {\r\n      for (const [httpMethod, operation] of Object.entries(methods as OpenAPIV3.PathItemObject)) {\r\n        // Ensure operation is a valid operation object\r\n        const { responses } = operation as OpenAPIV3.OperationObject | { responses: undefined };\r\n        if (typeof operation === 'object' && responses) {\r\n          for (const [statusCode, response] of Object.entries(responses)) {\r\n            const content = (response as OpenAPIV3.ResponseObject).content as MediaTypeObject;\r\n            if (content && content['application/json'] && content['application/json'].schema) {\r\n              const schema = content['application/json'].schema;\r\n              if ('$ref' in schema && typeof schema.$ref === 'string') {\r\n                const refName = schema.$ref.split('/').pop();\r\n                if (refName && !components[refName]) {\r\n                  messages.push(\r\n                    `In context=('paths', '${path}', '${httpMethod}', '${statusCode}', 'response', 'content', 'application/json', 'schema'), reference to unknown component ${refName}; using empty schema`,\r\n                  );\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      status: true,\r\n      message: messages.join('\\n') || 'OpenAPI spec is valid.',\r\n      spec: parsedSpec,\r\n    };\r\n  } catch (error) {\r\n    console.error(error);\r\n    return { status: false, message: 'Error parsing OpenAPI spec.' };\r\n  }\r\n}\r\n","import {\r\n  Verbosity,\r\n  ImageDetail,\r\n  EModelEndpoint,\r\n  openAISettings,\r\n  googleSettings,\r\n  ReasoningEffort,\r\n  ReasoningSummary,\r\n  BedrockProviders,\r\n  anthropicSettings,\r\n} from './types';\r\nimport { SettingDefinition, SettingsConfiguration } from './generate';\r\n\r\n// Base definitions\r\nconst baseDefinitions: Record<string, SettingDefinition> = {\r\n  model: {\r\n    key: 'model',\r\n    label: 'com_ui_model',\r\n    labelCode: true,\r\n    type: 'string',\r\n    component: 'dropdown',\r\n    optionType: 'model',\r\n    selectPlaceholder: 'com_ui_select_model',\r\n    searchPlaceholder: 'com_ui_select_search_model',\r\n    searchPlaceholderCode: true,\r\n    selectPlaceholderCode: true,\r\n    columnSpan: 4,\r\n  },\r\n  temperature: {\r\n    key: 'temperature',\r\n    label: 'com_endpoint_temperature',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_temp',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  topP: {\r\n    key: 'topP',\r\n    label: 'com_endpoint_top_p',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_topp',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  stop: {\r\n    key: 'stop',\r\n    label: 'com_endpoint_stop',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_stop',\r\n    descriptionCode: true,\r\n    placeholder: 'com_endpoint_stop_placeholder',\r\n    placeholderCode: true,\r\n    type: 'array',\r\n    default: [],\r\n    component: 'tags',\r\n    optionType: 'conversation',\r\n    minTags: 0,\r\n    maxTags: 4,\r\n  },\r\n  imageDetail: {\r\n    key: 'imageDetail',\r\n    label: 'com_endpoint_plug_image_detail',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_detail',\r\n    descriptionCode: true,\r\n    type: 'enum',\r\n    default: ImageDetail.auto,\r\n    component: 'slider',\r\n    options: [ImageDetail.low, ImageDetail.auto, ImageDetail.high],\r\n    enumMappings: {\r\n      [ImageDetail.low]: 'com_ui_low',\r\n      [ImageDetail.auto]: 'com_ui_auto',\r\n      [ImageDetail.high]: 'com_ui_high',\r\n    },\r\n    optionType: 'conversation',\r\n    columnSpan: 2,\r\n  },\r\n};\r\n\r\nconst createDefinition = (\r\n  base: Partial<SettingDefinition>,\r\n  overrides: Partial<SettingDefinition>,\r\n): SettingDefinition => {\r\n  return { ...base, ...overrides } as SettingDefinition;\r\n};\r\n\r\nexport const librechat = {\r\n  modelLabel: {\r\n    key: 'modelLabel',\r\n    label: 'com_endpoint_custom_name',\r\n    labelCode: true,\r\n    type: 'string',\r\n    default: '',\r\n    component: 'input',\r\n    placeholder: 'com_endpoint_openai_custom_name_placeholder',\r\n    placeholderCode: true,\r\n    optionType: 'conversation',\r\n  } as const,\r\n  maxContextTokens: {\r\n    key: 'maxContextTokens',\r\n    label: 'com_endpoint_context_tokens',\r\n    labelCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    description: 'com_endpoint_context_info',\r\n    descriptionCode: true,\r\n    optionType: 'model',\r\n    columnSpan: 2,\r\n  } as const,\r\n  resendFiles: {\r\n    key: 'resendFiles',\r\n    label: 'com_endpoint_plug_resend_files',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_resend_files',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: true,\r\n    component: 'switch',\r\n    optionType: 'conversation',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  } as const,\r\n  promptPrefix: {\r\n    key: 'promptPrefix',\r\n    label: 'com_endpoint_prompt_prefix',\r\n    labelCode: true,\r\n    type: 'string',\r\n    default: '',\r\n    component: 'textarea',\r\n    placeholder: 'com_endpoint_openai_prompt_prefix_placeholder',\r\n    placeholderCode: true,\r\n    optionType: 'model',\r\n  } as const,\r\n  fileTokenLimit: {\r\n    key: 'fileTokenLimit',\r\n    label: 'com_ui_file_token_limit',\r\n    labelCode: true,\r\n    description: 'com_ui_file_token_limit_desc',\r\n    descriptionCode: true,\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    columnSpan: 2,\r\n  } as const,\r\n};\r\n\r\nconst openAIParams: Record<string, SettingDefinition> = {\r\n  chatGptLabel: {\r\n    ...librechat.modelLabel,\r\n    key: 'chatGptLabel',\r\n  },\r\n  promptPrefix: librechat.promptPrefix,\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: openAISettings.temperature.default,\r\n    range: {\r\n      min: openAISettings.temperature.min,\r\n      max: openAISettings.temperature.max,\r\n      step: openAISettings.temperature.step,\r\n    },\r\n  }),\r\n  top_p: createDefinition(baseDefinitions.topP, {\r\n    key: 'top_p',\r\n    default: openAISettings.top_p.default,\r\n    range: {\r\n      min: openAISettings.top_p.min,\r\n      max: openAISettings.top_p.max,\r\n      step: openAISettings.top_p.step,\r\n    },\r\n  }),\r\n  frequency_penalty: {\r\n    key: 'frequency_penalty',\r\n    label: 'com_endpoint_frequency_penalty',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_freq',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    default: openAISettings.frequency_penalty.default,\r\n    range: {\r\n      min: openAISettings.frequency_penalty.min,\r\n      max: openAISettings.frequency_penalty.max,\r\n      step: openAISettings.frequency_penalty.step,\r\n    },\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  presence_penalty: {\r\n    key: 'presence_penalty',\r\n    label: 'com_endpoint_presence_penalty',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_pres',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    default: openAISettings.presence_penalty.default,\r\n    range: {\r\n      min: openAISettings.presence_penalty.min,\r\n      max: openAISettings.presence_penalty.max,\r\n      step: openAISettings.presence_penalty.step,\r\n    },\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  max_tokens: {\r\n    key: 'max_tokens',\r\n    label: 'com_endpoint_max_output_tokens',\r\n    labelCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    description: 'com_endpoint_openai_max_tokens',\r\n    descriptionCode: true,\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    optionType: 'model',\r\n    columnSpan: 2,\r\n  },\r\n  reasoning_effort: {\r\n    key: 'reasoning_effort',\r\n    label: 'com_endpoint_reasoning_effort',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_reasoning_effort',\r\n    descriptionCode: true,\r\n    type: 'enum',\r\n    default: ReasoningEffort.none,\r\n    component: 'slider',\r\n    options: [\r\n      ReasoningEffort.none,\r\n      ReasoningEffort.minimal,\r\n      ReasoningEffort.low,\r\n      ReasoningEffort.medium,\r\n      ReasoningEffort.high,\r\n    ],\r\n    enumMappings: {\r\n      [ReasoningEffort.none]: 'com_ui_none',\r\n      [ReasoningEffort.minimal]: 'com_ui_minimal',\r\n      [ReasoningEffort.low]: 'com_ui_low',\r\n      [ReasoningEffort.medium]: 'com_ui_medium',\r\n      [ReasoningEffort.high]: 'com_ui_high',\r\n    },\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  useResponsesApi: {\r\n    key: 'useResponsesApi',\r\n    label: 'com_endpoint_use_responses_api',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_use_responses_api',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: false,\r\n    component: 'switch',\r\n    optionType: 'model',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n  web_search: {\r\n    key: 'web_search',\r\n    label: 'com_ui_web_search',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_use_web_search',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: false,\r\n    component: 'switch',\r\n    optionType: 'model',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n  reasoning_summary: {\r\n    key: 'reasoning_summary',\r\n    label: 'com_endpoint_reasoning_summary',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_reasoning_summary',\r\n    descriptionCode: true,\r\n    type: 'enum',\r\n    default: ReasoningSummary.none,\r\n    component: 'slider',\r\n    options: [\r\n      ReasoningSummary.none,\r\n      ReasoningSummary.auto,\r\n      ReasoningSummary.concise,\r\n      ReasoningSummary.detailed,\r\n    ],\r\n    enumMappings: {\r\n      [ReasoningSummary.none]: 'com_ui_none',\r\n      [ReasoningSummary.auto]: 'com_ui_auto',\r\n      [ReasoningSummary.concise]: 'com_ui_concise',\r\n      [ReasoningSummary.detailed]: 'com_ui_detailed',\r\n    },\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  verbosity: {\r\n    key: 'verbosity',\r\n    label: 'com_endpoint_verbosity',\r\n    labelCode: true,\r\n    description: 'com_endpoint_openai_verbosity',\r\n    descriptionCode: true,\r\n    type: 'enum',\r\n    default: Verbosity.none,\r\n    component: 'slider',\r\n    options: [Verbosity.none, Verbosity.low, Verbosity.medium, Verbosity.high],\r\n    enumMappings: {\r\n      [Verbosity.none]: 'com_ui_none',\r\n      [Verbosity.low]: 'com_ui_low',\r\n      [Verbosity.medium]: 'com_ui_medium',\r\n      [Verbosity.high]: 'com_ui_high',\r\n    },\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  disableStreaming: {\r\n    key: 'disableStreaming',\r\n    label: 'com_endpoint_disable_streaming_label',\r\n    labelCode: true,\r\n    description: 'com_endpoint_disable_streaming',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: false,\r\n    component: 'switch',\r\n    optionType: 'model',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  } as const,\r\n};\r\n\r\nconst anthropic: Record<string, SettingDefinition> = {\r\n  maxOutputTokens: {\r\n    key: 'maxOutputTokens',\r\n    label: 'com_endpoint_max_output_tokens',\r\n    labelCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    description: 'com_endpoint_anthropic_maxoutputtokens',\r\n    descriptionCode: true,\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    range: {\r\n      min: anthropicSettings.maxOutputTokens.min,\r\n      max: anthropicSettings.maxOutputTokens.max,\r\n      step: anthropicSettings.maxOutputTokens.step,\r\n    },\r\n    optionType: 'model',\r\n    columnSpan: 2,\r\n  },\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: anthropicSettings.temperature.default,\r\n    range: {\r\n      min: anthropicSettings.temperature.min,\r\n      max: anthropicSettings.temperature.max,\r\n      step: anthropicSettings.temperature.step,\r\n    },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    default: anthropicSettings.topP.default,\r\n    range: {\r\n      min: anthropicSettings.topP.min,\r\n      max: anthropicSettings.topP.max,\r\n      step: anthropicSettings.topP.step,\r\n    },\r\n  }),\r\n  topK: {\r\n    key: 'topK',\r\n    label: 'com_endpoint_top_k',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_topk',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    default: anthropicSettings.topK.default,\r\n    range: {\r\n      min: anthropicSettings.topK.min,\r\n      max: anthropicSettings.topK.max,\r\n      step: anthropicSettings.topK.step,\r\n    },\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  promptCache: {\r\n    key: 'promptCache',\r\n    label: 'com_endpoint_prompt_cache',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_prompt_cache',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: anthropicSettings.promptCache.default,\r\n    component: 'switch',\r\n    optionType: 'conversation',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n  thinking: {\r\n    key: 'thinking',\r\n    label: 'com_endpoint_thinking',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_thinking',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: anthropicSettings.thinking.default,\r\n    component: 'switch',\r\n    optionType: 'conversation',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n  thinkingBudget: {\r\n    key: 'thinkingBudget',\r\n    label: 'com_endpoint_thinking_budget',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_thinking_budget',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    default: anthropicSettings.thinkingBudget.default,\r\n    range: {\r\n      min: anthropicSettings.thinkingBudget.min,\r\n      max: anthropicSettings.thinkingBudget.max,\r\n      step: anthropicSettings.thinkingBudget.step,\r\n    },\r\n    optionType: 'conversation',\r\n    columnSpan: 2,\r\n  },\r\n  web_search: {\r\n    key: 'web_search',\r\n    label: 'com_ui_web_search',\r\n    labelCode: true,\r\n    description: 'com_endpoint_anthropic_use_web_search',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: anthropicSettings.web_search.default,\r\n    component: 'switch',\r\n    optionType: 'conversation',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n};\r\n\r\nconst bedrock: Record<string, SettingDefinition> = {\r\n  system: {\r\n    key: 'system',\r\n    label: 'com_endpoint_prompt_prefix',\r\n    labelCode: true,\r\n    type: 'string',\r\n    default: '',\r\n    component: 'textarea',\r\n    placeholder: 'com_endpoint_openai_prompt_prefix_placeholder',\r\n    placeholderCode: true,\r\n    optionType: 'model',\r\n  },\r\n  region: {\r\n    key: 'region',\r\n    type: 'string',\r\n    label: 'com_ui_region',\r\n    labelCode: true,\r\n    component: 'combobox',\r\n    optionType: 'conversation',\r\n    selectPlaceholder: 'com_ui_select_region',\r\n    searchPlaceholder: 'com_ui_select_search_region',\r\n    searchPlaceholderCode: true,\r\n    selectPlaceholderCode: true,\r\n    columnSpan: 2,\r\n  },\r\n  maxTokens: {\r\n    key: 'maxTokens',\r\n    label: 'com_endpoint_max_output_tokens',\r\n    labelCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    description: 'com_endpoint_anthropic_maxoutputtokens',\r\n    descriptionCode: true,\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    optionType: 'model',\r\n    columnSpan: 2,\r\n  },\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: 1,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n  topK: createDefinition(anthropic.topK, {\r\n    range: { min: 0, max: 500, step: 1 },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    default: 0.999,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n};\r\n\r\nconst mistral: Record<string, SettingDefinition> = {\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: 0.7,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n};\r\n\r\nconst cohere: Record<string, SettingDefinition> = {\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: 0.3,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    default: 0.75,\r\n    range: { min: 0.01, max: 0.99, step: 0.01 },\r\n  }),\r\n};\r\n\r\nconst meta: Record<string, SettingDefinition> = {\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: 0.5,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    default: 0.9,\r\n    range: { min: 0, max: 1, step: 0.01 },\r\n  }),\r\n};\r\n\r\nconst google: Record<string, SettingDefinition> = {\r\n  temperature: createDefinition(baseDefinitions.temperature, {\r\n    default: googleSettings.temperature.default,\r\n    range: {\r\n      min: googleSettings.temperature.min,\r\n      max: googleSettings.temperature.max,\r\n      step: googleSettings.temperature.step,\r\n    },\r\n  }),\r\n  topP: createDefinition(baseDefinitions.topP, {\r\n    default: googleSettings.topP.default,\r\n    range: {\r\n      min: googleSettings.topP.min,\r\n      max: googleSettings.topP.max,\r\n      step: googleSettings.topP.step,\r\n    },\r\n  }),\r\n  topK: {\r\n    key: 'topK',\r\n    label: 'com_endpoint_top_k',\r\n    labelCode: true,\r\n    description: 'com_endpoint_google_topk',\r\n    descriptionCode: true,\r\n    type: 'number',\r\n    default: googleSettings.topK.default,\r\n    range: {\r\n      min: googleSettings.topK.min,\r\n      max: googleSettings.topK.max,\r\n      step: googleSettings.topK.step,\r\n    },\r\n    component: 'slider',\r\n    optionType: 'model',\r\n    columnSpan: 4,\r\n  },\r\n  maxOutputTokens: {\r\n    key: 'maxOutputTokens',\r\n    label: 'com_endpoint_max_output_tokens',\r\n    labelCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    description: 'com_endpoint_google_maxoutputtokens',\r\n    descriptionCode: true,\r\n    placeholder: 'com_nav_theme_system',\r\n    placeholderCode: true,\r\n    default: googleSettings.maxOutputTokens.default,\r\n    range: {\r\n      min: googleSettings.maxOutputTokens.min,\r\n      max: googleSettings.maxOutputTokens.max,\r\n      step: googleSettings.maxOutputTokens.step,\r\n    },\r\n    optionType: 'model',\r\n    columnSpan: 2,\r\n  },\r\n  thinking: {\r\n    key: 'thinking',\r\n    label: 'com_endpoint_thinking',\r\n    labelCode: true,\r\n    description: 'com_endpoint_google_thinking',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: googleSettings.thinking.default,\r\n    component: 'switch',\r\n    optionType: 'conversation',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n  thinkingBudget: {\r\n    key: 'thinkingBudget',\r\n    label: 'com_endpoint_thinking_budget',\r\n    labelCode: true,\r\n    description: 'com_endpoint_google_thinking_budget',\r\n    descriptionCode: true,\r\n    placeholder: 'com_ui_auto',\r\n    placeholderCode: true,\r\n    type: 'number',\r\n    component: 'input',\r\n    range: {\r\n      min: googleSettings.thinkingBudget.min,\r\n      max: googleSettings.thinkingBudget.max,\r\n      step: googleSettings.thinkingBudget.step,\r\n    },\r\n    optionType: 'conversation',\r\n    columnSpan: 2,\r\n  },\r\n  web_search: {\r\n    key: 'web_search',\r\n    label: 'com_endpoint_use_search_grounding',\r\n    labelCode: true,\r\n    description: 'com_endpoint_google_use_search_grounding',\r\n    descriptionCode: true,\r\n    type: 'boolean',\r\n    default: false,\r\n    component: 'switch',\r\n    optionType: 'model',\r\n    showDefault: false,\r\n    columnSpan: 2,\r\n  },\r\n};\r\n\r\nconst googleConfig: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  google.maxOutputTokens,\r\n  google.temperature,\r\n  google.topP,\r\n  google.topK,\r\n  librechat.resendFiles,\r\n  google.thinking,\r\n  google.thinkingBudget,\r\n  google.web_search,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst googleCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst googleCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  google.maxOutputTokens,\r\n  google.temperature,\r\n  google.topP,\r\n  google.topK,\r\n  librechat.resendFiles,\r\n  google.thinking,\r\n  google.thinkingBudget,\r\n  google.web_search,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst openAI: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  openAIParams.max_tokens,\r\n  openAIParams.temperature,\r\n  openAIParams.top_p,\r\n  openAIParams.frequency_penalty,\r\n  openAIParams.presence_penalty,\r\n  baseDefinitions.stop,\r\n  librechat.resendFiles,\r\n  baseDefinitions.imageDetail,\r\n  openAIParams.web_search,\r\n  openAIParams.reasoning_effort,\r\n  openAIParams.useResponsesApi,\r\n  openAIParams.reasoning_summary,\r\n  openAIParams.verbosity,\r\n  openAIParams.disableStreaming,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst openAICol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst openAICol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  openAIParams.max_tokens,\r\n  openAIParams.temperature,\r\n  openAIParams.top_p,\r\n  openAIParams.frequency_penalty,\r\n  openAIParams.presence_penalty,\r\n  baseDefinitions.stop,\r\n  librechat.resendFiles,\r\n  baseDefinitions.imageDetail,\r\n  openAIParams.reasoning_effort,\r\n  openAIParams.reasoning_summary,\r\n  openAIParams.verbosity,\r\n  openAIParams.useResponsesApi,\r\n  openAIParams.web_search,\r\n  openAIParams.disableStreaming,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst anthropicConfig: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  anthropic.maxOutputTokens,\r\n  anthropic.temperature,\r\n  anthropic.topP,\r\n  anthropic.topK,\r\n  librechat.resendFiles,\r\n  anthropic.promptCache,\r\n  anthropic.thinking,\r\n  anthropic.thinkingBudget,\r\n  anthropic.web_search,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst anthropicCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst anthropicCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  anthropic.maxOutputTokens,\r\n  anthropic.temperature,\r\n  anthropic.topP,\r\n  anthropic.topK,\r\n  librechat.resendFiles,\r\n  anthropic.promptCache,\r\n  anthropic.thinking,\r\n  anthropic.thinkingBudget,\r\n  anthropic.web_search,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockAnthropic: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  bedrock.system,\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  bedrock.temperature,\r\n  bedrock.topP,\r\n  bedrock.topK,\r\n  baseDefinitions.stop,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  anthropic.thinking,\r\n  anthropic.thinkingBudget,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockMistral: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  mistral.temperature,\r\n  mistral.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockCohere: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  cohere.temperature,\r\n  cohere.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockGeneral: SettingsConfiguration = [\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n  librechat.maxContextTokens,\r\n  meta.temperature,\r\n  meta.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockAnthropicCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  bedrock.system,\r\n  baseDefinitions.stop,\r\n];\r\n\r\nconst bedrockAnthropicCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  bedrock.temperature,\r\n  bedrock.topP,\r\n  bedrock.topK,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  anthropic.thinking,\r\n  anthropic.thinkingBudget,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockMistralCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst bedrockMistralCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  mistral.temperature,\r\n  mistral.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockCohereCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst bedrockCohereCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  bedrock.maxTokens,\r\n  cohere.temperature,\r\n  cohere.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nconst bedrockGeneralCol1: SettingsConfiguration = [\r\n  baseDefinitions.model as SettingDefinition,\r\n  librechat.modelLabel,\r\n  librechat.promptPrefix,\r\n];\r\n\r\nconst bedrockGeneralCol2: SettingsConfiguration = [\r\n  librechat.maxContextTokens,\r\n  meta.temperature,\r\n  meta.topP,\r\n  librechat.resendFiles,\r\n  bedrock.region,\r\n  librechat.fileTokenLimit,\r\n];\r\n\r\nexport const paramSettings: Record<string, SettingsConfiguration | undefined> = {\r\n  [EModelEndpoint.openAI]: openAI,\r\n  [EModelEndpoint.azureOpenAI]: openAI,\r\n  [EModelEndpoint.custom]: openAI,\r\n  [EModelEndpoint.anthropic]: anthropicConfig,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Anthropic}`]: bedrockAnthropic,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.MistralAI}`]: bedrockMistral,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Cohere}`]: bedrockCohere,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Meta}`]: bedrockGeneral,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.AI21}`]: bedrockGeneral,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Amazon}`]: bedrockGeneral,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.DeepSeek}`]: bedrockGeneral,\r\n  [EModelEndpoint.google]: googleConfig,\r\n};\r\n\r\nconst openAIColumns = {\r\n  col1: openAICol1,\r\n  col2: openAICol2,\r\n};\r\n\r\nconst bedrockGeneralColumns = {\r\n  col1: bedrockGeneralCol1,\r\n  col2: bedrockGeneralCol2,\r\n};\r\n\r\nexport const presetSettings: Record<\r\n  string,\r\n  | {\r\n      col1: SettingsConfiguration;\r\n      col2: SettingsConfiguration;\r\n    }\r\n  | undefined\r\n> = {\r\n  [EModelEndpoint.openAI]: openAIColumns,\r\n  [EModelEndpoint.azureOpenAI]: openAIColumns,\r\n  [EModelEndpoint.custom]: openAIColumns,\r\n  [EModelEndpoint.anthropic]: {\r\n    col1: anthropicCol1,\r\n    col2: anthropicCol2,\r\n  },\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Anthropic}`]: {\r\n    col1: bedrockAnthropicCol1,\r\n    col2: bedrockAnthropicCol2,\r\n  },\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.MistralAI}`]: {\r\n    col1: bedrockMistralCol1,\r\n    col2: bedrockMistralCol2,\r\n  },\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Cohere}`]: {\r\n    col1: bedrockCohereCol1,\r\n    col2: bedrockCohereCol2,\r\n  },\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Meta}`]: bedrockGeneralColumns,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.AI21}`]: bedrockGeneralColumns,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.Amazon}`]: bedrockGeneralColumns,\r\n  [`${EModelEndpoint.bedrock}-${BedrockProviders.DeepSeek}`]: bedrockGeneralColumns,\r\n  [EModelEndpoint.google]: {\r\n    col1: googleCol1,\r\n    col2: googleCol2,\r\n  },\r\n};\r\n\r\nexport const agentParamSettings: Record<string, SettingsConfiguration | undefined> = Object.entries(\r\n  presetSettings,\r\n).reduce<Record<string, SettingsConfiguration | undefined>>((acc, [key, value]) => {\r\n  if (value) {\r\n    acc[key] = value.col2;\r\n  }\r\n  return acc;\r\n}, {});\r\n","import type { TFile } from './types/files';\r\nimport type { TMessage } from './types';\r\n\r\nexport type ParentMessage = TMessage & { children: TMessage[]; depth: number };\r\nexport function buildTree({\r\n  messages,\r\n  fileMap,\r\n}: {\r\n  messages: (TMessage | undefined)[] | null;\r\n  fileMap?: Record<string, TFile>;\r\n}) {\r\n  if (messages === null) {\r\n    return null;\r\n  }\r\n\r\n  const messageMap: Record<string, ParentMessage> = {};\r\n  const rootMessages: TMessage[] = [];\r\n  const childrenCount: Record<string, number> = {};\r\n\r\n  messages.forEach((message) => {\r\n    if (!message) {\r\n      return;\r\n    }\r\n    const parentId = message.parentMessageId ?? '';\r\n    childrenCount[parentId] = (childrenCount[parentId] || 0) + 1;\r\n\r\n    const extendedMessage: ParentMessage = {\r\n      ...message,\r\n      children: [],\r\n      depth: 0,\r\n      siblingIndex: childrenCount[parentId] - 1,\r\n    };\r\n\r\n    if (message.files && fileMap) {\r\n      extendedMessage.files = message.files.map((file) => fileMap[file.file_id ?? ''] ?? file);\r\n    }\r\n\r\n    messageMap[message.messageId] = extendedMessage;\r\n\r\n    const parentMessage = messageMap[parentId];\r\n    if (parentMessage) {\r\n      parentMessage.children.push(extendedMessage);\r\n      extendedMessage.depth = parentMessage.depth + 1;\r\n    } else {\r\n      rootMessages.push(extendedMessage);\r\n    }\r\n  });\r\n\r\n  return rootMessages;\r\n}\r\n","import type * as t from './types';\r\nimport { EndpointURLs } from './config';\r\nimport * as s from './schemas';\r\n\r\nexport default function createPayload(submission: t.TSubmission) {\r\n  const {\r\n    isEdited,\r\n    userMessage,\r\n    isContinued,\r\n    isTemporary,\r\n    isRegenerate,\r\n    conversation,\r\n    editedContent,\r\n    ephemeralAgent,\r\n    endpointOption,\r\n  } = submission;\r\n  const { conversationId } = s.tConvoUpdateSchema.parse(conversation);\r\n  const { endpoint: _e, endpointType } = endpointOption as {\r\n    endpoint: s.EModelEndpoint;\r\n    endpointType?: s.EModelEndpoint;\r\n  };\r\n\r\n  const endpoint = _e as s.EModelEndpoint;\r\n  let server = `${EndpointURLs[s.EModelEndpoint.agents]}/${endpoint}`;\r\n  if (s.isAssistantsEndpoint(endpoint)) {\r\n    server =\r\n      EndpointURLs[(endpointType ?? endpoint) as 'assistants' | 'azureAssistants'] +\r\n      (isEdited ? '/modify' : '');\r\n  }\r\n\r\n  const payload: t.TPayload = {\r\n    ...userMessage,\r\n    ...endpointOption,\r\n    endpoint,\r\n    isTemporary,\r\n    isRegenerate,\r\n    editedContent,\r\n    conversationId,\r\n    isContinued: !!(isEdited && isContinued),\r\n    ephemeralAgent: s.isAssistantsEndpoint(endpoint) ? undefined : ephemeralAgent,\r\n  };\r\n\r\n  return { server, payload };\r\n}\r\n"],"names":["Tools","EToolResources","AnnotationTypes","StepStatus","MessageContentTypes","RunStatus","envVarRegex","extractEnvVariable","value","trimmed","trim","singleMatch","match","varName","process","env","regex","result","matches","exec","push","fullMatch","index","i","length","_a","envValue","substring","FilePurpose","AssistantStreamEvents","FEEDBACK_RATINGS","FEEDBACK_REASON_KEYS","FEEDBACK_TAGS","key","label","direction","icon","feedbackTagKeySchema","z","enum","feedbackRatingSchema","feedbackSchema","object","rating","tag","text","string","max","optional","AuthType","isUUID","uuid","EModelEndpoint","authTypeSchema","nativeEnum","BedrockProviders","paramEndpoints","Set","agents","openAI","bedrock","azureOpenAI","anthropic","custom","google","ImageDetail","ReasoningEffort","ReasoningSummary","Verbosity","getModelKey","endpoint","model","parts","split","provider","find","part","Object","values","includes","isAssistantsEndpoint","_endpoint","toLowerCase","endsWith","assistants","EAgent","imageDetailNumeric","low","auto","high","imageDetailValue","eImageDetailSchema","eReasoningEffortSchema","eReasoningSummarySchema","eVerbositySchema","defaultAgentFormValues","_b","agent","id","name","description","instructions","model_parameters","tools","projectIds","artifacts","isCollaborative","recursion_limit","undefined","execute_code","file_search","web_search","category","support_contact","email","ImageVisionTool","_c","type","function","parameters","properties","required","openAISettings","default","temperature","min","step","top_p","presence_penalty","frequency_penalty","resendFiles","maxContextTokens","max_tokens","imageDetail","googleSettings","maxOutputTokens","topP","topK","thinking","thinkingBudget","LEGACY_ANTHROPIC_MAX_OUTPUT","anthropicSettings","promptCache","reset","modelName","test","set","legacy","agentsSettings","endpointSettings","_d","eModelEndpointSchema","extendedModelEndpointSchema","union","tPluginAuthConfigSchema","authField","tPluginSchema","pluginKey","authConfig","array","authenticated","boolean","chatMenu","isButton","toolkit","tExampleSchema","input","content","output","agentOptionSettings","functions","options","classic","skipCompletion","eAgentOptionsSchema","tAgentOptionsSchema","number","tMessageSchema","messageId","clientId","nullable","conversationId","parentMessageId","responseMessageId","overrideParentMessageId","bg","title","or","literal","sender","generation","isCreatedByUser","error","clientTimestamp","createdAt","Date","toISOString","updatedAt","current","unfinished","searchResult","finish_reason","thread_id","iconURL","feedback","coerceNumber","transform","val","parseFloat","DocumentType","lazy","null","record","tConversationSchema","endpointType","isArchived","user","messages","modelLabel","userLabel","promptPrefix","system","stream","context","examples","tags","file_ids","reasoning_effort","reasoning_summary","verbosity","useResponsesApi","disableStreaming","assistant_id","agent_id","region","maxTokens","additionalModelRequestFields","additional_instructions","append_current_datetime","presetOverride","unknown","stop","greeting","spec","expiredAt","fileTokenLimit","resendImages","agentOptions","chatGptLabel","tPresetSchema","omit","merge","presetId","defaultPreset","order","tConvoUpdateSchema","tQueryParamsSchema","pick","tSharedLinkSchema","shareId","isPublic","tConversationTagSchema","_id","count","position","googleBaseSchema","googleSchema","obj","removeNullishValues","catch","googleGenConfigSchema","presencePenalty","frequencyPenalty","stopSequences","thinkingConfig","includeThoughts","strip","gptPluginsBaseSchema","gptPluginsSchema","__assign","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","removeEmptyStrings","newObj","keys","forEach","FileSources","assistantSchema","compactAssistantSchema","agentsBaseSchema","agentsSchema","openAIBaseSchema","openAISchema","compactGoogleSchema","anthropicBaseSchema","anthropicSchema","compactPluginsSchema","tBannerSchema","bannerId","message","displayFrom","displayTo","compactAgentsBaseSchema","compactAgentsSchema","tModelSpecSchema","preset","showIconInMenu","showIconInHeader","authType","specsConfigSchema","enforce","prioritize","list","addedEndpoints","supportsFiles","azureAssistants","excelFileTypes","fullMimeTypesList","__spreadArray","codeInterpreterMimeTypesList","excelMimeTypes","textMimeTypes","applicationMimeTypes","imageMimeTypes","audioMimeTypes","defaultOCRMimeTypes","defaultTextMimeTypes","defaultSTTMimeTypes","supportedMimeTypes","codeInterpreterMimeTypes","megabyte","mbToBytes","mb","defaultSizeLimit","assistantsFileConfig","fileLimit","fileSizeLimit","totalSizeLimit","disabled","fileConfig","endpoints","serverFileSizeLimit","avatarSizeLimit","clientImageResize","enabled","maxWidth","maxHeight","quality","ocr","stt","checkType","fileType","supportedTypes","some","supportedMimeTypesSchema","any","refine","mimeTypes","every","mimeType","RegExp","endpointFileConfigSchema","fileConfigSchema","imageGeneration","percentage","px","convertStringsToRegex","patterns","reduce","acc","pattern","console","concat","FileContext","AuthTypeEnum","AuthorizationTypeEnum","TokenExchangeMethodEnum","BaseOptionsSchema","startup","iconPath","timeout","initTimeout","serverInstructions","requiresOAuth","oauth","authorization_url","url","token_url","client_id","client_secret","scope","redirect_uri","token_exchange_method","grant_types_supported","token_endpoint_auth_methods_supported","response_types_supported","code_challenge_methods_supported","revocation_endpoint","revocation_endpoint_auth_methods_supported","customUserVars","StdioOptionsSchema","extend","command","args","processedEnv","_i","entries","stderr","WebSocketOptionsSchema","pipe","protocol","URL","SSEOptionsSchema","headers","StreamableHTTPOptionsSchema","MCPOptionsSchema","MCPServersSchema","BASE_URL","browser","baseEl","document","querySelector","getAttribute","slice","SettingsViews","apiBaseUrl","buildQuery","params","query","filter","Array","isArray","map","v","encodeURIComponent","join","String","messagesRoot","rest","__rest","messagesArtifacts","shareRoot","shareMessages","getSharedLinks","pageSize","sortBy","sortDirection","search","cursor","keysEndpoint","conversationsRoot","conversations","updateConversation","presets","prompts","path","version","isAvatar","images","queryParams","URLSearchParams","toString","mcp","files","speech","textToSpeech","getPromptGroup","getPrompt","postPrompt","updatePromptGroup","deletePromptGroup","getRole","roleName","conversationTags","memories","memory","defaultSocialLogins","defaultRetrievalModels","excludedKeys","fileSourceSchema","fileStrategiesSchema","avatar","image","getSchemaDefaults","schema","shape","ZodDefault","_def","defaultValue","fromEntries","Capabilities","AgentCapabilities","modelConfigSchema","deploymentName","azureBaseSchema","apiKey","serverless","instanceName","addParams","dropParams","forcePrompt","baseURL","additionalHeaders","azureGroupSchema","group","models","and","azureGroupConfigsSchema","RateLimitPrefix","defaultAssistantsVersion","baseEndpointSchema","streamRate","titlePrompt","titleModel","titleConvo","titleMethod","titleEndpoint","titlePromptTemplate","bedrockEndpointSchema","availableRegions","assistantEndpointSchema","disableBuilder","pollIntervalMs","timeoutMs","supportedIds","excludedIds","privateAssistants","retrievalModels","capabilities","code_interpreter","image_vision","retrieval","actions","fetch","userIdQuery","defaultAgentCapabilities","chain","agentsEndpointSchema","recursionLimit","maxRecursionLimit","maxCitations","maxCitationsPerFile","minRelevanceScore","allowedProviders","endpointSchema","safeParse","success","summarize","summaryModel","modelDisplayLabel","customParams","defaultParamsEndpoint","paramDefinitions","strict","customOrder","directEndpoint","titleMessageRole","azureEndpointSchema","groups","plugins","partial","ttsOpenaiSchema","voices","ttsAzureOpenAISchema","apiVersion","ttsElevenLabsSchema","websocketUrl","voice_settings","similarity_boost","stability","style","use_speaker_boost","pronunciation_dictionary_locators","ttsLocalaiSchema","backend","ttsSchema","openai","elevenlabs","localai","sttOpenaiSchema","sttAzureOpenAISchema","sttSchema","speechTab","conversationMode","advancedMode","speechToText","engineSTT","languageSTT","autoTranscribeAudio","decibelValue","autoSendText","engineTTS","voice","languageTTS","automaticPlayback","playbackRate","cacheTTS","EImageOutputType","rateLimitSchema","fileUploads","ipMax","ipWindowInMinutes","userMax","userWindowInMinutes","conversationsImport","tts","OCRStrategy","SearchCategories","SearchProviders","ScraperTypes","RerankerTypes","SafeSearchTypes","termsOfServiceSchema","externalUrl","openNewTab","modalAcceptance","modalTitle","modalContent","mcpServersSchema","placeholder","interfaceSchema","privacyPolicy","termsOfService","customWelcome","mcpServers","endpointsMenu","modelSelect","sidePanel","multiConvo","bookmarks","temporaryChat","temporaryChatRetention","runCode","webSearch","peoplePicker","users","roles","marketplace","use","fileSearch","fileCitations","turnstileOptionsSchema","language","size","turnstileSchema","siteKey","KnownEndpoints","webSearchSchema","serperApiKey","searxngInstanceUrl","searxngApiKey","firecrawlApiKey","firecrawlApiUrl","jinaApiKey","jinaApiUrl","cohereApiKey","searchProvider","scraperType","rerankerType","scraperTimeout","safeSearch","MODERATE","firecrawlOptions","formats","includeTags","excludeTags","waitFor","maxAge","mobile","skipTlsVerification","blockAds","removeBase64Images","parsePDF","storeInCache","zeroDataRetention","location","country","languages","onlyMainContent","changeTrackingOptions","modes","prompt","ocrSchema","mistralModel","strategy","MISTRAL_OCR","balanceSchema","startBalance","autoRefillEnabled","refillIntervalValue","refillIntervalUnit","refillAmount","transactionsSchema","memorySchema","validKeys","tokenLimit","charLimit","personalize","messageWindowSize","customEndpointsSchema","configSchema","cache","secureImageLinks","imageOutputType","PNG","includedTools","filteredTools","interface","turnstile","fileStrategy","local","fileStrategies","allowedDomains","registration","socialLogins","balance","transactions","rateLimits","modelSpecs","all","gptPlugins","data","FetchTokenConfig","VisionModes","defaultEndpoints","chatGPTBrowser","alternateName","ollama","deepseek","xai","vercel","sharedOpenAIModels","bedrockModels","defaultModels","openAIModels","initialModelsConfig","initial","str","EndpointURLs","modularEndpoints","supportsBalanceCheck","visionModels","InfiniteCollections","Time","CacheKeys","ViolationTypes","ErrorTypes","AuthKeys","ImageDetailCost","SettingsTabValues","STTProviders","TTSProviders","Constants","LocalStorageKeys","ForkOptions","CohereConstants","SystemCategories","imageGenTools","ContentTypes","StepTypes","ToolCallTypes","providerEndpointMap","bedrockInputSchema","s.tConversationSchema","_obj","budget_tokens","s.removeNullishValues","bedrockInputParser","catchall","knownKeys","additionalFields","typedData","anthropic_beta","endpointSchemas","getEnabledEndpoints","endpointsEnv","ENDPOINTS","enabledEndpoints","errorsToString","errors","field","getFirstDefinedValue","possibleValues","returnValue","possibleValues_1","extractGPTVersion","modelStr","gptMatch","suffix","extractOmniVersion","omniMatch","compactEndpointSchemas","SEPARATORS","ArtifactModes","ComponentTypes","SettingTypes","OptionTypes","utils","accordian","alertDialog","alert","badge","breadcrumb","button","calendar","card","carousel","checkbox","collapsible","dialog","drawer","dropdownMenu","hoverCard","menuBar","navigationMenu","pagination","popover","progress","radioGroup","select","separator","skeleton","slider","switchComponent","table","tabs","textarea","toast","toaster","toggleGroup","toggle","tooltip","useToast","shadcnComponents","essentialShadcnComponents","requiredSettingFields","ZodTypeToSettingType","ZodString","ZodNumber","ZodBoolean","PermissionTypes","Permissions","SystemRoles","promptPermissionsSchema","SHARED_GLOBAL","USE","CREATE","bookmarkPermissionsSchema","memoryPermissionsSchema","UPDATE","READ","OPT_OUT","agentPermissionsSchema","multiConvoPermissionsSchema","temporaryChatPermissionsSchema","runCodePermissionsSchema","webSearchPermissionsSchema","peoplePickerPermissionsSchema","VIEW_USERS","VIEW_GROUPS","VIEW_ROLES","marketplacePermissionsSchema","fileSearchPermissionsSchema","fileCitationsPermissionsSchema","permissionsSchema","PROMPTS","BOOKMARKS","MEMORIES","AGENTS","MULTI_CONVO","TEMPORARY_CHAT","RUN_CODE","WEB_SEARCH","PEOPLE_PICKER","MARKETPLACE","FILE_SEARCH","FILE_CITATIONS","DATE_RANGE","PrincipalType","PrincipalModel","ResourceType","PermissionBits","AccessRoleIds","roleSchema","permissions","roleDefaults","ADMIN","USER","parse","_q","_r","_s","_t","_u","_v","_w","_x","_y","_z","_0","_1","_2","_3","_4","_5","_6","QueryKeys","principalSchema","source","idOnTheSource","accessRoleId","memberCount","accessRoleSchema","resourceType","AGENT","permBits","permissionEntrySchema","principalType","principalId","principalName","role","grantedBy","grantedAt","inheritedFrom","resourcePermissionsResponseSchema","resourceId","updateResourcePermissionsRequestSchema","updated","removed","public","publicAccessRoleId","updateResourcePermissionsResponseSchema","results","principals","getResourcePermissionsResponseSchema","effectivePermissionsResponseSchema","permissionBits","MutationKeys","setTokenHeader","token","axios","defaults","common","_post","post","JSON","stringify","sent","isRefreshing","failedQueue","refreshToken","retry","endpoints.refreshToken","dispatchTokenUpdatedEvent","window","dispatchEvent","CustomEvent","detail","processQueue","prom","reject","resolve","interceptors","response","__awaiter","originalRequest","config","Promise","status","_retry","warn","err_1","href","log","err_2","request","get","getResponse","postMultiPart","formData","postTTS","responseType","put","delete","deleteWithOptions","patch","groupId","payload","endpoints.addPromptToGroup","endpoints.addTagToConversation","endpoints.updateConversation","arg","toolId","toolParams","endpoints.agents","serverName","endpoints.cancelMCPOAuth","endpoints.assistants","endpoints.conversationTags","endpoints.memories","endpoints.presets","endpoints.postPrompt","endpoints.createSharedLink","action_id","endpoints.files","endpoints.memory","endpoints.deletePrompt","endpoints.deletePromptGroup","endpoints.shareMessages","endpoints.messagesArtifacts","endpoints.getAccessRoles","agentId","endpoints.agentFiles","s.isAssistantsEndpoint","config.defaultAssistantsVersion","Accept","endpoints.conversationById","endpoints.conversations","endpoints.apiBaseUrl","endpoints.getEffectivePermissions","userId","file_id","scopes","endpoints.mcpAuthValues","endpoints.mcpServerConnectionStatus","endpoints.mcp","config.Constants","NEW_CONVO","PENDING_CONVO","endpoints.messages","endpoints.getPrompt","endpoints.getPromptGroup","cleanedFilter","endpoints.getPromptGroupsWithFilters","endpoints.getPromptsWithFilters","variables","limit","skip","endpoints.getResourcePermissions","endpoints.getRole","endpoints.getSharedLink","endpoints.getSharedLinks","endpoints.mcpReinitialize","version_index","endpoints.revertAgentVersion","endpoints.revokeUserKey","q","types","endpoints.searchPrincipals","body","updates","endpoints.feedback","originalKey","preferences","Error","endpoints.updatePromptGroup","endpoints.updateResourcePermissions","endpoints.updateSharedLink","endpoints.images","signal","requestConfig","endpoints.userKeyQuery","sha1","crypto","createHash","update","digest","createURL","domain","cleanDomain","replace","cleanPath","fullURL","schemaTypeHandlers","stringSchema","minLength","maxLength","numberSchema","minimum","maximum","integer","int","items","zodSchema","openAPISchemaToZod","describe","FunctionSignature","this","prototype","toObjectTool","additionalProperties","RequestConfig","basePath","method","operation","isConsequential","contentType","parameterLocations","RequestExecutor","authHeaders","setParams","operationHash","paramPattern","setAuth","metadata","auth","authorization_type","custom_auth_header","client_url","api_key","oauth_client_id","oauth_client_secret","oauth_token_expires_at","oauth_access_token","isApiKey","ServiceHttp","isOAuth","OAuth","Basic","basicToken","Buffer","from","Bearer","Custom","now","authToken","execute","_axios","create","bodyParams","loc","assign","getConfig","ActionRequest","defineProperty","createExecutor","executor","resolveRef","components","resolved","refPath_1","$ref","segment","sanitizeOperationId","baseDefinitions","labelCode","component","optionType","selectPlaceholder","searchPlaceholder","searchPlaceholderCode","selectPlaceholderCode","columnSpan","descriptionCode","placeholderCode","minTags","maxTags","enumMappings","createDefinition","base","overrides","librechat","showDefault","openAIParams","range","none","minimal","medium","concise","detailed","mistral","cohere","meta","googleConfig","googleCol1","googleCol2","openAICol1","openAICol2","anthropicConfig","anthropicCol1","anthropicCol2","bedrockAnthropic","bedrockMistral","bedrockCohere","bedrockGeneral","bedrockAnthropicCol1","bedrockAnthropicCol2","bedrockMistralCol1","bedrockMistralCol2","bedrockCohereCol1","bedrockCohereCol2","bedrockGeneralCol1","bedrockGeneralCol2","paramSettings","Anthropic","MistralAI","Cohere","Meta","AI21","Amazon","DeepSeek","openAIColumns","col1","col2","bedrockGeneralColumns","presetSettings","agentParamSettings","agentFiles","AGENT_VIEWER","VIEW","AGENT_EDITOR","EDIT","AGENT_OWNER","DELETE","updatedData","Math","floor","configureThinking","fileMap","messageMap","rootMessages","childrenCount","parentId","extendedMessage","children","depth","siblingIndex","file","parentMessage","azure","c","cs","cpp","h","md","php","py","rb","tex","js","sh","ts","tar","zip","yml","yaml","tsv","submission","isEdited","userMessage","isContinued","isTemporary","isRegenerate","conversation","editedContent","ephemeralAgent","endpointOption","s.tConvoUpdateSchema","server","s.EModelEndpoint","assistant","conversation_starters","separators","lastIndex","separators_1","lastIndexOf","settings","schemaFields","settings_1","setting","minText","maxText","Number","Boolean","Enum","ZodArray","customGoogle","customOpenAI","possibleValues_2","_mdl","_cgl","_ml","endpointKey","modelKey","requiredPermission","tool","has","groupName","groupConfig","groupMap","firstModelName","modelDetails","azureOptions","azureOpenAIApiVersion","azureOpenAIApiKey","azureOpenAIApiInstanceName","azureOpenAIApiDeploymentName","modelGroupMap","modelConfig","result_1","apiKeyValue","dynamic","mergedConfig","dynamicEndpoint","mergedEndpoint","openapiSpec","generateZodSchemas","functionSignatures","requestBuilders","zodSchemas","baseUrl","servers","paths","methods","paramLocations","operationObj","defaultOperationId","operationId","summary","isStrict","parametersSchema","resolvedParam","paramName","paramSchema","in","requestBody","resolvedSchema","apply","functionSignature","actionRequest","endpointsConfig","endpointKeys","defaultCustomIndex","indexOf","accumulatedConfig","currentEndpointKey","isCustom","convo","secondaryModels","contentParts","skipReasoning","contentParts_1","TEXT","textValue","THINK","think","currentDate","dayjs","format","dayNumber","day","combinedDate","currentDatetime","isoDatetime","current_date","current_user","iso_datetime","current_datetime","specString","parsedSpec","load","schemas","httpMethod","responses","statusCode","refName","pop","configs","isValid","modelNames","groupDeploymentName","groupVersion","modelDeploymentName","modelVersion","columnsSet","settings_2","columns","code","ZodIssueCode","add","next","settings_3","requiredSettingFields_1","settingTypes","Tags","Input","Textarea","Slider","includeInput","round","Checkbox","Switch","Dropdown","Combobox","conversationSchema","zodType","typeName","isNaN","option","ZodError","additionalModels","availableModels","visionModel"],"mappings":"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"}